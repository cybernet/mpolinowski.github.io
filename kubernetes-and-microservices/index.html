<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.cdf8dc8b943865717cae.css">@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300-60c866748ff15f5b347fdba64596b1b1.woff2) format("woff2"),url(/static/open-sans-latin-300-521d17bc9f3526c690e8ada6eee55bec.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic-06bbd3188b34820cd83a0e0b3d0a6f57.woff2) format("woff2"),url(/static/open-sans-latin-300italic-8a648ff38ded89ea15916e84529d62d3.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400-cffb686d7d2f4682df8342bd4d276e09.woff2) format("woff2"),url(/static/open-sans-latin-400-bf2d0783515b7d75c35bde69e01b3135.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic-987032ea5d57c93d8da215678eae3b86.woff2) format("woff2"),url(/static/open-sans-latin-400italic-db70d0b9cb27ada1a260a2b35e756b8b.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600-223a277bd88d8a90c8cdf24cda0ad5f5.woff2) format("woff2"),url(/static/open-sans-latin-600-1cd5320f8937d337b61d5117cf9d7b28.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic-4950a7205f0b5cefe41fc03ac346e236.woff2) format("woff2"),url(/static/open-sans-latin-600italic-318ea1ada4102c0704a0637228dcad03.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700-d08c09f2f169f4a6edbcf8b8d1636cb4.woff2) format("woff2"),url(/static/open-sans-latin-700-623e3205570002af47fc2b88f9335d19.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic-c02f5da6e82e1efe0b45841bfd49ce37.woff2) format("woff2"),url(/static/open-sans-latin-700italic-72e19cbb0e38c6773a7751156752cec4.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800-aaeffaf205b9bbb09920089a14dbe9e8.woff2) format("woff2"),url(/static/open-sans-latin-800-c6aa0c4a601fb6ac66f8253fa594dff5.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic-6b3973ffe02bb6a8be0f8453506ec032.woff2) format("woff2"),url(/static/open-sans-latin-800italic-79b58175343190550489efe46a7f1138.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;-webkit-transform:rotate(-2deg);transform:rotate(-2deg)}:not(pre)>code[class*=language-]:after,pre[class*=language-]:after{right:.75em;left:auto;-webkit-transform:rotate(2deg);transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}</style><meta name="generator" content="Gatsby 2.3.34"/><style type="text/css" id="jss-server-side">.jss11 {
  color: inherit;
  border: 0;
  margin: 0;
  cursor: pointer;
  display: inline-flex;
  outline: none;
  padding: 0;
  position: relative;
  align-items: center;
  user-select: none;
  border-radius: 0;
  vertical-align: middle;
  justify-content: center;
  -moz-appearance: none;
  text-decoration: none;
  background-color: transparent;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}
.jss11::-moz-focus-inner {
  border-style: none;
}
.jss11.jss12 {
  cursor: default;
  pointer-events: none;
}
.jss5 {
  flex: 0 0 auto;
  color: rgba(0, 0, 0, 0.54);
  padding: 12px;
  overflow: visible;
  font-size: 1.7142857142857142rem;
  text-align: center;
  transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  border-radius: 50%;
}
.jss5:hover {
  background-color: rgba(0, 0, 0, 0.08);
}
.jss5.jss9 {
  color: rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .jss5:hover {
    background-color: transparent;
  }
}
.jss5:hover.jss9 {
  background-color: transparent;
}
.jss6 {
  color: inherit;
}
.jss7 {
  color: #358ccb;
}
.jss7:hover {
  background-color: rgba(53, 140, 203, 0.08);
}
@media (hover: none) {
  .jss7:hover {
    background-color: transparent;
  }
}
.jss8 {
  color: #f50057;
}
.jss8:hover {
  background-color: rgba(245, 0, 87, 0.08);
}
@media (hover: none) {
  .jss8:hover {
    background-color: transparent;
  }
}
.jss10 {
  width: 100%;
  display: flex;
  align-items: inherit;
  justify-content: inherit;
}
.jss14 {
  fill: currentColor;
  width: 1em;
  height: 1em;
  display: inline-block;
  font-size: 24px;
  transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  user-select: none;
  flex-shrink: 0;
}
.jss15 {
  color: #358ccb;
}
.jss16 {
  color: #f50057;
}
.jss17 {
  color: rgba(0, 0, 0, 0.54);
}
.jss18 {
  color: #f44336;
}
.jss19 {
  color: rgba(0, 0, 0, 0.26);
}
.jss20 {
  font-size: inherit;
}
.jss21 {
  font-size: 20px;
}
.jss22 {
  font-size: 35px;
}
.jss25 {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1300;
  position: fixed;
}
.jss26 {
  visibility: hidden;
}
.jss24 {
  outline: none;
  position: absolute;
  min-width: 16px;
  max-width: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 16px;
  max-height: calc(100% - 32px);
}
.jss23 {
  max-height: calc(100% - 96px);
  -webkit-overflow-scrolling: touch;
}
.jss2 {
  width: 40px;
  height: 40px;
  display: flex;
  position: relative;
  overflow: hidden;
  font-size: 1.4285714285714284rem;
  align-items: center;
  flex-shrink: 0;
  font-family: Arial, sans-serif;
  user-select: none;
  border-radius: 50%;
  justify-content: center;
}
.jss3 {
  color: #fafafa;
  background-color: #bdbdbd;
}
.jss4 {
  width: 100%;
  height: 100%;
  text-align: center;
  object-fit: cover;
}
html {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
*, *::before, *::after {
  box-sizing: inherit;
}
body {
  margin: 0;
  background-color: #fafafa;
}
@media print {
  body {
    background-color: #fff;
  }
}
.jss27 {
  display: none;
}
.is-aside.closed .jss27, .moving-featured.closed .jss27 {
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
  height: 80px;
  display: flex;
  padding: 0 30px 0 40px;
  position: absolute;
  align-items: center;
  flex-direction: row;
  justify-content: space-between;
}
.jss27 h3 {
  color: #444444;
  margin: -.2em 0 0 0;
  font-size: 1.1em;
  font-weight: 600;
  text-transform: uppercase;
}
.jss27 h3 small {
  margin: 0 0 .1em;
  display: block;
  font-size: .6em;
  font-weight: 300;
  letter-spacing: .2em;
}
.jss28 {
  color: #444444;
}
.jss29 {
  color: #358ccb;
  margin: 0 calc(-.5rem + 20px) 1em calc(-.5rem + 20px);
  padding: 0 1em 1em;
  position: relative;
  font-size: 1.2em;
  line-height: 1;
  font-weight: 300;
  border-bottom: 1px solid #dedede;
}
.jss29 strong {
  display: block;
  font-weight: 600;
}
.jss29 small {
  margin: 0 0 .3em 0;
  display: block;
}
@media (min-width: 1024px) {
  .jss29 {
    margin: 0 0 1em 0;
    padding: 0 1em 1.5em;
  }
  .is-aside .jss29 {
    margin: 0 calc(-.5rem + 20px) 1em calc(-.5rem + 20px);
    padding: 0 0 1em .5em;
  }
}
.jss30 {
  top: 0;
  right: 0;
  position: absolute;
}
.jss31 {
  margin: 0 0 .7em 0;
  transition: height 1s;
}
@media (min-width: 600px) {
  .jss31 {
    margin: 0 0 1.5rem 0;
  }
}
@media (min-width: 1024px) {
  .moving-featured .jss31, .is-aside .jss31 {
    margin: 0 0 0 0;
  }
}
.jss32 {
  color: #444444;
  display: flex;
  padding: .7em 1em .7em 1em;
  align-items: center;
  align-content: center;
  flex-direction: row;
  justify-content: flex-start;
}
@media (hover: hover) {
  .jss32:hover {
    color: #358ccb;
  }
  .jss32:hover .pointer {
    border-radius: 65% 75%;
  }
}
.jss33 {
  width: 60px;
  height: 60px;
  margin: 0;
  position: relative;
  overflow: hidden;
  transition: all .5s;
  flex-shrink: 0;
  border-radius: 75% 65%;
}
.jss33 img {
  width: 100%;
  height: 100%;
}
@media (min-width: 600px) {
  .jss33 {
    width: 80px;
    height: 80px;
    margin-right: .5em;
  }
}
@media (min-width: 1024px) {
  .jss33 {
    width: 90px;
    height: 90px;
    transition: all .3s;
    margin-right: .8em;
    transition-timing-function: ease;
  }
  .moving-featured .jss33, .is-aside .jss33 {
    width: 30px;
    height: 30px;
  }
}
.jss34 {
  width: 100%;
  margin: 0 0 0 1.5em;
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}
.jss34 h1 {
  margin: 0;
  font-size: 1.3em;
  line-height: 1.15;
  font-weight: 600;
  letter-spacing: -0.03em;
}
.jss34 h2 {
  margin: .3em 0 0 0;
  display: block;
  font-size: 1.1em;
  line-height: 1.2;
}
@media (min-width: 1024px) {
  .moving-featured .jss34, .is-aside .jss34 {
    margin: 0 0 0 .5em;
  }
}
@media (min-width: 600px) {
  .jss34 h2 {
    font-size: 1.265em;
  }
}
@media (min-width: 1024px) {
  .jss34 h2 {
    font-size: 1.4300000000000002em;
  }
  .moving-featured .jss34 h2, .is-aside .jss34 h2 {
    display: none;
  }
}
@media (min-width: 600px) {
  .jss34 h1 {
    font-size: 1.4949999999999999em;
  }
}
@media (min-width: 1024px) {
  .jss34 h1 {
    font-size: 1.6900000000000002em;
  }
  .moving-featured .jss34 h1, .is-aside .jss34 h1 {
    font-size: 1em;
    font-weight: 400;
  }
}
.jss24 {
  top: 0;
  left: 0;
  width: 100%;
  bottom: 0;
  position: absolute;
}
.jss25 {
  padding: calc(60px + 1.3rem) 1.3rem calc(60px + 1.3rem) 1.3rem;
}
@media (min-width: 600px) {
  .jss25 {
    padding: calc(60px + 2rem) 2rem calc(60px + 2rem) 2rem;
  }
}
@media (min-width: 1024px) {
  .jss25 {
    left: 320px;
    padding: 2rem  calc(1rem + 17px) calc(2rem + 17px) 2rem;
  }
  .moving-featured .jss25, .is-aside .jss25 {
    padding: 1rem .5rem 1rem .5rem;
  }
}
.jss26 {
  margin: 0;
  padding: 0;
  list-style: none;
}
.is-aside.closed .jss26, .moving-featured.closed .jss26 {
  display: none;
}
.jss23 {
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  position: absolute;
  transform: translate3d(0, 0, 0);
  background: #ffffff;
  transition: left .9s;
  will-change: left, top, bottom, width;
  transition-timing-function: ease;
}
@media (max-width: 1023px) {
  .jss23.is-aside {
    left: -100%;
  }
  .jss23.is-featured {
    left: 0;
  }
}
@media (min-width: 1024px) {
  .jss23.is-featured {
    top: 0;
    left: 320px;
    width: calc(100vw - 320px - 60px);
    transition: left .9s;
  }
  .jss23.is-aside {
    top: auto;
    left: 0;
    width: 319px;
    z-index: 1;
    transition: none, bottom 0.5s;
  }
  .jss23.moving-aside {
    top: 0;
    left: calc(-100vw + 700px);
    width: calc(100vw - 320px - 60px);
    transition: left 0.9s;
  }
  .jss23.resizing-aside {
    top: auto;
    left: 0;
    width: 319px;
    transition: none;
  }
  .jss23.moving-featured {
    top: auto;
    left: 0;
    width: 319px;
    bottom: -100%;
    z-index: 1;
    transition: bottom .3s;
  }
  .jss23.resizing-featured {
    top: 0;
    left: calc(-100vw + 700px);
    width: calc(100vw - 320px - 60px);
    bottom: auto;
    transition: none;
  }
  .jss23.resizing-aside.closed {
    bottom: calc(-100% + 100px);
    height: calc(100% - 100px);
  }
  .jss23.resizing-aside.open {
    bottom: calc(-100% + 100px);
    height: calc(100% - 100px);
  }
  .jss23.is-aside.closed {
    bottom: calc(-100% + 100px + 80px);
    height: calc(100% - 100px);
  }
  .jss23.is-aside.open {
    bottom: 0;
    height: calc(100% - 100px);
  }
  .jss23.is-aside::after {
    top: 0;
    left: 20px;
    right: 20px;
    height: 0;
    content: "";
    position: absolute;
    border-top: 1px solid #dedede;
  }
}
.jss57 {
  color: #444444;
}
.jss35 {
  left: 0;
  width: 100%;
  bottom: 0;
  height: 60px;
  display: flex;
  padding: 0 20px;
  position: absolute;
  background: #ffffff;
  flex-direction: row;
  justify-content: space-between;
}
.jss35::before {
  top: 0;
  left: 20px;
  right: 20px;
  height: 0;
  content: "";
  position: absolute;
  border-top: 1px solid #dedede;
}
@media (min-width: 600px) {
  .jss35 {
    padding: 0 calc(20px * 1.5);
  }
}
@media (min-width: 1024px) {
  .jss35 {
    top: 0;
    left: auto;
    right: 0;
    width: 60px;
    height: 100%;
    padding: 20px 0;
    flex-direction: column;
  }
  .jss35::before {
    top: 20px;
    left: 0;
    right: auto;
    width: 0;
    bottom: 20px;
    height: auto;
    border-left: 1px solid #dedede;
  }
}
.jss36 {
  display: flex;
  align-items: center;
  flex-direction: row;
}
@media (min-width: 1024px) {
  .jss36 {
    flex-direction: column;
  }
}
.jss37 {
  color: #444444;
}
.jss66 {
  float: right;
  margin: 5px 10px 0 0;
}
.jss67 {
  color: #444444;
}
.jss62 {
  top: 0;
  left: 0;
  width: 100%;
  height: 60px;
  position: absolute;
  background: #ffffff;
}
.jss62::before {
  left: 20px;
  right: 20px;
  height: 0;
  bottom: 0;
  content: "";
  position: absolute;
  border-top: 1px solid #dedede;
}
@media (min-width: 1024px) {
  .jss62 {
    display: none;
  }
}
.jss63 {
  float: left;
  color: #444444;
  margin: 10px 0 0 15px;
}
.jss63 small {
  margin: 2px 0 0 0;
  display: block;
  font-size: .65em;
}
.jss64 {
  float: left;
  margin: 13px 0 0 30px;
  display: block;
}
.jss65 {
  width: 31px;
  border: 1px solid #ddd;
  height: 31px;
  border-radius: 65% 75%;
}
.jss1 {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 1px;
  position: absolute;
  overflow: hidden;
}
@media print {
  .jss1 {
    position: relative;
    overflow: visible;
  }
}
article, aside, footer, header, nav, section, figcaption, figure, main {
  display: block;
}
h1 {
  margin: 0.67em 0;
  font-size: 2em;
}
hr {
  height: 0;
  overflow: visible;
  box-sizing: content-box;
}
pre {
  font-size: 1em;
  font-family: monospace, monospace;
}
a:active, a:hover {
  outline-width: 0;
}
abbr[title] {
  border-bottom: none;
  text-decoration: underline;
}
b, strong {
  font-weight: bolder;
}
code, kbp, samp {
  font-size: 1em;
  font-family: monospace, monospace;
}
dfn {
  font-style: italic;
}
mark {
  color: #000;
  background-color: #ff0;
}
small {
  font-size: 80%;
}
sub, sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
audio, video {
  display: inline-block;
}
audio:not([controls]) {
  height: 0;
  display: none;
}
img {
  border-style: none;
  vertical-align: middle;
}
svg:not(:root) {
  overflow: hidden;
}
button, input, optgroup, select, textarea {
  margin: 0;
  font-size: 100%;
  font-family: sans-serif;
  line-height: 1.15;
}
button, input {
  overflow: visible;
}
button, select {
  text-transform: none;
}
button, [type=reset], [type=submit] {
  -webkit-appearance: button;
}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner {
  padding: 0;
  border-style: none;
}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring {
  outline: 1px dotted ButtonText;
}
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  color: inherit;
  display: table;
  padding: 0;
  max-width: 100%;
  box-sizing: border-box;
  white-space: normal;
}
progress {
  display: inline-block;
  vertical-align: baseline;
}
textarea {
  overflow: auto;
}
[type=checkbox], [type=radio] {
  padding: 0;
  box-sizing: border-box;
}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button {
  height: auto;
}
[type=search] {
  appearance: textfield;
  outline-offset: -2px;
}
[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration {
  appearance: none;
}
::-webkit-file-upload-button {
  font: inherit;
  appearance: button;
}
details, menu {
  display: block;
}
summary {
  display: list-item;
}
canvas {
  display: inline-block;
}
template {
  display: none;
}
[hidden] {
  display: none;
}
html {
  box-sizing: border-box;
  font-family: Open Sans;
  line-height: 1.15;
  text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: 100%;
}
html.wf-active {
  font-family: Open Sans;
}
*, *:before, *:after {
  box-sizing: inherit;
}
noscript {
  top: 50%;
  left: 50%;
  color: #fff;
  z-index: 1000;
  padding: 1.5rem 2.5rem;
  position: absolute;
  transform: translate(-50%, -50%);
  background: #d00;
  box-shadow: 0 0 10px 52px rgba(255,255,255,.8);
  font-weight: 400;
  border-radius: 2px;
}
body {
  margin: 0;
  background: #ffffff;
  -webkit-tap-highlight-color: rgba(0,0,0,.05);
}
main {
  position: relative;
}
h1, h2, h3 {
  font-weight: 300;
}
a {
  background: transparent;
  transition: 0.3s;
  font-weight: bold;
  text-decoration: none;
  text-decoration-skip: objects;
}
input:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 50px white inset;
}
:not(pre) > code[class*='language-'] {
  color: #666;
  padding: 1px 5px;
  background: #eee;
  text-shadow: none;
  border-radius: 2px;
}
.jss2 {
  top: 0;
  left: 0;
  width: 100%;
  bottom: 0;
  position: absolute;
  animation-name: main-entry;
  animation-duration: .5s;
}
@media (min-width: 1024px) {
  .jss2 {
    left: 320px;
    width: calc(100vw - 320px - 60px);
  }
}
@media print {
  .jss2 {
    position: relative;
  }
  .jss2 > div {
    overflow: visible!important;
  }
  .jss2 > div > div {
    position: relative!important;
  }
}
.jss3 {
  margin: 0 auto;
  padding: calc(1.5rem + undefinedpx) 1.8rem 1.5rem 1.5rem;
}
.jss3 strong, .jss3 b {
  font-weight: 600;
  letter-spacing: -.02em;
}
.jss3 a {
  display: inline-block;
  transition: 0.3s;
  font-weight: 600;
  text-shadow: 
         2px  2px #ffffff,
        -2px  2px #ffffff,
        -2px -2px #ffffff,
        -2px  2px #ffffff,
        -2px  0   #ffffff,
         2px  0   #ffffff
      ;
  letter-spacing: -.02em;
  text-decoration: none;
}
@media (min-width: 600px) {
  .jss3 {
    padding: calc(2.5rem + undefinedpx) 3.5rem 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss3 {
    padding: 3.5rem;
  }
}
.jss3 a:hover {
  color: hsl(205.20000000000005, 59.1%, 55.2%);
}
@keyframes main-entry {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}
.jss4 {
  margin: 0 auto;
  padding: calc(60px + 1.5rem) 1.5rem  1.5rem 1.5rem;
  max-width: 50em;
  background: #ffffff;
}
.jss4 strong, .jss4 b {
  letter-spacing: -.02em;
}
.jss4 a {
  transition: 0.3s;
  font-weight: bold;
  letter-spacing: -.02em;
  text-decoration: underline;
}
@media (min-width: 600px) {
  .jss4 {
    padding: calc(2.5rem + 60px) 3.5rem 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss4 {
    padding: 3.5rem;
  }
}
.jss4 a:hover {
  color: hsl(205.20000000000005, 59.1%, 55.2%);
}
.jss5 {
  margin: 0 0 3em;
}
.jss6 {
  color: #444444;
  margin: 0 0 0.4em;
  font-size: 1.6em;
  font-weight: 600;
  line-height: 1.1;
  letter-spacing: -0.04em;
}
@media (min-width: 600px) {
  .jss6 {
    font-size: 2.3em;
  }
}
@media (min-width: 1024px) {
  .jss6 {
    font-size: 2.5em;
    letter-spacing: -0.05em;
  }
}
.jss7 {
  color: #444444;
  font-size: 1.2em;
  line-height: 1.1;
  font-weight: 300;
}
@media (min-width: 600px) {
  .jss7 {
    font-size: 1.4em;
  }
}
@media (min-width: 1024px) {
  .jss7 {
    font-size: 1.5em;
  }
}
.jss8 {
  color: #444444;
  font-size: 0.9em;
  font-weight: 600;
}
.jss9 {
  color: #333333;
  line-height: 1.6;
}
.jss9 a {
  color: #358ccb;
}
.jss9 .gatsby-highlight {
  margin: 2em 0;
}
.jss9 .gatsby-resp-iframe-wrapper {
  margin: 2em 0;
}
.jss9 .gatsby-resp-image-link {
  margin: 2em -1.5rem;
  border: none;
}
.jss9 h2, .jss9 h3 {
  color: #444444;
  margin: 2em 0 1em;
  font-size: 1.5em;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.02em;
}
.jss9 h3 {
  font-size: 1.3em;
}
.jss9 p {
  margin: 0 0 1.5em 0;
  font-weight: 400;
}
.jss9 ul {
  padding: 0 0 0 1.3em;
  list-style: circle;
}
.jss9 li {
  margin: 0 0 .5em 0;
}
.jss9 blockquote {
  border: 5px solid #bbbbbb;
  margin: 2.5em 0;
  padding: 1em 1.1em 1em 1.3em;
  position: relative;
  font-style: italic;
}
@media (min-width: 600px) {
  .jss9 {
    font-size: 1.15em;
  }
}
@media (min-width: 1024px) {
  .jss9 {
    font-size: 1.1em;
  }
}
.jss9 blockquote p {
  margin: 0;
}
.jss9 blockquote::before, .jss9 blockquote::after {
  top: -5px;
  left: 50%;
  width: 94%;
  height: 5px;
  content: "";
  position: absolute;
  background: #ffffff;
  margin-left: -47%;
}
.jss9 blockquote::after {
  top: auto;
  bottom: -5px;
}
@media (min-width: 600px) {
  .jss9 ul {
    padding: 0 0 0 2em;
  }
}
@media (min-width: 600px) {
  .jss9 .gatsby-resp-image-link {
    margin: 2.5em -3.5rem;
  }
}
.jss1 {
  font-size: calc(1em * 1);
}
.jss15 {
  margin: 3em 0 0;
  padding: 3em 0 0;
  display: flex;
  border-top: 1px solid #ddd;
  align-items: center;
  flex-direction: column;
}
.jss15 a {
  color: #358ccb;
}
@media (min-width: 600px) {
  .jss15 {
    flex-direction: row;
    justify-content: center;
  }
}
.jss16 {
  width: 60px;
  margin: 0 1em 1em;
  height: 60px;
  border: 1px solid #ddd;
  flex-shrink: 0;
  border-radius: 75% 65%;
}
@media (min-width: 600px) {
  .jss16 {
    margin: 0 1em 0;
  }
}
.jss17 {
  display: flex;
  min-height: 50px;
  align-items: center;
  flex-dirction: column;
}
.jss12 {
  display: flex;
  padding: 1em 0 0;
  align-items: center;
  flex-direction: column;
  justify-content: center;
}
@media (min-width: 600px) {
  .jss12 {
    flex-direction: row;
  }
}
.jss13 {
  display: flex;
  flex-direction: row;
}
.jss13 .SocialMediaShareButton {
  margin: 0 .8em;
  cursor: pointer;
}
.jss14 {
  margin: 0 1em 1em;
  font-size: 1.2em;
}
@media (min-width: 600px) {
  .jss14 {
    margin: 0 1em;
  }
}
.jss11 {
  color: #444444;
  font-size: 1em;
  line-height: 1.4;
}
.jss11 p {
  margin: 0;
}
.jss22 {
  color: hsl(0, 0%, 40%);
  font-size: 0.8em;
  line-height: 1.4;
}
.jss22 a {
  color: #358ccb;
  font-weight: normal;
  text-shadow: none;
}
.jss22 a:hover {
  color: hsl(205.20000000000005, 59.1%, 60.2%);
}
.jss22 ul {
  margin: 0;
  padding: 0;
  list-style: none;
  text-align: center;
}
.jss22 li {
  margin: 0 .3em;
  display: inline-block;
}
.jss21 {
  color: #444444;
  padding: 1.5rem 1.5rem  calc(60px + 1.5rem) 1.5rem;
}
.jss21 p {
  margin: 0;
}
@media (min-width: 600px) {
  .jss21 {
    padding: 2rem 2.5rem  calc(60px + 2rem) 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss21 {
    padding: 2rem 3rem 2rem 3rem;
  }
}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Kubernetes and Microservices - Mike Polinowski</title><meta data-react-helmet="true" name="description" content="Mike Polinowski :: A Developer Blog and Personal Technology Playground"/><meta data-react-helmet="true" property="og:url" content="https://mpolinowski.github.io/kubernetes-and-microservices/"/><meta data-react-helmet="true" property="og:title" content="Kubernetes and Microservices - Mike Polinowski"/><meta data-react-helmet="true" property="og:description" content="Mike Polinowski :: A Developer Blog and Personal Technology Playground"/><meta data-react-helmet="true" property="og:image" content="/static/90ae2099634c4c40434aae05c0647f4d/eadbd/photo-34364880182_fe2d33582b_o-cover.jpg"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mpolinowski"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-d884f4f45b9442e496cb.js"/><link as="script" rel="preload" href="/app-a23c99e2af5bd6c17118.js"/><link as="script" rel="preload" href="/styles-59c6ce951e190b0b96b8.js"/><link as="script" rel="preload" href="/0-d359e2059c411e3ebb25.js"/><link as="script" rel="preload" href="/11-27b3b11fcd77a7b2f8de.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-5c83e13c4628baa8d54f.js"/><link as="fetch" rel="preload" href="/static/d/19/path---kubernetes-and-microservices-d-38-8c6-6n9xwvsjd6LRgXwzSVBN48LfE.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="jss1"><main class="jss2"><div style="position:relative;overflow:hidden;width:100%;height:100%"><div style="position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-overflow-scrolling:touch;margin-right:0;margin-bottom:0"><article class="jss4"><header class="jss5"><h1 class="jss6">Kubernetes and Microservices</h1><h3 class="jss7">Red Hat Enterprise and Centos Linux Server Administration</h3><div class="jss8">Thu, 17 Jan 2019</div></header><div class="jss9 jss1"><p><a
    class="gatsby-resp-image-link"
    href="/static/250f352f8408a5aa47641f30724d572e/ce6b8/photo-34364880182_fe2d33582b_o.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 46.50801862390067%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGHa1SMJyj/xAAaEAEAAgMBAAAAAAAAAAAAAAABAAIDIjM0/9oACAEBAAEFAqix1bBK+jN1n//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPwFUf//EABoQAAICAwAAAAAAAAAAAAAAAAABAhAhMUH/2gAIAQEABj8Cy0bRwRKv/8QAHRAAAgICAwEAAAAAAAAAAAAAAAERIUGxMVFxof/aAAgBAQABPyFBNrsoQvF4GWnKyuHZo6PqMLw//9oADAMBAAIAAwAAABCr3//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxBRMtv/xAAXEQADAQAAAAAAAAAAAAAAAAAAARFR/9oACAECAQE/EFoRH//EAB0QAQACAgIDAAAAAAAAAAAAAAEAIRFBkaEQYYH/2gAIAQEAAT8QGiGjLzs9RtEbCccuYIgAgU+zq+AHpT//2Q=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Sydney, Australia"
        title=""
        src="/static/250f352f8408a5aa47641f30724d572e/a296c/photo-34364880182_fe2d33582b_o.jpg"
        srcset="/static/250f352f8408a5aa47641f30724d572e/f544b/photo-34364880182_fe2d33582b_o.jpg 200w,
/static/250f352f8408a5aa47641f30724d572e/41689/photo-34364880182_fe2d33582b_o.jpg 400w,
/static/250f352f8408a5aa47641f30724d572e/a296c/photo-34364880182_fe2d33582b_o.jpg 800w,
/static/250f352f8408a5aa47641f30724d572e/c35de/photo-34364880182_fe2d33582b_o.jpg 1200w,
/static/250f352f8408a5aa47641f30724d572e/8179c/photo-34364880182_fe2d33582b_o.jpg 1600w,
/static/250f352f8408a5aa47641f30724d572e/ce6b8/photo-34364880182_fe2d33582b_o.jpg 1933w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<!-- TOC -->
<ul>
<li>
<p><a href="#domain-driven-design-and-boundedcontext">Domain Driven Design and boundedContext</a></p>
<ul>
<li><a href="#deploying-the-queue">Deploying the Queue</a></li>
<li><a href="#deploying-the-position-simulator">Deploying the Position Simulator</a></li>
<li><a href="#how-to-debug-a-failed-deployment">How to Debug a failed Deployment</a></li>
<li><a href="#deploying-the-position-tracker">Deploying the Position Tracker</a></li>
<li><a href="#deploying-the-api-gateway">Deploying the API Gateway</a></li>
<li><a href="#deploying-the-angular-frontend">Deploying the Angular Frontend</a></li>
</ul>
</li>
<li>
<p><a href="#persistence-in-a-kubernetes-cluster">Persistence in a Kubernetes Cluster</a></p>
<ul>
<li><a href="#mongodb-pod">MongoDB Pod</a></li>
<li><a href="#mongodb-service">MongoDB Service</a></li>
<li><a href="#volume-mounts">Volume Mounts</a></li>
<li><a href="#using-persistentvolumeclaims">Using PersistentVolumeClaims</a></li>
</ul>
</li>
<li><a href="#cloud-deployment">Cloud Deployment</a></li>
</ul>
<!-- /TOC -->
<h2 id="domain-driven-design-and-boundedcontext"><a href="#domain-driven-design-and-boundedcontext" aria-label="domain driven design and boundedcontext permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Domain Driven Design and boundedContext</h2>
<p>A Microservice architecture is an implementation of the <a href="https://martinfowler.com/tags/domain%20driven%20design.html">Domain Drive Design</a> principle and <a href="https://martinfowler.com/bliki/BoundedContext.html">bounded Context</a> is a central pattern in Domain-Driven Design. It is the focus of DDD’s strategic design section which is all about dealing with large models and teams. DDD deals with large models by dividing them into different Bounded Contexts and being explicit about their interrelationships.</p>
<p>The idea behind the principle is to break architectures into small, <strong>cohesive components</strong> that only fullfil one job (<strong>single responsibility principle</strong>) for one other component (<strong>loosely coupled</strong>). E.g. instead of having one big Integration Database that is build with a single schema and serves all parts of your monolithic application we will add a small, exclusive database to every component that needs data storage.</p>
<p>We are going to continue to build the web application we <a href="https://mpolinowski.github.io/creating-a-kubernetes-cluster/">started to build earlier</a> - with an ActiveMQ Message broker in the backend and an Angular web frontend that will show us the position of our car fleet on a map. The architecture will consist of 5 pods:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Position Simulator -&gt; ActiveMQ -&gt; Position Tracker &lt;- API Gateway &lt;- NGINX Reverse Proxy &lt;-&gt; Web Browser</code></pre></div>
<p>The necessary Docker images can be found on <a href="https://hub.docker.com/u/richardchesterwood">DockerHUB</a> - their corresponding source code can be found on <a href="https://github.com/DickChesterwood/k8s-fleetman">Github</a>.</p>
<ul>
<li>The <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-position-simulator">Position Simulator</a> will simulate the GPS signal from our cars, reporting in their position every 10s.</li>
<li>The Position Simulator is then send to our <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-queue">ActiveMQ</a> service we already deployed earlier.</li>
<li>This Queue server / Message Broker then forwards the information it received to the <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-position-tracker">Position Tracker</a> that is storing the information as well as doing some basic calculations on it, like estimating the average speed the car is traveling with.</li>
<li>To prevent the frontend code to directly contact this backend part of our application, we will add an <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-api-gateway">API Gateway</a> that will serve as an interface between front- and backend. This way changes in the backend will never directly affect the frontend, or vice versa - see <a href="https://microservices.io/patterns/apigateway.html">API Gateway Pattern</a>.</li>
<li>The final container will run our <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-webapp-angular">Web Application Frontend</a> with the help of an NGINX reverse proxy.</li>
</ul>
<h3 id="deploying-the-queue"><a href="#deploying-the-queue" aria-label="deploying the queue permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying the Queue</h3>
<p>We want to start with a fresh cluster - if you already <a href="https://mpolinowski.github.io/creating-a-kubernetes-cluster/">followed the earlier steps</a>, just enter the directory that contains all your configuration files (services.yaml, pods.yaml, networking-tests.yaml) and force delete everything that was build from them on your cluster:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl delete -f <span class="token keyword">.</span>
<span class="token function">rm</span> networking-tests.yaml
<span class="token function">mv</span> pods.yaml workloads.yaml
<span class="token function">nano</span> workloads.yaml</code></pre></div>
<p>We are also deleting an unnecessary file from the previous step and renaming another - just if you are following along. We can now add the queue server to the <code class="language-text">workloads.yaml</code> file:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the ReplicaSet instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token comment"># the ReplicaSet manages all Pods</span>
      <span class="token comment"># where the label = app: queue</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
  <span class="token comment"># only 1 Pod should exist atm - if it</span>
  <span class="token comment"># crashes, a new pod will be spawned.</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>queue<span class="token punctuation">:</span>release1</code></pre></div>
<p>Secondly, we need to apply a service that exposes our Queue container, which is done in the <code class="language-text">services.yaml</code> file (if you still have the webapp service from the previous step - just leave it in for now):</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> admin<span class="token punctuation">-</span>console
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8161</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8161</span>
      <span class="token comment"># The nodePort is available from outside of the</span>
      <span class="token comment"># cluster when is set to NodePort. It's value has</span>
      <span class="token comment"># to be > 30000</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30010</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> endpoint
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">61616</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">61616</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token comment"># Define which pods are going to</span>
    <span class="token comment"># be represented by this service</span>
    <span class="token comment"># The service makes an network</span>
    <span class="token comment"># endpoint for our app</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort</code></pre></div>
<p>The Queue service is going to expose the port <strong>8161</strong> for the administration console (this should be removed once the app goes into production!) and makes it accessible over the port <strong>30010</strong> from outside of the Kubernetes cluster. Additionally we need to expose the port <strong>61616</strong> that ActiveMQ is using to broker messages.</p>
<p>You can now start both the pod as well as the service with:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f workloads.yaml
kubectl apply -f services.yaml
kubectl get all</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/bd63052b39fdc44323e580ffe4dd7b91/08784/kubernetes_microservices_01.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 26.724137931034488%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA3klEQVQY002O3U6EMBgFCxEoWyrGZWNUZKEt/YdSwPj+b+ZXE43JXJybORlE7UFMJHoDsAyNiY/uoP7s9BZVWNUmmUP9jD7kLwoNEg0KvTFEzV7LgOcVi6USHi7y0cBjrULGXWX3jNknHVsZLsxemAMqZh+4R68TInZv/EmXz9rEUobn7QuOWn9CAlEBKvK77pdzcMeVuSuz3WQb8FVI8ruOL8LfmOsmc2MWT6YQvuCuFEvJPZZrNppU2//PVuhuUnZrItWBzCtVoZEQ78vUnwC54B5GPupsUH/8yBrkb2vwIsYTFdT6AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/bd63052b39fdc44323e580ffe4dd7b91/8ff1e/kubernetes_microservices_01.png"
        srcset="/static/bd63052b39fdc44323e580ffe4dd7b91/9ec3c/kubernetes_microservices_01.png 200w,
/static/bd63052b39fdc44323e580ffe4dd7b91/c7805/kubernetes_microservices_01.png 400w,
/static/bd63052b39fdc44323e580ffe4dd7b91/8ff1e/kubernetes_microservices_01.png 800w,
/static/bd63052b39fdc44323e580ffe4dd7b91/08784/kubernetes_microservices_01.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>The Admin panel should now be accessible over the IP address of your Kubernetes master server with the port <strong>30010</strong>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/a5feb4ba5ebf09f41f97271ad02b3231/08784/kubernetes_microservices_02.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 42.98029556650247%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABuklEQVQoz32Q3U/aUBTA79+4xAWdsqmp4Pa47VUf/HhwiSwKQ5ZpXK0KCFaJiZOthhcYjFpKAYeILmyBugJFitJbSnt3HcnUbNkvv5ycnI+Hc8DomH2VXGO5VDQWT3IpPi2khayQyfHpDM7vKQi4jcX5q3nHCGEDelc3kdnVu5iOppkIqVBttVqdv9CgZhomBiFkGIau6+BmB5nhxc2dCbf/hSM0uURYhx9Y+sQLEQ/1RntRFqtZP1MqFrgMXyieQg2CcrZ4HE9RMy7ns0nP89mVl3OeacfC1Fw+wUun3ytfz8X8Nxx/FkpnR7lEiEkdRj8fRLhIvCk3QIzcY31hNvDpiD5kg0wyyPB05Hgvym0xSW+Y9X384xfvQXxjP0Ht89uR3IdYrXwBpMu6pMg1RRZlqdqU60qj1mygf9E1DbFSOS+eSVIVH6KqKui0Iby8hs02VNr4H+i/XCtX9Ub95guGASEEtIvcda7t/Dbk2dh9Q/lfr/gcy975dwHne/rtOu2hegbdZMBN4sr2ErXlWi2XfoDRx8NPbXY7YRsnxuwEMU7YngxarQOD2KH+R0OWO/bfOvDQcpLP/wIrd6PliyArVAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/a5feb4ba5ebf09f41f97271ad02b3231/8ff1e/kubernetes_microservices_02.png"
        srcset="/static/a5feb4ba5ebf09f41f97271ad02b3231/9ec3c/kubernetes_microservices_02.png 200w,
/static/a5feb4ba5ebf09f41f97271ad02b3231/c7805/kubernetes_microservices_02.png 400w,
/static/a5feb4ba5ebf09f41f97271ad02b3231/8ff1e/kubernetes_microservices_02.png 800w,
/static/a5feb4ba5ebf09f41f97271ad02b3231/08784/kubernetes_microservices_02.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h3 id="deploying-the-position-simulator"><a href="#deploying-the-position-simulator" aria-label="deploying the position simulator permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying the Position Simulator</h3>
<p>We can now add the Position Simulator to the <code class="language-text">workloads.yaml</code> file - directly under the configuration of our queue server, divided by <code class="language-text">---</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the ReplicaSet instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
  <span class="token comment"># only 1 Pod should exist atm - if it</span>
  <span class="token comment"># crashes, a new pod will be spawned.</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>position<span class="token punctuation">-</span>simulator<span class="token punctuation">:</span>release1
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice</code></pre></div>
<p>The configuration for deployment is similar to the ActiveMQ config. We only need to add a <strong>Environment Variable</strong> that sets the service to <em>Production Settings</em> - <code class="language-text">SPRING_PROFILES_ACTIVE: production-microservice</code> (the service can be started with different profiles, depending if you are in a development or production environment).</p>
<p>We can apply the new workloads configuration, check for the name of the new container (it will be called <code class="language-text">position-simulator</code> + an deployment ID + an replicationSet ID) and check if it is build correctly:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f workloads.yaml
kubectl get all
kubectl describe pod position-simulator-68bfc8d6fb-8vxkt</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/c1c1a341c54e5cb17428e7b35dd5a3a0/4f7fc/kubernetes_microservices_03.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 19.509202453987733%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAuklEQVQI1y1P2Q6CMBAsHuUQKMQ3FUGOHrZdKpf+/5e5iMlmMpnZncwSvwPa2kOtD/WTNmb/ULtKkbsghUAr6MArJSqIG9lV8jfKuzYkszPTEzNzJFyix5BDyPsjplSKdjaQjmIEh0j0qAer+x+/5CSHNzNTooegs7FaEYuEwqEdtyYXfcYhwW2xXkbSYQoiBlE8zmDJYUn1eJLu7D7pc4jVi6Foxka9bma6w1K01is4/rKV98qVkEv9BS1ZHKzzZr5qAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/c1c1a341c54e5cb17428e7b35dd5a3a0/8ff1e/kubernetes_microservices_03.png"
        srcset="/static/c1c1a341c54e5cb17428e7b35dd5a3a0/9ec3c/kubernetes_microservices_03.png 200w,
/static/c1c1a341c54e5cb17428e7b35dd5a3a0/c7805/kubernetes_microservices_03.png 400w,
/static/c1c1a341c54e5cb17428e7b35dd5a3a0/8ff1e/kubernetes_microservices_03.png 800w,
/static/c1c1a341c54e5cb17428e7b35dd5a3a0/4f7fc/kubernetes_microservices_03.png 815w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>This service does not need to be accessed from outside of the Kubernetes cluster - so <strong>we do not need to create a service</strong> for it.</p>
<p>We can test the deployment by accessing the IP Address followed by the port <strong>30010</strong>, click on <em>Managing ActiveMQ Broker</em>, sign in with <strong>admin, admin</strong> and click on <strong>Queues</strong>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/e73b03c00cd38d492a1a69fd3f90a7c9/dae74/kubernetes_microservices_07.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 44.27860696517413%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACR0lEQVQoz5WS3UvTYRiG91eUaGm66dyHmiWiK2MzFTNL+7DMOu+gSFALTMqDohOpk3JBUc0CoW+ihMTNzZg6nQYhWpHklLY13abbmrg1d/X6K6LTXri476OL53l4ZcFgEH8ggN/vJxz9gT+8QsPxJrTaArR529GIVOZqyFVpUanzJDa6RpvPiHOctXiM5eVlQqEQAeGRJZNJfsbjrJNkzjHFiOk1jQ1N6HaVoTfspWyPgaLiEvLyC/+RihTdbHpB5PsSrnkXrjkXkXAYWWJ9XZIthgI8v2mi62Qr1ZU1aMR0GxMqsnMl5AolWXKl6Coys7LJzlHxxGji69Q0Ex/eMzbhJLAcROabXcDW/ZSh28/ou97D4ytG9lfUULCjGLW2UAjUQiSEIjMyMklLTWNbVo4Qanl4rZvR+28YvveK8d63fHw3iWwtkcDj9uJdcOP3LuKZ/0Z5eSWbNqeRniFny9ZMtqTLSUlJpbj8GIdOd6HILUChVNP/sg/flwUx5WdCS0EiIbFy3OPBOzPNvMeN2+thTtzj0uVOzpw9R2vbBVpa22hpO09zczNXu4wYH/XT3tFJ+8UOJh1OPs3M4PP52DhddHVVCO8+INnTy2osQTQYIroS4X9ePBb72xNiW5lzbIKju/dxqqKeJsNBThgO0KivlThcWkXtTv1vivTUlVZSr6uirqRCol5XyZGyaomqfB13btxCtvF37CPDjDpGGZbSIXXHmAO73c6gdZAB84CExWLBZrNhFdj+YLVZsQ0NYbaYmZ2d5RfkYfAv1K0DTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/e73b03c00cd38d492a1a69fd3f90a7c9/8ff1e/kubernetes_microservices_07.png"
        srcset="/static/e73b03c00cd38d492a1a69fd3f90a7c9/9ec3c/kubernetes_microservices_07.png 200w,
/static/e73b03c00cd38d492a1a69fd3f90a7c9/c7805/kubernetes_microservices_07.png 400w,
/static/e73b03c00cd38d492a1a69fd3f90a7c9/8ff1e/kubernetes_microservices_07.png 800w,
/static/e73b03c00cd38d492a1a69fd3f90a7c9/dae74/kubernetes_microservices_07.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<p><a
    class="gatsby-resp-image-link"
    href="/static/44b9478322c304d795aaa838e9f32b07/08784/kubernetes_microservices_08.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 41.50246305418719%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABvklEQVQY0z1RTW/TQBD1j+LCgSM3zki9wYmfwJ0DEgcOlQoHEKCqPaBK0KJEiDZyoUi0cdKksRM7CYlje73e2I7r76/1x5oNSIyenp5mNPNGM0xVVjjPSUNcYFoLgKRVbLrX3d5Z58wyLVKTAhdlUZRlmfpRYjhpFAdBkCZ56CGmJqSqqrDGrVeHL+4/2dt5evD42aMHD+/cu8txXNM0tEoIoUKbyr39ljjmOxfnvCiGAWI8ZEtsnz9hW7sfDp6//vjyzafd9539z1/fHfW+nK+uhN8/h+K3y9Hx98Exy52w3NHpqH0hnHbRUmISLwALXX97aLdZx3AcGWrCfDWcBpq1WejmTDXnKhIVNJG1m9n0R395ya/6EygqG0NmqroyzLUXBnVDqN4yqSuyFWSLZrvx36ACAeg6LqGXaJrQRwzN6kAXhPGkxw/YrjSWRr8G4z5Pme/e8FfDyYifSVOeGzobx4Zrz75N/bCuG/8WUue6sOxMASnQMTSwgTBEmQ5zoBdrM4szB7o4xVmUYIwtYLimk8cptfbdf80qwPNlJiuVDikIHaGoparVEFVJEF23yzjCcU6/ZSzV9UL73/wHiBCiUM5Nda8AAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/44b9478322c304d795aaa838e9f32b07/8ff1e/kubernetes_microservices_08.png"
        srcset="/static/44b9478322c304d795aaa838e9f32b07/9ec3c/kubernetes_microservices_08.png 200w,
/static/44b9478322c304d795aaa838e9f32b07/c7805/kubernetes_microservices_08.png 400w,
/static/44b9478322c304d795aaa838e9f32b07/8ff1e/kubernetes_microservices_08.png 800w,
/static/44b9478322c304d795aaa838e9f32b07/08784/kubernetes_microservices_08.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>You should see a rising number of pending messages, telling you that our <strong>Position Simulator</strong> is successfully sending GPS coordinates to the message broker.</p>
<h3 id="how-to-debug-a-failed-deployment"><a href="#how-to-debug-a-failed-deployment" aria-label="how to debug a failed deployment permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to Debug a failed Deployment</h3>
<p>As we have seen above the deployment work and the Position Simulator is up and running - but how would we debug a container that cannot be started for some reason? We can create this circumstance by adding a typo in the environment variable inside the config file we created above, e.g. <code class="language-text">SPRING_PROFILES_ACTIVE: production-microservice-typo</code>:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f workloads.yaml
kubectl get all
kubectl describe pod position-simulator-77dcb74d75-dt27n</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/b5b9c0a953e353d429b9ce39bc4f595b/ac127/kubernetes_microservices_04.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 17.892156862745097%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAt0lEQVQI1yWM7Q6CMAxFp6AT+RBM/KcYGGMb7dgcIO//ZhZMTpqbtucyLse4gZOAqBmixrCnZK+eQtwCq/XhrVmtCC7tuUMKtNlRjMjMJzOhGr/ZEK7Kk0NPqQmp9tTISXhvQtI7up4FXpRL+jGhqRy7uzUfpr9c2oXCxh5of8Olciv9xdJy7S/mE3f20EIk8CiQleOSwybzzpY4FwRMBcyV2+qopfTrA6YwBAch4Gy11wJ1hyjtDzlkHm8KJu+lAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/b5b9c0a953e353d429b9ce39bc4f595b/8ff1e/kubernetes_microservices_04.png"
        srcset="/static/b5b9c0a953e353d429b9ce39bc4f595b/9ec3c/kubernetes_microservices_04.png 200w,
/static/b5b9c0a953e353d429b9ce39bc4f595b/c7805/kubernetes_microservices_04.png 400w,
/static/b5b9c0a953e353d429b9ce39bc4f595b/8ff1e/kubernetes_microservices_04.png 800w,
/static/b5b9c0a953e353d429b9ce39bc4f595b/ac127/kubernetes_microservices_04.png 816w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>We can now see that the deployment is failing and Kubernetes is trying to restart the container in a loop (<strong>CrashLoopBackOff</strong>). To check what is going wrong, we can call the Kubernetes logs for the failing container:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl logs position-simulator-77dcb74d75-dt27n</code></pre></div>
<p>And the developer of the application should be able to spot the typo inside the selected profile for you:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/a677b2fa4cd3cb6a416fdf76c1b0e5f8/4f7fc/kubernetes_microservices_05.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 47.60736196319018%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZklEQVQoz31S2W6DMBB0GlpuSBpVqnqRQGyMTw5D/v/POoao6lOk1cp4Pbszs5CI6per8tEg64iakBp8bhk34VX/5bWqn86cVJy8V+S5UU/nLqhlUAsc9hexv3Tkmz2Kn/YOzrohRfA+bvukHSJm0H6H8gPklj1YjGk3epJUx7xPeB+1dgcuDbhI8Ar/MccN2K0CTfDVkDc9n8R07IaytQWzOdVJo9JGFa0FhZgZtAM1n/kAF6Aubm3Ch7BiZDSLlc6IUYvRyqljmlMtmOnkBC7AZN2Yi7GQU+p5DRiLjrl0YUXJwSwHcyuVK/V8NAveAQBLUwEjBojySDGVas74kMtxMyjzYEZO9na0SyndUc+vOKOXng/a+XZqLpRbx6K18yXl7o/tLblwAj6o5QIZ7d2mEMQgbNWGFfTbNBCJmUVgnUGj9p81QQ2WYkP+x7gqFFYz1eqwl7e5DSEx9VuMmPUPqN5/1L+8Ykish4WUAwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/a677b2fa4cd3cb6a416fdf76c1b0e5f8/8ff1e/kubernetes_microservices_05.png"
        srcset="/static/a677b2fa4cd3cb6a416fdf76c1b0e5f8/9ec3c/kubernetes_microservices_05.png 200w,
/static/a677b2fa4cd3cb6a416fdf76c1b0e5f8/c7805/kubernetes_microservices_05.png 400w,
/static/a677b2fa4cd3cb6a416fdf76c1b0e5f8/8ff1e/kubernetes_microservices_05.png 800w,
/static/a677b2fa4cd3cb6a416fdf76c1b0e5f8/4f7fc/kubernetes_microservices_05.png 815w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>Fixing the <em>typo</em> and re-applying the configuration should show you that the “loop-crashing” container is now being discarded and replaced by a working version:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f workloads.yaml
kubectl get all</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/c327a28b3451e54d92e6f16ba0d636bb/dae74/kubernetes_microservices_06.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 9.577114427860696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAb0lEQVQI10XLuw6CMBQA0CYYINYCjiaixr57bwul1IEZ//+XYILkrIcwl6iJ1EZqxhbnHYPUYFrc9Pd5tVFyqGUoBVbCFx9LXvp0D7nF3PncwHw1Y61CybEQ+JReDb+HHnqBjAN565ubLl8gvTryBt6DD24DYegTAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/c327a28b3451e54d92e6f16ba0d636bb/8ff1e/kubernetes_microservices_06.png"
        srcset="/static/c327a28b3451e54d92e6f16ba0d636bb/9ec3c/kubernetes_microservices_06.png 200w,
/static/c327a28b3451e54d92e6f16ba0d636bb/c7805/kubernetes_microservices_06.png 400w,
/static/c327a28b3451e54d92e6f16ba0d636bb/8ff1e/kubernetes_microservices_06.png 800w,
/static/c327a28b3451e54d92e6f16ba0d636bb/dae74/kubernetes_microservices_06.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h3 id="deploying-the-position-tracker"><a href="#deploying-the-position-tracker" aria-label="deploying the position tracker permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying the Position Tracker</h3>
<p>Now we need to start up the position tracker who’s job it is take out the message that are send by our position simulator and are currently piling up in our ActiveMQ Server. The position tracked does some calculation on those messages and exposes his results through an REST interface to the API gateway.</p>
<p>We can now add the <strong>Position Tracker</strong> to the <code class="language-text">workloads.yaml</code> file - directly under the configuration of our position simulator, divided by <code class="language-text">---</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the ReplicaSet instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
  <span class="token comment"># only 1 Pod should exist atm - if it</span>
  <span class="token comment"># crashes, a new pod will be spawned.</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>position<span class="token punctuation">-</span>tracker<span class="token punctuation">:</span>release1
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice</code></pre></div>
<p>We can now deploy the position tracker and then take a look at our message queue. We should be able to see that the tracker is working and messages are getting de-queued:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f workloads.yaml</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/16f808f5508fdd96fc8d8cd6ddfc4694/08784/kubernetes_microservices_09.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 42.11822660098522%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABsElEQVQY02VRy27TQBT119FdBQKJbT8BIbasEQvU7lqpEgsEldpNeSgtaZOWlkDckvqRsetHHoQkdp06iePxjMeeGccMlWDD0TnS1b260r3nSBnJGGcZIh7o+tf9wBrcdH4dVav1eh0jzMWMMkaFGLpdYG+WIgRjiBDKskxaliVhecd1Nx4+Xb//ZHvt+cbjZ/dWVlYfPUAYlWW5vIMonIu2/OYjMPSj05oC9JxSyf7Ssk4uG3uHOy82d15u7b7a/rT5rv72w+HrPbMmdxuqc3YFKg1t/7S1fyK/r8m7Va1yrh18nY4DyTN7PxVrBLqhO7p1hxN7YDfVcbsb9X3f6PmmYH+suUPV6TTb7rnSaai9C2OoOfF0LkVx5E1u+LIo/2J5x/9BC+YPRrNwVvBCPJLnuZRACBTdsW31uGlqwLhUwXcFNFVDVvWzH+ZV2wKmZVyDlj4Nw9ALZkGYxqjgnBAiUUoxRAlMFuEcJ8IjhGGSEAJtN6p8XsR4HkSiiRIhFE2mcL7IMCmK4s+ySIITxkhOGf3nLeWcpylHOAvHEHyjIo8kFQh6IxFkhlJxt1j+DRNco2mlW+0EAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/16f808f5508fdd96fc8d8cd6ddfc4694/8ff1e/kubernetes_microservices_09.png"
        srcset="/static/16f808f5508fdd96fc8d8cd6ddfc4694/9ec3c/kubernetes_microservices_09.png 200w,
/static/16f808f5508fdd96fc8d8cd6ddfc4694/c7805/kubernetes_microservices_09.png 400w,
/static/16f808f5508fdd96fc8d8cd6ddfc4694/8ff1e/kubernetes_microservices_09.png 800w,
/static/16f808f5508fdd96fc8d8cd6ddfc4694/08784/kubernetes_microservices_09.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>We can now add a service for the position tracker to expose the REST interface directly on port <strong>8080</strong> (<em>optional - only for testing</em>). For this we need to add the following lines to our <code class="language-text">services.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>position<span class="token punctuation">-</span>tracker
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rest<span class="token punctuation">-</span>interface
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token comment"># The nodePort is available from outside of the</span>
      <span class="token comment"># cluster when is set to NodePort. It's value has</span>
      <span class="token comment"># to be > 30000</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30020</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort</code></pre></div>
<p>Now apply the changes <code class="language-text">kubectl apply -f services.yaml</code> and open the REST interface on your Master server IP address with the port <strong>30020</strong>:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">http://195.201.148.210:30020/vehicles/City%20Truck</code></pre></div>
<p>You should be able to see the current location and speed of the vehicle with the designation <strong>City Truck</strong>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/1d9e3bff8329df2211e9be7c9e711b96/08784/kubernetes_microservices_10.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.305418719211822%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAuUlEQVQI132L2w6CMBiDeTjwHUQcLuIpeIzxbQVR0f2bOhcHGSgwd2GMV35pmqZpreEkNJpM5+Nw3usHttOyHaeDev3hGAcjPBh5Pm57yPV8t+u7HuogjHCwXG9mi5VFAQ7J/pyezifCKBV3wTknlAL5YEoKRsAYAwAhRJ7nUkqllFVIBTE5xPs0OQIxE8qvvMhU9aqautFaN43xb9D1D9ZTlZcdM88o3m6jKIkTllJ5e5RZUVe1/ssbweXApop3QaMAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/1d9e3bff8329df2211e9be7c9e711b96/8ff1e/kubernetes_microservices_10.png"
        srcset="/static/1d9e3bff8329df2211e9be7c9e711b96/9ec3c/kubernetes_microservices_10.png 200w,
/static/1d9e3bff8329df2211e9be7c9e711b96/c7805/kubernetes_microservices_10.png 400w,
/static/1d9e3bff8329df2211e9be7c9e711b96/8ff1e/kubernetes_microservices_10.png 800w,
/static/1d9e3bff8329df2211e9be7c9e711b96/08784/kubernetes_microservices_10.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>Since it would be dangerous to expose the REST API directly to the internet, we will remove the NodePort and have the API be available only from inside our cluster on port 8080:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>position<span class="token punctuation">-</span>tracker
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rest<span class="token punctuation">-</span>interface
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP</code></pre></div>
<h3 id="deploying-the-api-gateway"><a href="#deploying-the-api-gateway" aria-label="deploying the api gateway permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying the API Gateway</h3>
<p>We can now add the <strong>API Gateway</strong> to the <code class="language-text">workloads.yaml</code> file - directly under the configuration of our position tracker, divided by <code class="language-text">---</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the ReplicaSet instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
  <span class="token comment"># only 1 Pod should exist atm - if it</span>
  <span class="token comment"># crashes, a new pod will be spawned.</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>api<span class="token punctuation">-</span>gateway<span class="token punctuation">:</span>release1
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice</code></pre></div>
<p>We can now deploy the gateway with <code class="language-text">kubectl apply -f workloads.yaml</code>. And then expose the port <strong>8080</strong> to the Kubernetes cluster in <code class="language-text">services.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>api<span class="token punctuation">-</span>gateway
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rest<span class="token punctuation">-</span>interface
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP</code></pre></div>
<h3 id="deploying-the-angular-frontend"><a href="#deploying-the-angular-frontend" aria-label="deploying the angular frontend permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying the Angular Frontend</h3>
<p>We can now add the <strong>Web APP</strong> to the <code class="language-text">workloads.yaml</code> file - directly under the configuration of our position tracker, divided by <code class="language-text">---</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the ReplicaSet instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
  <span class="token comment"># only 1 Pod should exist atm - if it</span>
  <span class="token comment"># crashes, a new pod will be spawned.</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release1
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice</code></pre></div>
<p>We can now deploy the frontend with <code class="language-text">kubectl apply -f workloads.yaml</code>. And then expose the port <strong>80</strong> to the Kubernetes cluster in <code class="language-text">services.yaml</code>, as well as adding the public port (NodePort) <strong>30080</strong>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token comment"># Accept traffic sent to port 80</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token comment"># The nodePort is available from outside of the</span>
      <span class="token comment"># cluster when is set to NodePort. It's value has</span>
      <span class="token comment"># to be > 30000</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token comment"># Define which pods are going to</span>
    <span class="token comment"># be represented by this service</span>
    <span class="token comment"># The service makes an network</span>
    <span class="token comment"># endpoint for our app</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort</code></pre></div>
<p>Your complete Microservice deployment should now look something like this:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/ff553fffe62b42391529e3e63c32176e/ac127/kubernetes_microservices_11.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 60.90686274509803%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABmklEQVQoz22S3Y6CMBCFqwiIf+iKNy7KItCWUgotbMTNvv9z7SlcmDUmEzIpc2a+OS05VP2KtwFtECvWrku9LFTA20gYI4xkTUmVk1WLW0Wu7BkJJ+cbOap7pIdjOxz1I9KPfd2vWOPntZvLj+YeCjNPuJfJNW/Jhb6Kd9xshFlzjd8Ba/BjduXOV+mkAhQ+VbOEYSzavZkcis4rahdgqfByOUs4kiVtrJhraHCIvmi3KTVyO39COKdWjJ2nsX5Rg3BxE8idm8Dylj+TCFTj0MvrOaBGrtlnRsKyG7GtVdaVC3XthhpF8M+3UHJJlRXTZisMhgPTzWsnzgkqEGgJ2gkJMgxEe9QhR7hjUxxO3Z/YO9H5hfJGNnydtFykFUahDth2bKGWmP/2qiI1nPrfyAwn8xNKuz+oQDv/4ijCbiSm6BWAPC5exVuux0eicL2wmlyYRU04AsNhHvRoN13Eq/gg+x2i6rZVt5Pdvv5GIIcL9p7GdcAMq61tMf0n3lf99LZOBt8BYS3kGsvPEwbbUGofWS7h9vORjeI/6j9Q2iAA8R4AAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/ff553fffe62b42391529e3e63c32176e/8ff1e/kubernetes_microservices_11.png"
        srcset="/static/ff553fffe62b42391529e3e63c32176e/9ec3c/kubernetes_microservices_11.png 200w,
/static/ff553fffe62b42391529e3e63c32176e/c7805/kubernetes_microservices_11.png 400w,
/static/ff553fffe62b42391529e3e63c32176e/8ff1e/kubernetes_microservices_11.png 800w,
/static/ff553fffe62b42391529e3e63c32176e/ac127/kubernetes_microservices_11.png 816w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>And you should be able to access the web interface on port <strong>30080</strong> on your master server IP address:</p>
<hr>
<p><img src="/kubernetes_microservices_12-d61b7852ef6d025a1dedb4fa7616327d.gif" alt="A Kubernetes Cluster &#x26; Microservices"></p>
<hr>
<h2 id="persistence-in-a-kubernetes-cluster"><a href="#persistence-in-a-kubernetes-cluster" aria-label="persistence in a kubernetes cluster permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Persistence in a Kubernetes Cluster</h2>
<p>In Docker all data that is generated inside a container is lost when you restart it. So if we, for example, want to store the geo location of our car fleet and calculate a travel path from it, all of that is gone, when the container restarts. Docker offers persistent in external volumes to prevent this from happening.</p>
<p>To add <strong>vehicle tracking</strong> to our app, we need to update all of our images to the <code class="language-text">:release2</code> in <code class="language-text">workloads.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>queue<span class="token punctuation">:</span>release2

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>simulator
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>position<span class="token punctuation">-</span>simulator<span class="token punctuation">:</span>release2
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice


<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> position<span class="token punctuation">-</span>tracker
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>position<span class="token punctuation">-</span>tracker<span class="token punctuation">:</span>release2
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice


<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>api<span class="token punctuation">-</span>gateway<span class="token punctuation">:</span>release2
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice
          
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release2
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> SPRING_PROFILES_ACTIVE
          <span class="token key atrule">value</span><span class="token punctuation">:</span> production<span class="token punctuation">-</span>microservice</code></pre></div>
<p>Restarting everything with <code class="language-text">kubectl apply -f workloads.yaml</code> now shows us the v2 interface on port <strong>30080</strong>. Clicking on a vehicle name in the list on the left will jump you to the selected truck and highlight the path that vehicle has taken:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/1bd8c895ab589876872d5b16180e04f2/08784/kubernetes_microservices_13.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 66.62561576354679%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACXklEQVQozyWSaW8aQQyG9///j/RTpUhpRKVW6kUTEsKx11yea2c5wh7sLiASWAjU0JE1siw98uvX9m6e/U+DsGNm9yrtmGnHZWPFiyzKCpoXJF+S6YRkeVzVpChJnpMsY9mC4T9/pd6TsgM35dWalg1brmC1tfO5ZpFVIHksGEm0SQwkGqwUiYJLnXHNhRLgpc5hHNv2sN8d2vZ8Pm9WjaDkdSaKRbRcyFQJxYgGlihhjdEAwMLEYgy9NE3dZPr+/v729rbb7xEu8kxyuqlVVcd0Go51CCyWIpQmSuKBhl7Ef0k+UBB4SqEEOH58nE4n/BBuqkpL3s/J3Xx0Ix5vdO8LHbGXrune2m5n0v2hw8AABTb2llW13mxO59Nut2vbFumqLGgw/g6jOzf+LF++6v59v8+fexPiU6Xk44Pp/RWcakE8hy9NseG+3R+ucFmWEMdccmI5wJiS7tzGRivnjNbS9p/c85N0wrwnOPMkL0qEt9s3bI7JcpkrERjpW9W3OkSrFOecBJw+oBfiz287HqoUVJt4k+m0qmtk0LP2cHG7aUpjAgljDdQqKUgINE6smk2ss+buWw8YwepkAx5qLsrlFd61hwMmdV0D47HvAw0tbkhLoJHkzGhugc/6T9aATQZNGXs44Wq9QQY1/99zUy8FDSN/iIwzUsRROBrSKNCSOT+aDX7OM3+25fk+8RaL1/V6jQxqPh6PlyNZrwRBoJ9IaiVRMGL8WdJIO8r92+Slk1tlS6sRTpzL8vxq2HZ/PZJV06QWcOBLiADH0ypOeKwh0v63NBrhhUHJVMb+AXoBrB2wZcsLAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/1bd8c895ab589876872d5b16180e04f2/8ff1e/kubernetes_microservices_13.png"
        srcset="/static/1bd8c895ab589876872d5b16180e04f2/9ec3c/kubernetes_microservices_13.png 200w,
/static/1bd8c895ab589876872d5b16180e04f2/c7805/kubernetes_microservices_13.png 400w,
/static/1bd8c895ab589876872d5b16180e04f2/8ff1e/kubernetes_microservices_13.png 800w,
/static/1bd8c895ab589876872d5b16180e04f2/08784/kubernetes_microservices_13.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>This data is stored in an internal data structure inside the <strong>Position Tracker</strong> container and will be lost if you reload that container. You can get the webapp pod name and delete it:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">kubectl get all
kubectl delete pod -f pod/position-tracker-684d9d84cb-st8pc</code></pre></div>
<p>Your deployment will take care of restarting the webapp for you - if you reload the web interface you will see that the tracker data has been lost. To prevent this from happening, we now want to add a <strong>MongoDB</strong> database to our cluster that stores the data tracker produces in a persistent way.</p>
<h3 id="mongodb-pod"><a href="#mongodb-pod" aria-label="mongodb pod permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MongoDB Pod</h3>
<p>We have a new release of the app <code class="language-text">:release3</code> that is build, expecting there to be a <a href="https://hub.docker.com/_/mongo">MongoDB Database</a> (<em>3.6.10-stretch</em>) on our cluster to store the tracking data in. We can create a new Kubernetes deployment for this Docker images and we are going to configure it in a file called <code class="language-text">mongo-stack.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
        <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span>3.6.10<span class="token punctuation">-</span>stretch</code></pre></div>
<p>Now update only the <strong>Position Tracker</strong> image in <code class="language-text">workloads.yaml</code> to v3 (same as before, see above) and apply all changes to the cluster:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">kubectl apply -f mongo-stack.yaml
kubectl apply -f workloads.yaml
kubectl get all</code></pre></div>
<h3 id="mongodb-service"><a href="#mongodb-service" aria-label="mongodb service permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MongoDB Service</h3>
<p>To enable our tracker to use our new database we need to add a Kubernetes service and expose the MongoDB port to the Cluster. And we can define this services inside the <code class="language-text">mongo-stack.yaml</code> file, right under the pod config:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
        <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span>3.6.10<span class="token punctuation">-</span>stretch

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>mongodb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>default
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">27017</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">27017</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP</code></pre></div>
<p>It is critical to add the metadata name <code class="language-text">fleetman-mongodb</code> as this is going to be the domain name that CoreDNS inside our cluster is using to resolve the pod IP address and our v3 <strong>Production Tracker</strong> is <a href="https://github.com/DickChesterwood/k8s-fleetman/blob/release3/k8s-fleetman-position-tracker/src/main/resources/application-production-microservice.properties">configured to search</a> for the MongoDB database on <code class="language-text">mongodb.host=fleetman-mongodb.default.svc.cluster.local</code>!</p>
<p>Also make sure that the service <strong>Selector</strong> is set to match the <strong>matchLabels</strong> in the pod config above, as this is used to connect the service. Now re-apply the Mongo stack configuration to start up the service. If you repeat the experiment from earlier and delete the <strong>Position Tracker</strong> the collected data will persist. </p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">kubectl apply -f mongo-stack.yaml
kubectl get all
kubectl delete pod -f pod/position-tracker-684d9d84cb-st8pc</code></pre></div>
<h3 id="volume-mounts"><a href="#volume-mounts" aria-label="volume mounts permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Volume Mounts</h3>
<p>Right now the data is still stored on the filesystem of the MongoDB container. We need to configure the MongoDB container to persist the data outside of the container itself, on our Kubernetes node filesystem in a <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/">Persistent Volume</a> to make it survive a complete reload of our cluster.</p>
<p>To mount an external volume into the MongoDB container, we need to add a few lines to the pod configuration file. If you scroll to the bottom of the  DockerHub page (<a href="https://hub.docker.com/_/mongo">Where to Store Data?</a>) you can see that the default data storage path inside the MongoDB container is <code class="language-text">/data/db</code>. We now have to link this path inside the container (<code class="language-text">mountPath</code>) to a volume on our host server (or an EBS volume on AWS). You can find all the options for the receiving volume in the <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#volume-v1-core">Kubernetes documentation</a>. We are going to use a <a href="https://kubernetes.io/docs/concepts/storage/volumes/#hostpath">hostPath</a> with the type <strong>DirectoryOrCreate</strong> - meaning that we don’t have to go into the host and create the directory first (it will be created if not existing):</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
        <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span>3.6.10<span class="token punctuation">-</span>stretch
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>persistent<span class="token punctuation">-</span>storage
            <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data/db
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>persistent<span class="token punctuation">-</span>storage      
          <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
            <span class="token comment"># directory location on host</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> /mnt/kubernetes/mongodb
            <span class="token comment"># DirectoryOrCreate, Directory, FileOrCreate, File, etc.</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> DirectoryOrCreate</code></pre></div>
<p>Apply those changes to your cluster and use the <code class="language-text">describe</code> command to check if the mount was successful:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/d764fe9312a671cc9015cf9224e57601/4f7fc/kubernetes_microservices_14.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 113.00613496932516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADBElEQVQ4y42V13biQBBEJZkkkXEgmIwxJoPz/v+H9d4aSVg2+Ow+9GlJw9RUV1cPXnn9YqXFwYpE6elghcedFWYbK813Vl49W3v5bPvl0TaLve2IysPW/NGTeYNH84aLONJn5fHuzSa7d5vuP2xG9LZvlgfwarKy/HRtEWB11gPetaHCus93rz+PAdIA0Fe+5cd3RPf5j7UBrANQgmVxvrU8bFqwnLPema7shk0zKrqfre12tLC78dLasI0Sdv4QwCYgKu2KU0uUVIdBROkVgENyDbY9wHqsuwDs/mEDKMGBfd6riQSOYQOAMhtVpsI9s9G9k3Ns8GByVqKin32nZDEtPx1dAyR0DoAWjHWIGFZgrpxL9PPTJlyKdL3KJgHqoxjdHD+dfgGs1BjlM2Y/IwsoFvXNq2OnzZHsM4+bUkQjNUjsf4uTXVJAaaUy82iVQ/yQxkjHGt3Uc/iYxGJ/WtOhEc86TIenleQmVFOARRmdfGygBTF24PIhh4m5Dvr6tj59S7+nUaT7npDVhII+8sOmjD2NTZ0COB37/9Cxn/hQrBqUXKSEQCAw/jZW2fG61IzT+sICZZ/Te5sXG1JqF9AeGvXIXfTpol2HnP9W6vqL9Y85DpDNCxG4IeuwKUKzBnoWEVfvaQR0MxhnY+k0vwgoYzf37/HsAqjs3T/Ek+HiPzyY9WEEYI3hL9D+PGCaXzdqYuGY/PDbJW1ThsolNBlvX+1OAw+YrrARRh8T7UU81wXWguwd+AtwbGw26AprouM1IDVA6mIt42Kfq2QEnWZZwLMuJwxl6tbhw2TwKtPhTI7wKtdLmuHK1gXqSj9n5yeA8q8DLGpeAShhk+oKUBim41ZNbpwCzBW/ejKNEGaR2GlGySGNEVtNibu2BECnBzRtwJpu6A6Hd7FWnDOXr2Z5qT8fjH1g5NaAtmARwlDD7y4BvoWA9WE8ge0ItmPykPUxzwMNA01TdARYYUMd7Rq6XWDgrjO6Lj0rq6NdHz7drEdIUSUr8oB7apRu88nyZDOV/BccimW16gbGWQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/d764fe9312a671cc9015cf9224e57601/8ff1e/kubernetes_microservices_14.png"
        srcset="/static/d764fe9312a671cc9015cf9224e57601/9ec3c/kubernetes_microservices_14.png 200w,
/static/d764fe9312a671cc9015cf9224e57601/c7805/kubernetes_microservices_14.png 400w,
/static/d764fe9312a671cc9015cf9224e57601/8ff1e/kubernetes_microservices_14.png 800w,
/static/d764fe9312a671cc9015cf9224e57601/4f7fc/kubernetes_microservices_14.png 815w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>From the event log at the bottom we can see that the container was deployed to <code class="language-text">in-centos-minion2</code> (alternatively use <code class="language-text">kubectl get pods -o wide</code> to list the nodes your pods are hosted on) - a quick check confirms that the volume <code class="language-text">/mnt/kubernetes/mongodb</code> was created and MongoDB started to use it:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/581e7d9eab1f1f03a4377a5e6a7783a4/5212a/kubernetes_microservices_15.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 43.920595533498755%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7CAAAOwgEVKEqAAAABR0lEQVQoz22S63KCQAxGqXa8lFtFph1rrbUVFUQQUbTj+z9X+n2xCBZ/ZLK7xrMnYY3xOpf59ijTeC+zzUH8aCcmohdsxJgsxHhnBJeY1NbjeXX2sayys9qKs0jFChLxALLDTPrY95ep5s58A3jyt47FRL0V7sSByBNqbmCMLoqN6Up6+HGQHjVc2DIPtyexo1wGCcyzH4XwzM9O8ro/63kDSJP2Z6hGHoFJoX98Rvse1haMvbSQIdY+YASyxkbNDazMbKdF4IKGxaUYrbvxQS8g0AXchLWFoKnaofZhegeohrPSsLga0oCGJuY1QmsB4C+AP36tIbBSiUa7OkMM/WqYVIY97mmG9RvMIryEET6IAupx76O0ajNkEFjutX1elJ/FxgXX51QC/htyhp3vWAFunIvDQLt8GnwWXQCYy+fUnkVNSC1+AUWQ9S7Z+inbAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/581e7d9eab1f1f03a4377a5e6a7783a4/8ff1e/kubernetes_microservices_15.png"
        srcset="/static/581e7d9eab1f1f03a4377a5e6a7783a4/9ec3c/kubernetes_microservices_15.png 200w,
/static/581e7d9eab1f1f03a4377a5e6a7783a4/c7805/kubernetes_microservices_15.png 400w,
/static/581e7d9eab1f1f03a4377a5e6a7783a4/8ff1e/kubernetes_microservices_15.png 800w,
/static/581e7d9eab1f1f03a4377a5e6a7783a4/5212a/kubernetes_microservices_15.png 806w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h3 id="using-persistentvolumeclaims"><a href="#using-persistentvolumeclaims" aria-label="using persistentvolumeclaims permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using PersistentVolumeClaims</h3>
<p>A <a href="https://kubernetes.io/docs/concepts/storage/volumes/#persistentvolumeclaim">persistentVolumeClaim</a> volume is used to mount a PersistentVolume into a Pod. PersistentVolumes are a way for users to “claim” durable storage (such as a GCE PersistentDisk or an iSCSI volume) without knowing the details of the particular cloud environment. This is just a minor change to our <code class="language-text">mongo-stack.yaml</code> file:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> mongodb
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongodb
        <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span>3.6.10<span class="token punctuation">-</span>stretch
        <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>persistent<span class="token punctuation">-</span>storage
            <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data/db
      <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>persistent<span class="token punctuation">-</span>storage
          <span class="token key atrule">persistentVolumeClaim</span><span class="token punctuation">:</span>
            <span class="token key atrule">claimName</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>pvc</code></pre></div>
<p>The persistent volume is then configured in a separate configuration file we will call <code class="language-text">storage.yaml</code> - this way, if we have to move our cluster to a new cloud provider we do not have to make any changes to the workload or service file:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token comment"># What do want?</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># has to match the name you used as claimName!</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mongo<span class="token punctuation">-</span>pvc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token comment"># linking the claim with the implementation below</span>
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> mylocalstorage
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteOnce
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">requests</span><span class="token punctuation">:</span>
      <span class="token comment"># Let Kubernetes find a node that offers at least the amount of storage</span>
      <span class="token key atrule">storage</span><span class="token punctuation">:</span> 1Gi

<span class="token punctuation">---</span>
<span class="token comment"># How do we want it implemented</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolume
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> local<span class="token punctuation">-</span>storage
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> mylocalstorage
  <span class="token key atrule">capacity</span><span class="token punctuation">:</span>
    <span class="token comment"># create a storage claim for this amount - e.g. create a EBS volume on AWS</span>
    <span class="token key atrule">storage</span><span class="token punctuation">:</span> 1Gi
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteOnce
  <span class="token key atrule">hostPath</span><span class="token punctuation">:</span>
    <span class="token comment"># directory location on host</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">"/mnt/kubernetes/mongodb-tracking-data"</span>
    <span class="token comment"># DirectoryOrCreate, Directory, FileOrCreate, File, etc.</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> DirectoryOrCreate</code></pre></div>
<p>The <code class="language-text">PersistentVolumeClaim</code> and <code class="language-text">PersistentVolume</code> are matched up by the <code class="language-text">storageClassName</code>. The cloud administrator has to create persistent storages based on available hardware (or cloud storage partitions). The web developer then creates a claim for storage with a certain capacity - so Kubernetes can search for a fitting volume among the available.</p>
<p>We choose the <code class="language-text">storageClassName: mylocalstorage</code> - in production this would be something more useful. E.g. your pods really need very fast storage - so you can set a claim for a <strong>storageClassName</strong> that refers to high performance <em>SSD</em> storage.</p>
<p>Noteworthy also is the <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes">Access Mode</a> that can be:</p>
<ul>
<li>ReadWriteOnce – the volume can be mounted as read-write by a single node</li>
<li>ReadOnlyMany – the volume can be mounted read-only by many nodes</li>
<li>ReadWriteMany – the volume can be mounted as read-write by many nodes</li>
</ul>
<p>In the CLI, the access modes are abbreviated to:</p>
<ul>
<li>RWO - ReadWriteOnce</li>
<li>ROX - ReadOnlyMany</li>
<li>RWX - ReadWriteMany</li>
</ul>
<p>Once you done with the configuration, apply it and check if the pv (persistent volume) was created and bound to the MongoDB pod:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f storage.yaml
kubectl apply -f mongo-stack.yaml
kubectl get <span class="token function">pv</span>
kubectl get pvc</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/581e7d9eab1f1f03a4377a5e6a7783a4/5212a/kubernetes_microservices_15.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 43.920595533498755%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7CAAAOwgEVKEqAAAABR0lEQVQoz22S63KCQAxGqXa8lFtFph1rrbUVFUQQUbTj+z9X+n2xCBZ/ZLK7xrMnYY3xOpf59ijTeC+zzUH8aCcmohdsxJgsxHhnBJeY1NbjeXX2sayys9qKs0jFChLxALLDTPrY95ep5s58A3jyt47FRL0V7sSByBNqbmCMLoqN6Up6+HGQHjVc2DIPtyexo1wGCcyzH4XwzM9O8ro/63kDSJP2Z6hGHoFJoX98Rvse1haMvbSQIdY+YASyxkbNDazMbKdF4IKGxaUYrbvxQS8g0AXchLWFoKnaofZhegeohrPSsLga0oCGJuY1QmsB4C+AP36tIbBSiUa7OkMM/WqYVIY97mmG9RvMIryEET6IAupx76O0ajNkEFjutX1elJ/FxgXX51QC/htyhp3vWAFunIvDQLt8GnwWXQCYy+fUnkVNSC1+AUWQ9S7Z+inbAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="A Kubernetes Cluster & Microservices"
        title=""
        src="/static/581e7d9eab1f1f03a4377a5e6a7783a4/8ff1e/kubernetes_microservices_15.png"
        srcset="/static/581e7d9eab1f1f03a4377a5e6a7783a4/9ec3c/kubernetes_microservices_15.png 200w,
/static/581e7d9eab1f1f03a4377a5e6a7783a4/c7805/kubernetes_microservices_15.png 400w,
/static/581e7d9eab1f1f03a4377a5e6a7783a4/8ff1e/kubernetes_microservices_15.png 800w,
/static/581e7d9eab1f1f03a4377a5e6a7783a4/5212a/kubernetes_microservices_15.png 806w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h2 id="cloud-deployment"><a href="#cloud-deployment" aria-label="cloud deployment permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cloud Deployment</h2>
<p>kubectl expose deployment webapp —type=LoadBalancer —name=exposed-webapp</p>
<p>Examples:</p>
<ul>
<li>
<p>Create a service for a replicated nginx, which serves on port 80 and connects to the containers on port 8000.
kubectl expose rc nginx —port=80 —target-port=8000</p>
</li>
<li>
<p>Create a service for a replication controller identified by type and name specified in “nginx-controller.yaml”,
which serves on port 80 and connects to the containers on port 8000.
kubectl expose -f nginx-controller.yaml —port=80 —target-port=8000</p>
</li>
<li>
<p>Create a service for a pod valid-pod, which serves on port 444 with the name “frontend”
kubectl expose pod valid-pod —port=444 —name=frontend</p>
</li>
<li>
<p>Create a second service based on the above service, exposing the container port 8443 as port 443 with the name
“nginx-https”
kubectl expose service nginx —port=443 —target-port=8443 —name=nginx-https</p>
</li>
<li>
<p>Create a service for a replicated streaming application on port 4100 balancing UDP traffic and named ‘video-stream’.
kubectl expose rc streamer —port=4100 —protocol=udp —name=video-stream</p>
</li>
<li>
<p>Create a service for a replicated nginx using replica set, which serves on port 80 and connects to the containers on
port 8000.
kubectl expose rs nginx —port=80 —target-port=8000</p>
</li>
<li>
<p>Create a service for an nginx deployment, which serves on port 80 and connects to the containers on port 8000.
kubectl expose deployment nginx —port=80 —target-port=8000</p>
</li>
</ul></div><footer class="jss11"><div class="jss12"><span class="jss14">SHARE</span><div class="jss13"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--twitter"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--twitter "><g><circle cx="32" cy="32" r="31" fill="#00aced"></circle></g><g><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></g></svg></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--googlePlus"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--google "><g><circle cx="32" cy="32" r="31" fill="#dd4b39"></circle></g><g><path d="M25.3,30.1v3.8h6.3c-0.3,1.6-1.9,4.8-6.3,4.8c-3.8,0-6.9-3.1-6.9-7s3.1-7,6.9-7c2.2,0,3.6,0.9,4.4,1.7l3-2.9c-1.9-1.8-4.4-2.9-7.4-2.9c-6.1,0-11.1,5-11.1,11.1s5,11.1,11.1,11.1c6.4,0,10.7-4.5,10.7-10.9c0-0.7-0.1-1.3-0.2-1.8H25.3L25.3,30.1z M49.8,28.9h-3.2v-3.2h-3.2v3.2h-3.2v3.2h3.2v3.2h3.2v-3.2h3.2" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--facebook"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--facebook "><g><circle cx="32" cy="32" r="31" fill="#3b5998"></circle></g><g><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--linkedin"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--linkedin "><g><circle cx="32" cy="32" r="31" fill="#007fb1"></circle></g><g><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div></div></div><div class="jss15"><div class="jss2 jss16"><img alt="mike polinowski" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAA8ADwDASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAABgABBAUHAwL/xAA6EAABAwMCBAIHBAoDAAAAAAABAgMEAAUREiEGMUFRE2EHFCIjcaHBFYGRsRYkJTIzQmJygqOywuH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEE/8QAHREBAQACAgMBAAAAAAAAAAAAAAECAxFRBBIiMf/aAAwDAQACEQMRAD8Az+lSqxskWJPmepSnFMrfwll4bhK+gI6g8vw86CuHPvWnRbTabhw3a5X2dHQpTjQVoTgnKwFAnmRz50AXezzbNKLE1opP8qxulY7g1oPCa/E4LhjP8OUgf7gfrQVHpFZgwERI0OBGYW7qUtbbQScDGBt99A1GPpNWTf46M7JjA/eVKoZjwVLQXnj4bQGc9TWXKT9U16stl4xiJSp1lJWSgEJzsDTVqdTpNnnxYzMhyM54DzYcQ4lJKcHz6GoSSpCwpJKVJOQRsQa1yxXOcqywP2O6U+CgJUl1sagBgEAkc+dTXZDzo99YnV/3rZP/AGoKnh67QuLLSYNzbbckoGHEKwNf9aeue+OVeWW4nDER63PSkpb9baeZLhwdBWnP4FKt663O0OS2wYNsTb5KTlL7QaCgfiDn5164Utqv1p+7KEq5odLS1rOvQkAEAdueaARvMmPery5Oa1LYQEttauoA5nPmTVHcpfiq8Js+wk7kdTRzKs9pY4qXDW2tz1hAeajIWEoBydQIyO2QM457VesW2IwgBHD7OodQ20PrU5h9e1duXlSaJp1zju9sbSlS1BKElRPIAZrvNgyYDiG5bSmlrQHAlQwcHlWzodfZThm0KSOyVtj60D8bKmSLy2pVrUMMJAyoKyNSu1UcSM3x7MiWyHDhMNAsspbW44CokjbYZ7YqE/xtfntvXEoHZLSPqKHqu7JbYYbFyvLvhQUn2GhuuQR0A7dz93wAr4Sg3W9J+0LxNkmKRhtoOFHieZxj2fz/ADe9hDAduVhdMZDT6Izvq2Alw9T2JGoDPcGh6+cZzLiyYkNIhQ8adDf7yh2J6DyHzooszKI/o8Z1pz4hCyO+XRj6UFrFt9tblyILqy5NV70POK9+UnYEK57EEbctqEuJH+JOG5Q0XJ92G4fdOLws/BWRzrt6TAuPcrdLZWpt0oUkLScEaSCN/wDI1ChcYidDXbeIW/Gjup0+sIHto7EjrjuN/jQQf03v5RpVNB8/CSD8gK7u8YvyUMmS3qeQjQpYx7W53+dD8+MIktxlDyH0A5Q6g7LSeR/86VHoFTkk4yScbU1KgVaxMHqHCVriupwtS4rZHnqST+RrKmXVsPIdaVpWg5SexqbcL5crmplUyWtws7t7BOk99uvnQGnpRjurjQJKRlltS0HbkVYI/wCNZ3VnN4iu89gsSp7q2jzTkAH4451WUCpUqVB//9k=" class="jss4"/></div><div class="jss17"><p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href="/contact/">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p></div></div></footer></article><footer class="jss21"><div class="jss22"><ul>
<li>This is a personal Developer Blog</li>
<li>Ξ</li>
<li>built by <a href="https://github.com/mpolinowski">Mike Polinowski</a></li>
<li>Ξ</li>
<li>with <a href="https://www.gatsbyjs.org/">Gatsby</a> &#x26; <a href="https://reactjs.org">React</a></li>
<li>Ξ</li>
<li>source code on <a href="https://github.com/mpolinowski/mpolinowski.github.io">GitHub</a></li>
<li>Ξ</li>
<li>deliverd by <a href="https://pages.github.com">Github Pages</a></li>
<li>Ξ</li>
<li>photos from <a href="https://www.flickr.com/people/149680084@N06/">Flickr</a></li>
</ul></div></footer></div><div style="position:absolute;height:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;left:2px;border-radius:3px"><div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div><div style="position:absolute;width:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;top:2px;border-radius:3px"><div style="position:relative;display:block;width:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div></div></main><nav class="jss23 is-aside open "><div class="jss24"><div style="position:relative;overflow:hidden;width:100%;height:100%"><div style="position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-overflow-scrolling:touch;margin-right:0;margin-bottom:0"><div class="jss25"><header></header><ul class="jss26"><li class="jss31 Container" style="display:block"><a class="jss32" href="/nginx-ingress-cert-manager/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>NGINX Ingress with Cert-Manager</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-traefik-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Traefik Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-the-chinese-way/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes the Chinese Way</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-nginx-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes NGINX Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-nginx-https-service/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes NGINX https Service</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-bare-metal-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Bare Metal Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-cluster-logging/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Cluster Monitoring &amp; Logging</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a aria-current="page" class="jss32 active" href="/kubernetes-and-microservices/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes and Microservices</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/creating-a-kubernetes-cluster/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating a Kubernetes Cluster</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/centos-administration/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Centos Administration</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 IoT" style="display:block"><a class="jss32" href="/creating-a-grafana-dashboard/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Sensors Data and Grafana</h1><h2>Creating a Grafana dashboard to visualize the data recorded by a XiaoMi MQTT sensor network</h2></div></a></li><li class="jss31 IoT" style="display:block"><a class="jss32" href="/zigbee2mqtt-xiaomi-fhem/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Zigbee Sensors in FHEM</h1><h2>Zigbee Sensors with FHEM and Zigbee2MQTT</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/managing-containers-in-kubernetes/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Managing Containers in Kubernetes</h1><h2>An IT professional who is a Red Hat Certified Specialist in Containerized Application Development has demonstrated the skills, knowledge, and abilities needed to create, update container images and run and link containers.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/red-hat-containerized-application-development-rhcs/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Red Hat Certified Specialist in Containerized Application Development</h1><h2>An IT professional who is a Red Hat Certified Specialist in Containerized Application Development has demonstrated the skills, knowledge, and abilities needed to create, update container images and run and link containers.</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-dashboard-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating Node-RED Admin Panel using node-red-dashboard</h1><h2>Creating Node-RED Admin Panel using node-red-dashboard</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-http-connect/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node-RED Interaction with HTTP</h1><h2>A collection of HTTP recipes for Node-RED</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-mqtt-connect/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>A Collection of Node-RED MQTT Recipes</h1><h2>We are going to use a MQTT Broker to test our Node-RED flows under Windows</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-sqlite/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Using SQLite with Node-RED on Windows</h1><h2>Using SQLite with Node-RED on Windows</h2></div></a></li><li class="jss31 SQL" style="display:block"><a class="jss32" href="/postgresql-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with PostgreSQL in Windows 10</h1><h2>Getting started with PostgreSQL in Windows 10</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-cryptocurrency-dashboard/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating a Dashboard displaying Cryptocurrency Data using Node-RED</h1><h2>We will use the STS Binance node to get access to a Cryptocurrency API. The node can be downloaded for Node-RED</h2></div></a></li><li class="jss31 OpenHAB" style="display:block"><a class="jss32" href="/openhab2-mqtt-nodered/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Home Automation and IP Cameras</h1><h2>The following instructions will guide you through the process of setting up OpenHAB 2 to automate an IP camera via the MQTT protocol.</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting Started with Node-RED (Windows 10 Edition)</h1><h2>This guide will help you get Node-RED installed and running in just a few minutes.</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/red-hat-certified-engineer-rhce/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Red Hat Certified Engineer (RHCE) Exam</h1><h2>The performance-based Red Hat Certified Engineer exam (EX300) tests to determine if your knowledge, skill, and ability meet those required of a senior system administrator responsible for Red Hat Enterprise Linux (RHEL) systems.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/express-generator-dockerrized/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>How to wrap your Source Code into a Docker Container</h1><h2>We now want to create a custom Docker Container containing our Node.js project source code by creating a Dockerfile and building an Docker Image.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/express-generator-app-docker/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Link your Node Source Code into a Docker Container</h1><h2>Use Docker to run your source code in a runtime that isn&#x27;t globally installed on your system. We want to test our source code as it would be executed inside a Linux / Node.js@latest environment, while running our development on a Windows 10 machine.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/node-express-docker-container/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Run your Node.js app from a Docker Container</h1><h2>A container image is a lightweight, stand-alone, executable package of a piece of software that includes everything needed to run it - code, runtime, system tools, system libraries, settings. Available for both Linux and Windows based apps, containerized software will always run the same, regardless of the environment.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/server-side-render-react-router/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Server Rendering with React and React Router</h1><h2>Server side rendering a React app can provide a few different benefits including performance and SEO. The problem is with those benefits comes a cost of additional complexity to your application. In this project, we&#x27;ll start from scratch and slowly build a server side rendered React 16.3 with React Router 4.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-transition-group-demo/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>react-transition-group</h1><h2>Introduction to animated transitions with React Router</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-material-ui-starter/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby Material UI Starter</h1><h2>Set up a website with Gatsby.js and Material UI</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/machine-learning-with-python/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Machine Learning with SciKit Learn</h1><h2>An Introduction in building machine learning applications with the SciKit Python library. Learn data preprocessing and implement supervised and unsupervised algorithms as well as performing error analysis to evaluate their performance.</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/securing-elasticsearch-readonlyrest/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Securing Elasticsearch with ReadOnlyREST</h1><h2>Elasticsearch doesn&#x27;t have a basic user authentication - a problem!</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/securing-elasticsearch-xpack/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Securing Elasticsearch with X-Pack</h1><h2>Elasticsearch doesn&#x27;t have a basic user authentication - a problem!</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/elasticsearch-kibana/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Elasticsearch &amp; Kibana</h1><h2>Installing our Search Engine and it&#x27;s Admin Interface</h2></div></a></li><li class="jss31 NGINX" style="display:block"><a class="jss32" href="/nginx-node-security/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>NGINX, Node.js &amp; Security</h1><h2>Using NGINX as an SSL proxy for your Node.js apps</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/umlaute-on-us-keyboard/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Umlaute</h1><h2>Hack your US keyboard to be able to type German Umlaute</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-reactstrap/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby.js with Bootstrap 4</h1><h2>Creating a Gatsby.js starter using Reactstrap</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/python-ssh-logger/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Python Network Logger</h1><h2>We want to use a Python program to connect to servers by SSHv2 using the library Paramiko. We then want to log server parameter by running SSH commands on our server. We are going to plot the results in Matplotlib.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-wiki/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby.js Knowledgebase</h1><h2>Creating a Knowledgbase using Gatsby.js and React.js</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/getting-started-with-python-part-ii/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with Python Part II</h1><h2>According to Wikipedia Python is an interpreted, high-level, general-purpose programming language. And looking around, it seems to be everywhere - Machine Learning, Artificial Intelligence, Big Data Analysis all the way to Web Dev and Dev Ops.</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/getting-started-with-python/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with Python</h1><h2>Acording to Wikipedia Python is an interpreted, high-level, general-purpose programming language. And looking around, it seems to be everywhere - Machine Learning, Artificial Intelligence, Big Data Analysis all the way to Web Dev and Dev Ops.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/next-start/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Next.js Server Side Rendering</h1><h2>A first look at Next.js Version 4!</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-router-4/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React Router 4</h1><h2>A test project to get familiar with React Router v4</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/elasticsearch-react-example/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React Search Interface</h1><h2>An example project showing how to use Elasticsearch with React</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/search-engine-setup-and-configuration/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Search Engine Setup and Configuration</h1><h2>Elasticsearch is a distributed, JSON-based search and analytics engine designed for horizontal scalability, maximum reliability, and easy management.</h2></div></a></li><li class="jss31 NGINX" style="display:block"><a class="jss32" href="/using-nginx-as-proxy-for-your-nodejs-apps/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Using NGINX as proxy for your nodejs apps</h1><h2>We want to set up NGINX with http/2 to serve multiple node apps and an instance of Elasticsearch on a single centOS server</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/developing-software-in-china/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Developing Software in China</h1><h2>Being a Software Developer in China can be a nightmare. Every time you try to install some library there is a really good chance that your run into a 404. A lot of the Open Source efforts are all but invisible behind the Golden Shield - Proxy Squid to the rescue.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-under-the-hood/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React under the Hood</h1><h2>A look behind the curtain of React Starters</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/reactive-material/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>create-react-app and Material-UI</h1><h2>This is a practice run to add some to a react app, generated by the starter kit. So let&#x27;s get started!</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-blog-starter/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby Blog Starter</h1><h2>Build a JAM Stack Blog with Gatsby.js</h2></div></a></li><li class="jss31 Google Analytics" style="display:block"><a class="jss32" href="/google-analytics-amp/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Google Analytics</h1><h2>How to add Google Analytics to your AMP Webpage,</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/obligatory-react-todo-list/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React TODO List</h1><h2>Every web-dev should have one or two of them on Github ~</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/caloric-burn/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Food Caloric Table App</h1><h2>A sample app will be a simple food nutrition lookup table. The data driving the app is supplied by the USDA&#x27;s National Nutrient Database.</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/windows10-control/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Windows Control</h1><h2>Every time Microsoft decides to take control away from us users, I am one step closer to permanetly switch to LINUX #DELETEWINDOWS</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/windows-cmd/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Windows CMD</h1><h2>You can create a bootable USB flash drive to use to deploy your OS of choice . The first step is to prepare the USB flash drive by using DiskPart, which is a command-line utility.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/random-password-generator/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Random Password Generator</h1><h2>We want to use the React App generator to create static pages from our React Pass-Gen App, routed through a Node/Express Server.</h2></div></a></li><li class="jss31 C++" style="display:block"><a class="jss32" href="/unreal-engine-coding-standards/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Unreal Engine Coding Standards (I)</h1><h2>The Unreal Engine Developer Course - Learn C++ &amp; Make Games. Learn C++ from scratch. How to make your first video game in Unreal engine. Gain confidence in programming.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/node-express-static-wiki/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node Express Static</h1><h2>Building a product Wiki based on Node.js, Express.js, AMP and Elasticsearch</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/node-express-mongodb/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node/Express with MongoDB</h1><h2>Building a Express Web Library with a MongoDB Backend and Goodreads API Integration</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/javascript-apis-and-ajax/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>An Introduction into APIs</h1><h2>JavaScript and Getting Started with APIs and AJAX</h2></div></a></li></ul></div></div><div style="position:absolute;height:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;left:2px;border-radius:3px"><div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div><div style="position:absolute;width:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;top:2px;border-radius:3px"><div style="position:relative;display:block;width:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div></div></div></nav><div class="jss35"><div class="jss36"><button class="jss11 jss5 jss37" tabindex="0" type="button" aria-label="Back to list" title="Back to the list"><span class="jss10"><svg class="jss14" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg></span></button></div><div class="jss36"><nav class="jss56"><div><button class="jss11 jss5 jss57" tabindex="0" type="button" aria-label="Increase font size" aria-haspopup="true" title="Change font size"><span class="jss10"><svg class="jss14" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z"></path></svg></span></button></div></nav><button class="jss11 jss5" tabindex="0" type="button" aria-label="Back to top" title="Scroll to top"><span class="jss10"><svg class="jss14 jss37" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"></path></svg></span></button></div></div><aside class="jss62"><a class="jss64" href="/"><div class="jss2 jss65"><img alt="mike polinowski" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAA8ADwDASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAABgABBAUHAwL/xAA6EAABAwMCBAIHBAoDAAAAAAABAgMEAAUREiEGMUFRE2EHFCIjcaHBFYGRsRYkJTIzQmJygqOywuH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEE/8QAHREBAQACAgMBAAAAAAAAAAAAAAECAxFRBBIiMf/aAAwDAQACEQMRAD8Az+lSqxskWJPmepSnFMrfwll4bhK+gI6g8vw86CuHPvWnRbTabhw3a5X2dHQpTjQVoTgnKwFAnmRz50AXezzbNKLE1opP8qxulY7g1oPCa/E4LhjP8OUgf7gfrQVHpFZgwERI0OBGYW7qUtbbQScDGBt99A1GPpNWTf46M7JjA/eVKoZjwVLQXnj4bQGc9TWXKT9U16stl4xiJSp1lJWSgEJzsDTVqdTpNnnxYzMhyM54DzYcQ4lJKcHz6GoSSpCwpJKVJOQRsQa1yxXOcqywP2O6U+CgJUl1sagBgEAkc+dTXZDzo99YnV/3rZP/AGoKnh67QuLLSYNzbbckoGHEKwNf9aeue+OVeWW4nDER63PSkpb9baeZLhwdBWnP4FKt663O0OS2wYNsTb5KTlL7QaCgfiDn5164Utqv1p+7KEq5odLS1rOvQkAEAdueaARvMmPery5Oa1LYQEttauoA5nPmTVHcpfiq8Js+wk7kdTRzKs9pY4qXDW2tz1hAeajIWEoBydQIyO2QM457VesW2IwgBHD7OodQ20PrU5h9e1duXlSaJp1zju9sbSlS1BKElRPIAZrvNgyYDiG5bSmlrQHAlQwcHlWzodfZThm0KSOyVtj60D8bKmSLy2pVrUMMJAyoKyNSu1UcSM3x7MiWyHDhMNAsspbW44CokjbYZ7YqE/xtfntvXEoHZLSPqKHqu7JbYYbFyvLvhQUn2GhuuQR0A7dz93wAr4Sg3W9J+0LxNkmKRhtoOFHieZxj2fz/ADe9hDAduVhdMZDT6Izvq2Alw9T2JGoDPcGh6+cZzLiyYkNIhQ8adDf7yh2J6DyHzooszKI/o8Z1pz4hCyO+XRj6UFrFt9tblyILqy5NV70POK9+UnYEK57EEbctqEuJH+JOG5Q0XJ92G4fdOLws/BWRzrt6TAuPcrdLZWpt0oUkLScEaSCN/wDI1ChcYidDXbeIW/Gjup0+sIHto7EjrjuN/jQQf03v5RpVNB8/CSD8gK7u8YvyUMmS3qeQjQpYx7W53+dD8+MIktxlDyH0A5Q6g7LSeR/86VHoFTkk4yScbU1KgVaxMHqHCVriupwtS4rZHnqST+RrKmXVsPIdaVpWg5SexqbcL5crmplUyWtws7t7BOk99uvnQGnpRjurjQJKRlltS0HbkVYI/wCNZ3VnN4iu89gsSp7q2jzTkAH4451WUCpUqVB//9k=" class="jss4"/></div></a><h3 class="jss63">mike polinowski<small>developer blog</small></h3><nav class="jss66"><div><button class="jss11 jss5 jss67" tabindex="0" type="button" aria-label="More" aria-haspopup="true"><span class="jss10"><svg class="jss14" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></span></button></div></nav></aside></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76200392-4', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-template-js","jsonName":"kubernetes-and-microservices-d38","path":"/kubernetes-and-microservices/"};window.dataPath="19/path---kubernetes-and-microservices-d-38-8c6-6n9xwvsjd6LRgXwzSVBN48LfE";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a23c99e2af5bd6c17118.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-130e24d055f67ef20d25.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-5c83e13c4628baa8d54f.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-e32268743df53ec50851.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-32477b62471d8d9732e5.js"],"component---src-pages-index-js":["/component---src-pages-index-js-2b85ea0b523334c28d73.js"],"component---src-pages-search-js":["/component---src-pages-search-js-7c42598891c17c152995.js"],"pages-manifest":["/pages-manifest-9e9730becbe49a4f69f8.js"]};/*]]>*/</script><script src="/component---src-templates-post-template-js-5c83e13c4628baa8d54f.js" async=""></script><script src="/11-27b3b11fcd77a7b2f8de.js" async=""></script><script src="/0-d359e2059c411e3ebb25.js" async=""></script><script src="/styles-59c6ce951e190b0b96b8.js" async=""></script><script src="/app-a23c99e2af5bd6c17118.js" async=""></script><script src="/webpack-runtime-d884f4f45b9442e496cb.js" async=""></script></body></html>