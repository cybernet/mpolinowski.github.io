{"componentChunkName":"component---src-templates-post-jsx","path":"/creating-magento-2-modules","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"date\": \"2019-09-17\",\n  \"title\": \"Creating Magento 2 Modules\",\n  \"categories\": [\"Magento\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"42.96875%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1b8726c9997123632654eb0ba281c8ac/8d3d1/photo-kt456d_645dhfh6dgjkhg4_d.webp 256w\", \"/static/1b8726c9997123632654eb0ba281c8ac/354cf/photo-kt456d_645dhfh6dgjkhg4_d.webp 512w\", \"/static/1b8726c9997123632654eb0ba281c8ac/44907/photo-kt456d_645dhfh6dgjkhg4_d.webp 1024w\", \"/static/1b8726c9997123632654eb0ba281c8ac/a8642/photo-kt456d_645dhfh6dgjkhg4_d.webp 1536w\", \"/static/1b8726c9997123632654eb0ba281c8ac/9e7c5/photo-kt456d_645dhfh6dgjkhg4_d.webp 1976w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1b8726c9997123632654eb0ba281c8ac/b95e4/photo-kt456d_645dhfh6dgjkhg4_d.jpg 256w\", \"/static/1b8726c9997123632654eb0ba281c8ac/1779b/photo-kt456d_645dhfh6dgjkhg4_d.jpg 512w\", \"/static/1b8726c9997123632654eb0ba281c8ac/87945/photo-kt456d_645dhfh6dgjkhg4_d.jpg 1024w\", \"/static/1b8726c9997123632654eb0ba281c8ac/6afe2/photo-kt456d_645dhfh6dgjkhg4_d.jpg 1536w\", \"/static/1b8726c9997123632654eb0ba281c8ac/5418f/photo-kt456d_645dhfh6dgjkhg4_d.jpg 1976w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/jpeg\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/1b8726c9997123632654eb0ba281c8ac/87945/photo-kt456d_645dhfh6dgjkhg4_d.jpg\",\n    \"alt\": \"Mong Kok, Hongkong\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#creating-custom-modules\"\n  }), \"Creating Custom Modules\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#module-install-scripts\"\n  }), \"Module Install Scripts\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#module-updates\"\n  }), \"Module Updates\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#model-layer\"\n  }), \"Model Layer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#controller-layer\"\n  }), \"Controller Layer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#view-layer\"\n  }), \"View Layer\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#blocks\"\n  }), \"Blocks\"))))), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1008px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"46.875%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/14332dead14abecff31c0bc555ee5369/8d3d1/Magento2_Modules_00.webp 256w\", \"/static/14332dead14abecff31c0bc555ee5369/354cf/Magento2_Modules_00.webp 512w\", \"/static/14332dead14abecff31c0bc555ee5369/905a7/Magento2_Modules_00.webp 1008w\"],\n    \"sizes\": \"(max-width: 1008px) 100vw, 1008px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/14332dead14abecff31c0bc555ee5369/85b06/Magento2_Modules_00.png 256w\", \"/static/14332dead14abecff31c0bc555ee5369/bc282/Magento2_Modules_00.png 512w\", \"/static/14332dead14abecff31c0bc555ee5369/832a9/Magento2_Modules_00.png 1008w\"],\n    \"sizes\": \"(max-width: 1008px) 100vw, 1008px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/14332dead14abecff31c0bc555ee5369/832a9/Magento2_Modules_00.png\",\n    \"alt\": \"Magento 2 Modules\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h2\", {\n    \"id\": \"creating-custom-modules\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#creating-custom-modules\",\n    \"aria-label\": \"creating custom modules permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Creating Custom Modules\"), mdx(\"p\", null, \"The default directory for Magento 2 modules is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/var/www/html/magento/app/code\"), \". If the theme you are using already comes with custom module you will be able to find them there. Start by creating a folder there for your personal modules and add another folder inside this one named \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SampleModule\"), \".\"), mdx(\"p\", null, \"To create a new module start with a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"registration.php\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\\\Magento\\\\Framework\\\\Component\\\\ComponentRegistrar::register(\\n    \\\\Magento\\\\Framework\\\\Component\\\\ComponentRegistrar::MODULE,\\n    'INSTAR_SampleModule',\\n    __DIR__\\n);\\n\")), mdx(\"p\", null, \"This tells Magento to register your component, that is of type \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Module\"), \" and will be called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"INSTAR_SampleModule\"), \".\"), mdx(\"p\", null, \"Now continue by creating a directory \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"etc\"), \" inside the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SampleModule\"), \" folder and add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"module.xml\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<?xml version=\\\"1.0\\\"?>\\n<config xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"urn:magento:framework:Module/etc/module.xsd\\\">\\n    <module name=\\\"INSTAR_SampleModule\\\" setup_version=\\\"1.0.0\\\">\\n        <sequence>\\n            <module name=\\\"Magento_Catalog\\\"/>\\n        </sequence>\\n    </module>\\n</config>\\n\")), mdx(\"p\", null, \"This file declares our \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"INSTAR\", \"_\", \"SampleModule\"), \" and it's dependency on the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Magento\", \"_\", \"Catalog\"), \" module. This makes sure that it is ensured that the latter is installed and loaded before Magento tries loading our module.\"), mdx(\"p\", null, \"To enable the module go to the Magento root and run the command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"cd /var/www/html/magento\\nphp bin/magento module:enable INSTAR_SampleModule\\n\\nThe following modules have been enabled:\\n- INSTAR_SampleModule\\n\\nTo make sure that the enabled modules are properly registered, run 'setup:upgrade'.\\nCache cleared successfully.\\nGenerated classes cleared successfully. Please run the 'setup:di:compile' command to generate classes.\\nInfo: Some modules might require static view files to be cleared. To do this, run 'module:enable' with the --clear-static-content option to clear them.\\n\")), mdx(\"p\", null, \"You can verify that the module is now enabled by:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"cat /var/www/html/magento/app/etc/config.php\\n\\n<?php\\nreturn [\\n    'modules' => [\\n        \\n        ...\\n        \\n        'INSTAR_SampleModule' => 1,\\n\\n        ...\\n    ]\\n];\\n\")), mdx(\"p\", null, \"The order in which modules are listed here, is the order in which they are loaded - modules lower in the list can modify configurations set by earlier modules.\"), mdx(\"p\", null, \"We now have to upgrade our database. The following command will go through all loaded modules and check if changes to the database have to be made:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"php bin/magento setup:upgrade\\n\")), mdx(\"p\", null, \"We can check our database to see if our module was added to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setup_module\"), \" table:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"mysql> USE magento;\\nReading table information for completion of table and column names\\nYou can turn off this feature to get a quicker startup with -A\\n\\nDatabase changed\\nmysql> SELECT * FROM setup_module WHERE module = 'INSTAR_SampleModule';\\n+---------------------+----------------+--------------+\\n| module              | schema_version | data_version |\\n+---------------------+----------------+--------------+\\n| INSTAR_SampleModule | 1.0.0          | 1.0.0        |\\n+---------------------+----------------+--------------+\\n1 row in set (0.00 sec)\\n\")), mdx(\"h2\", {\n    \"id\": \"module-install-scripts\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#module-install-scripts\",\n    \"aria-label\": \"module install scripts permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Module Install Scripts\"), mdx(\"p\", null, \"For installing a database schema and subsequently data for our module, we need to create installation scripts. For this create a folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Setup\"), \" next to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"etc\"), \" folder in your module root directory and add a file called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"InstallSchema.php\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Setup;\\n\\nuse Magento\\\\Framework\\\\Setup\\\\InstallSchemaInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\ModuleContextInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\SchemaSetupInterface;\\nuse Magento\\\\Framework\\\\DB\\\\Ddl\\\\Table;\\n\\nclass InstallSchema implements InstallSchemaInterface\\n{\\n    /**\\n     * {@inheritdoc}\\n     */\\n    public function install(SchemaSetupInterface $setup, ModuleContextInterface $context)\\n    {\\n        $setup->startSetup();\\n\\n        $table = $setup->getConnection()->newTable(\\n            $setup->getTable('instar_sample_item')\\n        )->addColumn(\\n            'id',\\n            Table::TYPE_INTEGER,\\n            null,\\n            ['identity' => true, 'nullable' => false, 'primary' => true],\\n            'Item ID'\\n        )->addColumn(\\n            'name',\\n            Table::TYPE_TEXT,\\n            255,\\n            ['nullable' => false],\\n            'Item Name'\\n        )->addIndex(\\n            $setup->getIdxName('instar_sample_item', ['name']),\\n            ['name']\\n        )->setComment(\\n            'Sample Items'\\n        );\\n        $setup->getConnection()->createTable($table);\\n\\n        $setup->endSetup();\\n    }\\n}\\n\")), mdx(\"p\", null, \"This defines the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"instar_sample_item\"), \" database table for our module - consisting of an integer \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" as primary key and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"name\"), \" of type text with a max. length of 255 characters.\"), mdx(\"p\", null, \"We can now add a second script to fill our new table with some default data for our module. For this create a second file called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"InstallData.php\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Setup;\\n\\nuse Magento\\\\Framework\\\\Setup\\\\InstallDataInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\ModuleContextInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\ModuleDataSetupInterface;\\n\\nclass InstallData implements InstallDataInterface\\n{\\n    /**\\n     * {@inheritdoc}\\n     */\\n    public function install(ModuleDataSetupInterface $setup, ModuleContextInterface $context)\\n    {\\n        $setup->startSetup();\\n\\n        $setup->getConnection()->insert(\\n            $setup->getTable('instar_sample_item'),\\n            [\\n                'name' => 'Item 1'\\n            ]\\n        );\\n\\n        $setup->getConnection()->insert(\\n            $setup->getTable('instar_sample_item'),\\n            [\\n                'name' => 'Item 2'\\n            ]\\n        );\\n\\n        $setup->endSetup();\\n    }\\n}\\n\")), mdx(\"p\", null, \"This will add two items with the names \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Item 1\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Item 2\"), \" to our table. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" field will be created by MySQL automatically.\"), mdx(\"p\", null, \"To try the installation scripts we first have to delete the MySQL table that has already been created in the earlier step:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"DELETE FROM setup_module WHERE module = 'INSTAR_SampleModule';\\n\")), mdx(\"p\", null, \"And re-run the Magento database upgrade script to add the module:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"php bin/magento setup:upgrade\\n\")), mdx(\"p\", null, \"Once the upgrade is done your scripts should have been executed and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"instar_sample_item\"), \" table been created:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"mysql> SELECT * FROM instar_sample_item;\\n+----+--------+\\n| id | name   |\\n+----+--------+\\n|  1 | Item 1 |\\n|  2 | Item 2 |\\n+----+--------+\\n2 rows in set (0.00 sec)\\n\")), mdx(\"h2\", {\n    \"id\": \"module-updates\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#module-updates\",\n    \"aria-label\": \"module updates permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Module Updates\"), mdx(\"p\", null, \"To update our database table during a module update we need to create two more scripts - \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UpgradeSchema.php\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UpgradeData.php\"), \". Let's start with the first:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Setup;\\n\\nuse Magento\\\\Framework\\\\DB\\\\Ddl\\\\Table;\\nuse Magento\\\\Framework\\\\Setup\\\\UpgradeSchemaInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\ModuleContextInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\SchemaSetupInterface;\\n\\nclass UpgradeSchema implements UpgradeSchemaInterface\\n{\\n    /**\\n     * {@inheritdoc}\\n     */\\n    public function upgrade(SchemaSetupInterface $setup, ModuleContextInterface $context)\\n    {\\n        $setup->startSetup();\\n\\n        if (version_compare($context->getVersion(), '1.0.1', '<')) {\\n            $setup->getConnection()->addColumn(\\n                $setup->getTable('instar_sample_item'),\\n                'description',\\n                [\\n                    'type' => Table::TYPE_TEXT,\\n                    'nullable' => true,\\n                    'comment' => 'Item Description'\\n                ]\\n            );\\n        }\\n\\n        $setup->endSetup();\\n    }\\n}\\n\")), mdx(\"p\", null, \"This script extends the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"instar_sample_item\"), \" with an optional column \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"description\"), \" of type text. The script will first check if the installed version is smaller \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1.0.1\"), \" and only add the column if this condition is true.\"), mdx(\"p\", null, \"Now we can add our default data to the new column with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UpgradeData.php\"), \" script:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Setup;\\n\\nuse Magento\\\\Framework\\\\Setup\\\\ModuleContextInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\ModuleDataSetupInterface;\\nuse Magento\\\\Framework\\\\Setup\\\\UpgradeDataInterface;\\n\\nclass UpgradeData implements UpgradeDataInterface\\n{\\n    /**\\n     * {@inheritdoc}\\n     */\\n    public function upgrade(ModuleDataSetupInterface $setup, ModuleContextInterface $context)\\n    {\\n        $setup->startSetup();\\n\\n        if (version_compare($context->getVersion(), '1.0.1', '<')) {\\n            $setup->getConnection()->update(\\n                $setup->getTable('instar_sample_item'),\\n                [\\n                    'description' => 'Default description'\\n                ],\\n                $setup->getConnection()->quoteInto('id = ?', 1)\\n            );\\n        }\\n\\n        $setup->endSetup();\\n    }\\n}\\n\")), mdx(\"p\", null, \"This will add the string \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Default description\"), \" into the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"description\"), \" field of \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Item 1\"), \" (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id=?, 1\"), \"). The second item is not going to receive a default description, which is ok since we defined this field as optional (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"'nullable' => true\"), \"). Again, this script only executes if the installed version is older then version \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1.0.1\"), \".\"), mdx(\"p\", null, \"To simulate that we just updated the code for our module, we need to edit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./etc/module.xml\"), \" file and change the setup version to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1.0.1\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<?xml version=\\\"1.0\\\"?>\\n<config xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"urn:magento:framework:Module/etc/module.xsd\\\">\\n    <module name=\\\"INSTAR_SampleModule\\\" setup_version=\\\"1.0.1\\\">\\n        <sequence>\\n            <module name=\\\"Magento_Catalog\\\"/>\\n        </sequence>\\n    </module>\\n</config>\\n\")), mdx(\"p\", null, \"Now we can re-run the database upgrade script. This time the install scripts won't be executed - only the update scripts should run and add the additional column to our database table \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"instar_sample_item\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"php bin/magento setup:upgrade\\n\")), mdx(\"p\", null, \"We can verify the update by checking the table:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"mysql> SELECT * FROM instar_sample_item;\\n+----+--------+---------------------+\\n| id | name   | description         |\\n+----+--------+---------------------+\\n|  1 | Item 1 | Default description |\\n|  2 | Item 2 | NULL                |\\n+----+--------+---------------------+\\n2 rows in set (0.00 sec)\\n\")), mdx(\"p\", null, \"Or by reading the installed version of our module:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"mysql> SELECT * FROM setup_module WHERE module = 'INSTAR_SampleModule';\\n+---------------------+----------------+--------------+\\n| module              | schema_version | data_version |\\n+---------------------+----------------+--------------+\\n| INSTAR_SampleModule | 1.0.1          | 1.0.1        |\\n+---------------------+----------------+--------------+\\n1 row in set (0.00 sec)\\n\")), mdx(\"h2\", {\n    \"id\": \"model-layer\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#model-layer\",\n    \"aria-label\": \"model layer permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Model Layer\"), mdx(\"p\", null, \"The most basic model is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ResourceModel\"), \" - a model to communicate directly to your database. To create a resource model for your module create the following file in the module root \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Model/ResourceModel/item.php\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Model\\\\ResourceModel;\\n\\nuse Magento\\\\Framework\\\\Model\\\\ResourceModel\\\\Db\\\\AbstractDb;\\n\\nclass Item extends AbstractDb\\n{\\n    protected function _construct()\\n    {\\n        $this->_init('instar_sample_item', 'id');\\n    }\\n}\\n\")), mdx(\"p\", null, \"To create the model we have to add another file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"item.php\"), \" one folder up pointing to our resource model:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Model;\\n\\nuse Magento\\\\Framework\\\\Model\\\\AbstractModel;\\n\\nclass Item extends AbstractModel\\n{\\n    protected function _construct()\\n    {\\n        $this->_init(\\\\INSTAR\\\\SampleModule\\\\Model\\\\ResourceModel\\\\Item::class);\\n    }\\n}\\n\")), mdx(\"p\", null, \"Now we can create a collection inside the resource model in an sub-folder \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Item\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Model\\\\ResourceModel\\\\Item;\\n\\nuse Magento\\\\Framework\\\\Model\\\\ResourceModel\\\\Db\\\\Collection\\\\AbstractCollection;\\nuse INSTAR\\\\SampleModule\\\\Model\\\\Item;\\nuse INSTAR\\\\SampleModule\\\\Model\\\\ResourceModel\\\\Item as ItemResource;\\n\\nclass Collection extends AbstractCollection\\n{\\n    protected $_idFieldName = 'id';\\n\\n    protected function _construct()\\n    {\\n        $this->_init(Item::class, ItemResource::class);\\n    }\\n}\\n\\n\")), mdx(\"h2\", {\n    \"id\": \"controller-layer\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#controller-layer\",\n    \"aria-label\": \"controller layer permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Controller Layer\"), mdx(\"p\", null, \"Let's start by adding routing both for our backend and frontend. For the frontend create the following file inside your module root \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./etc/frontend/routes.xml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<?xml version=\\\"1.0\\\"?>\\n<config xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"urn:magento:framework:App/etc/routes.xsd\\\">\\n    <router id=\\\"standard\\\">\\n        <route id=\\\"instar\\\" frontName=\\\"instar\\\">\\n            <module name=\\\"INSTAR_SampleModule\\\"/>\\n        </route>\\n    </router>\\n</config>\\n\")), mdx(\"p\", null, \"The router ID is set to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"standard\"), \" - this means this route can be accessed on the base URL of your Magento installation \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"my-magento/:frontName\"), \" e.g. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://my-server.com/instar\"), \".\"), mdx(\"p\", null, \"And do the same for your backend routing in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./etc/adminhtml/routes.xml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<?xml version=\\\"1.0\\\"?>\\n<config xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"urn:magento:framework:App/etc/routes.xsd\\\">\\n    <router id=\\\"admin\\\">\\n        <route id=\\\"instar\\\" frontName=\\\"instar\\\">\\n            <module name=\\\"INSTAR_SampleModule\\\"/>\\n        </route>\\n    </router>\\n</config>\\n\")), mdx(\"p\", null, \"The router ID is set to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \" - this means this route can be accessed on the admin URL of your Magento installation \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"my-magento/:adminURL/:frontName\"), \" e.g. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://my-server.com/admin_khf32984/instar\")), mdx(\"p\", null, \"The controller itself is now stored in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./Controller\"), \" in the module root directory. Inside this folder create another directory called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Index\"), \" and add a file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Index.php\"), \" to control our frontend:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Controller\\\\Index;\\n\\nuse Magento\\\\Framework\\\\Controller\\\\ResultFactory;\\n\\nclass Index extends \\\\Magento\\\\Framework\\\\App\\\\Action\\\\Action\\n{\\n    public function execute()\\n    {\\n        /** @var \\\\Magento\\\\Framework\\\\Controller\\\\Result\\\\Raw $result */\\n        $result = $this->resultFactory->create(ResultFactory::TYPE_RAW);\\n        $result->setContents('Hello from the Frontend!');\\n        return $result;\\n    }\\n}\\n\")), mdx(\"p\", null, \"For the backend create another folder right next to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Index\"), \" and add the following file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./Controller/Adminhtml/Index/Index.php\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Controller\\\\Adminhtml\\\\Index;\\n\\nuse Magento\\\\Framework\\\\Controller\\\\ResultFactory;\\n\\nclass Index extends \\\\Magento\\\\Backend\\\\App\\\\Action\\n{\\n    public function execute()\\n    {\\n        /** @var \\\\Magento\\\\Framework\\\\Controller\\\\Result\\\\Raw $result */\\n        $result = $this->resultFactory->create(ResultFactory::TYPE_RAW);\\n        $result->setContents('Hello from the Backend!');\\n        return $result;\\n    }\\n}\\n\")), mdx(\"p\", null, \"Now flush the Magento cache (all XML files are cached by Magento - changing them always requires a flush):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"bin/magento cache:flush\\n\")), mdx(\"p\", null, \"To test that the routing is working we can open the URLs inside our browser:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://my-server/instar\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"http://my-server/instar\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://my-server/admin/instar\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"http://my-server/admin/instar\"))), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note\"), \": a security feature in Magento will prevent you from accessing the Admin URL - for testing purposes you can deactivate this feature (re-activate afterwards):\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"55.46875%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a9f3688d086803b3af62fd2dfd2b8c4e/8d3d1/Magento2_Modules_01.webp 256w\", \"/static/a9f3688d086803b3af62fd2dfd2b8c4e/354cf/Magento2_Modules_01.webp 512w\", \"/static/a9f3688d086803b3af62fd2dfd2b8c4e/44907/Magento2_Modules_01.webp 1024w\", \"/static/a9f3688d086803b3af62fd2dfd2b8c4e/eaef8/Magento2_Modules_01.webp 1187w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a9f3688d086803b3af62fd2dfd2b8c4e/85b06/Magento2_Modules_01.png 256w\", \"/static/a9f3688d086803b3af62fd2dfd2b8c4e/bc282/Magento2_Modules_01.png 512w\", \"/static/a9f3688d086803b3af62fd2dfd2b8c4e/f1720/Magento2_Modules_01.png 1024w\", \"/static/a9f3688d086803b3af62fd2dfd2b8c4e/bba85/Magento2_Modules_01.png 1187w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/a9f3688d086803b3af62fd2dfd2b8c4e/f1720/Magento2_Modules_01.png\",\n    \"alt\": \"Magento 2 Modules\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"16.796875%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b7679133b66072929bbcda5390debb9d/8d3d1/Magento2_Modules_02.webp 256w\", \"/static/b7679133b66072929bbcda5390debb9d/354cf/Magento2_Modules_02.webp 512w\", \"/static/b7679133b66072929bbcda5390debb9d/44907/Magento2_Modules_02.webp 1024w\", \"/static/b7679133b66072929bbcda5390debb9d/7717a/Magento2_Modules_02.webp 1190w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b7679133b66072929bbcda5390debb9d/85b06/Magento2_Modules_02.png 256w\", \"/static/b7679133b66072929bbcda5390debb9d/bc282/Magento2_Modules_02.png 512w\", \"/static/b7679133b66072929bbcda5390debb9d/f1720/Magento2_Modules_02.png 1024w\", \"/static/b7679133b66072929bbcda5390debb9d/33691/Magento2_Modules_02.png 1190w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/b7679133b66072929bbcda5390debb9d/f1720/Magento2_Modules_02.png\",\n    \"alt\": \"Magento 2 Modules\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h2\", {\n    \"id\": \"view-layer\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#view-layer\",\n    \"aria-label\": \"view layer permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"View Layer\"), mdx(\"h3\", {\n    \"id\": \"blocks\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#blocks\",\n    \"aria-label\": \"blocks permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Blocks\"), mdx(\"p\", null, \"The default directory for building blocks is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./Block\"), \" inside your module root. Create this folder and add a file called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello.php\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Block;\\n\\nuse Magento\\\\Framework\\\\View\\\\Element\\\\Template;\\nuse INSTAR\\\\SampleModule\\\\Model\\\\ResourceModel\\\\Item\\\\Collection;\\nuse INSTAR\\\\SampleModule\\\\Model\\\\ResourceModel\\\\Item\\\\CollectionFactory;\\n\\nclass Hello extends Template\\n{\\n    private $collectionFactory;\\n\\n    public function __construct(\\n        Template\\\\Context $context,\\n        CollectionFactory $collectionFactory,\\n        array $data = []\\n    ) {\\n        $this->collectionFactory = $collectionFactory;\\n        parent::__construct($context, $data);\\n    }\\n\\n    /**\\n     * @return \\\\INSTAR\\\\SampleModule\\\\Model\\\\Item[]\\n     */\\n    public function getItems()\\n    {\\n        return $this->collectionFactory->create()->getItems();\\n    }\\n}\\n\")), mdx(\"p\", null, \"This block uses a template that has to be created in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./view/frontend/templates\"), \". Create those folders and add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hello.phtml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n/** @var \\\\INSTAR\\\\SampleModule\\\\Block\\\\Hello $block */\\n?>\\n<?php foreach ($block->getItems() as $item): ?>\\n<p>\\n<?php echo $item->getName(); ?>: <?php echo $item->getDescription(); ?>\\n</p>\\n<?php endforeach; ?>\\n\")), mdx(\"p\", null, \"This template uses our Hello building block that provides the collection of our database table. It then loops over the results and prints the description field of each item inside the table.\"), mdx(\"p\", null, \"Now we have to define where we want to render the output. This will be done in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./view/frontend/layout/instar_index_index.xml\"), \" (the name has to be set by the frontName you set in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./etc/frontend/routes.xml\"), \" \\\"instar\\\",  the controller name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./Controller/Index\"), \" \\\"index\\\", and the action name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./Controller/Index/index.php\"), \" \\\"index\\\" ):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"<?xml version=\\\"1.0\\\"?>\\n<page xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" layout=\\\"1column\\\" xsi:noNamespaceSchemaLocation=\\\"urn:magento:framework:View/Layout/etc/page_configuration.xsd\\\">\\n    <body>\\n        <referenceContainer name=\\\"content\\\">\\n            <block name=\\\"instar_hello\\\" class=\\\"INSTAR\\\\SampleModule\\\\Block\\\\Hello\\\" template=\\\"hello.phtml\\\"/>\\n        </referenceContainer>\\n    </body>\\n</page>\\n\")), mdx(\"p\", null, \"Now flush the Magento cache (all XML files are cached by Magento - changing them always requires a flush):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"bin/magento cache:flush\\n\")), mdx(\"p\", null, \"If you now visit the frontend URL inside your browser \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/instar\"), \", you will see that nothing changed. This because our controller \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Controller/Index/Index.php\"), \" is still set to output RAW data - \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ResultFactory::TYPE_RAW\"), \". This means it will ignore the layout we just created. Let's change that:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-php\"\n  }), \"<?php\\n\\nnamespace INSTAR\\\\SampleModule\\\\Controller\\\\Index;\\n\\nuse Magento\\\\Framework\\\\Controller\\\\ResultFactory;\\n\\nclass Index extends \\\\Magento\\\\Framework\\\\App\\\\Action\\\\Action\\n{\\n    public function execute()\\n    {\\n        return $this->resultFactory->create(ResultFactory::TYPE_PAGE);\\n    }\\n}\\n\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"24.21875%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/65c2dc94dd88ffcdf31e6836b9b20813/8d3d1/Magento2_Modules_03.webp 256w\", \"/static/65c2dc94dd88ffcdf31e6836b9b20813/354cf/Magento2_Modules_03.webp 512w\", \"/static/65c2dc94dd88ffcdf31e6836b9b20813/44907/Magento2_Modules_03.webp 1024w\", \"/static/65c2dc94dd88ffcdf31e6836b9b20813/47118/Magento2_Modules_03.webp 1071w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/65c2dc94dd88ffcdf31e6836b9b20813/85b06/Magento2_Modules_03.png 256w\", \"/static/65c2dc94dd88ffcdf31e6836b9b20813/bc282/Magento2_Modules_03.png 512w\", \"/static/65c2dc94dd88ffcdf31e6836b9b20813/f1720/Magento2_Modules_03.png 1024w\", \"/static/65c2dc94dd88ffcdf31e6836b9b20813/095dc/Magento2_Modules_03.png 1071w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/65c2dc94dd88ffcdf31e6836b9b20813/f1720/Magento2_Modules_03.png\",\n    \"alt\": \"Magento 2 Modules\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Creating Custom Modules Module Install Scripts Module Updates Model Layer Controller Layer View Layer Blocks Creating Custom Modules The…","frontmatter":{"title":"Creating Magento 2 Modules","date":"09/17/2019","categories":["Magento"]},"timeToRead":4,"parent":{"__typename":"File","mtime":"2020-01-24T07:05:42.738Z","birthtime":"2020-01-23T05:15:46.917Z"}}},"pageContext":{"slug":"/creating-magento-2-modules","prev":{"fields":{"slug":"/working-with-sql-dumps"},"frontmatter":{"title":"Working with SQL Dumps","categories":["SQL","Windows"]}},"next":{"fields":{"slug":"/creating-magento-2-cron-jobs"},"frontmatter":{"title":"Creating Magento 2 Cron Jobs","categories":["Magento"]}}}}}