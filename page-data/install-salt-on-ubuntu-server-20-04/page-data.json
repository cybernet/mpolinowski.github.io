{"componentChunkName":"component---src-templates-post-jsx","path":"/install-salt-on-ubuntu-server-20-04","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"date\": \"2020-06-14\",\n  \"title\": \"Install Salt on Ubuntu Server 20.04\",\n  \"categories\": [\"LINUX\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"40.625%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/8d3d1/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.webp 256w\", \"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/354cf/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.webp 512w\", \"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/44907/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.webp 1024w\", \"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/9579c/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.webp 1500w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/b95e4/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.jpg 256w\", \"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/1779b/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.jpg 512w\", \"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/87945/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.jpg 1024w\", \"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/9d81f/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.jpg 1500w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/jpeg\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/68abdd8a6ba0cae08e7050f3ccb98f6c/87945/photo-kt443t6d_64hdh43hfh6dgjdfhg4_d.jpg\",\n    \"alt\": \"Battambang, Cambodia\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#install-salt\"\n  }), \"Install Salt\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#python-37-on-ubuntu-2004\"\n  }), \"Python 3.7 on Ubuntu 20.04\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#salt-bootstrap\"\n  }), \"Salt Bootstrap\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#network-addressing\"\n  }), \"Network Addressing\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#authenticate-minions\"\n  }), \"Authenticate Minions\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#test-connection\"\n  }), \"Test Connection\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#grains\"\n  }), \"Grains\"))), mdx(\"h2\", {\n    \"id\": \"install-salt\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#install-salt\",\n    \"aria-label\": \"install salt permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Install Salt\"), mdx(\"h3\", {\n    \"id\": \"python-37-on-ubuntu-2004\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#python-37-on-ubuntu-2004\",\n    \"aria-label\": \"python 37 on ubuntu 2004 permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Python 3.7 on Ubuntu 20.04\"), mdx(\"p\", null, \"If this is still an issue (Salt not supporting Python 3.8) - install the older version from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://launchpad.net/~deadsnakes/+archive/ubuntu/ppa\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"deadsnakes PPA\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo add-apt-repository ppa:deadsnakes/ppa\\nsudo apt-get update\\nsudo apt-get install python3.7\\n\")), mdx(\"h3\", {\n    \"id\": \"salt-bootstrap\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#salt-bootstrap\",\n    \"aria-label\": \"salt bootstrap permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Salt Bootstrap\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://repo.saltstack.com/#bootstrap\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Salt Bootstrap\"), \" is a configuration script which automatically detects the operating system it\\u2019s running on, sets the correct repositories, and installs Salt. The install script is intended to be run on the Salt master and all minion machines.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Salt Master\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"curl -L https://bootstrap.saltstack.com -o install_salt.sh\\nsudo sh install_salt.sh -P -M -N\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Salt Minion\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"curl -L https://bootstrap.saltstack.com -o install_salt.sh\\nsudo sh install_salt.sh -P\\n\")), mdx(\"h3\", {\n    \"id\": \"network-addressing\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#network-addressing\",\n    \"aria-label\": \"network addressing permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Network Addressing\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Salt Master\")), mdx(\"p\", null, \"You can find the master configuration file here \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/salt/master\"), \". Here we now want to define the interface our server is wirking on. You can uncomment the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#interface:\"), \" line near the top of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/salt/master\"), \" file and replace the address placeholder with the address of your Salt master\\u2019s IP. If all your nodes are located in the same data center, you can use the private IP address.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"# The address of the interface to bind to:\\ninterface: 192.168.2.110\\n\")), mdx(\"p\", null, \"The \\\"cleaner\\\" way to handle this, is to leave the default config unchanged and add your own configuration files to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/salt/master.d\"), \". All \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"*.conf\"), \" files inside this directory will be used by Salt automatically - you can name them according to your needs.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo nano /etc/salt/master.d/local.conf\\n\")), mdx(\"p\", null, \"And add the lines that you need to configure Salt:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-conf\"\n  }), \"# The address of the interface to bind to:\\ninterface: 192.168.2.110\\n\")), mdx(\"p\", null, \"Then restart Salt:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo systemctl restart salt-master\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Salt Minions\")), mdx(\"p\", null, \"To assign a master to your minions you can again uncomment \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#master: salt\"), \" near the top of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/salt/minion\"), \", and replace \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"salt\"), \" with your Salt master\\u2019s IP address. Or add your own config file to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/salt/minion.d\"), \" to override the default settings:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo nano /etc/salt/minion.d/local.conf\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-conf\"\n  }), \"# Set the location of the salt master server. If the master server cannot be\\n# resolved, then the minion will fail to start.\\nmaster: 192.168.2.110\\n\")), mdx(\"h3\", {\n    \"id\": \"authenticate-minions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#authenticate-minions\",\n    \"aria-label\": \"authenticate minions permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Authenticate Minions\"), mdx(\"p\", null, \"From the Salt master, list its key fingerprint, and all Minions linked to it with their key fingerprints:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt-key --finger-all\\n\\nLocal Keys:\\nmaster.pem:  f1:d3:52:eb:f4:52...\\nmaster.pub:  64:12:61:93:3e:09...\\n\")), mdx(\"p\", null, \"Add the Salt Master\\u2019s master.pub fingerprint to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/salt/minion\"), \", between the single quotes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-conf\"\n  }), \"# Fingerprint of the master public key to validate the identity of your Salt master\\n# before the initial key exchange. The master fingerprint can be found by running\\n# \\\"salt-key -f master.pub\\\" on the Salt master.\\nmaster_finger: '64:12:61:93:3e:09...'\\n\")), mdx(\"p\", null, \"And while we are at it - let's give our minion a name:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-conf\"\n  }), \"# Explicitly declare the id for this minion to use, if left commented the id\\n# will be the hostname as returned by the python call: socket.getfqdn()\\n# Since salt uses detached ids it is possible to run multiple minions on the\\n# same machine but with different ids, this can be useful for salt compute\\n# clusters.\\nid: ubuntuAsus\\n\")), mdx(\"p\", null, \"Then restart Salt:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo systemctl restart salt-minion\\n\")), mdx(\"h2\", {\n    \"id\": \"test-connection\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#test-connection\",\n    \"aria-label\": \"test connection permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Test Connection\"), mdx(\"p\", null, \"List the Minion\\u2019s fingerprint hash:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt-call key.finger --local\\n\\nlocal:\\n    6a:1f:19:8e:78:0f:2d...\\n\")), mdx(\"p\", null, \" and verify it with what\\u2019s reported by the Salt Master:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt-key --finger-all\\nLocal Keys:\\nmaster.pem:  f1:d3:52:eb:f4:52...\\nmaster.pub:  64:12:61:93:3e:09...\\nUnaccepted Keys:\\ncentos8.localdomain:  6a:1f:19:8e:78:0f:2d...\\n\")), mdx(\"p\", null, \"Once each Minion ID has been verified, accept them all from the Salt Master:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt-key -a centos8.localdomain  // or accept all: sudo salt-key -A\\n\\nThe following keys are going to be accepted:\\nUnaccepted Keys:\\ncentos8.localdomain\\nProceed? [n/Y] y\\nKey for minion centos8.localdomain accepted.\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Unaccepted keys can be deleted with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"salt-key -d 'minionname'\"), \". To get rid of all Keys from currently disconnected Minions  run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"salt-run manage.down removekeys=True\"), \" \")), mdx(\"p\", null, \"Verify the status of accepted minions. The command below should return the hostname or IP address of each Minion which has been verified and is running:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt-run manage.up\\n\\n- ubuntuAsus\\n\")), mdx(\"p\", null, \"Ping all Minions:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt '*' test.ping\\n\\nubuntuAsus:\\n    True\\n\")), mdx(\"p\", null, \"By using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"*\"), \" you target all accepted Minions on your Salt network. You can also target a specific Minion \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sudo salt -L ubuntuAsus,ubuntuBrix test.ping\"), \".\"), mdx(\"p\", null, \"Target selection options:\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  })), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  })))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-H, --hosts\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"List all known hosts to currently visible or other specified rosters\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-E, --pcre\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target servers, use pcre regular expressions.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-L, --list\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target servers, take a comma or whitespace delimited list of servers.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-G, --grain\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target use a grain value to identify targets, the syntax for the target is the grain key followed by a globexpression: \\\"os:Arch*\\\".\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-P, --grain-pcre\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target use a grain value to identify targets, the syntax for the target is the grain key followed by a pcre regular expression: \\\"os:Arch.*\\\".\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-N, --nodegroup\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target use one of the predefined nodegroups to identify a list of targets.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-R, --range\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target use a range expression to identify targets. Range expressions look like %cluster.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-C, --compound\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"The compound target option allows for multiple target types to be evaluated, allowing for greater granularity in target matching. The compound target is space delimited, targets other than globs are preceded with an identifier matching the specific targets argument type: salt 'G@os:RedHat and webser\", mdx(\"em\", {\n    parentName: \"td\"\n  }, \" or E@database.\"), \"'.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-I, --pillar\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target use a pillar value to identify targets, the syntax for the target is the pillar key followed by a glob expression: \\\"role:production*\\\".\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-J, --pillar-pcre\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Instead of using shell globs to evaluate the target use a pillar value to identify targets, the syntax for the target is the pillar key followed by a pcre regular expression: \\\"role:prod.*\\\".\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"-S, --ipcidr\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Match based on Subnet (CIDR notation) or IP address.\")))), mdx(\"h2\", {\n    \"id\": \"grains\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#grains\",\n    \"aria-label\": \"grains permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Grains\"), mdx(\"p\", null, \"Salt comes with an interface to derive information about the underlying system. This is called the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.saltstack.com/en/latest/topics/grains/index.html\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Grains Interface\"), \", because it presents salt with grains of information. Grains are collected for the operating system, domain name, IP address, kernel, OS type, memory, and many other system properties.\"), mdx(\"p\", null, \"You can list all available grains by running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sudo salt '*' grains.ls\"), \". Or get all available grains for your connected Minions with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sudo salt '*' grains.items\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"ubuntuAsus:\\n    ----------\\n    biosreleasedate:\\n        07/31/2018\\n    biosversion:\\n        0407\\n    cpu_model:\\n        Intel(R) Core(TM) i3-8130U CPU @ 2.20GHz\\n    cpuarch:\\n        x86_64\\n    kernelrelease:\\n        5.4.0-42-generic\\n    kernelversion:\\n        #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020\\n    locale_info:\\n        ----------\\n        defaultencoding:\\n            UTF-8\\n        defaultlanguage:\\n            en_US\\n        detectedencoding:\\n            utf-8\\n        timezone:\\n            UTC\\n    localhost:\\n        ubuntubrix\\n    lsb_distrib_codename:\\n        focal\\n    lsb_distrib_description:\\n        Ubuntu 20.04.1 LTS\\n    lsb_distrib_id:\\n        Ubuntu\\n    lsb_distrib_release:\\n        20.04\\n    machine_id:\\n        b783c83a285f4d4bac05fda96aa96a90\\n    manufacturer:\\n        ASUSTeK COMPUTER INC.\\n    master:\\n        192.168.2.110\\n    mdadm:\\n    mem_total:\\n        7834\\n    nodename:\\n        ubuntubrix\\n    num_cpus:\\n        4\\n    num_gpus:\\n        1\\n    os:\\n        Ubuntu\\n    os_family:\\n        Debian\\n    osarch:\\n        amd64\\n    oscodename:\\n        focal\\n    osfinger:\\n        Ubuntu-20.04\\n    osfullname:\\n        Ubuntu\\n    osmajorrelease:\\n        20\\n    osrelease:\\n        20.04\\n    osrelease_info:\\n        - 20\\n        - 4\\n    username:\\n        root\\n    virtual:\\n        physical\\n    zfs_feature_flags:\\n        False\\n    zfs_support:\\n        False\\n    zmqversion:\\n        4.3.2\\n\")), mdx(\"p\", null, \"To target Minions by grains use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-G\"), \" flag:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt -G os:Ubuntu test.ping\\nubuntuAsus:\\n    True\\n\")), mdx(\"p\", null, \"We can also build this request as a compound command with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-C\"), \" flag - ping all Minions that run Ubuntu and have an ID that starts with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ubuntu\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo salt -C 'G@os:Ubuntu and ubuntu*' test.ping\\nubuntuAsus:\\n    True\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Install Salt Python 3.7 on Ubuntu 20.04 Salt Bootstrap Network Addressing Authenticate Minions Test Connection Grains Install Salt Python…","frontmatter":{"title":"Install Salt on Ubuntu Server 20.04","date":"06/14/2020","categories":["LINUX"]},"timeToRead":2,"parent":{"__typename":"File","mtime":"2020-08-03T09:57:37.930Z","birthtime":"2020-08-01T14:36:42.486Z"}}},"pageContext":{"slug":"/install-salt-on-ubuntu-server-20-04","prev":{"fields":{"slug":"/setting-up-wiki-js-in-docker"},"frontmatter":{"title":"Setting up WikiJS in Docker","categories":["Databases","Docker"]}},"next":{"fields":{"slug":"/salty-dev-ops"},"frontmatter":{"title":"Salty DevOps","categories":["LINUX"]}}}},"staticQueryHashes":["2658404678"]}