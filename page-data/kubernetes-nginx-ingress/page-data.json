{"componentChunkName":"component---src-templates-post-js","path":"/kubernetes-nginx-ingress","webpackCompilationHash":"ef838803dd784fa9098a","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"date\": \"2019-01-22\",\n  \"title\": \"Kubernetes NGINX Ingress\",\n  \"categories\": [\"LINUX\", \"Docker\", \"Kubernetes\", \"NGINX\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"43.134171907756816%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/632356ef9bf974ad113163bedbf15fd0/a9925/photo-34607488365_9f40aafb01_o.webp 256w\", \"/static/632356ef9bf974ad113163bedbf15fd0/5406f/photo-34607488365_9f40aafb01_o.webp 512w\", \"/static/632356ef9bf974ad113163bedbf15fd0/ae385/photo-34607488365_9f40aafb01_o.webp 1024w\", \"/static/632356ef9bf974ad113163bedbf15fd0/4c9c6/photo-34607488365_9f40aafb01_o.webp 1536w\", \"/static/632356ef9bf974ad113163bedbf15fd0/69da7/photo-34607488365_9f40aafb01_o.webp 1908w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/632356ef9bf974ad113163bedbf15fd0/68367/photo-34607488365_9f40aafb01_o.jpg 256w\", \"/static/632356ef9bf974ad113163bedbf15fd0/d763f/photo-34607488365_9f40aafb01_o.jpg 512w\", \"/static/632356ef9bf974ad113163bedbf15fd0/4c7b4/photo-34607488365_9f40aafb01_o.jpg 1024w\", \"/static/632356ef9bf974ad113163bedbf15fd0/b240b/photo-34607488365_9f40aafb01_o.jpg 1536w\", \"/static/632356ef9bf974ad113163bedbf15fd0/b8ea2/photo-34607488365_9f40aafb01_o.jpg 1908w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/jpeg\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/632356ef9bf974ad113163bedbf15fd0/4c7b4/photo-34607488365_9f40aafb01_o.jpg\",\n    \"alt\": \"Malekula, Vanuatu\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#how-to-use-nginx-ingress-controller\"\n  }), \"How to Use Nginx Ingress Controller\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#creating-the-resources-for-nginx-ingress\"\n  }), \"Creating the resources for Nginx Ingress\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#creating-the-load-balancing-service\"\n  }), \"Creating the Load Balancing Service\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#create-two-web-apps-to-respond-to-the-incoming-traffic\"\n  }), \"Create two Web Apps to Respond to the incoming Traffic\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#creating-the-ingress\"\n  }), \"Creating the Ingress\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#testing-the-ingress\"\n  }), \"Testing the Ingress\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#adding-a-nodejs--expressjs-web-app\"\n  }), \"Adding a Node.js / Express.js Web App\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#preparing-the-nginx-ingress\"\n  }), \"Preparing the NGINX Ingress\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#it-could-be-so-easy-but\"\n  }), \"It could be so easy, but...\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#adding-tls\"\n  }), \"Adding TLS\"))), mdx(\"p\", null, \"An \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.github.io/ingress-nginx/deploy/#generic-deployment\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Ingress\"), \" is an application that allows you to access your Kubernetes services from outside the Kubernetes cluster. This lets you consolidate your routing rules into a single resource, e.g.:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"mydomain.com/api/web/ leads to an api service for your web application\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"mydomain.com/api/mobile/ leads to an api-v2 service for the mobile access\")), mdx(\"p\", null, \"The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Ingress\"), \" enables you make your services available \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"without\"), \" having to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"LoadBalancers\"), \" (only available on Cloud solutions like AWS, GCE, Azure...) or exposing each service on the Node (\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/concepts/services-networking/service/#nodeport\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"NodePort\"), \"). Making this the ideal solution for an on-premise hosting of an Kubernetes Cluster.\"), mdx(\"p\", null, \"Popular Ingress Controllers include:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/kubernetes/ingress-nginx/blob/master/README.md\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Nginx\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/heptio/contour\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Contour\"), \" \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.haproxy.com/blog/haproxy_ingress_controller_for_kubernetes/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"HAProxy\"), \" \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/containous/traefik\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Traefik\"))), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.625%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/babcd17319269019dca0222fddd9a847/a9925/kubernetes-ingress_01.webp 256w\", \"/static/babcd17319269019dca0222fddd9a847/5406f/kubernetes-ingress_01.webp 512w\", \"/static/babcd17319269019dca0222fddd9a847/32a6f/kubernetes-ingress_01.webp 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/babcd17319269019dca0222fddd9a847/2c438/kubernetes-ingress_01.png 256w\", \"/static/babcd17319269019dca0222fddd9a847/53eb4/kubernetes-ingress_01.png 512w\", \"/static/babcd17319269019dca0222fddd9a847/04ff3/kubernetes-ingress_01.png 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/babcd17319269019dca0222fddd9a847/04ff3/kubernetes-ingress_01.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h2\", {\n    \"id\": \"how-to-use-nginx-ingress-controller\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#how-to-use-nginx-ingress-controller\",\n    \"aria-label\": \"how to use nginx ingress controller permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"How to Use Nginx Ingress Controller\"), mdx(\"h3\", {\n    \"id\": \"creating-the-resources-for-nginx-ingress\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#creating-the-resources-for-nginx-ingress\",\n    \"aria-label\": \"creating the resources for nginx ingress permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Creating the resources for Nginx Ingress\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/mandatory.yaml\\n\")), mdx(\"p\", null, \"Or create the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"mandatory.yaml\"), \" file locally and create the prerequisites with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f mandatory.yaml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Namespace\\nmetadata:\\n  name: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\n\\n---\\n\\nkind: ConfigMap\\napiVersion: v1\\nmetadata:\\n  name: nginx-configuration\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\n\\n---\\nkind: ConfigMap\\napiVersion: v1\\nmetadata:\\n  name: tcp-services\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\n\\n---\\nkind: ConfigMap\\napiVersion: v1\\nmetadata:\\n  name: udp-services\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\n\\n---\\napiVersion: v1\\nkind: ServiceAccount\\nmetadata:\\n  name: nginx-ingress-serviceaccount\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\n\\n---\\napiVersion: rbac.authorization.k8s.io/v1beta1\\nkind: ClusterRole\\nmetadata:\\n  name: nginx-ingress-clusterrole\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\nrules:\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - configmaps\\n      - endpoints\\n      - nodes\\n      - pods\\n      - secrets\\n    verbs:\\n      - list\\n      - watch\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - nodes\\n    verbs:\\n      - get\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - services\\n    verbs:\\n      - get\\n      - list\\n      - watch\\n  - apiGroups:\\n      - \\\"extensions\\\"\\n    resources:\\n      - ingresses\\n    verbs:\\n      - get\\n      - list\\n      - watch\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - events\\n    verbs:\\n      - create\\n      - patch\\n  - apiGroups:\\n      - \\\"extensions\\\"\\n    resources:\\n      - ingresses/status\\n    verbs:\\n      - update\\n\\n---\\napiVersion: rbac.authorization.k8s.io/v1beta1\\nkind: Role\\nmetadata:\\n  name: nginx-ingress-role\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\nrules:\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - configmaps\\n      - pods\\n      - secrets\\n      - namespaces\\n    verbs:\\n      - get\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - configmaps\\n    resourceNames:\\n      # Defaults to \\\"<election-id>-<ingress-class>\\\"\\n      # Here: \\\"<ingress-controller-leader>-<nginx>\\\"\\n      # This has to be adapted if you change either parameter\\n      # when launching the nginx-ingress-controller.\\n      - \\\"ingress-controller-leader-nginx\\\"\\n    verbs:\\n      - get\\n      - update\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - configmaps\\n    verbs:\\n      - create\\n  - apiGroups:\\n      - \\\"\\\"\\n    resources:\\n      - endpoints\\n    verbs:\\n      - get\\n\\n---\\napiVersion: rbac.authorization.k8s.io/v1beta1\\nkind: RoleBinding\\nmetadata:\\n  name: nginx-ingress-role-nisa-binding\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\nroleRef:\\n  apiGroup: rbac.authorization.k8s.io\\n  kind: Role\\n  name: nginx-ingress-role\\nsubjects:\\n  - kind: ServiceAccount\\n    name: nginx-ingress-serviceaccount\\n    namespace: ingress-nginx\\n\\n---\\napiVersion: rbac.authorization.k8s.io/v1beta1\\nkind: ClusterRoleBinding\\nmetadata:\\n  name: nginx-ingress-clusterrole-nisa-binding\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\nroleRef:\\n  apiGroup: rbac.authorization.k8s.io\\n  kind: ClusterRole\\n  name: nginx-ingress-clusterrole\\nsubjects:\\n  - kind: ServiceAccount\\n    name: nginx-ingress-serviceaccount\\n    namespace: ingress-nginx\\n\\n---\\n\\napiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  name: nginx-ingress-controller\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\nspec:\\n  replicas: 1\\n  selector:\\n    matchLabels:\\n      app.kubernetes.io/name: ingress-nginx\\n      app.kubernetes.io/part-of: ingress-nginx\\n  template:\\n    metadata:\\n      labels:\\n        app.kubernetes.io/name: ingress-nginx\\n        app.kubernetes.io/part-of: ingress-nginx\\n      annotations:\\n        prometheus.io/port: \\\"10254\\\"\\n        prometheus.io/scrape: \\\"true\\\"\\n    spec:\\n      serviceAccountName: nginx-ingress-serviceaccount\\n      containers:\\n        - name: nginx-ingress-controller\\n          image: quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.23.0\\n          args:\\n            - /nginx-ingress-controller\\n            - --configmap=$(POD_NAMESPACE)/nginx-configuration\\n            - --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services\\n            - --udp-services-configmap=$(POD_NAMESPACE)/udp-services\\n            - --publish-service=$(POD_NAMESPACE)/ingress-nginx\\n            - --annotations-prefix=nginx.ingress.kubernetes.io\\n          securityContext:\\n            allowPrivilegeEscalation: true\\n            capabilities:\\n              drop:\\n                - ALL\\n              add:\\n                - NET_BIND_SERVICE\\n            # www-data -> 33\\n            runAsUser: 33\\n          env:\\n            - name: POD_NAME\\n              valueFrom:\\n                fieldRef:\\n                  fieldPath: metadata.name\\n            - name: POD_NAMESPACE\\n              valueFrom:\\n                fieldRef:\\n                  fieldPath: metadata.namespace\\n          ports:\\n            - name: http\\n              containerPort: 80\\n            - name: https\\n              containerPort: 443\\n          livenessProbe:\\n            failureThreshold: 3\\n            httpGet:\\n              path: /healthz\\n              port: 10254\\n              scheme: HTTP\\n            initialDelaySeconds: 10\\n            periodSeconds: 10\\n            successThreshold: 1\\n            timeoutSeconds: 10\\n          readinessProbe:\\n            failureThreshold: 3\\n            httpGet:\\n              path: /healthz\\n              port: 10254\\n              scheme: HTTP\\n            periodSeconds: 10\\n            successThreshold: 1\\n            timeoutSeconds: 10\\n\\n---\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"794px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"27.329974811083126%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a3557a3239b7efb896e0e5cb9f7b0f7d/a9925/kubernetes-ingress_02.webp 256w\", \"/static/a3557a3239b7efb896e0e5cb9f7b0f7d/5406f/kubernetes-ingress_02.webp 512w\", \"/static/a3557a3239b7efb896e0e5cb9f7b0f7d/0f1b1/kubernetes-ingress_02.webp 794w\"],\n    \"sizes\": \"(max-width: 794px) 100vw, 794px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a3557a3239b7efb896e0e5cb9f7b0f7d/2c438/kubernetes-ingress_02.png 256w\", \"/static/a3557a3239b7efb896e0e5cb9f7b0f7d/53eb4/kubernetes-ingress_02.png 512w\", \"/static/a3557a3239b7efb896e0e5cb9f7b0f7d/92b66/kubernetes-ingress_02.png 794w\"],\n    \"sizes\": \"(max-width: 794px) 100vw, 794px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/a3557a3239b7efb896e0e5cb9f7b0f7d/92b66/kubernetes-ingress_02.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h3\", {\n    \"id\": \"creating-the-load-balancing-service\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#creating-the-load-balancing-service\",\n    \"aria-label\": \"creating the load balancing service permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Creating the Load Balancing Service\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/provider/baremetal/service-nodeport.yaml\\n\")), mdx(\"p\", null, \"Or again, create the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"nodeport-ingress-service.yaml\"), \" file locally and create the Ingress service with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f nodeport-ingress-service.yaml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Service\\nmetadata:\\n  name: ingress-nginx\\n  namespace: ingress-nginx\\n  labels:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\nspec:\\n  type: NodePort\\n  ports:\\n    - name: http\\n      port: 80\\n      targetPort: 80\\n      protocol: TCP\\n    - name: https\\n      port: 443\\n      targetPort: 443\\n      protocol: TCP\\n  selector:\\n    app.kubernetes.io/name: ingress-nginx\\n    app.kubernetes.io/part-of: ingress-nginx\\n  externalIPs:\\n    - <add the IP address of your Kubernetes Master here>\\n---\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"I am using the Kubernetes cluster on an on-premise cloud service that does not provide a LoadBalancer. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.github.io/ingress-nginx/deploy/baremetal/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Bare-Metal\"), \" solution is something I am working towards, but did implement yet. So this is an old-school DIY cluster and for some reasons the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.github.io/ingress-nginx/deploy/#docker-for-mac\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"official documentation\"), \" lead me to a situation where I did not get an IP address on my Ingress service. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://qiita.com/soumi/items/c6358e5e859004c2961c\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"The solution\"), \" that I found was to add my external IP (this is the WAN IP of my Kubernetes Master - e.g. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"externalIPs: 172.56.4.112\"), \" - if you install another server in-front of your cluster on the local area network, you should also be able to use the LAN address of your Master here instead - avoiding exposing your cluster directly to the internet) to the service configuration above. Afterwards I was able to access the apps behind this service through this IP address - see below.\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"804px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"6.467661691542288%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b64bc08309bf02c442a4d5062f8500be/a9925/kubernetes-ingress_03.webp 256w\", \"/static/b64bc08309bf02c442a4d5062f8500be/5406f/kubernetes-ingress_03.webp 512w\", \"/static/b64bc08309bf02c442a4d5062f8500be/d031a/kubernetes-ingress_03.webp 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b64bc08309bf02c442a4d5062f8500be/2c438/kubernetes-ingress_03.png 256w\", \"/static/b64bc08309bf02c442a4d5062f8500be/53eb4/kubernetes-ingress_03.png 512w\", \"/static/b64bc08309bf02c442a4d5062f8500be/997f5/kubernetes-ingress_03.png 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/b64bc08309bf02c442a4d5062f8500be/997f5/kubernetes-ingress_03.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"p\", null, \"This has set up the Nginx Ingress Controller - you can check that it is running with the following command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl get pods --namespace ingress-nginx\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"810px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"7.777777777777778%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/5d9c3bf116194bbe9655632a8a3eed76/a9925/kubernetes-ingress_04.webp 256w\", \"/static/5d9c3bf116194bbe9655632a8a3eed76/5406f/kubernetes-ingress_04.webp 512w\", \"/static/5d9c3bf116194bbe9655632a8a3eed76/62ed5/kubernetes-ingress_04.webp 810w\"],\n    \"sizes\": \"(max-width: 810px) 100vw, 810px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/5d9c3bf116194bbe9655632a8a3eed76/2c438/kubernetes-ingress_04.png 256w\", \"/static/5d9c3bf116194bbe9655632a8a3eed76/53eb4/kubernetes-ingress_04.png 512w\", \"/static/5d9c3bf116194bbe9655632a8a3eed76/29038/kubernetes-ingress_04.png 810w\"],\n    \"sizes\": \"(max-width: 810px) 100vw, 810px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/5d9c3bf116194bbe9655632a8a3eed76/29038/kubernetes-ingress_04.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h3\", {\n    \"id\": \"create-two-web-apps-to-respond-to-the-incoming-traffic\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#create-two-web-apps-to-respond-to-the-incoming-traffic\",\n    \"aria-label\": \"create two web apps to respond to the incoming traffic permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Create two Web Apps to Respond to the incoming Traffic\"), mdx(\"p\", null, \"Now, we can create Ingress resources in our Kubernetes cluster and route external requests to our services. For this we need two services that represent the Ingress routes for our requests. To test this, we can use two web applications that just echo a string, when they receive an HTTP GET command:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"web-echo.yaml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"kind: Pod\\napiVersion: v1\\nmetadata:\\n  name: web-app\\n  labels:\\n    app: web\\nspec:\\n  containers:\\n    - name: web-app\\n      image: hashicorp/http-echo\\n      args:\\n        - \\\"-text=I am the Web API\\\"\\n\\n---\\n\\nkind: Service\\napiVersion: v1\\nmetadata:\\n  name: web-service\\nspec:\\n  selector:\\n    app: web\\n  ports:\\n    - port: 5678\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"mobile-echo.yaml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"kind: Pod\\napiVersion: v1\\nmetadata:\\n  name: mobile-app\\n  labels:\\n    app: mobile\\nspec:\\n  containers:\\n    - name: mobile-app\\n      image: hashicorp/http-echo\\n      args:\\n        - \\\"-text=I am the Mobile API\\\"\\n\\n---\\n\\nkind: Service\\napiVersion: v1\\nmetadata:\\n  name: mobile-service\\nspec:\\n  selector:\\n    app: mobile\\n  ports:\\n    - port: 5678\\n\")), mdx(\"p\", null, \"Create those two YAML files and create those apps in Kubernetes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl apply -f web-echo.yaml\\nkubectl apply -f mobile-echo.yaml\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"810px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"16.666666666666664%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/63bb50635cbb499a72fc6f47b33216a1/a9925/kubernetes-ingress_05.webp 256w\", \"/static/63bb50635cbb499a72fc6f47b33216a1/5406f/kubernetes-ingress_05.webp 512w\", \"/static/63bb50635cbb499a72fc6f47b33216a1/62ed5/kubernetes-ingress_05.webp 810w\"],\n    \"sizes\": \"(max-width: 810px) 100vw, 810px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/63bb50635cbb499a72fc6f47b33216a1/2c438/kubernetes-ingress_05.png 256w\", \"/static/63bb50635cbb499a72fc6f47b33216a1/53eb4/kubernetes-ingress_05.png 512w\", \"/static/63bb50635cbb499a72fc6f47b33216a1/29038/kubernetes-ingress_05.png 810w\"],\n    \"sizes\": \"(max-width: 810px) 100vw, 810px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/63bb50635cbb499a72fc6f47b33216a1/29038/kubernetes-ingress_05.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h3\", {\n    \"id\": \"creating-the-ingress\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#creating-the-ingress\",\n    \"aria-label\": \"creating the ingress permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Creating the Ingress\"), mdx(\"p\", null, \"Now we need to declare an Ingress to route requests to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/web\"), \" to the first service, and requests to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/mobile\"), \" to second:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"nginx-ingress.yaml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: extensions/v1beta1\\nkind: Ingress\\nmetadata:\\n  name: nginx-ingress\\n  annotations:\\n    ingress.kubernetes.io/rewrite-target: /\\nspec:\\n  rules:\\n  - http:\\n      paths:\\n        - path: /web\\n          backend:\\n            serviceName: web-service\\n            servicePort: 5678\\n        - path: /mobile\\n          backend:\\n            serviceName: mobile-service\\n            servicePort: 5678\\n\")), mdx(\"p\", null, \"Create the Ingress using the Kubernetes command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl create -f nginx-ingress.yaml\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"813px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"7.626076260762607%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c0560ef65a606ede5bd3a3394a8a31de/a9925/kubernetes-ingress_06.webp 256w\", \"/static/c0560ef65a606ede5bd3a3394a8a31de/5406f/kubernetes-ingress_06.webp 512w\", \"/static/c0560ef65a606ede5bd3a3394a8a31de/78c9c/kubernetes-ingress_06.webp 813w\"],\n    \"sizes\": \"(max-width: 813px) 100vw, 813px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c0560ef65a606ede5bd3a3394a8a31de/2c438/kubernetes-ingress_06.png 256w\", \"/static/c0560ef65a606ede5bd3a3394a8a31de/53eb4/kubernetes-ingress_06.png 512w\", \"/static/c0560ef65a606ede5bd3a3394a8a31de/1b3e5/kubernetes-ingress_06.png 813w\"],\n    \"sizes\": \"(max-width: 813px) 100vw, 813px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/c0560ef65a606ede5bd3a3394a8a31de/1b3e5/kubernetes-ingress_06.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h2\", {\n    \"id\": \"testing-the-ingress\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#testing-the-ingress\",\n    \"aria-label\": \"testing the ingress permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Testing the Ingress\"), mdx(\"p\", null, \"You should now be able to see that the service was created with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get svc --namespace=ingress-nginx\"), \" and access your two apps via the WAN IP of your Kubernetes Master (see remark above about the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"externalIP\"), \"):\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"806px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"43.05210918114144%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/adbb165466d8414ad07263d4a82f1677/a9925/kubernetes-ingress_07.webp 256w\", \"/static/adbb165466d8414ad07263d4a82f1677/5406f/kubernetes-ingress_07.webp 512w\", \"/static/adbb165466d8414ad07263d4a82f1677/f9159/kubernetes-ingress_07.webp 806w\"],\n    \"sizes\": \"(max-width: 806px) 100vw, 806px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/adbb165466d8414ad07263d4a82f1677/2c438/kubernetes-ingress_07.png 256w\", \"/static/adbb165466d8414ad07263d4a82f1677/53eb4/kubernetes-ingress_07.png 512w\", \"/static/adbb165466d8414ad07263d4a82f1677/8a374/kubernetes-ingress_07.png 806w\"],\n    \"sizes\": \"(max-width: 806px) 100vw, 806px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/adbb165466d8414ad07263d4a82f1677/8a374/kubernetes-ingress_07.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"h2\", {\n    \"id\": \"adding-a-nodejs--expressjs-web-app\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#adding-a-nodejs--expressjs-web-app\",\n    \"aria-label\": \"adding a nodejs  expressjs web app permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Adding a Node.js / Express.js Web App\"), mdx(\"p\", null, \"We \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://mpolinowski.github.io/express-generator-dockerrized/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"earlier created\"), \" a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://nodejs.org/en/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Node.js\"), \" Web App that uses \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://expressjs.com/en/starter/static-files.html\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Express.js\"), \" to host web content and wrapped it into an Docker container. I want to try to add this docker image and use the web app behind the NGINX Ingress.\"), mdx(\"p\", null, \"For this app we used the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://expressjs.com/en/starter/generator.html\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Express Generator\"), \" to scaffold a simple website that consist of 2 pages - one hosted on the app root \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \", the other one under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/users\"), \" - \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/mpolinowski/docker-node-express\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Github Repository\"), \". This was set up inside the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"app.js\"), \" file the following way:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"var indexRouter = require('./routes/index');\\nvar usersRouter = require('./routes/users');\\n\\n...\\n\\n\\napp.use('/', indexRouter);\\napp.use('/users', usersRouter);\\n\")), mdx(\"p\", null, \"We are importing a router that is responsible for a specific route. The router itself - e.g. in case of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/users\"), \" route just replies with a string once sends a GET:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"var express = require('express');\\nvar router = express.Router();\\n\\n/* GET users listing. */\\nrouter.get('/', function(req, res, next) {\\n  res.send('User Login');\\n});\\n\\nmodule.exports = router;\\n\")), mdx(\"h3\", {\n    \"id\": \"preparing-the-nginx-ingress\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#preparing-the-nginx-ingress\",\n    \"aria-label\": \"preparing the nginx ingress permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Preparing the NGINX Ingress\"), mdx(\"p\", null, \"We can now add the app to our Ingress configuration as follows:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"nginx-ingress.yaml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: extensions/v1beta1\\nkind: Ingress\\nmetadata:\\n  name: nginx-ingress\\n  annotations:\\n    ingress.kubernetes.io/rewrite-target: /\\nspec:\\n  rules:\\n  - http:\\n      paths:\\n        - path: /web\\n          backend:\\n            serviceName: web-service\\n            servicePort: 5678\\n        - path: /mobile\\n          backend:\\n            serviceName: mobile-service\\n            servicePort: 5678\\n        - path: /test\\n          backend:\\n            serviceName: test-service\\n            servicePort: 3000\\n\")), mdx(\"p\", null, \"We just added a third route to the Ingress on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/test\"), \" and assigned the service port that our Express app is running on - the port for the app is defined in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".\\\\bin\\\\www\"), \" :\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"var port = normalizePort(process.env.PORT || '3000');\\n\")), mdx(\"p\", null, \"Great now we could push the app to Docker Hub - e.g. to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"mpolinowski/docker-node-express\"), \" - and create the following Pod and Service configuration for it:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"kind: Pod\\napiVersion: v1\\nmetadata:\\n  name: web-app\\n  labels:\\n    app: web\\nspec:\\n  containers:\\n    - name: web-app\\n      image: mpolinowski/docker-node-express\\n      ports:\\n        - containerPort: 3000\\n\\n---\\n\\nkind: Service\\napiVersion: v1\\nmetadata:\\n  name: web-service\\nspec:\\n  selector:\\n    app: web\\n  ports:\\n    - port: 3000\\n\")), mdx(\"p\", null, \"And run it and access our app on the Master servers WAN IP with the URL \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/test\"), \" ....\"), mdx(\"h3\", {\n    \"id\": \"it-could-be-so-easy-but\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#it-could-be-so-easy-but\",\n    \"aria-label\": \"it could be so easy but permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"It could be so easy, but...\"), mdx(\"p\", null, \"You will get a 404 from NGINX - the Ingress is working (good!), but there is nothing hosting on that URL. What went wrong here is the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path Prefix\"), \" is messing with our app routing. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/test\"), \" should lead us to the root of our web app - at least that is what I expected (this is how the router in Express.js works). But Ingress just recognizes that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/test\"), \" belongs to our web app and then routes \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/test\"), \" to it. Since we only have the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/users\"), \" route defined, this leads us to a 404 from NGINX.\"), mdx(\"p\", null, \"To fix this, we have to go back to the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"app.js\"), \" of our web app and add the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Path Prefix\"), \" to every route:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"app.use('/test', indexRouter);\\napp.use('/test/users', usersRouter);\\n\")), mdx(\"p\", null, \"Now rebuilding the Docker image, re-uploading it to Docker Hub and restarting the image in Kubernetes gives us the result we needed:\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"802px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"24.43890274314214%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0px\",\n      \"left\": \"0px\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/91773f79ab22d76bccddc556162aac16/a9925/kubernetes-ingress_08.webp 256w\", \"/static/91773f79ab22d76bccddc556162aac16/5406f/kubernetes-ingress_08.webp 512w\", \"/static/91773f79ab22d76bccddc556162aac16/91278/kubernetes-ingress_08.webp 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/91773f79ab22d76bccddc556162aac16/2c438/kubernetes-ingress_08.png 256w\", \"/static/91773f79ab22d76bccddc556162aac16/53eb4/kubernetes-ingress_08.png 512w\", \"/static/91773f79ab22d76bccddc556162aac16/ed94e/kubernetes-ingress_08.png 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0px\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/91773f79ab22d76bccddc556162aac16/ed94e/kubernetes-ingress_08.png\",\n    \"alt\": \"NGINX Ingress for your Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"p\", null, \"We added the NGINX Ingress to our Kubernetes cluster and used NGINX to proxy three web apps that can now be reached over the internet under the routes \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Cluster WAN IP>\\\\web\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Cluster WAN IP>\\\\mobile\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Cluster WAN IP>\\\\test\")), mdx(\"h2\", {\n    \"id\": \"adding-tls\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#adding-tls\",\n    \"aria-label\": \"adding tls permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Adding TLS\"), mdx(\"p\", null, \"You can create a certificate for your domain using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://certbot.eff.org\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Certbot\"), \". This will create two files that we need to add as a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"secret\"), \" to Kubernetes - \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"privkey.pem\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fullchain.pem\"), \". Both files can be found under \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"/etc/letsencrypt/live/my.domain.com\"), \" and be added with the following command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl create secret tls my-secret --key ./privkey.pem --cert ./fullchain.pem\\n\")), mdx(\"p\", null, \"And change the Ingress configuration to use the certificate:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"nginx-ingress.yaml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: extensions/v1beta1\\nkind: Ingress\\nmetadata:\\n  name: nginx-ingress\\n  annotations:\\n    ingress.kubernetes.io/rewrite-target: /\\nspec:\\n  tls:\\n  - hosts:\\n    - my.domain.com\\n    secretName: my-domain-secret\\n  rules:\\n  - host: my.domain.com\\n    http:\\n      paths:\\n        - path: /web\\n          backend:\\n            serviceName: web-service\\n            servicePort: 5678\\n        - path: /mobile\\n          backend:\\n            serviceName: mobile-service\\n            servicePort: 5678\\n        - path: /test\\n          backend:\\n            serviceName: test-service\\n            servicePort: 3000\\n\")));\n}\nMDXContent.isMDXComponent = true;","excerpt":"How to Use Nginx Ingress Controller Creating the resources for Nginx Ingress Creating the Load Balancing Service Create two Web Apps to…","frontmatter":{"title":"Kubernetes NGINX Ingress","date":"01/22/2019","categories":["LINUX","Docker","Kubernetes","NGINX"]},"timeToRead":4,"parent":{"__typename":"File","mtime":"2019-07-07T14:55:07.734Z","birthtime":"2019-07-07T14:19:36.792Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/kubernetes-nginx-ingress","prev":{"fields":{"slug":"/kubernetes-bare-metal-ingress"},"frontmatter":{"title":"Kubernetes Bare Metal Ingress","categories":["LINUX","Docker","Kubernetes"]}},"next":{"fields":{"slug":"/kubernetes-the-chinese-way"},"frontmatter":{"title":"Kubernetes the Chinese Way","categories":["LINUX","Docker","Kubernetes"]}}}}}