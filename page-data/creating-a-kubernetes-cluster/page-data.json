{"componentChunkName":"component---src-templates-post-jsx","path":"/creating-a-kubernetes-cluster","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"date\": \"2019-01-15\",\n  \"title\": \"Creating a Kubernetes Cluster\",\n  \"categories\": [\"LINUX\", \"Docker\", \"Kubernetes\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"45.1271186440678%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/3ab587ce485b29f47f37ae231348ba9a/8d3d1/photo-34219553960_350f18edbb_o.webp 256w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/354cf/photo-34219553960_350f18edbb_o.webp 512w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/44907/photo-34219553960_350f18edbb_o.webp 1024w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/a8642/photo-34219553960_350f18edbb_o.webp 1536w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/705b1/photo-34219553960_350f18edbb_o.webp 2048w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/81662/photo-34219553960_350f18edbb_o.webp 2832w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/3ab587ce485b29f47f37ae231348ba9a/b1806/photo-34219553960_350f18edbb_o.png 256w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/7572d/photo-34219553960_350f18edbb_o.png 512w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/9e490/photo-34219553960_350f18edbb_o.png 1024w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/2e81d/photo-34219553960_350f18edbb_o.png 1536w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/7e741/photo-34219553960_350f18edbb_o.png 2048w\", \"/static/3ab587ce485b29f47f37ae231348ba9a/ca322/photo-34219553960_350f18edbb_o.png 2832w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/3ab587ce485b29f47f37ae231348ba9a/9e490/photo-34219553960_350f18edbb_o.png\",\n    \"alt\": \"Shanghai, China\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"p\", null, \"In this hands-on lab from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://linuxacademy.com/cp\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Linux Academy\"), \", we will install and configure a Kubernetes cluster consisting of 1 master and 2 nodes for the pods. Once the installation and configuration are complete, we will have a 3-node Kubernetes cluster that uses Flannel as the network overlay.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#instructions\"\n  }), \"Instructions\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#objectives\"\n  }), \"Objectives\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#install-docker-and-kubernetes\"\n  }), \"Install Docker and Kubernetes\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#prerequisites\"\n  }), \"Prerequisites\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#install-docker-ce\"\n  }), \"Install Docker CE\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#install-kubernetes\"\n  }), \"Install Kubernetes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#start-docker-and-kublet\"\n  }), \"Start Docker and Kublet\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#cluster-initialization\"\n  }), \"Cluster Initialization\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#installing-a-pod-network-add-on\"\n  }), \"Installing a Pod Network Add-on\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#check-the-cluster-state\"\n  }), \"Check the cluster state.\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#create-and-scale-a-deployment-using-kubectl\"\n  }), \"Create and scale a deployment using kubectl\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#kubernetes-stuck-on-containercreating\"\n  }), \"Kubernetes stuck on ContainerCreating\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#scaling\"\n  }), \"Scaling\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#pod-deployment\"\n  }), \"Pod Deployment\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#kubernetes-services\"\n  }), \"Kubernetes Services\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#updating-the-pod\"\n  }), \"Updating the Pod\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#adding-a-queue-server\"\n  }), \"Adding a Queue Server\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#replication-not-recommended\"\n  }), \"Replication (not recommended)\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#replicasets\"\n  }), \"ReplicaSets\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#deployment-recommended\"\n  }), \"Deployment (recommended)\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#rolling-update-and-rollback\"\n  }), \"Rolling Update and Rollback\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#networking-and-service-discovery\"\n  }), \"Networking and Service Discovery\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#creating-a-database-pod\"\n  }), \"Creating a Database Pod\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#kubernetes--compose--kompose\"\n  }), \"Kubernetes + Compose = Kompose\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#use-kompose\"\n  }), \"Use Kompose\"))))), mdx(\"h2\", {\n    \"id\": \"instructions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#instructions\",\n    \"aria-label\": \"instructions permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Instructions\"), mdx(\"p\", null, \"In this learning activity, we will create a Kubernetes cluster. The commands we will use for this process can be found in the task list by clicking on the orange question mark buttons.\"), mdx(\"p\", null, \"Once you have completed the lab, leave your cluster in its final state. Do not delete the deployment:\"), mdx(\"h3\", {\n    \"id\": \"objectives\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#objectives\",\n    \"aria-label\": \"objectives permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Objectives\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install Docker and Kubernetes on all servers.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create and scale a deployment using kubectl.\")), mdx(\"h2\", {\n    \"id\": \"install-docker-and-kubernetes\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#install-docker-and-kubernetes\",\n    \"aria-label\": \"install docker and kubernetes permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Install Docker and Kubernetes\"), mdx(\"h3\", {\n    \"id\": \"prerequisites\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#prerequisites\",\n    \"aria-label\": \"prerequisites permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Prerequisites\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"You first need to login as your root user or elevate your users privileges via sudo on your master and two minion servers:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sudo su\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This next step is not recommended in production (\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://docs.docker.com/engine/security/seccomp/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"How do you create a SE Linux policy?\"), \") - but we are going to disable SE Linux on all 3 servers:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"setenforce 0\\nsed -i --follow-symlinks 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/sysconfig/selinux\\n\")), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Now we need to enable the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"br_netfilter\"), \" module on all servers to allow our cluster to communicate:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"modprobe br_netfilter\\necho '1' > /proc/sys/net/bridge/bridge-nf-call-iptables\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"797px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"11.91969887076537%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/f2901ed8c58feb6fdbde92110cff0800/8d3d1/kubernetes_cluster_01.webp 256w\", \"/static/f2901ed8c58feb6fdbde92110cff0800/354cf/kubernetes_cluster_01.webp 512w\", \"/static/f2901ed8c58feb6fdbde92110cff0800/2e3b0/kubernetes_cluster_01.webp 797w\"],\n    \"sizes\": \"(max-width: 797px) 100vw, 797px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/f2901ed8c58feb6fdbde92110cff0800/b1806/kubernetes_cluster_01.png 256w\", \"/static/f2901ed8c58feb6fdbde92110cff0800/7572d/kubernetes_cluster_01.png 512w\", \"/static/f2901ed8c58feb6fdbde92110cff0800/c7b52/kubernetes_cluster_01.png 797w\"],\n    \"sizes\": \"(max-width: 797px) 100vw, 797px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/f2901ed8c58feb6fdbde92110cff0800/c7b52/kubernetes_cluster_01.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"ol\", {\n    \"start\": 4\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Make sure that swap has been turned off:\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.52565707133917%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c89d6dbaef3b03200445c9c6a153701e/8d3d1/kubernetes_cluster_02.webp 256w\", \"/static/c89d6dbaef3b03200445c9c6a153701e/354cf/kubernetes_cluster_02.webp 512w\", \"/static/c89d6dbaef3b03200445c9c6a153701e/ad22c/kubernetes_cluster_02.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c89d6dbaef3b03200445c9c6a153701e/b1806/kubernetes_cluster_02.png 256w\", \"/static/c89d6dbaef3b03200445c9c6a153701e/7572d/kubernetes_cluster_02.png 512w\", \"/static/c89d6dbaef3b03200445c9c6a153701e/77cba/kubernetes_cluster_02.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/c89d6dbaef3b03200445c9c6a153701e/77cba/kubernetes_cluster_02.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"To turn off swap on centos type \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"swapoff -a\"), \" and check that the swap was removed with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"free -h\"), \". Edit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/fstab\"), \" file, search for the swap line and comment the entire line by adding a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"#\"), \" in front of the line:\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"42.875%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/814369e93af7cb4fe8f16633e5ef5fd5/8d3d1/kubernetes_cluster_02a.webp 256w\", \"/static/814369e93af7cb4fe8f16633e5ef5fd5/354cf/kubernetes_cluster_02a.webp 512w\", \"/static/814369e93af7cb4fe8f16633e5ef5fd5/47a22/kubernetes_cluster_02a.webp 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/814369e93af7cb4fe8f16633e5ef5fd5/b1806/kubernetes_cluster_02a.png 256w\", \"/static/814369e93af7cb4fe8f16633e5ef5fd5/7572d/kubernetes_cluster_02a.png 512w\", \"/static/814369e93af7cb4fe8f16633e5ef5fd5/368d4/kubernetes_cluster_02a.png 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/814369e93af7cb4fe8f16633e5ef5fd5/368d4/kubernetes_cluster_02a.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"798px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"27.31829573934837%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/8d3d1/kubernetes_cluster_02b.webp 256w\", \"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/354cf/kubernetes_cluster_02b.webp 512w\", \"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/bf233/kubernetes_cluster_02b.webp 798w\"],\n    \"sizes\": \"(max-width: 798px) 100vw, 798px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/b1806/kubernetes_cluster_02b.png 256w\", \"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/7572d/kubernetes_cluster_02b.png 512w\", \"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/1309b/kubernetes_cluster_02b.png 798w\"],\n    \"sizes\": \"(max-width: 798px) 100vw, 798px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/1309b/kubernetes_cluster_02b.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Now delete the remaining swap file - check the location \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"blkid\"), \" and remove it \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rm /dev/mapper/centos-swap\"), \":\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"804px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"23.134328358208954%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/90d2f664655149aef9aa43b9ea60f9e3/8d3d1/kubernetes_cluster_02c.webp 256w\", \"/static/90d2f664655149aef9aa43b9ea60f9e3/354cf/kubernetes_cluster_02c.webp 512w\", \"/static/90d2f664655149aef9aa43b9ea60f9e3/d7f04/kubernetes_cluster_02c.webp 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/90d2f664655149aef9aa43b9ea60f9e3/b1806/kubernetes_cluster_02c.png 256w\", \"/static/90d2f664655149aef9aa43b9ea60f9e3/7572d/kubernetes_cluster_02c.png 512w\", \"/static/90d2f664655149aef9aa43b9ea60f9e3/2c8f1/kubernetes_cluster_02c.png 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/90d2f664655149aef9aa43b9ea60f9e3/2c8f1/kubernetes_cluster_02c.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Add a FirewallD Service\")), mdx(\"p\", null, \"Configure FirewallD for Kubernetes to work correctly. First download the k8s-master.xml and k8s-worker.xml files to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cd /etc/firewalld/services\"), \" on your master and minion server:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"wget https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-master.xml\\n\\nwget https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-worker.xml\\n\\nfirewall-cmd --reload\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"On Master Node\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"firewall-cmd --add-service=k8s-master --zone=public --permanent\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"On Minion Nodes\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"firewall-cmd --add-service=k8s-worker --zone=public --permanent\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"TODO\"), \": I have to add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"firewall-cmd --add-service=dns --zone=public --permanent\"), \" ?\"), mdx(\"h3\", {\n    \"id\": \"install-docker-ce\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#install-docker-ce\",\n    \"aria-label\": \"install docker ce permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Install Docker CE\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Ensure that all Docker dependencies are installed:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"yum install -y yum-utils device-mapper-persistent-data lvm2\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"794px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"21.03274559193955%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/8674b77524180ba538f7f2ba939211ea/8d3d1/kubernetes_cluster_03.webp 256w\", \"/static/8674b77524180ba538f7f2ba939211ea/354cf/kubernetes_cluster_03.webp 512w\", \"/static/8674b77524180ba538f7f2ba939211ea/f025b/kubernetes_cluster_03.webp 794w\"],\n    \"sizes\": \"(max-width: 794px) 100vw, 794px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/8674b77524180ba538f7f2ba939211ea/b1806/kubernetes_cluster_03.png 256w\", \"/static/8674b77524180ba538f7f2ba939211ea/7572d/kubernetes_cluster_03.png 512w\", \"/static/8674b77524180ba538f7f2ba939211ea/53abe/kubernetes_cluster_03.png 794w\"],\n    \"sizes\": \"(max-width: 794px) 100vw, 794px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/8674b77524180ba538f7f2ba939211ea/53abe/kubernetes_cluster_03.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Now we can add the Docker repository and install it:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\\nyum install -y docker-ce\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"106.75844806007508%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1cf7f1db03d628789cd84ba8b5af1ad7/8d3d1/kubernetes_cluster_04.webp 256w\", \"/static/1cf7f1db03d628789cd84ba8b5af1ad7/354cf/kubernetes_cluster_04.webp 512w\", \"/static/1cf7f1db03d628789cd84ba8b5af1ad7/ad22c/kubernetes_cluster_04.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1cf7f1db03d628789cd84ba8b5af1ad7/b1806/kubernetes_cluster_04.png 256w\", \"/static/1cf7f1db03d628789cd84ba8b5af1ad7/7572d/kubernetes_cluster_04.png 512w\", \"/static/1cf7f1db03d628789cd84ba8b5af1ad7/77cba/kubernetes_cluster_04.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/1cf7f1db03d628789cd84ba8b5af1ad7/77cba/kubernetes_cluster_04.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h3\", {\n    \"id\": \"install-kubernetes\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#install-kubernetes\",\n    \"aria-label\": \"install kubernetes permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Install Kubernetes\"), mdx(\"p\", null, \"First we need to add the Kubernetes repository all servers:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"cat << EOF > /etc/yum.repos.d/kubernetes.repo  \\n[kubernetes]  \\nname=Kubernetes  \\nbaseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64  \\nenabled=1  \\ngpgcheck=0  \\nrepo_gpgcheck=0  \\ngpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg  \\n https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg  \\nEOF\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.02503128911139%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/6c87035b12fefc43f6109abedb7b3832/8d3d1/kubernetes_cluster_05.webp 256w\", \"/static/6c87035b12fefc43f6109abedb7b3832/354cf/kubernetes_cluster_05.webp 512w\", \"/static/6c87035b12fefc43f6109abedb7b3832/ad22c/kubernetes_cluster_05.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/6c87035b12fefc43f6109abedb7b3832/b1806/kubernetes_cluster_05.png 256w\", \"/static/6c87035b12fefc43f6109abedb7b3832/7572d/kubernetes_cluster_05.png 512w\", \"/static/6c87035b12fefc43f6109abedb7b3832/77cba/kubernetes_cluster_05.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/6c87035b12fefc43f6109abedb7b3832/77cba/kubernetes_cluster_05.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"Now we can install Kubernetes on all servers via yum:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"yum install -y kubelet kubeadm kubectl\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"795px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"109.0566037735849%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/e0c274725c27642ae935e59b2fe11d4e/8d3d1/kubernetes_cluster_06.webp 256w\", \"/static/e0c274725c27642ae935e59b2fe11d4e/354cf/kubernetes_cluster_06.webp 512w\", \"/static/e0c274725c27642ae935e59b2fe11d4e/db1aa/kubernetes_cluster_06.webp 795w\"],\n    \"sizes\": \"(max-width: 795px) 100vw, 795px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/e0c274725c27642ae935e59b2fe11d4e/b1806/kubernetes_cluster_06.png 256w\", \"/static/e0c274725c27642ae935e59b2fe11d4e/7572d/kubernetes_cluster_06.png 512w\", \"/static/e0c274725c27642ae935e59b2fe11d4e/92ac2/kubernetes_cluster_06.png 795w\"],\n    \"sizes\": \"(max-width: 795px) 100vw, 795px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/e0c274725c27642ae935e59b2fe11d4e/92ac2/kubernetes_cluster_06.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h3\", {\n    \"id\": \"start-docker-and-kublet\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#start-docker-and-kublet\",\n    \"aria-label\": \"start docker and kublet permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Start Docker and Kublet\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"systemctl enable docker\\nsystemctl enable kubelet\\nsystemctl start docker\\nsystemctl start kubelet\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"801px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"17.353308364544322%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/722179931250471aa3c8948856aa217b/8d3d1/kubernetes_cluster_07.webp 256w\", \"/static/722179931250471aa3c8948856aa217b/354cf/kubernetes_cluster_07.webp 512w\", \"/static/722179931250471aa3c8948856aa217b/ce2ab/kubernetes_cluster_07.webp 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/722179931250471aa3c8948856aa217b/b1806/kubernetes_cluster_07.png 256w\", \"/static/722179931250471aa3c8948856aa217b/7572d/kubernetes_cluster_07.png 512w\", \"/static/722179931250471aa3c8948856aa217b/e1788/kubernetes_cluster_07.png 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/722179931250471aa3c8948856aa217b/e1788/kubernetes_cluster_07.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"To check in what Group Docker is running, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker info | grep -i cgroup\"), \":\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"6.132665832290362%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b2f97b5453b34bb8ecac0959b0310fde/8d3d1/kubernetes_cluster_08.webp 256w\", \"/static/b2f97b5453b34bb8ecac0959b0310fde/354cf/kubernetes_cluster_08.webp 512w\", \"/static/b2f97b5453b34bb8ecac0959b0310fde/ad22c/kubernetes_cluster_08.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b2f97b5453b34bb8ecac0959b0310fde/b1806/kubernetes_cluster_08.png 256w\", \"/static/b2f97b5453b34bb8ecac0959b0310fde/7572d/kubernetes_cluster_08.png 512w\", \"/static/b2f97b5453b34bb8ecac0959b0310fde/77cba/kubernetes_cluster_08.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/b2f97b5453b34bb8ecac0959b0310fde/77cba/kubernetes_cluster_08.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"In this case it is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cgroupfs\"), \" - we can now make sure that Kubernetes is added to this group:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"sed -i 's/cgroup-driver=systemd/cgroup-driver=cgroupfs/g' /etc/systemd/system/kubelet.service.d/10-kubeadm.conf\\nsystemctl daemon-reload\\nsystemctl restart kubelet\\n\")), mdx(\"h2\", {\n    \"id\": \"cluster-initialization\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#cluster-initialization\",\n    \"aria-label\": \"cluster initialization permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Cluster Initialization\"), mdx(\"p\", null, \"So far we did the basic setup for all our servers - now we will initialize our cluster from the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"MASTER SERVER\"), \" using the IP range for Flannel. Kubeadm is a tool built to provide \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"kubeadm init\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-join/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"kubeadm join\"), \" as best-practice \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fast paths\"), \" for creating Kubernetes clusters. The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"init command\"), \" executes the following phases:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubeadm init\\n\")), mdx(\"p\", null, \"Your Kubernetes master has initialized successfully! You can now join any number of machines by running the following on each node as root:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"802px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"30.79800498753117%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/dfdb2e41e6da1d38b41467e1b23bbddb/8d3d1/kubernetes_cluster_09.webp 256w\", \"/static/dfdb2e41e6da1d38b41467e1b23bbddb/354cf/kubernetes_cluster_09.webp 512w\", \"/static/dfdb2e41e6da1d38b41467e1b23bbddb/5fb5c/kubernetes_cluster_09.webp 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/dfdb2e41e6da1d38b41467e1b23bbddb/b1806/kubernetes_cluster_09.png 256w\", \"/static/dfdb2e41e6da1d38b41467e1b23bbddb/7572d/kubernetes_cluster_09.png 512w\", \"/static/dfdb2e41e6da1d38b41467e1b23bbddb/7d80e/kubernetes_cluster_09.png 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/dfdb2e41e6da1d38b41467e1b23bbddb/7d80e/kubernetes_cluster_09.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubeadm join X.X.X.X:6443 --token XXXXXXXXXXXXXXX --discovery-token-ca-cert-hash sha256:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\n\")), mdx(\"p\", null, \"Copy the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubeadmin join\"), \" command that is in the output and past it into your minion server terminals:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"801px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.56179775280899%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a371daebcb3d46cd9f35833ad43dad6a/8d3d1/kubernetes_cluster_10.webp 256w\", \"/static/a371daebcb3d46cd9f35833ad43dad6a/354cf/kubernetes_cluster_10.webp 512w\", \"/static/a371daebcb3d46cd9f35833ad43dad6a/ce2ab/kubernetes_cluster_10.webp 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a371daebcb3d46cd9f35833ad43dad6a/b1806/kubernetes_cluster_10.png 256w\", \"/static/a371daebcb3d46cd9f35833ad43dad6a/7572d/kubernetes_cluster_10.png 512w\", \"/static/a371daebcb3d46cd9f35833ad43dad6a/e1788/kubernetes_cluster_10.png 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/a371daebcb3d46cd9f35833ad43dad6a/e1788/kubernetes_cluster_10.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"To start over and reset the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"init\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"join\"), \" process by running the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-reset/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"kubeadm reset\"), \" command on your master and all minion servers + clean up iptables \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"iptables -F && iptables -t nat -F && iptables -t mangle -F && iptables -X\"))), mdx(\"p\", null, \"To start using your cluster, you need to run the following as a regular user:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"mkdir -p $HOME/.kube\\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\\n\")), mdx(\"h3\", {\n    \"id\": \"installing-a-pod-network-add-on\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#installing-a-pod-network-add-on\",\n    \"aria-label\": \"installing a pod network add on permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Installing a Pod Network Add-on\"), mdx(\"p\", null, \"You must install a pod network add-on so that your pods can communicate with each other. The network must be deployed before any applications. Also, CoreDNS will not start up before a network is installed. kubeadm only supports \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Container Network Interface (CNI)\"), \" based networks (and does not support kubenet).\"), mdx(\"p\", null, \"There are several CNI's listed for Kubernetes - but we will be using the solution from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.weave.works/docs/net/latest/kube-addon/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Weave Net\"), \". First Set \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"/proc/sys/net/bridge/bridge-nf-call-iptables\"), \" to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1\"), \" by running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sysctl net.bridge.bridge-nf-call-iptables=1\"), \" to pass bridged IPv4 traffic to iptables\\u2019 chains. This is a requirement for some CNI plugins to work, for more information please see here.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"sysctl -w net.bridge.bridge-nf-call-iptables=1\\nsysctl -w net.bridge.bridge-nf-call-ip6tables=1\\nreboot\\n\")), mdx(\"p\", null, \"Weave Net works on amd64, arm, arm64 and ppc64le without any extra action required. Weave Net sets hairpin mode by default. This allows Pods to access themselves via their Service IP address if they don\\u2019t know their PodIP:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl apply -f \\\"https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d '\\\\n')\\\"\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"807px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"44.114002478314745%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/38331a481dad3bf5b375d30aa367a355/8d3d1/kubernetes_cluster_11.webp 256w\", \"/static/38331a481dad3bf5b375d30aa367a355/354cf/kubernetes_cluster_11.webp 512w\", \"/static/38331a481dad3bf5b375d30aa367a355/2eb59/kubernetes_cluster_11.webp 807w\"],\n    \"sizes\": \"(max-width: 807px) 100vw, 807px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/38331a481dad3bf5b375d30aa367a355/b1806/kubernetes_cluster_11.png 256w\", \"/static/38331a481dad3bf5b375d30aa367a355/7572d/kubernetes_cluster_11.png 512w\", \"/static/38331a481dad3bf5b375d30aa367a355/0e069/kubernetes_cluster_11.png 807w\"],\n    \"sizes\": \"(max-width: 807px) 100vw, 807px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/38331a481dad3bf5b375d30aa367a355/0e069/kubernetes_cluster_11.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h3\", {\n    \"id\": \"check-the-cluster-state\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-the-cluster-state\",\n    \"aria-label\": \"check the cluster state permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check the cluster state.\"), mdx(\"p\", null, \"A quick \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get nodes\"), \" should confirm that all our nodes are now connected to the container network (see screenshot above)!\"), mdx(\"p\", null, \"Once a pod network has been installed, you can confirm that it is working by checking that the CoreDNS pod is Running in the output of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get pods --all-namespaces\"), \". And once the CoreDNS pod is up and running, you can continue by joining your nodes.\"), mdx(\"p\", null, \"Platforms like Kubernetes assume that each container (pod) has a unique, routable IP inside the cluster. The advantage of this model is that it removes the port mapping complexities that come from sharing a single host IP.\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"812px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"24.75369458128079%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7b33ca2e6a59200a3f627f4fadda5096/8d3d1/kubernetes_cluster_12.webp 256w\", \"/static/7b33ca2e6a59200a3f627f4fadda5096/354cf/kubernetes_cluster_12.webp 512w\", \"/static/7b33ca2e6a59200a3f627f4fadda5096/8974e/kubernetes_cluster_12.webp 812w\"],\n    \"sizes\": \"(max-width: 812px) 100vw, 812px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7b33ca2e6a59200a3f627f4fadda5096/b1806/kubernetes_cluster_12.png 256w\", \"/static/7b33ca2e6a59200a3f627f4fadda5096/7572d/kubernetes_cluster_12.png 512w\", \"/static/7b33ca2e6a59200a3f627f4fadda5096/20bb3/kubernetes_cluster_12.png 812w\"],\n    \"sizes\": \"(max-width: 812px) 100vw, 812px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/7b33ca2e6a59200a3f627f4fadda5096/20bb3/kubernetes_cluster_12.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"create-and-scale-a-deployment-using-kubectl\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#create-and-scale-a-deployment-using-kubectl\",\n    \"aria-label\": \"create and scale a deployment using kubectl permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Create and scale a deployment using kubectl\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/kubectl/overview/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Kubectl\"), \" is a command line interface for running commands against Kubernetes clusters. We can run a NGINX container with the following command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl create deployment nginx --image=nginx\\n\")), mdx(\"p\", null, \"You can verify that the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Pod\"), \" was created by Kubernetes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl get pods\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"801px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"10.986267166042447%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/9c2c6d56986978d6b425852b0ad9fe1c/8d3d1/kubernetes_cluster_14.webp 256w\", \"/static/9c2c6d56986978d6b425852b0ad9fe1c/354cf/kubernetes_cluster_14.webp 512w\", \"/static/9c2c6d56986978d6b425852b0ad9fe1c/ce2ab/kubernetes_cluster_14.webp 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/9c2c6d56986978d6b425852b0ad9fe1c/b1806/kubernetes_cluster_14.png 256w\", \"/static/9c2c6d56986978d6b425852b0ad9fe1c/7572d/kubernetes_cluster_14.png 512w\", \"/static/9c2c6d56986978d6b425852b0ad9fe1c/e1788/kubernetes_cluster_14.png 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/9c2c6d56986978d6b425852b0ad9fe1c/e1788/kubernetes_cluster_14.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h3\", {\n    \"id\": \"scaling\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#scaling\",\n    \"aria-label\": \"scaling permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Scaling\"), mdx(\"p\", null, \"To scale up our web server contingent to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"4\"), \", we can use the following \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl\"), \" command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl scale deployment nginx --replicas=4\\nkubectl get pods\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"808px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"16.46039603960396%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/0ee750f3b654d91ec11e16284718e400/8d3d1/kubernetes_cluster_16.webp 256w\", \"/static/0ee750f3b654d91ec11e16284718e400/354cf/kubernetes_cluster_16.webp 512w\", \"/static/0ee750f3b654d91ec11e16284718e400/66453/kubernetes_cluster_16.webp 808w\"],\n    \"sizes\": \"(max-width: 808px) 100vw, 808px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/0ee750f3b654d91ec11e16284718e400/b1806/kubernetes_cluster_16.png 256w\", \"/static/0ee750f3b654d91ec11e16284718e400/7572d/kubernetes_cluster_16.png 512w\", \"/static/0ee750f3b654d91ec11e16284718e400/db6b6/kubernetes_cluster_16.png 808w\"],\n    \"sizes\": \"(max-width: 808px) 100vw, 808px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/0ee750f3b654d91ec11e16284718e400/db6b6/kubernetes_cluster_16.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"To get rid of those pods you can scale it back down to 0 replicas and to delete Nginx completely delete the deployment (not the pods - those would be respawned automatically):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl scale deployment nginx --replicas=0\\nkubectl delete deployment nginx\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"801px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"12.359550561797752%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/9d16fb66d2a7d404b8a16e99cadae047/8d3d1/kubernetes_cluster_17.webp 256w\", \"/static/9d16fb66d2a7d404b8a16e99cadae047/354cf/kubernetes_cluster_17.webp 512w\", \"/static/9d16fb66d2a7d404b8a16e99cadae047/ce2ab/kubernetes_cluster_17.webp 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/9d16fb66d2a7d404b8a16e99cadae047/b1806/kubernetes_cluster_17.png 256w\", \"/static/9d16fb66d2a7d404b8a16e99cadae047/7572d/kubernetes_cluster_17.png 512w\", \"/static/9d16fb66d2a7d404b8a16e99cadae047/e1788/kubernetes_cluster_17.png 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/9d16fb66d2a7d404b8a16e99cadae047/e1788/kubernetes_cluster_17.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"If you try to delete the pods by name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl delete pod nginx-5c7588df-lf2pb\"), \", or try to delete all: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl delete pods --all\"), \", Kubernetes will respawn new pods to meet your deployment scale requirement.\"), mdx(\"h2\", {\n    \"id\": \"pod-deployment\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#pod-deployment\",\n    \"aria-label\": \"pod deployment permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Pod Deployment\"), mdx(\"p\", null, \"Let's deploy an simple Angular app inside a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#pod-v1-core\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Kubernetes Pod\"), \" - we will use the 0 release of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/r/richardchesterwood/k8s-fleetman-webapp-angular/tags\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"this Docker image\"), \" to get started with. To do this we will have to create a Pod Config file for it called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-angular.yaml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: webapp\\nspec:\\n  containers:\\n  - name: webapp\\n    image: richardchesterwood/k8s-fleetman-webapp-angular:release0\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"797px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"19.196988707653702%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c6ece5af460f568c8360df8d01189e19/8d3d1/kubernetes_cluster_18.webp 256w\", \"/static/c6ece5af460f568c8360df8d01189e19/354cf/kubernetes_cluster_18.webp 512w\", \"/static/c6ece5af460f568c8360df8d01189e19/2e3b0/kubernetes_cluster_18.webp 797w\"],\n    \"sizes\": \"(max-width: 797px) 100vw, 797px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c6ece5af460f568c8360df8d01189e19/b1806/kubernetes_cluster_18.png 256w\", \"/static/c6ece5af460f568c8360df8d01189e19/7572d/kubernetes_cluster_18.png 512w\", \"/static/c6ece5af460f568c8360df8d01189e19/c7b52/kubernetes_cluster_18.png 797w\"],\n    \"sizes\": \"(max-width: 797px) 100vw, 797px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/c6ece5af460f568c8360df8d01189e19/c7b52/kubernetes_cluster_18.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"We can now use \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"kubectl\"), \" to read our configuration file and generate the webapp Pod:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl apply -f webapp-angular.yaml\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"803px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"16.438356164383563%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/fd77489319b82d60f004fe3f5112af8a/8d3d1/kubernetes_cluster_19.webp 256w\", \"/static/fd77489319b82d60f004fe3f5112af8a/354cf/kubernetes_cluster_19.webp 512w\", \"/static/fd77489319b82d60f004fe3f5112af8a/2b283/kubernetes_cluster_19.webp 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/fd77489319b82d60f004fe3f5112af8a/b1806/kubernetes_cluster_19.png 256w\", \"/static/fd77489319b82d60f004fe3f5112af8a/7572d/kubernetes_cluster_19.png 512w\", \"/static/fd77489319b82d60f004fe3f5112af8a/4990a/kubernetes_cluster_19.png 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/fd77489319b82d60f004fe3f5112af8a/4990a/kubernetes_cluster_19.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"You can inspect the pod with:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl describe pod webapp\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"801px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"96.87890137328338%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a7559982602c2a4d3fc663a5623fceef/8d3d1/kubernetes_cluster_20.webp 256w\", \"/static/a7559982602c2a4d3fc663a5623fceef/354cf/kubernetes_cluster_20.webp 512w\", \"/static/a7559982602c2a4d3fc663a5623fceef/ce2ab/kubernetes_cluster_20.webp 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a7559982602c2a4d3fc663a5623fceef/b1806/kubernetes_cluster_20.png 256w\", \"/static/a7559982602c2a4d3fc663a5623fceef/7572d/kubernetes_cluster_20.png 512w\", \"/static/a7559982602c2a4d3fc663a5623fceef/e1788/kubernetes_cluster_20.png 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/a7559982602c2a4d3fc663a5623fceef/e1788/kubernetes_cluster_20.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"Just like in Docker, we can use \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"kubectl\"), \" to run commands against our containers - e.g. to access the shell inside your container, contact the webserver (that should be serving our Angular app) and printing out index page:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl -it exec webapp sh\\n/ # wget http://localhost:80\\n/ # cat index.html\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"39.2991239048811%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a3680b75231b5dbe4d4adef01094c4e5/8d3d1/kubernetes_cluster_21.webp 256w\", \"/static/a3680b75231b5dbe4d4adef01094c4e5/354cf/kubernetes_cluster_21.webp 512w\", \"/static/a3680b75231b5dbe4d4adef01094c4e5/ad22c/kubernetes_cluster_21.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a3680b75231b5dbe4d4adef01094c4e5/b1806/kubernetes_cluster_21.png 256w\", \"/static/a3680b75231b5dbe4d4adef01094c4e5/7572d/kubernetes_cluster_21.png 512w\", \"/static/a3680b75231b5dbe4d4adef01094c4e5/77cba/kubernetes_cluster_21.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/a3680b75231b5dbe4d4adef01094c4e5/77cba/kubernetes_cluster_21.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"kubernetes-services\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#kubernetes-services\",\n    \"aria-label\": \"kubernetes services permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Kubernetes Services\"), mdx(\"p\", null, \"We now have a Pod that is serving our Angular frontend. To be able to access this Pod from \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"the outside\"), \" we need to add a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#service-v1-core\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Kubernetes service\"), \". Let's create a file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-service.yaml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Service\\nmetadata:\\n  # Unique key of the Service instance\\n  name: fleetman-webapp\\nspec:\\n  ports:\\n    # Accept traffic sent to port 80\\n    - name: http\\n      port: 80\\n      targetPort: 80\\n      # The nodePort is available from outside of the\\n      # cluster when is set to NodePort. It's value has\\n      # to be > 30000\\n      nodePort: 30080\\n  selector:\\n    # Define which pods are going to\\n    # be represented by this service\\n    # The service makes an network\\n    # endpoint for our app\\n    app: webapp\\n  # Setting the Service type to ClusterIP makes the\\n  # service only available from inside the cluster\\n  # To expose a port use NodePort instead\\n  type: NodePort\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"48.685857321652065%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/68c4840a4930b8c1b6f5c521aab64a9d/8d3d1/kubernetes_cluster_22.webp 256w\", \"/static/68c4840a4930b8c1b6f5c521aab64a9d/354cf/kubernetes_cluster_22.webp 512w\", \"/static/68c4840a4930b8c1b6f5c521aab64a9d/ad22c/kubernetes_cluster_22.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/68c4840a4930b8c1b6f5c521aab64a9d/b1806/kubernetes_cluster_22.png 256w\", \"/static/68c4840a4930b8c1b6f5c521aab64a9d/7572d/kubernetes_cluster_22.png 512w\", \"/static/68c4840a4930b8c1b6f5c521aab64a9d/77cba/kubernetes_cluster_22.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/68c4840a4930b8c1b6f5c521aab64a9d/77cba/kubernetes_cluster_22.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"We now have to add the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Selector\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp\"), \" in form of a label in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-angular.yaml\"), \" to our frontend pod to connect it to our service:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: webapp\\n  labels:\\n    app: webapp\\nspec:\\n  containers:\\n  - name: webapp\\n    image: richardchesterwood/k8s-fleetman-webapp-angular:release0\\n\")), mdx(\"p\", null, \"The service can be added to our cluster by the following commands:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl apply -f webapp-angular.yaml\\nkubectl apply -f webapp-service.yaml\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"9.887359198998748%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c51a7ac0645e16efcfdee5285948d045/8d3d1/kubernetes_cluster_23.webp 256w\", \"/static/c51a7ac0645e16efcfdee5285948d045/354cf/kubernetes_cluster_23.webp 512w\", \"/static/c51a7ac0645e16efcfdee5285948d045/ad22c/kubernetes_cluster_23.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c51a7ac0645e16efcfdee5285948d045/b1806/kubernetes_cluster_23.png 256w\", \"/static/c51a7ac0645e16efcfdee5285948d045/7572d/kubernetes_cluster_23.png 512w\", \"/static/c51a7ac0645e16efcfdee5285948d045/77cba/kubernetes_cluster_23.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/c51a7ac0645e16efcfdee5285948d045/77cba/kubernetes_cluster_23.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"By applying our changes, we have updated our pod and created our service.\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"804px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"13.681592039800993%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/d518f94e0fd4c18a118d9cf692442559/8d3d1/kubernetes_cluster_24.webp 256w\", \"/static/d518f94e0fd4c18a118d9cf692442559/354cf/kubernetes_cluster_24.webp 512w\", \"/static/d518f94e0fd4c18a118d9cf692442559/d7f04/kubernetes_cluster_24.webp 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/d518f94e0fd4c18a118d9cf692442559/b1806/kubernetes_cluster_24.png 256w\", \"/static/d518f94e0fd4c18a118d9cf692442559/7572d/kubernetes_cluster_24.png 512w\", \"/static/d518f94e0fd4c18a118d9cf692442559/2c8f1/kubernetes_cluster_24.png 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/d518f94e0fd4c18a118d9cf692442559/2c8f1/kubernetes_cluster_24.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"The webapp is now accessible on your Cluster IP with the Port \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"30080\"), \"!\"), mdx(\"h2\", {\n    \"id\": \"updating-the-pod\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#updating-the-pod\",\n    \"aria-label\": \"updating the pod permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Updating the Pod\"), mdx(\"p\", null, \"To Update a Pod in Production with 0 downtime we can use labels. We can define a second pod inside the same file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-angular.yaml\"), \". Right now we are going to use release versions to define our pods. Later we might change this to a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"production\"), \" and a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"development\"), \" version - both of which can then be run inside the same cluster and be served by different services:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: webapp\\n  labels:\\n    app: webapp\\n    release: \\\"0\\\"\\nspec:\\n  containers:\\n  - name: webapp\\n    image: richardchesterwood/k8s-fleetman-webapp-angular:release0\\n\\n---\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: webapp-release-0-5\\n  labels:\\n    app: webapp\\n    release: \\\"0-5\\\"\\nspec:\\n  containers:\\n  - name: webapp\\n    image: richardchesterwood/k8s-fleetman-webapp-angular:release0-5\\n\")), mdx(\"p\", null, \"Make sure to surround release version with quotation marks to convert it into a string - \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\\"0\\\"\"), \". Otherwise you end up with the error message \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"for: \\\"webapp-angular.yaml\\\": cannot convert int64 to string\"), \".\"), mdx(\"p\", null, \"Now we have to modify our service \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-service.yaml\"), \": to not only check for the app name label, but also for the release version - we want to only connect to the current version 0. Once the version 0.5 is deployed we then can update the service to connect us to the updated Pod instead - allowing us to deploy the update with 0 downtime:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Service\\nmetadata:\\n  # Unique key of the Service instance\\n  name: fleetman-webapp\\nspec:\\n  ports:\\n    # Accept traffic sent to port 80\\n    - name: http\\n      port: 80\\n      targetPort: 80\\n      # The nodePort is available from outside of the\\n      # cluster when is set to NodePort. It's value has\\n      # to be > 30000\\n      nodePort: 30080\\n  selector:\\n    # Define which pods are going to\\n    # be represented by this service\\n    # The service makes an network\\n    # endpoint for our app\\n    app: webapp\\n    release: \\\"0\\\"\\n  # Setting the Service type to ClusterIP makes the\\n  # service only available from inside the cluster\\n  # To expose a port use NodePort instead\\n  type: NodePort\\n\")), mdx(\"p\", null, \"Now update both our Pod and Service - as well add the new Pod with our updated Angular app:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"kubectl apply -f webapp-angular.yaml\\nkubectl apply -f webapp-service.yaml\\nkubectl get pods --show-labels\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"798px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"14.661654135338345%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/ec439dac6255e799e99435ed1f1cf80d/8d3d1/kubernetes_cluster_25.webp 256w\", \"/static/ec439dac6255e799e99435ed1f1cf80d/354cf/kubernetes_cluster_25.webp 512w\", \"/static/ec439dac6255e799e99435ed1f1cf80d/bf233/kubernetes_cluster_25.webp 798w\"],\n    \"sizes\": \"(max-width: 798px) 100vw, 798px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/ec439dac6255e799e99435ed1f1cf80d/b1806/kubernetes_cluster_25.png 256w\", \"/static/ec439dac6255e799e99435ed1f1cf80d/7572d/kubernetes_cluster_25.png 512w\", \"/static/ec439dac6255e799e99435ed1f1cf80d/1309b/kubernetes_cluster_25.png 798w\"],\n    \"sizes\": \"(max-width: 798px) 100vw, 798px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/ec439dac6255e799e99435ed1f1cf80d/1309b/kubernetes_cluster_25.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"Now that both pods are running we can edit our service \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-service.yaml\"), \" and change the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"selector\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"release: \\\"0-5\\\"\"), \". Apply the change with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f webapp-service.yaml\"), \" and verify that the service is now switched to the new release with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl describe service fleetman-webapp\"), \":\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"803px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"37.60896637608966%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/cfbd3173af329d9758dffc48aa0baff8/8d3d1/kubernetes_cluster_26.webp 256w\", \"/static/cfbd3173af329d9758dffc48aa0baff8/354cf/kubernetes_cluster_26.webp 512w\", \"/static/cfbd3173af329d9758dffc48aa0baff8/2b283/kubernetes_cluster_26.webp 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/cfbd3173af329d9758dffc48aa0baff8/b1806/kubernetes_cluster_26.png 256w\", \"/static/cfbd3173af329d9758dffc48aa0baff8/7572d/kubernetes_cluster_26.png 512w\", \"/static/cfbd3173af329d9758dffc48aa0baff8/4990a/kubernetes_cluster_26.png 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/cfbd3173af329d9758dffc48aa0baff8/4990a/kubernetes_cluster_26.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"Type in the IP of your \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Kybernetes Cluster\"), \" (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"WAN IP of your master server\"), \") and add the port \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"30080\"), \" to access the updated web interface with your browser:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"812px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"43.96551724137931%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1d376eb3d12b1270d7da20625d5d8ab5/8d3d1/kubernetes_cluster_26a.webp 256w\", \"/static/1d376eb3d12b1270d7da20625d5d8ab5/354cf/kubernetes_cluster_26a.webp 512w\", \"/static/1d376eb3d12b1270d7da20625d5d8ab5/8974e/kubernetes_cluster_26a.webp 812w\"],\n    \"sizes\": \"(max-width: 812px) 100vw, 812px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1d376eb3d12b1270d7da20625d5d8ab5/b1806/kubernetes_cluster_26a.png 256w\", \"/static/1d376eb3d12b1270d7da20625d5d8ab5/7572d/kubernetes_cluster_26a.png 512w\", \"/static/1d376eb3d12b1270d7da20625d5d8ab5/20bb3/kubernetes_cluster_26a.png 812w\"],\n    \"sizes\": \"(max-width: 812px) 100vw, 812px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/1d376eb3d12b1270d7da20625d5d8ab5/20bb3/kubernetes_cluster_26a.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"adding-a-queue-server\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#adding-a-queue-server\",\n    \"aria-label\": \"adding a queue server permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Adding a Queue Server\"), mdx(\"p\", null, \"Our finished WebApp is going to need a message broker to work. We are going to us the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hub.docker.com/r/richardchesterwood/k8s-fleetman-queue/tags\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"given Docker Image\"), \" in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"release1\"), \" version to add \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://activemq.apache.org\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Apache ActiveMQ\"), \" as a queue service for our app. ActiveMQ, or in generall all Message Oriented Middleware (MOM) implementations are designed for the purpose of sending messages between two applications, or two components inside one application.\"), mdx(\"p\", null, \"To add this service in a Pod, we need to create a configuration file for it - this can either be a new file called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-queue.yaml\"), \", or we can simply add it to the end of our existing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-angular.yaml\"), \" configuration file to keep everything neat and tidy (this also means that we can simplify the filename to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pods.yaml\"), \" -> \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mv webapp-angular.yaml pods.yaml\"), \"):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"---\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: queue\\n  labels:\\n    app: queue\\nspec:\\n  containers:\\n  - name: queue\\n    image: richardchesterwood/k8s-fleetman-queue:release1\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"803px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"67.74595267745953%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c5c39b18187eddfe941f75f2f5e2dd6d/8d3d1/kubernetes_cluster_27.webp 256w\", \"/static/c5c39b18187eddfe941f75f2f5e2dd6d/354cf/kubernetes_cluster_27.webp 512w\", \"/static/c5c39b18187eddfe941f75f2f5e2dd6d/2b283/kubernetes_cluster_27.webp 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/c5c39b18187eddfe941f75f2f5e2dd6d/b1806/kubernetes_cluster_27.png 256w\", \"/static/c5c39b18187eddfe941f75f2f5e2dd6d/7572d/kubernetes_cluster_27.png 512w\", \"/static/c5c39b18187eddfe941f75f2f5e2dd6d/4990a/kubernetes_cluster_27.png 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/c5c39b18187eddfe941f75f2f5e2dd6d/4990a/kubernetes_cluster_27.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"Use \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"kubectl\"), \" to read our configuration file and generate the Queue Pod:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl apply -f pods.yaml\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"804px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.024875621890548%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/723bd8f64c8c20049b23150e9b36878c/8d3d1/kubernetes_cluster_28.webp 256w\", \"/static/723bd8f64c8c20049b23150e9b36878c/354cf/kubernetes_cluster_28.webp 512w\", \"/static/723bd8f64c8c20049b23150e9b36878c/d7f04/kubernetes_cluster_28.webp 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/723bd8f64c8c20049b23150e9b36878c/b1806/kubernetes_cluster_28.png 256w\", \"/static/723bd8f64c8c20049b23150e9b36878c/7572d/kubernetes_cluster_28.png 512w\", \"/static/723bd8f64c8c20049b23150e9b36878c/2c8f1/kubernetes_cluster_28.png 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/723bd8f64c8c20049b23150e9b36878c/2c8f1/kubernetes_cluster_28.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"To be able to access the Pod, we need to add it to our service configuration \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webapp-service.yaml\"), \" which we can rename to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"services.yaml\"), \" -> \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mv webapp-service.yaml services.yaml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  # Unique key of the Service instance\\n  name: fleetman-queue\\nspec:\\n  ports:\\n    # Accept traffic sent to port 8161 (default login is admin/admin)\\n    - name: http\\n      port: 8161\\n      targetPort: 8161\\n      # The nodePort is available from outside of the\\n      # cluster when is set to NodePort. It's value has\\n      # to be > 30000\\n      nodePort: 30010\\n  selector:\\n    # Define which pods are going to\\n    # be represented by this service\\n    # The service makes an network\\n    # endpoint for our app\\n    app: queue\\n  # Setting the Service type to ClusterIP makes the\\n  # service only available from inside the cluster\\n  # To expose a port use NodePort instead\\n  type: NodePort\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"802px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"97.2568578553616%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7521f2f21a561e11ee0c79f3e034c846/8d3d1/kubernetes_cluster_29.webp 256w\", \"/static/7521f2f21a561e11ee0c79f3e034c846/354cf/kubernetes_cluster_29.webp 512w\", \"/static/7521f2f21a561e11ee0c79f3e034c846/5fb5c/kubernetes_cluster_29.webp 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7521f2f21a561e11ee0c79f3e034c846/b1806/kubernetes_cluster_29.png 256w\", \"/static/7521f2f21a561e11ee0c79f3e034c846/7572d/kubernetes_cluster_29.png 512w\", \"/static/7521f2f21a561e11ee0c79f3e034c846/7d80e/kubernetes_cluster_29.png 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/7521f2f21a561e11ee0c79f3e034c846/7d80e/kubernetes_cluster_29.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"We can now apply all changes with:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl apply -f .\\nkubectl get all\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"804px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"42.66169154228855%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a6fd49822dca89292c3800da08a00750/8d3d1/kubernetes_cluster_30.webp 256w\", \"/static/a6fd49822dca89292c3800da08a00750/354cf/kubernetes_cluster_30.webp 512w\", \"/static/a6fd49822dca89292c3800da08a00750/d7f04/kubernetes_cluster_30.webp 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a6fd49822dca89292c3800da08a00750/b1806/kubernetes_cluster_30.png 256w\", \"/static/a6fd49822dca89292c3800da08a00750/7572d/kubernetes_cluster_30.png 512w\", \"/static/a6fd49822dca89292c3800da08a00750/2c8f1/kubernetes_cluster_30.png 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/a6fd49822dca89292c3800da08a00750/2c8f1/kubernetes_cluster_30.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"You can inspect the pod, in case that something doesn't look right. All events will be logged at the end of the console output:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl describe pod queue\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"804px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"19.776119402985078%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/006cfa64383fa16d344fd50602cfabf2/8d3d1/kubernetes_cluster_31.webp 256w\", \"/static/006cfa64383fa16d344fd50602cfabf2/354cf/kubernetes_cluster_31.webp 512w\", \"/static/006cfa64383fa16d344fd50602cfabf2/d7f04/kubernetes_cluster_31.webp 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/006cfa64383fa16d344fd50602cfabf2/b1806/kubernetes_cluster_31.png 256w\", \"/static/006cfa64383fa16d344fd50602cfabf2/7572d/kubernetes_cluster_31.png 512w\", \"/static/006cfa64383fa16d344fd50602cfabf2/2c8f1/kubernetes_cluster_31.png 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/006cfa64383fa16d344fd50602cfabf2/2c8f1/kubernetes_cluster_31.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"Type in the IP of your \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Kybernetes Cluster\"), \" (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"WAN IP of your master server\"), \") and add the port \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"30010\"), \" to access the updated web interface with your browser:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"812px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"42.98029556650247%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a5feb4ba5ebf09f41f97271ad02b3231/8d3d1/kubernetes_cluster_31a.webp 256w\", \"/static/a5feb4ba5ebf09f41f97271ad02b3231/354cf/kubernetes_cluster_31a.webp 512w\", \"/static/a5feb4ba5ebf09f41f97271ad02b3231/8974e/kubernetes_cluster_31a.webp 812w\"],\n    \"sizes\": \"(max-width: 812px) 100vw, 812px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/a5feb4ba5ebf09f41f97271ad02b3231/b1806/kubernetes_cluster_31a.png 256w\", \"/static/a5feb4ba5ebf09f41f97271ad02b3231/7572d/kubernetes_cluster_31a.png 512w\", \"/static/a5feb4ba5ebf09f41f97271ad02b3231/20bb3/kubernetes_cluster_31a.png 812w\"],\n    \"sizes\": \"(max-width: 812px) 100vw, 812px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/a5feb4ba5ebf09f41f97271ad02b3231/20bb3/kubernetes_cluster_31a.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"replication-not-recommended\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#replication-not-recommended\",\n    \"aria-label\": \"replication not recommended permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Replication (not recommended)\"), mdx(\"p\", null, \"So far we spawned all our Pods manually using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply\"), \" command. This way it is us who is responsible for the complete life-cycle of the pod. That means that you can delete (gracefully shutdown) or force shutdown those Pods with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl delete\"), \" command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl delete pod webapp-release-0-5\\nkubectl delete pod webapp-release-0-5 --force\\n\")), mdx(\"p\", null, \"The Pod will just disappear - check with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get all\"), \" - and not be restarted. The same would happen if your app crashes and that is a situation where we want Kubernetes to recover Pods to keep our App running.\"), mdx(\"h3\", {\n    \"id\": \"replicasets\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#replicasets\",\n    \"aria-label\": \"replicasets permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"ReplicaSets\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#replicaset-v1-apps\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"ReplicaSet\"), \" is basically just a wrapper around our Pod configuration that defines the number of instances of our Pod we want to be running at all times - if one crashes, it will automatically be replaced by a new version of the same pod.\"), mdx(\"p\", null, \"Let's re-write our Pod definition to a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ReplicaSet\"), \" - below is the original \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pods.yaml\"), \" file (the webapp with release0 was removed):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: webapp\\n  labels:\\n    app: webapp\\n    release: \\\"0-5\\\"\\nspec:\\n  containers:\\n  - name: webapp\\n    image: richardchesterwood/k8s-fleetman-webapp-angular:release0-5\\n\\n---\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: queue\\n  labels:\\n    app: queue\\nspec:\\n  containers:\\n  - name: queue\\n    image: richardchesterwood/k8s-fleetman-queue:release1\\n\")), mdx(\"p\", null, \"The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ReplicaSet\"), \" just adds a few lines to the top of our Pod configuration:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: apps/v1\\nkind: ReplicaSet\\nmetadata:\\n  # Unique key of the ReplicaSet instance\\n  name: webapp\\nspec:\\n  selector:\\n    matchLabels:\\n      # the ReplicaSet manages all Pods\\n      # where the lable = app: webapp\\n      app: webapp\\n  # only 1 Pod should exist atm - if it\\n  # crashes, a new pod will be spawned.\\n  replicas: 1\\n  # Here starts the Pod Definition from b4\\n  template:\\n    metadata:\\n      # name: webapp / now we ReplicaSet name\\n      labels:\\n        app: webapp\\n    spec:\\n      containers:\\n      - name: webapp\\n        image: richardchesterwood/k8s-fleetman-webapp-angular:release0.5\\n\\n---\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: queue\\n  labels:\\n    app: queue\\nspec:\\n  containers:\\n  - name: queue\\n    image: richardchesterwood/k8s-fleetman-queue:release1\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"802px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"58.728179551122196%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/e9904382e3c6ef28b75d23ad63cc576e/8d3d1/kubernetes_cluster_32.webp 256w\", \"/static/e9904382e3c6ef28b75d23ad63cc576e/354cf/kubernetes_cluster_32.webp 512w\", \"/static/e9904382e3c6ef28b75d23ad63cc576e/5fb5c/kubernetes_cluster_32.webp 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/e9904382e3c6ef28b75d23ad63cc576e/b1806/kubernetes_cluster_32.png 256w\", \"/static/e9904382e3c6ef28b75d23ad63cc576e/7572d/kubernetes_cluster_32.png 512w\", \"/static/e9904382e3c6ef28b75d23ad63cc576e/7d80e/kubernetes_cluster_32.png 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/e9904382e3c6ef28b75d23ad63cc576e/7d80e/kubernetes_cluster_32.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"Before applying our new \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ReplicaSet\"), \" let's first delete all pods we created earlier \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl delete pods --all\"), \" and then start the new Pods with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f pods.yaml\"), \". You can verify that everything worked with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get all\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl describe replicaset webapp\"), \":\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"802px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"81.29675810473816%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1901c553d50f00fe30e5f798fcc0e998/8d3d1/kubernetes_cluster_33.webp 256w\", \"/static/1901c553d50f00fe30e5f798fcc0e998/354cf/kubernetes_cluster_33.webp 512w\", \"/static/1901c553d50f00fe30e5f798fcc0e998/5fb5c/kubernetes_cluster_33.webp 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/1901c553d50f00fe30e5f798fcc0e998/b1806/kubernetes_cluster_33.png 256w\", \"/static/1901c553d50f00fe30e5f798fcc0e998/7572d/kubernetes_cluster_33.png 512w\", \"/static/1901c553d50f00fe30e5f798fcc0e998/7d80e/kubernetes_cluster_33.png 802w\"],\n    \"sizes\": \"(max-width: 802px) 100vw, 802px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/1901c553d50f00fe30e5f798fcc0e998/7d80e/kubernetes_cluster_33.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"We earlier added a release selector to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"services.yaml\"), \" that now needs to be removed as we are no longer using it as a label for our Pod - afterwards run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f services.yaml\"), \":\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"804px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.373134328358205%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/25267154a8fc752c811b7dde110b0b5f/8d3d1/kubernetes_cluster_34.webp 256w\", \"/static/25267154a8fc752c811b7dde110b0b5f/354cf/kubernetes_cluster_34.webp 512w\", \"/static/25267154a8fc752c811b7dde110b0b5f/d7f04/kubernetes_cluster_34.webp 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/25267154a8fc752c811b7dde110b0b5f/b1806/kubernetes_cluster_34.png 256w\", \"/static/25267154a8fc752c811b7dde110b0b5f/7572d/kubernetes_cluster_34.png 512w\", \"/static/25267154a8fc752c811b7dde110b0b5f/2c8f1/kubernetes_cluster_34.png 804w\"],\n    \"sizes\": \"(max-width: 804px) 100vw, 804px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/25267154a8fc752c811b7dde110b0b5f/2c8f1/kubernetes_cluster_34.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"If you now delete the Pod manually - simulating a crash - a new pod will be automatically spawned by Kubernetes to replace the Pod you just lost:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.25%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/8d3d1/kubernetes_cluster_35.webp 256w\", \"/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/354cf/kubernetes_cluster_35.webp 512w\", \"/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/47a22/kubernetes_cluster_35.webp 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/b1806/kubernetes_cluster_35.png 256w\", \"/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/7572d/kubernetes_cluster_35.png 512w\", \"/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/368d4/kubernetes_cluster_35.png 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/368d4/kubernetes_cluster_35.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"In the case above, your web service would have experienced a few seconds of downtime while waiting for the new pod to spin up. To prevent this issue we can go back to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pods.yaml\"), \" and set the number of \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"replicas\"), \" to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"2\"), \". Now if the first pod crashes, the second one will replace it right away:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"798px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"11.403508771929824%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/2b874f5c233617a060b5fbd80d8670d6/8d3d1/kubernetes_cluster_36.webp 256w\", \"/static/2b874f5c233617a060b5fbd80d8670d6/354cf/kubernetes_cluster_36.webp 512w\", \"/static/2b874f5c233617a060b5fbd80d8670d6/bf233/kubernetes_cluster_36.webp 798w\"],\n    \"sizes\": \"(max-width: 798px) 100vw, 798px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/2b874f5c233617a060b5fbd80d8670d6/b1806/kubernetes_cluster_36.png 256w\", \"/static/2b874f5c233617a060b5fbd80d8670d6/7572d/kubernetes_cluster_36.png 512w\", \"/static/2b874f5c233617a060b5fbd80d8670d6/1309b/kubernetes_cluster_36.png 798w\"],\n    \"sizes\": \"(max-width: 798px) 100vw, 798px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/2b874f5c233617a060b5fbd80d8670d6/1309b/kubernetes_cluster_36.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"deployment-recommended\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#deployment-recommended\",\n    \"aria-label\": \"deployment recommended permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Deployment (recommended)\"), mdx(\"p\", null, \"Unlike \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#replicaset-v1-apps\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"ReplicaSets\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#deployment-v1-apps\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Deployments\"), \" enable \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"rolling updates\"), \" with 0 downtime as well as \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"roll-backs\"), \" to older versions of your app!\"), mdx(\"p\", null, \"Let's start with deleting our ReplicaSet \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl delete replicaset webapp\"), \" - this is going to remove both the set and all pods that have been spawned from it:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"800px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"17.875000000000004%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7cc1cd902796265e8a6e9a377f26afd9/8d3d1/kubernetes_cluster_37.webp 256w\", \"/static/7cc1cd902796265e8a6e9a377f26afd9/354cf/kubernetes_cluster_37.webp 512w\", \"/static/7cc1cd902796265e8a6e9a377f26afd9/47a22/kubernetes_cluster_37.webp 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7cc1cd902796265e8a6e9a377f26afd9/b1806/kubernetes_cluster_37.png 256w\", \"/static/7cc1cd902796265e8a6e9a377f26afd9/7572d/kubernetes_cluster_37.png 512w\", \"/static/7cc1cd902796265e8a6e9a377f26afd9/368d4/kubernetes_cluster_37.png 800w\"],\n    \"sizes\": \"(max-width: 800px) 100vw, 800px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/7cc1cd902796265e8a6e9a377f26afd9/368d4/kubernetes_cluster_37.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"To now change our \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ReplicaSet\"), \" into a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Deployment\"), \" we only have to change \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"type: Deploymet\"), \" inside our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pods.yaml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  # Unique key of the Deployment\\n  name: webapp\\nspec:\\n  selector:\\n    matchLabels:\\n      # the Deployment manages all Pods\\n      # where the lable = app: webapp\\n      app: webapp\\n  # only 1 Pod should exist atm - if it\\n  # crashes, a new pod will be spawned.\\n  replicas: 1\\n  # Here starts the Pod Definition from b4\\n  template:\\n    metadata:\\n      # name: webapp / now we Deployment name\\n      labels:\\n        app: webapp\\n    spec:\\n      containers:\\n      - name: webapp\\n        image: richardchesterwood/k8s-fleetman-webapp-angular:release0\\n\\n---\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: queue\\n  labels:\\n    app: queue\\nspec:\\n  containers:\\n  - name: queue\\n    image: richardchesterwood/k8s-fleetman-queue:release1\\n\")), mdx(\"p\", null, \"We also changed the version of our app back to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"release0\"), \" so we can later test out the update procedure. Then apply the cahnges you made with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f pods.yaml\"), \":\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"801px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"37.70287141073658%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7d7a752c790568050471c987688b6b75/8d3d1/kubernetes_cluster_38.webp 256w\", \"/static/7d7a752c790568050471c987688b6b75/354cf/kubernetes_cluster_38.webp 512w\", \"/static/7d7a752c790568050471c987688b6b75/ce2ab/kubernetes_cluster_38.webp 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/7d7a752c790568050471c987688b6b75/b1806/kubernetes_cluster_38.png 256w\", \"/static/7d7a752c790568050471c987688b6b75/7572d/kubernetes_cluster_38.png 512w\", \"/static/7d7a752c790568050471c987688b6b75/e1788/kubernetes_cluster_38.png 801w\"],\n    \"sizes\": \"(max-width: 801px) 100vw, 801px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/7d7a752c790568050471c987688b6b75/e1788/kubernetes_cluster_38.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"As you can see, the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Deployment\"), \" was created and set up a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ReplicaSet\"), \" for us that spawned two \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Pods\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"deployment.apps/webapp   2/2\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"replicaset.apps/webapp-5fb4b78949   2\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"pod/webapp-5fb4b78949-77ddd   1/1\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"pod/webapp-5fb4b78949-kf7rr   1/1\")), mdx(\"h3\", {\n    \"id\": \"rolling-update-and-rollback\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#rolling-update-and-rollback\",\n    \"aria-label\": \"rolling update and rollback permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Rolling Update and Rollback\"), mdx(\"p\", null, \"Now to update our app back to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"release0-5\"), \" edit \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pods.yaml\"), \" and set the image to back to the 0.5 release. Afterwards run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f pods.yaml\"), \". This will start up a new \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ReplicaSet\"), \" with the updated pods, but keep the old set alive until the update is ready - resulting in a 0-downtime, rolling update of our app:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"796px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"37.311557788944725%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/78c3396872cef91fade6918d44eace6e/8d3d1/kubernetes_cluster_39.webp 256w\", \"/static/78c3396872cef91fade6918d44eace6e/354cf/kubernetes_cluster_39.webp 512w\", \"/static/78c3396872cef91fade6918d44eace6e/ed529/kubernetes_cluster_39.webp 796w\"],\n    \"sizes\": \"(max-width: 796px) 100vw, 796px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/78c3396872cef91fade6918d44eace6e/b1806/kubernetes_cluster_39.png 256w\", \"/static/78c3396872cef91fade6918d44eace6e/7572d/kubernetes_cluster_39.png 512w\", \"/static/78c3396872cef91fade6918d44eace6e/57ec9/kubernetes_cluster_39.png 796w\"],\n    \"sizes\": \"(max-width: 796px) 100vw, 796px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/78c3396872cef91fade6918d44eace6e/57ec9/kubernetes_cluster_39.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"As seen above, the new ReplicaSet was successfully deployed - but the old one was \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not deleted\"), \". In case that something goes wrong during the update and the new pods never spin up, the old ones will not go down - keeping your app alive. This also allows you to always come back to the old version, if something goes wrong after the update. You can follow the rollout process with the following command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl rollout status deployment webapp\\n\")), mdx(\"p\", null, \"To roll back to a working version of your app - after a desasterous update - check the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Rollout History\"), \" and run the rollback command to go back to a previous version or specify the revision you need:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"kubectl rollout history deployment webapp\\nkubectl rollout undo deployment webapp --to-revision=1\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"803px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"12.702366127023662%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/65c273b1e66eace29d3bc2f0e414adb3/8d3d1/kubernetes_cluster_40.webp 256w\", \"/static/65c273b1e66eace29d3bc2f0e414adb3/354cf/kubernetes_cluster_40.webp 512w\", \"/static/65c273b1e66eace29d3bc2f0e414adb3/2b283/kubernetes_cluster_40.webp 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/65c273b1e66eace29d3bc2f0e414adb3/b1806/kubernetes_cluster_40.png 256w\", \"/static/65c273b1e66eace29d3bc2f0e414adb3/7572d/kubernetes_cluster_40.png 512w\", \"/static/65c273b1e66eace29d3bc2f0e414adb3/4990a/kubernetes_cluster_40.png 803w\"],\n    \"sizes\": \"(max-width: 803px) 100vw, 803px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/65c273b1e66eace29d3bc2f0e414adb3/4990a/kubernetes_cluster_40.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"networking-and-service-discovery\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#networking-and-service-discovery\",\n    \"aria-label\": \"networking and service discovery permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Networking and Service Discovery\"), mdx(\"p\", null, \"We will now create a simple Pod to use as a test environment. Create a file named busybox.yaml with the following contents:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: busybox\\n  namespace: default\\nspec:\\n  containers:\\n  - name: busybox\\n    image: busybox:1.28\\n    command:\\n      - sleep\\n      - \\\"3600\\\"\\n    imagePullPolicy: IfNotPresent\\n  restartPolicy: Always\\n\")), mdx(\"p\", null, \"Then create a pod using this file and verify its status:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl create -f busybox.yaml\\npod/busybox created\\n\\nkubectl get pods busybox\\nNAME      READY     STATUS    RESTARTS   AGE\\nbusybox   1/1       Running   0          12s\\n\")), mdx(\"p\", null, \"Once that pod is running, you can \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"exec nslookup\"), \" in that environment. If you see something like the following, DNS is working correctly:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl exec -ti busybox -- nslookup kubernetes.default\\nServer:    10.96.0.10\\nAddress 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local\\n\\nName:      kubernetes.default\\nAddress 1: 10.96.0.1 kubernetes.default.svc.cluster.local\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nslookup\"), \" successfully contacted the internal \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CoreDNS server\"), \" on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"10.96.0.10\"), \" that Kubernetes provides and resolved the corresponding IP address for \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"kubernetes.default\"), \". If the address resolution fails, try to to bring down \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"FirewallD\"), \" and test which port is being blocked - don't forget to bring it back up afterwards:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"systemctl stop firewalld && systemctl disable firewalld\\nsystemctl start firewalld && systemctl enable firewalld\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"What to do if shutting down FirewallD \\\"solves\\\" your Problem?\")), mdx(\"p\", null, \"There are several threads on Github talking about this issue - \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/kubernetes/kubeadm/issues/504\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"this one\"), \" solved the issue for me:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Problem\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"nslookup\"), \" does not resolve any domains when FirewallD is active:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"[root@in-centos-master ~]# kubectl exec -ti webapp-cf477f847-9wqft sh\\n/ # nslookup database\\nnslookup: can't resolve '(null)': Name does not resolve\\n\\nnslookup: can't resolve 'database': Try again\\n/ # nslookup google.com\\nnslookup: can't resolve '(null)': Name does not resolve\\n\\nnslookup: can't resolve 'google.com': Try again\\n/ # exit\\ncommand terminated with exit code 1\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Solution\"), \": Configure \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"iptables\"), \" as follows by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/kubernetes/kubeadm/issues/504#issuecomment-404737675\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"copying this\"), \" to all nodes in cluster:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"systemctl stop kubelet\\nsystemctl stop docker\\nrm -rf /var/lib/cni/\\nrm -rf /etc/cni/net.d\\nrm -rf /run/flannel\\n\\niptables -t nat -F\\niptables -t mangle -F\\niptables -F\\niptables -X\\niptables -P INPUT ACCEPT\\niptables -P FORWARD ACCEPT\\niptables -P OUTPUT ACCEPT\\n\\n\\nip6tables -t nat -F\\nip6tables -t mangle -F\\nip6tables -F\\nip6tables -X\\nip6tables -P INPUT ACCEPT\\nip6tables -P FORWARD ACCEPT\\nip6tables -P OUTPUT ACCEPT\\n\\niptables -L -v -n \\niptables -L -v -n -t nat\\nconntrack -L \\nipset list\\n\\nlsmod|grep br_netfilter\\nmodprobe br_netfilter\\nsystemctl start docker\\nsystemctl start kubelet\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nslookup\"), \" should now work:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"/ # nslookup database\\nnslookup: can't resolve '(null)': Name does not resolve\\n\\nName:      database\\nAddress 1: 10.105.73.87 database.default.svc.cluster.local\\n/ # \\n\")), mdx(\"p\", null, \"Or check the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"DNS Debugging\"), \" section in the Kubernetes documentation.\"), mdx(\"p\", null, \"To be able to connect applications in different pods - e.g. having a backend container accessing a database in a different pod - Kubernetes has it's own \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"DNS Service\"), \" and we can assign pods to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Namespaces\"), \" to group them together. When we create a pod without specifying a namespace, it will be assigned the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"namespace: default\"), \". The command \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get all\"), \" shows us all pods that are inside this specific space. We can run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get namespaces\"), \" to see all available spaces that have been assigned by the DNS service:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"791px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"45.13274336283185%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/74642e7a378a80f37710ca39be0285a5/8d3d1/kubernetes_cluster_41.webp 256w\", \"/static/74642e7a378a80f37710ca39be0285a5/354cf/kubernetes_cluster_41.webp 512w\", \"/static/74642e7a378a80f37710ca39be0285a5/79c2e/kubernetes_cluster_41.webp 791w\"],\n    \"sizes\": \"(max-width: 791px) 100vw, 791px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/74642e7a378a80f37710ca39be0285a5/b1806/kubernetes_cluster_41.png 256w\", \"/static/74642e7a378a80f37710ca39be0285a5/7572d/kubernetes_cluster_41.png 512w\", \"/static/74642e7a378a80f37710ca39be0285a5/467c9/kubernetes_cluster_41.png 791w\"],\n    \"sizes\": \"(max-width: 791px) 100vw, 791px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/74642e7a378a80f37710ca39be0285a5/467c9/kubernetes_cluster_41.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"If we want to see Pods running in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"kube-system\"), \" namespace we can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get pods -n kube-system\"), \" command.\"), mdx(\"h3\", {\n    \"id\": \"creating-a-database-pod\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#creating-a-database-pod\",\n    \"aria-label\": \"creating a database pod permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Creating a Database Pod\"), mdx(\"p\", null, \"We now have a Web Application and a message broker in place. Next we want to a add a MariaDB database and we do so with the following configuration file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"networking-tests.yaml\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"apiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: mysql\\n  labels:\\n    app: mysql\\nspec:\\n  containers:\\n   - name: mysql\\n     image: mysql:5\\n     env:\\n      # Use secret in real life\\n      - name: MYSQL_ROOT_PASSWORD\\n        value: password\\n      - name: MYSQL_DATABASE\\n        value: fleetman\\n\\n---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  name: database\\nspec:\\n  selector:\\n    app: mysql\\n  ports:\\n  - port: 3306\\n  type: ClusterIP\\n\\n\")), mdx(\"p\", null, \"We can apply this configuration to our cluster with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl apply -f networking-tests.yaml\"), \" and verify that it is running with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl get all\"), \":\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"796px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"43.21608040201005%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/e4192f04852570412a6737644e00f0e3/8d3d1/kubernetes_cluster_42.webp 256w\", \"/static/e4192f04852570412a6737644e00f0e3/354cf/kubernetes_cluster_42.webp 512w\", \"/static/e4192f04852570412a6737644e00f0e3/ed529/kubernetes_cluster_42.webp 796w\"],\n    \"sizes\": \"(max-width: 796px) 100vw, 796px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/e4192f04852570412a6737644e00f0e3/b1806/kubernetes_cluster_42.png 256w\", \"/static/e4192f04852570412a6737644e00f0e3/7572d/kubernetes_cluster_42.png 512w\", \"/static/e4192f04852570412a6737644e00f0e3/57ec9/kubernetes_cluster_42.png 796w\"],\n    \"sizes\": \"(max-width: 796px) 100vw, 796px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/e4192f04852570412a6737644e00f0e3/57ec9/kubernetes_cluster_42.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"We now want to see if we can connect to the database from our webapp container. To do so we need to execute the shell command inside the container and check the DNS configuration file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"kubectl exec -it webapp-cf477f847-9wqft sh\\n/ # cat /etc/resolv.conf\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"809px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"11.495673671199011%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/501a0e9528d53bef7a49a08f9a512bad/8d3d1/kubernetes_cluster_43.webp 256w\", \"/static/501a0e9528d53bef7a49a08f9a512bad/354cf/kubernetes_cluster_43.webp 512w\", \"/static/501a0e9528d53bef7a49a08f9a512bad/c89b3/kubernetes_cluster_43.webp 809w\"],\n    \"sizes\": \"(max-width: 809px) 100vw, 809px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/501a0e9528d53bef7a49a08f9a512bad/b1806/kubernetes_cluster_43.png 256w\", \"/static/501a0e9528d53bef7a49a08f9a512bad/7572d/kubernetes_cluster_43.png 512w\", \"/static/501a0e9528d53bef7a49a08f9a512bad/14a1e/kubernetes_cluster_43.png 809w\"],\n    \"sizes\": \"(max-width: 809px) 100vw, 809px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/501a0e9528d53bef7a49a08f9a512bad/14a1e/kubernetes_cluster_43.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"In this case the CoreDNS server is registered under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nameserver 10.96.0.10\"), \" - that means that every time we need to resolve a domain name, like we did earlier with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubernetes.default\"), \", this DNS server is contacted to resolve the underlying IP address for us. We can verify this by typing:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl get services -n kube-system\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"810px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"7.777777777777778%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/eb5971b21ca15405f3cd6ddf15d9ab00/8d3d1/kubernetes_cluster_44.webp 256w\", \"/static/eb5971b21ca15405f3cd6ddf15d9ab00/354cf/kubernetes_cluster_44.webp 512w\", \"/static/eb5971b21ca15405f3cd6ddf15d9ab00/ecab0/kubernetes_cluster_44.webp 810w\"],\n    \"sizes\": \"(max-width: 810px) 100vw, 810px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/eb5971b21ca15405f3cd6ddf15d9ab00/b1806/kubernetes_cluster_44.png 256w\", \"/static/eb5971b21ca15405f3cd6ddf15d9ab00/7572d/kubernetes_cluster_44.png 512w\", \"/static/eb5971b21ca15405f3cd6ddf15d9ab00/07115/kubernetes_cluster_44.png 810w\"],\n    \"sizes\": \"(max-width: 810px) 100vw, 810px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/eb5971b21ca15405f3cd6ddf15d9ab00/07115/kubernetes_cluster_44.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"That means that if we want to connect to our database server from another pod in our cluster (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Service Discovery\"), \"), all we need to do is to connect to the domain name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"database\"), \" that is provided by the database service. This is very important since the assigned IP address can change all the time!\"), mdx(\"p\", null, \"Going back into the webapp container we can run a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nslookup\"), \" to see if the DNS service is working correctly:\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"807px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"23.42007434944238%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/f9340f0a8a9ae2afec449da69ccdc196/8d3d1/kubernetes_cluster_45.webp 256w\", \"/static/f9340f0a8a9ae2afec449da69ccdc196/354cf/kubernetes_cluster_45.webp 512w\", \"/static/f9340f0a8a9ae2afec449da69ccdc196/2eb59/kubernetes_cluster_45.webp 807w\"],\n    \"sizes\": \"(max-width: 807px) 100vw, 807px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/f9340f0a8a9ae2afec449da69ccdc196/b1806/kubernetes_cluster_45.png 256w\", \"/static/f9340f0a8a9ae2afec449da69ccdc196/7572d/kubernetes_cluster_45.png 512w\", \"/static/f9340f0a8a9ae2afec449da69ccdc196/0e069/kubernetes_cluster_45.png 807w\"],\n    \"sizes\": \"(max-width: 807px) 100vw, 807px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/f9340f0a8a9ae2afec449da69ccdc196/0e069/kubernetes_cluster_45.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"As you see, we can not only resolve internal cluster IPs but also internet domains - the CoreDNS service is using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"8.8.8.8\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"8.8.4.4\"), \" as _\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Upstream DNS Servers\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/tasks/administer-cluster/dns-custom-nameservers/#configure-stub-domain-and-upstream-dns-servers\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"by default\"), \".\"), mdx(\"p\", null, \"You can also see that the FQDN (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Fully Qualified Domain Name\"), \") of our database is actually \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"database.default.svc.cluster.local\"), \". The reason why we can simply use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"databse\"), \" to get an result, is that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/resolv.conf\"), \" file specifies that if a domain name is not found appened one of the standard strings to it and try again:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"search default.svc.cluster.local svc.cluster.local cluster.local\\n\")), mdx(\"p\", null, \"Just using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"database\"), \" as domain works fine because the pod is inside the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"default namespace\"), \". As soon as you start using different namespaces for different type of services, you \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"have to use the FQDN\"), \" instead - or at least appened the used namespace to it, e.g. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"database.mynondefaultnamespace\"), \" (the DNS service will then add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"svc.cluster.local\"), \" to find the FQDN for you).\"), mdx(\"p\", null, \"To check if the webapp container can access the MariaDB database, we can install the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"mySQL client\"), \" on the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Alpine image\"), \" that serves our webapp:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"apk update\\napk add mysql-client\\n\")), mdx(\"p\", null, \"To connect to our database we just have to type \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mysql\"), \" followed by the host address \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-h database\"), \" and the login credentials we set inside the configuration file earlier:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"mysql -h database -uroot -ppassword fleetman\\nMySQL [fleetman]> CREATE TABLE testtable (test varchar (255));\\nMySQL [fleetman]> SHOW TABLES;\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"808px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.70792079207921%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/18605dc4931b8e66b4d740ac628d32f9/8d3d1/kubernetes_cluster_46.webp 256w\", \"/static/18605dc4931b8e66b4d740ac628d32f9/354cf/kubernetes_cluster_46.webp 512w\", \"/static/18605dc4931b8e66b4d740ac628d32f9/66453/kubernetes_cluster_46.webp 808w\"],\n    \"sizes\": \"(max-width: 808px) 100vw, 808px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/18605dc4931b8e66b4d740ac628d32f9/b1806/kubernetes_cluster_46.png 256w\", \"/static/18605dc4931b8e66b4d740ac628d32f9/7572d/kubernetes_cluster_46.png 512w\", \"/static/18605dc4931b8e66b4d740ac628d32f9/db6b6/kubernetes_cluster_46.png 808w\"],\n    \"sizes\": \"(max-width: 808px) 100vw, 808px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/18605dc4931b8e66b4d740ac628d32f9/db6b6/kubernetes_cluster_46.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"kubernetes--compose--kompose\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#kubernetes--compose--kompose\",\n    \"aria-label\": \"kubernetes  compose  kompose permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Kubernetes + Compose = Kompose\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://kompose.io\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Kompose\"), \" is a conversion tool for Docker Compose to container orchestrators such as Kubernetes (or OpenShift).\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Simplify your development process with Docker Compose and then deploy your containers to a production cluster\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://kubernetes.io/docs/tasks/configure-pod-container/translate-compose-kubernetes/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Convert\"), \" your \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"docker-compose.yaml\"), \" with one simple command \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kompose convert\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Immediately bring up your cluster with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kompose up\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Bring it back down with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kompose down\"))), mdx(\"p\", null, \"Kompose is in EPEL CentOS repository. If you don\\u2019t have EPEL repository already installed and enabled you can do it by running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yum install epel-release\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"yum -y install kompose\\n\")), mdx(\"h3\", {\n    \"id\": \"use-kompose\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#use-kompose\",\n    \"aria-label\": \"use kompose permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Use Kompose\"), mdx(\"p\", null, \"In just a few steps, we\\u2019ll take you from Docker Compose to Kubernetes. All you need is an existing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker-compose.yml\"), \" file:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to the directory containing your \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"docker-compose.yml\"), \" file. Run the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kompose up\"), \" command to deploy to Kubernetes directly.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Or convert the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"docker-compose.yml\"), \" file to files that you can use with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kubectl\"), \", run \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"kompose convert\"), \":\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"807px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"49.44237918215614%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/cb6f00d71063329541c05275c4765417/8d3d1/kubernetes_cluster_47.webp 256w\", \"/static/cb6f00d71063329541c05275c4765417/354cf/kubernetes_cluster_47.webp 512w\", \"/static/cb6f00d71063329541c05275c4765417/2eb59/kubernetes_cluster_47.webp 807w\"],\n    \"sizes\": \"(max-width: 807px) 100vw, 807px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/cb6f00d71063329541c05275c4765417/b1806/kubernetes_cluster_47.png 256w\", \"/static/cb6f00d71063329541c05275c4765417/7572d/kubernetes_cluster_47.png 512w\", \"/static/cb6f00d71063329541c05275c4765417/0e069/kubernetes_cluster_47.png 807w\"],\n    \"sizes\": \"(max-width: 807px) 100vw, 807px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/cb6f00d71063329541c05275c4765417/0e069/kubernetes_cluster_47.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null), mdx(\"p\", null, \"And then \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kubectl create -f <output files>\"), \" - e.g. :\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"kubectl create -f api-service.yaml,elasticsearch-service.yaml,frontend-service.yaml,wiki-service.yaml,api-deployment.yaml,api-claim0-persistentvolumeclaim.yaml,elasticsearch-deployment.yaml,esdata-en-persistentvolumeclaim.yaml,frontend-deployment.yaml,frontend-claim0-persistentvolumeclaim.yaml,wiki-deployment.yaml\\n\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"799px\"\n    }\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"29.036295369211512%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n    \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/214bb6070760fa10146480fde6b74ebd/8d3d1/kubernetes_cluster_48.webp 256w\", \"/static/214bb6070760fa10146480fde6b74ebd/354cf/kubernetes_cluster_48.webp 512w\", \"/static/214bb6070760fa10146480fde6b74ebd/ad22c/kubernetes_cluster_48.webp 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/webp\"\n  })), \"\\n        \", mdx(\"source\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"srcSet\": [\"/static/214bb6070760fa10146480fde6b74ebd/b1806/kubernetes_cluster_48.png 256w\", \"/static/214bb6070760fa10146480fde6b74ebd/7572d/kubernetes_cluster_48.png 512w\", \"/static/214bb6070760fa10146480fde6b74ebd/77cba/kubernetes_cluster_48.png 799w\"],\n    \"sizes\": \"(max-width: 799px) 100vw, 799px\",\n    \"type\": \"image/png\"\n  })), \"\\n        \", mdx(\"img\", _extends({\n    parentName: \"picture\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n    },\n    \"src\": \"/static/214bb6070760fa10146480fde6b74ebd/77cba/kubernetes_cluster_48.png\",\n    \"alt\": \"Creating a Kubernetes Cluster\",\n    \"title\": \"\"\n  })), \"\\n      \"), \"\\n  \")), mdx(\"hr\", null));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"In this hands-on lab from  Linux Academy , we will install and configure a Kubernetes cluster consisting of 1 master and 2 nodes for the…","frontmatter":{"title":"Creating a Kubernetes Cluster","date":"01/15/2019","categories":["LINUX","Docker","Kubernetes"]},"timeToRead":12,"parent":{"mtime":"2019-07-07T14:10:14.906Z","birthtime":"2019-07-07T14:09:13.346Z"}}},"pageContext":{"slug":"/creating-a-kubernetes-cluster","prev":{"fields":{"slug":"/centos-administration"},"frontmatter":{"title":"Centos Administration","categories":["LINUX"]}},"next":{"fields":{"slug":"/kubernetes-and-microservices"},"frontmatter":{"title":"Kubernetes and Microservices","categories":["LINUX","Docker","Kubernetes"]}}}}}