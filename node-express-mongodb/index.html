<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.cdf8dc8b943865717cae.css">@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300-60c866748ff15f5b347fdba64596b1b1.woff2) format("woff2"),url(/static/open-sans-latin-300-521d17bc9f3526c690e8ada6eee55bec.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic-06bbd3188b34820cd83a0e0b3d0a6f57.woff2) format("woff2"),url(/static/open-sans-latin-300italic-8a648ff38ded89ea15916e84529d62d3.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400-cffb686d7d2f4682df8342bd4d276e09.woff2) format("woff2"),url(/static/open-sans-latin-400-bf2d0783515b7d75c35bde69e01b3135.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic-987032ea5d57c93d8da215678eae3b86.woff2) format("woff2"),url(/static/open-sans-latin-400italic-db70d0b9cb27ada1a260a2b35e756b8b.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600-223a277bd88d8a90c8cdf24cda0ad5f5.woff2) format("woff2"),url(/static/open-sans-latin-600-1cd5320f8937d337b61d5117cf9d7b28.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic-4950a7205f0b5cefe41fc03ac346e236.woff2) format("woff2"),url(/static/open-sans-latin-600italic-318ea1ada4102c0704a0637228dcad03.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700-d08c09f2f169f4a6edbcf8b8d1636cb4.woff2) format("woff2"),url(/static/open-sans-latin-700-623e3205570002af47fc2b88f9335d19.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic-c02f5da6e82e1efe0b45841bfd49ce37.woff2) format("woff2"),url(/static/open-sans-latin-700italic-72e19cbb0e38c6773a7751156752cec4.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800-aaeffaf205b9bbb09920089a14dbe9e8.woff2) format("woff2"),url(/static/open-sans-latin-800-c6aa0c4a601fb6ac66f8253fa594dff5.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic-6b3973ffe02bb6a8be0f8453506ec032.woff2) format("woff2"),url(/static/open-sans-latin-800italic-79b58175343190550489efe46a7f1138.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;-webkit-transform:rotate(-2deg);transform:rotate(-2deg)}:not(pre)>code[class*=language-]:after,pre[class*=language-]:after{right:.75em;left:auto;-webkit-transform:rotate(2deg);transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}</style><meta name="generator" content="Gatsby 2.3.25"/><style type="text/css" id="jss-server-side">.jss11 {
  color: inherit;
  border: 0;
  margin: 0;
  cursor: pointer;
  display: inline-flex;
  outline: none;
  padding: 0;
  position: relative;
  align-items: center;
  user-select: none;
  border-radius: 0;
  vertical-align: middle;
  justify-content: center;
  -moz-appearance: none;
  text-decoration: none;
  background-color: transparent;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}
.jss11::-moz-focus-inner {
  border-style: none;
}
.jss11.jss12 {
  cursor: default;
  pointer-events: none;
}
.jss5 {
  flex: 0 0 auto;
  color: rgba(0, 0, 0, 0.54);
  padding: 12px;
  overflow: visible;
  font-size: 1.7142857142857142rem;
  text-align: center;
  transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  border-radius: 50%;
}
.jss5:hover {
  background-color: rgba(0, 0, 0, 0.08);
}
.jss5.jss9 {
  color: rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .jss5:hover {
    background-color: transparent;
  }
}
.jss5:hover.jss9 {
  background-color: transparent;
}
.jss6 {
  color: inherit;
}
.jss7 {
  color: #358ccb;
}
.jss7:hover {
  background-color: rgba(53, 140, 203, 0.08);
}
@media (hover: none) {
  .jss7:hover {
    background-color: transparent;
  }
}
.jss8 {
  color: #f50057;
}
.jss8:hover {
  background-color: rgba(245, 0, 87, 0.08);
}
@media (hover: none) {
  .jss8:hover {
    background-color: transparent;
  }
}
.jss10 {
  width: 100%;
  display: flex;
  align-items: inherit;
  justify-content: inherit;
}
.jss14 {
  fill: currentColor;
  width: 1em;
  height: 1em;
  display: inline-block;
  font-size: 24px;
  transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  user-select: none;
  flex-shrink: 0;
}
.jss15 {
  color: #358ccb;
}
.jss16 {
  color: #f50057;
}
.jss17 {
  color: rgba(0, 0, 0, 0.54);
}
.jss18 {
  color: #f44336;
}
.jss19 {
  color: rgba(0, 0, 0, 0.26);
}
.jss20 {
  font-size: inherit;
}
.jss21 {
  font-size: 20px;
}
.jss22 {
  font-size: 35px;
}
.jss25 {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1300;
  position: fixed;
}
.jss26 {
  visibility: hidden;
}
.jss24 {
  outline: none;
  position: absolute;
  min-width: 16px;
  max-width: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 16px;
  max-height: calc(100% - 32px);
}
.jss23 {
  max-height: calc(100% - 96px);
  -webkit-overflow-scrolling: touch;
}
.jss2 {
  width: 40px;
  height: 40px;
  display: flex;
  position: relative;
  overflow: hidden;
  font-size: 1.4285714285714284rem;
  align-items: center;
  flex-shrink: 0;
  font-family: Arial, sans-serif;
  user-select: none;
  border-radius: 50%;
  justify-content: center;
}
.jss3 {
  color: #fafafa;
  background-color: #bdbdbd;
}
.jss4 {
  width: 100%;
  height: 100%;
  text-align: center;
  object-fit: cover;
}
html {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
*, *::before, *::after {
  box-sizing: inherit;
}
body {
  margin: 0;
  background-color: #fafafa;
}
@media print {
  body {
    background-color: #fff;
  }
}
.jss27 {
  display: none;
}
.is-aside.closed .jss27, .moving-featured.closed .jss27 {
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
  height: 80px;
  display: flex;
  padding: 0 30px 0 40px;
  position: absolute;
  align-items: center;
  flex-direction: row;
  justify-content: space-between;
}
.jss27 h3 {
  color: #444444;
  margin: -.2em 0 0 0;
  font-size: 1.1em;
  font-weight: 600;
  text-transform: uppercase;
}
.jss27 h3 small {
  margin: 0 0 .1em;
  display: block;
  font-size: .6em;
  font-weight: 300;
  letter-spacing: .2em;
}
.jss28 {
  color: #444444;
}
.jss29 {
  color: #358ccb;
  margin: 0 calc(-.5rem + 20px) 1em calc(-.5rem + 20px);
  padding: 0 1em 1em;
  position: relative;
  font-size: 1.2em;
  line-height: 1;
  font-weight: 300;
  border-bottom: 1px solid #dedede;
}
.jss29 strong {
  display: block;
  font-weight: 600;
}
.jss29 small {
  margin: 0 0 .3em 0;
  display: block;
}
@media (min-width: 1024px) {
  .jss29 {
    margin: 0 0 1em 0;
    padding: 0 1em 1.5em;
  }
  .is-aside .jss29 {
    margin: 0 calc(-.5rem + 20px) 1em calc(-.5rem + 20px);
    padding: 0 0 1em .5em;
  }
}
.jss30 {
  top: 0;
  right: 0;
  position: absolute;
}
.jss31 {
  margin: 0 0 .7em 0;
  transition: height 1s;
}
@media (min-width: 600px) {
  .jss31 {
    margin: 0 0 1.5rem 0;
  }
}
@media (min-width: 1024px) {
  .moving-featured .jss31, .is-aside .jss31 {
    margin: 0 0 0 0;
  }
}
.jss32 {
  color: #444444;
  display: flex;
  padding: .7em 1em .7em 1em;
  align-items: center;
  align-content: center;
  flex-direction: row;
  justify-content: flex-start;
}
@media (hover: hover) {
  .jss32:hover {
    color: #358ccb;
  }
  .jss32:hover .pointer {
    border-radius: 65% 75%;
  }
}
.jss33 {
  width: 60px;
  height: 60px;
  margin: 0;
  position: relative;
  overflow: hidden;
  transition: all .5s;
  flex-shrink: 0;
  border-radius: 75% 65%;
}
.jss33 img {
  width: 100%;
  height: 100%;
}
@media (min-width: 600px) {
  .jss33 {
    width: 80px;
    height: 80px;
    margin-right: .5em;
  }
}
@media (min-width: 1024px) {
  .jss33 {
    width: 90px;
    height: 90px;
    transition: all .3s;
    margin-right: .8em;
    transition-timing-function: ease;
  }
  .moving-featured .jss33, .is-aside .jss33 {
    width: 30px;
    height: 30px;
  }
}
.jss34 {
  width: 100%;
  margin: 0 0 0 1.5em;
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}
.jss34 h1 {
  margin: 0;
  font-size: 1.3em;
  line-height: 1.15;
  font-weight: 600;
  letter-spacing: -0.03em;
}
.jss34 h2 {
  margin: .3em 0 0 0;
  display: block;
  font-size: 1.1em;
  line-height: 1.2;
}
@media (min-width: 1024px) {
  .moving-featured .jss34, .is-aside .jss34 {
    margin: 0 0 0 .5em;
  }
}
@media (min-width: 600px) {
  .jss34 h2 {
    font-size: 1.265em;
  }
}
@media (min-width: 1024px) {
  .jss34 h2 {
    font-size: 1.4300000000000002em;
  }
  .moving-featured .jss34 h2, .is-aside .jss34 h2 {
    display: none;
  }
}
@media (min-width: 600px) {
  .jss34 h1 {
    font-size: 1.4949999999999999em;
  }
}
@media (min-width: 1024px) {
  .jss34 h1 {
    font-size: 1.6900000000000002em;
  }
  .moving-featured .jss34 h1, .is-aside .jss34 h1 {
    font-size: 1em;
    font-weight: 400;
  }
}
.jss24 {
  top: 0;
  left: 0;
  width: 100%;
  bottom: 0;
  position: absolute;
}
.jss25 {
  padding: calc(60px + 1.3rem) 1.3rem calc(60px + 1.3rem) 1.3rem;
}
@media (min-width: 600px) {
  .jss25 {
    padding: calc(60px + 2rem) 2rem calc(60px + 2rem) 2rem;
  }
}
@media (min-width: 1024px) {
  .jss25 {
    left: 320px;
    padding: 2rem  calc(1rem + 17px) calc(2rem + 17px) 2rem;
  }
  .moving-featured .jss25, .is-aside .jss25 {
    padding: 1rem .5rem 1rem .5rem;
  }
}
.jss26 {
  margin: 0;
  padding: 0;
  list-style: none;
}
.is-aside.closed .jss26, .moving-featured.closed .jss26 {
  display: none;
}
.jss23 {
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  position: absolute;
  transform: translate3d(0, 0, 0);
  background: #ffffff;
  transition: left .9s;
  will-change: left, top, bottom, width;
  transition-timing-function: ease;
}
@media (max-width: 1023px) {
  .jss23.is-aside {
    left: -100%;
  }
  .jss23.is-featured {
    left: 0;
  }
}
@media (min-width: 1024px) {
  .jss23.is-featured {
    top: 0;
    left: 320px;
    width: calc(100vw - 320px - 60px);
    transition: left .9s;
  }
  .jss23.is-aside {
    top: auto;
    left: 0;
    width: 319px;
    z-index: 1;
    transition: none, bottom 0.5s;
  }
  .jss23.moving-aside {
    top: 0;
    left: calc(-100vw + 700px);
    width: calc(100vw - 320px - 60px);
    transition: left 0.9s;
  }
  .jss23.resizing-aside {
    top: auto;
    left: 0;
    width: 319px;
    transition: none;
  }
  .jss23.moving-featured {
    top: auto;
    left: 0;
    width: 319px;
    bottom: -100%;
    z-index: 1;
    transition: bottom .3s;
  }
  .jss23.resizing-featured {
    top: 0;
    left: calc(-100vw + 700px);
    width: calc(100vw - 320px - 60px);
    bottom: auto;
    transition: none;
  }
  .jss23.resizing-aside.closed {
    bottom: calc(-100% + 100px);
    height: calc(100% - 100px);
  }
  .jss23.resizing-aside.open {
    bottom: calc(-100% + 100px);
    height: calc(100% - 100px);
  }
  .jss23.is-aside.closed {
    bottom: calc(-100% + 100px + 80px);
    height: calc(100% - 100px);
  }
  .jss23.is-aside.open {
    bottom: 0;
    height: calc(100% - 100px);
  }
  .jss23.is-aside::after {
    top: 0;
    left: 20px;
    right: 20px;
    height: 0;
    content: "";
    position: absolute;
    border-top: 1px solid #dedede;
  }
}
.jss57 {
  color: #444444;
}
.jss35 {
  left: 0;
  width: 100%;
  bottom: 0;
  height: 60px;
  display: flex;
  padding: 0 20px;
  position: absolute;
  background: #ffffff;
  flex-direction: row;
  justify-content: space-between;
}
.jss35::before {
  top: 0;
  left: 20px;
  right: 20px;
  height: 0;
  content: "";
  position: absolute;
  border-top: 1px solid #dedede;
}
@media (min-width: 600px) {
  .jss35 {
    padding: 0 calc(20px * 1.5);
  }
}
@media (min-width: 1024px) {
  .jss35 {
    top: 0;
    left: auto;
    right: 0;
    width: 60px;
    height: 100%;
    padding: 20px 0;
    flex-direction: column;
  }
  .jss35::before {
    top: 20px;
    left: 0;
    right: auto;
    width: 0;
    bottom: 20px;
    height: auto;
    border-left: 1px solid #dedede;
  }
}
.jss36 {
  display: flex;
  align-items: center;
  flex-direction: row;
}
@media (min-width: 1024px) {
  .jss36 {
    flex-direction: column;
  }
}
.jss37 {
  color: #444444;
}
.jss66 {
  float: right;
  margin: 5px 10px 0 0;
}
.jss67 {
  color: #444444;
}
.jss62 {
  top: 0;
  left: 0;
  width: 100%;
  height: 60px;
  position: absolute;
  background: #ffffff;
}
.jss62::before {
  left: 20px;
  right: 20px;
  height: 0;
  bottom: 0;
  content: "";
  position: absolute;
  border-top: 1px solid #dedede;
}
@media (min-width: 1024px) {
  .jss62 {
    display: none;
  }
}
.jss63 {
  float: left;
  color: #444444;
  margin: 10px 0 0 15px;
}
.jss63 small {
  margin: 2px 0 0 0;
  display: block;
  font-size: .65em;
}
.jss64 {
  float: left;
  margin: 13px 0 0 30px;
  display: block;
}
.jss65 {
  width: 31px;
  border: 1px solid #ddd;
  height: 31px;
  border-radius: 65% 75%;
}
.jss1 {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 1px;
  position: absolute;
  overflow: hidden;
}
@media print {
  .jss1 {
    position: relative;
    overflow: visible;
  }
}
article, aside, footer, header, nav, section, figcaption, figure, main {
  display: block;
}
h1 {
  margin: 0.67em 0;
  font-size: 2em;
}
hr {
  height: 0;
  overflow: visible;
  box-sizing: content-box;
}
pre {
  font-size: 1em;
  font-family: monospace, monospace;
}
a:active, a:hover {
  outline-width: 0;
}
abbr[title] {
  border-bottom: none;
  text-decoration: underline;
}
b, strong {
  font-weight: bolder;
}
code, kbp, samp {
  font-size: 1em;
  font-family: monospace, monospace;
}
dfn {
  font-style: italic;
}
mark {
  color: #000;
  background-color: #ff0;
}
small {
  font-size: 80%;
}
sub, sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
audio, video {
  display: inline-block;
}
audio:not([controls]) {
  height: 0;
  display: none;
}
img {
  border-style: none;
  vertical-align: middle;
}
svg:not(:root) {
  overflow: hidden;
}
button, input, optgroup, select, textarea {
  margin: 0;
  font-size: 100%;
  font-family: sans-serif;
  line-height: 1.15;
}
button, input {
  overflow: visible;
}
button, select {
  text-transform: none;
}
button, [type=reset], [type=submit] {
  -webkit-appearance: button;
}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner {
  padding: 0;
  border-style: none;
}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring {
  outline: 1px dotted ButtonText;
}
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  color: inherit;
  display: table;
  padding: 0;
  max-width: 100%;
  box-sizing: border-box;
  white-space: normal;
}
progress {
  display: inline-block;
  vertical-align: baseline;
}
textarea {
  overflow: auto;
}
[type=checkbox], [type=radio] {
  padding: 0;
  box-sizing: border-box;
}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button {
  height: auto;
}
[type=search] {
  appearance: textfield;
  outline-offset: -2px;
}
[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration {
  appearance: none;
}
::-webkit-file-upload-button {
  font: inherit;
  appearance: button;
}
details, menu {
  display: block;
}
summary {
  display: list-item;
}
canvas {
  display: inline-block;
}
template {
  display: none;
}
[hidden] {
  display: none;
}
html {
  box-sizing: border-box;
  font-family: Open Sans;
  line-height: 1.15;
  text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: 100%;
}
html.wf-active {
  font-family: Open Sans;
}
*, *:before, *:after {
  box-sizing: inherit;
}
noscript {
  top: 50%;
  left: 50%;
  color: #fff;
  z-index: 1000;
  padding: 1.5rem 2.5rem;
  position: absolute;
  transform: translate(-50%, -50%);
  background: #d00;
  box-shadow: 0 0 10px 52px rgba(255,255,255,.8);
  font-weight: 400;
  border-radius: 2px;
}
body {
  margin: 0;
  background: #ffffff;
  -webkit-tap-highlight-color: rgba(0,0,0,.05);
}
main {
  position: relative;
}
h1, h2, h3 {
  font-weight: 300;
}
a {
  background: transparent;
  transition: 0.3s;
  font-weight: bold;
  text-decoration: none;
  text-decoration-skip: objects;
}
input:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 50px white inset;
}
:not(pre) > code[class*='language-'] {
  color: #666;
  padding: 1px 5px;
  background: #eee;
  text-shadow: none;
  border-radius: 2px;
}
.jss2 {
  top: 0;
  left: 0;
  width: 100%;
  bottom: 0;
  position: absolute;
  animation-name: main-entry;
  animation-duration: .5s;
}
@media (min-width: 1024px) {
  .jss2 {
    left: 320px;
    width: calc(100vw - 320px - 60px);
  }
}
@media print {
  .jss2 {
    position: relative;
  }
  .jss2 > div {
    overflow: visible!important;
  }
  .jss2 > div > div {
    position: relative!important;
  }
}
.jss3 {
  margin: 0 auto;
  padding: calc(1.5rem + undefinedpx) 1.8rem 1.5rem 1.5rem;
}
.jss3 strong, .jss3 b {
  font-weight: 600;
  letter-spacing: -.02em;
}
.jss3 a {
  display: inline-block;
  transition: 0.3s;
  font-weight: 600;
  text-shadow: 
         2px  2px #ffffff,
        -2px  2px #ffffff,
        -2px -2px #ffffff,
        -2px  2px #ffffff,
        -2px  0   #ffffff,
         2px  0   #ffffff
      ;
  letter-spacing: -.02em;
  text-decoration: none;
}
@media (min-width: 600px) {
  .jss3 {
    padding: calc(2.5rem + undefinedpx) 3.5rem 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss3 {
    padding: 3.5rem;
  }
}
.jss3 a:hover {
  color: hsl(205.20000000000005, 59.1%, 55.2%);
}
@keyframes main-entry {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}
.jss4 {
  margin: 0 auto;
  padding: calc(60px + 1.5rem) 1.5rem  1.5rem 1.5rem;
  max-width: 50em;
  background: #ffffff;
}
.jss4 strong, .jss4 b {
  letter-spacing: -.02em;
}
.jss4 a {
  transition: 0.3s;
  font-weight: bold;
  letter-spacing: -.02em;
  text-decoration: underline;
}
@media (min-width: 600px) {
  .jss4 {
    padding: calc(2.5rem + 60px) 3.5rem 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss4 {
    padding: 3.5rem;
  }
}
.jss4 a:hover {
  color: hsl(205.20000000000005, 59.1%, 55.2%);
}
.jss5 {
  margin: 0 0 3em;
}
.jss6 {
  color: #444444;
  margin: 0 0 0.4em;
  font-size: 1.6em;
  font-weight: 600;
  line-height: 1.1;
  letter-spacing: -0.04em;
}
@media (min-width: 600px) {
  .jss6 {
    font-size: 2.3em;
  }
}
@media (min-width: 1024px) {
  .jss6 {
    font-size: 2.5em;
    letter-spacing: -0.05em;
  }
}
.jss7 {
  color: #444444;
  font-size: 1.2em;
  line-height: 1.1;
  font-weight: 300;
}
@media (min-width: 600px) {
  .jss7 {
    font-size: 1.4em;
  }
}
@media (min-width: 1024px) {
  .jss7 {
    font-size: 1.5em;
  }
}
.jss8 {
  color: #444444;
  font-size: 0.9em;
  font-weight: 600;
}
.jss9 {
  color: #333333;
  line-height: 1.6;
}
.jss9 a {
  color: #358ccb;
}
.jss9 .gatsby-highlight {
  margin: 2em 0;
}
.jss9 .gatsby-resp-iframe-wrapper {
  margin: 2em 0;
}
.jss9 .gatsby-resp-image-link {
  margin: 2em -1.5rem;
  border: none;
}
.jss9 h2, .jss9 h3 {
  color: #444444;
  margin: 2em 0 1em;
  font-size: 1.5em;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.02em;
}
.jss9 h3 {
  font-size: 1.3em;
}
.jss9 p {
  margin: 0 0 1.5em 0;
  font-weight: 400;
}
.jss9 ul {
  padding: 0 0 0 1.3em;
  list-style: circle;
}
.jss9 li {
  margin: 0 0 .5em 0;
}
.jss9 blockquote {
  border: 5px solid #bbbbbb;
  margin: 2.5em 0;
  padding: 1em 1.1em 1em 1.3em;
  position: relative;
  font-style: italic;
}
@media (min-width: 600px) {
  .jss9 {
    font-size: 1.15em;
  }
}
@media (min-width: 1024px) {
  .jss9 {
    font-size: 1.1em;
  }
}
.jss9 blockquote p {
  margin: 0;
}
.jss9 blockquote::before, .jss9 blockquote::after {
  top: -5px;
  left: 50%;
  width: 94%;
  height: 5px;
  content: "";
  position: absolute;
  background: #ffffff;
  margin-left: -47%;
}
.jss9 blockquote::after {
  top: auto;
  bottom: -5px;
}
@media (min-width: 600px) {
  .jss9 ul {
    padding: 0 0 0 2em;
  }
}
@media (min-width: 600px) {
  .jss9 .gatsby-resp-image-link {
    margin: 2.5em -3.5rem;
  }
}
.jss1 {
  font-size: calc(1em * 1);
}
.jss15 {
  margin: 3em 0 0;
  padding: 3em 0 0;
  display: flex;
  border-top: 1px solid #ddd;
  align-items: center;
  flex-direction: column;
}
.jss15 a {
  color: #358ccb;
}
@media (min-width: 600px) {
  .jss15 {
    flex-direction: row;
    justify-content: center;
  }
}
.jss16 {
  width: 60px;
  margin: 0 1em 1em;
  height: 60px;
  border: 1px solid #ddd;
  flex-shrink: 0;
  border-radius: 75% 65%;
}
@media (min-width: 600px) {
  .jss16 {
    margin: 0 1em 0;
  }
}
.jss17 {
  display: flex;
  min-height: 50px;
  align-items: center;
  flex-dirction: column;
}
.jss12 {
  display: flex;
  padding: 1em 0 0;
  align-items: center;
  flex-direction: column;
  justify-content: center;
}
@media (min-width: 600px) {
  .jss12 {
    flex-direction: row;
  }
}
.jss13 {
  display: flex;
  flex-direction: row;
}
.jss13 .SocialMediaShareButton {
  margin: 0 .8em;
  cursor: pointer;
}
.jss14 {
  margin: 0 1em 1em;
  font-size: 1.2em;
}
@media (min-width: 600px) {
  .jss14 {
    margin: 0 1em;
  }
}
.jss11 {
  color: #444444;
  font-size: 1em;
  line-height: 1.4;
}
.jss11 p {
  margin: 0;
}
.jss22 {
  color: hsl(0, 0%, 40%);
  font-size: 0.8em;
  line-height: 1.4;
}
.jss22 a {
  color: #358ccb;
  font-weight: normal;
  text-shadow: none;
}
.jss22 a:hover {
  color: hsl(205.20000000000005, 59.1%, 60.2%);
}
.jss22 ul {
  margin: 0;
  padding: 0;
  list-style: none;
  text-align: center;
}
.jss22 li {
  margin: 0 .3em;
  display: inline-block;
}
.jss21 {
  color: #444444;
  padding: 1.5rem 1.5rem  calc(60px + 1.5rem) 1.5rem;
}
.jss21 p {
  margin: 0;
}
@media (min-width: 600px) {
  .jss21 {
    padding: 2rem 2.5rem  calc(60px + 2rem) 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss21 {
    padding: 2rem 3rem 2rem 3rem;
  }
}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Node/Express with MongoDB - Mike Polinowski</title><meta data-react-helmet="true" name="description" content="Mike Polinowski :: A Developer Blog and Personal Technology Playground"/><meta data-react-helmet="true" property="og:url" content="https://mpolinowski.github.io/node-express-mongodb/"/><meta data-react-helmet="true" property="og:title" content="Node/Express with MongoDB - Mike Polinowski"/><meta data-react-helmet="true" property="og:description" content="Mike Polinowski :: A Developer Blog and Personal Technology Playground"/><meta data-react-helmet="true" property="og:image" content="/static/e2ef1635a1d1e907a194785095851924/eadbd/photo-34445934842_9cbfb7dfcb_o-cover.jpg"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mpolinowski"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-bee6189e671fd3751e86.js"/><link as="script" rel="preload" href="/app-da3819f05330f793f0f0.js"/><link as="script" rel="preload" href="/styles-59c6ce951e190b0b96b8.js"/><link as="script" rel="preload" href="/0-d359e2059c411e3ebb25.js"/><link as="script" rel="preload" href="/11-27b3b11fcd77a7b2f8de.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-5c83e13c4628baa8d54f.js"/><link as="fetch" rel="preload" href="/static/d/714/path---node-express-mongodb-45-d-c60-rhrkMoXcltLwiBnnpMAvct9Jejc.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="jss1"><main class="jss2"><div style="position:relative;overflow:hidden;width:100%;height:100%"><div style="position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-overflow-scrolling:touch;margin-right:0;margin-bottom:0"><article class="jss4"><header class="jss5"><h1 class="jss6">Node/Express with MongoDB</h1><h3 class="jss7">Building a Express Web Library with a MongoDB Backend and Goodreads API Integration</h3><div class="jss8">Wed, 01 Jun 2016</div></header><div class="jss9 jss1"><p><a
    class="gatsby-resp-image-link"
    href="/static/79978ecac4a4ae232a04c3d156fb9477/9cb03/photo-34445934842_9cbfb7dfcb_o.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 58.46153846153847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABlrx5UIgt/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECESFB/9oACAEBAAEFAteXLRsnjZfK/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABESAxMv/aAAgBAQAGPwJQjDqn/8QAHBABAAIDAAMAAAAAAAAAAAAAAQAhEUFRMWGR/9oACAEBAAE/IW8PIdhz2THVfU1rYx8TFQD5P//aAAwDAQACAAMAAAAQ+P8A/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAEhMf/aAAgBAwEBPxCyMf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EEf/xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhQTFRYfD/2gAIAQEAAT8QgzVgdNNe8RkWtXWiurr96zzFjgofBOZBZFKpujTElUe+M0V1ux3P/9k='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Hongkong"
        title=""
        src="/static/79978ecac4a4ae232a04c3d156fb9477/a296c/photo-34445934842_9cbfb7dfcb_o.jpg"
        srcset="/static/79978ecac4a4ae232a04c3d156fb9477/f544b/photo-34445934842_9cbfb7dfcb_o.jpg 200w,
/static/79978ecac4a4ae232a04c3d156fb9477/41689/photo-34445934842_9cbfb7dfcb_o.jpg 400w,
/static/79978ecac4a4ae232a04c3d156fb9477/a296c/photo-34445934842_9cbfb7dfcb_o.jpg 800w,
/static/79978ecac4a4ae232a04c3d156fb9477/c35de/photo-34445934842_9cbfb7dfcb_o.jpg 1200w,
/static/79978ecac4a4ae232a04c3d156fb9477/8179c/photo-34445934842_9cbfb7dfcb_o.jpg 1600w,
/static/79978ecac4a4ae232a04c3d156fb9477/d7d8f/photo-34445934842_9cbfb7dfcb_o.jpg 2400w,
/static/79978ecac4a4ae232a04c3d156fb9477/9cb03/photo-34445934842_9cbfb7dfcb_o.jpg 2795w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<p><a href="github.com/mpolinowski/node_express_git">Github Repository</a></p>
<blockquote>
<p>This code is part of a training in web development with <a href="https://nodejs.org/en/">Node.js</a>. <a href="http://ejs.co">EJS</a> will be used as template engine for rendering HTML out of <a href="https://expressjs.com">Express</a>. The library application will use <a href="https://www.mongodb.com">MongoDB</a> to store information about books and authors - but will also employ the <a href="https://www.goodreads.com/api">GoodReads API</a> to provide more details on each. <a href="http://www.passportjs.org">Passport.js</a> is used for local security.</p>
</blockquote>
<ul>
<li>This is Part I and will guide us through the basic <a href="https://nodejs.org/en/">Node.js</a> and <a href="https://expressjs.com">Express</a> setup</li>
<li>In <a href="/node-express-mongodb-part-ii/">Part II</a> we will add <a href="https://bower.io/">Bower.js</a> and the <a href="https://gulpjs.com/">Gulp.js</a> taskrunner to manage our style dependencies and auto-restart our development environment using <a href="https://nodemon.io">Nodemon.js</a></li>
<li>In <a href="/node-express-mongodb-part-iii/">Part III</a> will add the magic of the <a href="http://ejs.co">EJS</a> templating engine</li>
<li><a href="/node-express-mongodb-part-iv/">Part IV</a> deals with advanced Express routing options</li>
<li><a href="/node-express-mongodb-part-v/">Part V</a> deals with <a href="http://www.passportjs.org">Passport.js</a> user authentication and <a href="https://www.mongodb.com">MongoDB</a></li>
</ul>
<!-- TOC -->
<ul>
<li><a href="#01-install-nodejs-and-expressjs-to-serve-our-web-application">01 Install Node.js and Express.js to serve our Web Application</a></li>
<li><a href="#02-add-start-script">02 Add Start Script</a></li>
<li><a href="#03-add-routing-hello-world">03 Add Routing (Hello World)</a></li>
<li><a href="#04-serve-static-files">04 Serve Static Files</a></li>
<li><a href="#05-add-bower-to-the-project">05 Add Bower to the Project</a></li>
<li>
<p><a href="#06-add-gulp-to-the-project">06 Add Gulp to the Project</a></p>
<ul>
<li><a href="#inject-bower-dependencies-with-wiredep">Inject Bower Dependencies with Wiredep</a></li>
<li><a href="#inject-with-gulp-inject">Inject with Gulp-Inject</a></li>
<li><a href="#auto-restart-with-nodemon">Auto-restart with Nodemon</a></li>
</ul>
</li>
<li><a href="#07-add-a-templating-engine---ejs">07 Add a Templating Engine - EJS</a></li>
<li><a href="#08-adding-a-page-navigation-with-routing">08 Adding a Page Navigation with Routing</a></li>
<li>
<p><a href="#09-adding-a-router-for-the-listview-of-our-book-page">09 Adding a Router for the Listview of our Book Page</a></p>
<ul>
<li><a href="#adding-a-route-to-render">Adding a Route to Render</a></li>
<li><a href="#cleaning-up-the-app-file-with-routers">Cleaning up the App File with Routers</a></li>
</ul>
</li>
<li><a href="#10-creating-a-single-book-by-id-route--view">10 Creating a Single Book by ID Route &#x26; View</a></li>
<li><a href="#11-cleaning-up-our-routes-by-creating-a-variable-for-the-nav-element">11 Cleaning up our routes by creating a variable for the NAV element</a></li>
<li>
<p><a href="#12-adding-mongodb">12 Adding MongoDB</a></p>
<ul>
<li><a href="#download-and-install-mongodb">Download and Install MongoDB</a></li>
<li><a href="#create-adminroutes-to-populate-the-database">Create adminRoutes to populate the Database</a></li>
</ul>
</li>
<li>
<p><a href="#14-use-the-mongodb-response">14 Use the MongoDB Response</a></p>
<ul>
<li><a href="#select-many">Select Many</a></li>
<li><a href="#select-one">Select One</a></li>
</ul>
</li>
<li><a href="#15-creating-a-signin-form-on-indexejs">15 Creating a SignIn Form on Index.ejs</a></li>
<li><a href="#16-creating-the-authentication-route">16 Creating the Authentication Route</a></li>
<li><a href="#17-adding-passportjs-middleware">17 Adding Passport.js Middleware</a></li>
<li><a href="#18-authentication-with-local-strategy">18 Authentication with Local Strategy</a></li>
<li><a href="#19-saving-the-user-to-mongodb">19 Saving the User to MongoDB</a></li>
<li><a href="#20-user-signin-from-mongodb">20 User SignIn from mongoDB</a></li>
<li><a href="#21-verifying-user-in-db">21 Verifying User in DB</a></li>
</ul>
<!-- /TOC -->
<h2 id="01-install-nodejs-and-expressjs-to-serve-our-web-application"><a href="#01-install-nodejs-and-expressjs-to-serve-our-web-application" aria-label="01 install nodejs and expressjs to serve our web application permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>01 Install Node.js and Express.js to serve our Web Application</h2>
<p>First install <a href="https://nodejs.org/en/download/">Node.js</a> and initialize the project with npm init. Then npm install express —save to the app directory.</p>
<p>Create a <em>app.js</em> and run the Express webserver on a specified port:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Running the app with node app.js should give you the console log that the webserver is up an running on the specified port.</p>
<h2 id="02-add-start-script"><a href="#02-add-start-script" aria-label="02 add start script permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>02 Add Start Script</h2>
<p>Now we will add a npm script to the <em>package.json</em> file to start our app:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"node-express"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Library App"</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"app.js"</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span class="token punctuation">,</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"node app.js"</span></code></pre></div>
<p>The line <em>“start”: “node app.js”</em> allows us to use the npm start command instead of having to define our starting point like before - <em>node app.js</em></p>
<h2 id="03-add-routing-hello-world"><a href="#03-add-routing-hello-world" aria-label="03 add routing hello world permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>03 Add Routing (Hello World)</h2>
<p>When accessing the home route (<a href="http://localhost:3000/">http://localhost:3000/</a>), we want to send a Hello World, to test our routing. Then we add another route - /books to the <em>app.js</em> file:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World from the books route'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="04-serve-static-files"><a href="#04-serve-static-files" aria-label="04 serve static files permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>04 Serve Static Files</h2>
<p>We first add to new folders to our project - public/css &#x26; public/js and a src/views folder. We download a free Bootstrap theme from a page like bootstrapzero.com and put the css/js files into the public folder. The html file has to be located in the views folder.</p>
<p>The Express middleware is used to serve the content of our public folder, by adding the line app.use(express.static(‘public’)); to the app.js file. The static html file - index.html - from our template, will be served by app.use(express.static(‘src/views’));.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'src/views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World from the books route'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Through the public route, we are now able to access the css/js files by typing in e.g. <a href="http://localhost:3000/css/styles.css">http://localhost:3000/css/styles.css</a> into our browser (the bootstrap components of the template will not be used - we Bower to add them later - <strong>DELETE THOSE FILES FOR <a href="/node-express-mongodb-part-ii/">Next Part</a></strong>. The index.html is accessible by <a href="http://localhost:3000/index.html">http://localhost:3000/index.html</a>.</p>
<h2 id="05-add-bower-to-the-project"><a href="#05-add-bower-to-the-project" aria-label="05 add bower to the project permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>05 Add Bower to the Project</h2>
<p>First install Bower globally with <em>npm install bower -g</em>. Then do a bower init to the app directory (creation of bower.json).</p>
<p>We now add a new file to tell Bower to install directly into our public directory:</p>
<p><strong>.bowerrc</strong></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"directory"</span><span class="token operator">:</span> <span class="token string">"public/lib"</span></code></pre></div>
<p>Next we bower install bootstrap font-awesome —save to get the latest stable version of the framework (add bower_components bootstrap + jquery). They will be installed to the lib directory in our public folder. The bootstrap/jquery/font-awesome files can now be added to the template index.html by linking e.g.</p>
<h2 id="06-add-gulp-to-the-project"><a href="#06-add-gulp-to-the-project" aria-label="06 add gulp to the project permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>06 Add Gulp to the Project</h2>
<h3 id="inject-bower-dependencies-with-wiredep"><a href="#inject-bower-dependencies-with-wiredep" aria-label="inject bower dependencies with wiredep permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inject Bower Dependencies with Wiredep</h3>
<p>First install Gulp with npm install -g gulp globally. Then install it to the app directory via <em>npm install —save-dev gulp</em> (as a development dependency). We now want to inject dependencies (css,js) to our views automatically with wiredep - <em>npm install —save-dev wiredep</em>.</p>
<p>We now add a new file to tell Gulp what to do - ignore node_modules only use files from the src directory, add dependencies with wiredep.</p>
<p><strong>gulpfile.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> jsFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'*.js'</span><span class="token punctuation">,</span> <span class="token string">'src/**/*.js'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'inject'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wiredep <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wiredep'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stream<span class="token punctuation">;</span> <span class="token comment">/* Use wiredep to inject css/js dependencies to views e.g. bootstrap */</span>

    <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
        bowerJson<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./bower.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">/* Tell wiredep to check dependencies from the bower.json file e.g. bootstrap */</span>
        directory<span class="token punctuation">:</span> <span class="token string">'./public/lib'</span><span class="token punctuation">,</span> <span class="token comment">/* Tell wiredep to find dependencies in the lib directory. It will search for the json file - e.g. ./public/lib/bootstrap/.bower.json */</span>
        ignorePath<span class="token punctuation">:</span> <span class="token string">'../../public'</span> <span class="token comment">/* The path to the css/js files has to be given relative to the public folder - e.g. (../../public/)/lib/bootstrap/dist/css/bootstrap.min.css*/</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./src/views/*.html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">wiredep</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Bootstrap 3 now uses LESS - we have to override the defaults to grab the CSS files instead and add them to our index.html. The main overrides can be added to the global bower.json file. This way the bower.json file inside public/lib/bootstrap and public/lib/font-awesome will be ignored.</p>
<p><strong>bower.json</strong></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"node-express"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"node express test"</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"app.js"</span><span class="token punctuation">,</span>
  <span class="token property">"authors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"[object Object]"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"MIT"</span><span class="token punctuation">,</span>
  <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"**/.*"</span><span class="token punctuation">,</span>
    <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
    <span class="token string">"bower_components"</span><span class="token punctuation">,</span>
    <span class="token string">"test"</span><span class="token punctuation">,</span>
    <span class="token string">"tests"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"bootstrap"</span><span class="token operator">:</span> <span class="token string">"^3.3.6"</span><span class="token punctuation">,</span>
    <span class="token property">"font-awesome"</span><span class="token operator">:</span> <span class="token string">"^4.6.1"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"bootstrap"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"main"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"dist/js/bootstrap.js"</span><span class="token punctuation">,</span>
        <span class="token string">"dist/css/bootstrap.min.css"</span><span class="token punctuation">,</span>
        <span class="token string">"dist/less/bootstrap.less"</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"font-awesome"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"main"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"less/font-awesome.less"</span><span class="token punctuation">,</span>
        <span class="token string">"css/font-awesome.min.css"</span><span class="token punctuation">,</span>
        <span class="token string">"scss/font-awesome.scss"</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>index.html</strong></p>
<p>We now have to add and to our index.html template to inject the Bower css/js dependencies, when the command gulp inject is run.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content-type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset=UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>LibraryApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1, maximum-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--bower:css--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/bootstrap/dist/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/font-awesome/css/font-awesome.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token comment">&lt;!--endbower--></span>
    <span class="token comment">&lt;!-- bower:js --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/jquery/dist/jquery.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/bootstrap/dist/js/bootstrap.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token comment">&lt;!-- endbower --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre></div>
<h3 id="inject-with-gulp-inject"><a href="#inject-with-gulp-inject" aria-label="inject with gulp inject permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inject with Gulp-Inject</h3>
<p>After injecting the Bower dependencies, we now have to inject our ccs and js files from the public folder. We will use Gulp-Inject to perform this task. First do a npm install —save-dev gulp inject, to install Gulp-Inject as a development dependency.</p>
<p>We now add Gulp-Inject to our gulpfile.js:</p>
<p><strong>gulpfile.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> jsFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'*.js'</span><span class="token punctuation">,</span> <span class="token string">'src/**/*.js'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'inject'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wiredep <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wiredep'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stream<span class="token punctuation">;</span>
    <span class="token keyword">var</span> inject <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-inject'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Use gulp-inject to inject our personal css/js dependencies to views */</span>

    <span class="token keyword">var</span> injectSrc <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./public/css/*.css'</span><span class="token punctuation">,</span> <span class="token comment">/* Tell gulp-inject where our personal css/js dependencies are located */</span>
        <span class="token string">'./public/js/*.js'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">/* We only need the path not content */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> injectOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        ignorePath<span class="token punctuation">:</span> <span class="token string">'/public'</span> <span class="token comment">/* Tell gulp-inject to use a path relative to /public */</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
        bowerJson<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./bower.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        directory<span class="token punctuation">:</span> <span class="token string">'./public/lib'</span><span class="token punctuation">,</span>
        ignorePath<span class="token punctuation">:</span> <span class="token string">'../../public'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./src/views/*.html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">wiredep</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">inject</span><span class="token punctuation">(</span>injectSrc<span class="token punctuation">,</span> injectOptions<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">/* Use gulp-inject to inject our personal css/js dependencies to views */</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>We now have to add and to our index.html template to inject our css/js dependencies, when the command gulp inject is run.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content-type<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset=UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>LibraryApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1, maximum-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--bower:css--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/bootstrap/dist/css/bootstrap.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/font-awesome/css/font-awesome.min.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token comment">&lt;!--endbower--></span>
    <span class="token comment">&lt;!-- bower:js --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/jquery/dist/jquery.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/lib/bootstrap/dist/js/bootstrap.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token comment">&lt;!-- endbower --></span>
    <span class="token comment">&lt;!-- inject:css--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/css/styles.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token comment">&lt;!-- endinject--></span>
    <span class="token comment">&lt;!--inject:js--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/js/default.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Will be automatically injected with the command "gulp inject" --></span>
    <span class="token comment">&lt;!--endinject--></span>
    <span class="token comment">&lt;!--[if lt IE 9]>
			&lt;script src="//html5shim.googlecode.com/svn/trunk/html5.js">&lt;/script>
		&lt;![endif]--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre></div>
<h3 id="auto-restart-with-nodemon"><a href="#auto-restart-with-nodemon" aria-label="auto restart with nodemon permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Auto-restart with Nodemon</h3>
<p>We now add Nodemon to monitor our node.js app - Nodemon will automatically restart the server when a change was detected. To install Nodemon type <em>npm install —save-dev nodemon</em>.</p>
<p>We now add Nodemon to our gulpfile.js:</p>
<p><strong>gulpfile.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nodemon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-nodemon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Add nodemon to automatically restart the server, when a change was detected */</span>

<span class="token keyword">var</span> jsFiles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'*.js'</span><span class="token punctuation">,</span> <span class="token string">'src/**/*.js'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'inject'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wiredep <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wiredep'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stream<span class="token punctuation">;</span>
    <span class="token keyword">var</span> inject <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-inject'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> injectSrc <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./public/css/*.css'</span><span class="token punctuation">,</span>
        <span class="token string">'./public/js/*.js'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> injectOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        ignorePath<span class="token punctuation">:</span> <span class="token string">'/public'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
        bowerJson<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./bower.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        directory<span class="token punctuation">:</span> <span class="token string">'./public/lib'</span><span class="token punctuation">,</span>
        ignorePath<span class="token punctuation">:</span> <span class="token string">'../../public'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./src/views/*.html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">wiredep</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">inject</span><span class="token punctuation">(</span>injectSrc<span class="token punctuation">,</span> injectOptions<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'serve'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'inject'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* Create a 'serve' task to automatically execute the 'inject' function above on start-up */</span>
    <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* In the line above we used an Object for the 'inject' function - here you can add more functions to be executed */</span>
        script<span class="token punctuation">:</span> <span class="token string">'app.js'</span><span class="token punctuation">,</span>  <span class="token comment">/* 'serve' starts our app.js on 'PORT' and nodemon restarts it when 'jsFiles' are changed */</span>
        delayTime<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        env<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'PORT'</span><span class="token punctuation">:</span> <span class="token number">8080</span>  <span class="token comment">/* Environment variables e.g. database connection strings */</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        watch<span class="token punctuation">:</span> jsFiles
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">nodemon</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'restart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Restarting...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="07-add-a-templating-engine---ejs"><a href="#07-add-a-templating-engine---ejs" aria-label="07 add a templating engine   ejs permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>07 Add a Templating Engine - EJS</h2>
<p>EJS combines data and a template to produce HTML. JavaScript between &#x3C;% %> is executed. JavaScript between &#x3C;%= %> adds strings to your HTML and &#x3C;%- %> can contain HTML formated content. To add our templating engine we first have to install it with npm install —save ejs. Now we add the engine to our app.js file:</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span> <span class="token comment">/* 'gulp serve' uses PORT 8080 - if no port is defined by the environment use port 3000 */</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Templating Engine is set to EJS */</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>title<span class="token punctuation">:</span> <span class="token string">'Rendered Title'</span><span class="token punctuation">,</span> list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* This content will be displayed in the index.ejs file we´ll create next */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World from the books route'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now we create a simple index.ejs file in our src/views directory:</p>
<p><strong>index.ejs</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"> <span class="token doctype">&lt;!DOCTYPE html></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>&lt;%= title %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>&lt;%= title %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
        &lt;%= for(var i=0; i<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list.length;</span> <span class="token attr-name">i++)</span> <span class="token attr-name">{</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>&lt;%= list[i] %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        &lt;%= } %>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<p>Open <a href="http://localhost:8080/">http://localhost:8080/</a> to check the result - EJS should fill out the title and create the unordered list with the items a and b. Now we will take the code from our template index.html code and copy it to index.ejs. EJS will later be used to display a list view of books in our library app.</p>
<h2 id="08-adding-a-page-navigation-with-routing"><a href="#08-adding-a-page-navigation-with-routing" aria-label="08 adding a page navigation with routing permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>08 Adding a Page Navigation with Routing</h2>
<p>We want to add two routes to our navigation bar - one for authors and one for books. In the final version of the library app, this will display all books either by their author or book title. We will create those routes in the app.js file and add the navigation to our navbar using EJS.</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* We change the list from before to a nav element */</span>
    <span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World from the books route'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><strong>index.ejs</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar navbar-inverse navbar-fixed-top<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>banner<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container-fluid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-toggle collapsed<span class="token punctuation">"</span></span> <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>collapse<span class="token punctuation">"</span></span> <span class="token attr-name">data-target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#bs-example-navbar-collapse-1<span class="token punctuation">"</span></span> <span class="token attr-name">aria-expanded</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sr-only<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Toggle navigation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon-bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon-bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>icon-bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-brand<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    &lt;%= title %> <span class="token comment">&lt;!-- Adding nav element from app.js --></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>collapse navbar-collapse<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bs-example-navbar-collapse-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav navbar-nav navbar-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    &lt;% for(var i=0; i&lt;nav.length;i++){%> <span class="token comment">&lt;!-- Adding nav element from app.js --></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>&lt;%=nav[i].Link%><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Adding nav element from app.js --></span>
                                &lt;%= nav[i].Text %> <span class="token comment">&lt;!-- Adding nav element from app.js --></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
                        &lt;%}%>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span></code></pre></div>
<h2 id="09-adding-a-router-for-the-listview-of-our-book-page"><a href="#09-adding-a-router-for-the-listview-of-our-book-page" aria-label="09 adding a router for the listview of our book page permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>09 Adding a Router for the Listview of our Book Page</h2>
<h3 id="adding-a-route-to-render"><a href="#adding-a-route-to-render" aria-label="adding a route to render permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a Route to Render</h3>
<p>We want to group all routes for the Book pages under one Router - later we will simply export this router from a separate file to app.js.</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Creating a Router for all Book Routes */</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token comment">/* When you go to /Books you will get the response 'Hello Books' */</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Books'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/Single'</span><span class="token punctuation">)</span> <span class="token comment">/* When you go to /Books/Single you will get the response 'Hello Single Books' */</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Single Books'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* bookRouter will be used once you go to /Books*/</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World from the books route'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>bookRouter now sends us a string ‘Hello Books’ or ‘Hello Single Books’ when we go to <a href="http://localhost:8080/Books">http://localhost:8080/Books</a> or <a href="http://localhost:8080/Books/Single">http://localhost:8080/Books/Single</a> . We now want to render different views when we access those URLs.</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* The render function requires an EJS file here to render */</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookListView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment">/* We change res.send to res.render. Since we set views to ../src/views, the router will search for a bookListView.ejs in this directory to render */</span>
        title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span> <span class="token comment">/* We have to add nav since it is displayed on every view - we will export it later */</span>
        list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/Single'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Single Books'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World from the books route'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>You can copy the index.ejs file and rename the copy to bookListView.ejs - this file will now be rendered, when you access <a href="http://localhost:8080/Books">http://localhost:8080/Books</a> .</p>
<p>Adding some Books to the Book View
We now have a view that is rendered when we access the Books view. Now we want to use EJS to populate the view with some books. Later, those books will be added from MongoDB. Now we just hardcode some books into app.js to prove the concept:</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>  <span class="token comment">/* Just some hardcoded books for now - later we will use MongoDB */</span>
    title<span class="token punctuation">:</span> <span class="token string">'Cryptonomicon'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Neil Stephenson'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Leviathan Wakes'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'James S.A. Corey'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'The Lord of the Rings'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'J.R.R. Tolkien'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Norwegian Wood'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Haruki Murakami'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Microserfs'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Douglas Coupland'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Up Country'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Nelson Demille'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Night over Water'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Ken Follett'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'The Stand'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Stephen King'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookListView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
        list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
        books<span class="token punctuation">:</span> books <span class="token comment">/* passing in the book array from above - so it will be available for rendering */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/Single'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Single Books'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span> Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World from the books route'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port'</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now we can modify our bookListview to add those books via EJS:</p>
<p><strong>ookListView.ejs</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        &lt;% for(var i=0; i<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>books.length;i++){</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Not &lt;%= ...  %> with the EQUAL sign it will not be executed --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-6 col-md-4 col-lg-3 center-block<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel panel-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel-heading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>&lt;%= books[i].title %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-12 col-sm-4 col-lg-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>story-title<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Books/&lt;%=books[i]._id%><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>&lt;%=books[i].cover%><span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span>100px</span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>img-thumbnail<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-12 col-sm-8 col-lg-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>label label-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>&lt;%= books[i].author %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-family</span><span class="token punctuation">:</span>courier<span class="token punctuation">,</span><span class="token string">'new courier'</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-muted<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Books/&lt;%= i %><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-muted<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Read More<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- The link to the detailed single book view will be /Books/[i] - we later change this to /Books/:id --></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            &lt;% } %> <span class="token comment">&lt;!-- Not &lt;%= } %> with the EQUAL sign it will not be executed --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre></div>
<p>When you access <a href="http://localhost:8080/Books">http://localhost:8080/Books</a> you will see the nav bar from before, as well as a list of our books.</p>
<h3 id="cleaning-up-the-app-file-with-routers"><a href="#cleaning-up-the-app-file-with-routers" aria-label="cleaning up the app file with routers permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cleaning up the App File with Routers</h3>
<p>Remove routes from the app.js file - We create a file bookRoutes.js under src/routes, cut bookRoutes from app.js and simply require bookRouter instead:</p>
<p><strong>bookRoutes.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> books <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'War and Peace'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Historical Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Lev Nikolayevich Tolstoy'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Les Misérables'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Historical Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Victor Hugo'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Time Machine'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Science Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'H. G. Wells'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'A Journey into the Center of the Earth'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Science Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Jules Verne'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Dark World'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Fantasy'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Henry Kuttner'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Wind in the Willows'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Fantasy'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Kenneth Grahame'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Life On The Mississippi'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'History'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Mark Twain'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Childhood'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Biography'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Lev Nikolayevich Tolstoy'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token comment">/* route accessed via /Books - bookListView.ejs will be rendered and populated with title, nav and books */</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookListView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
            nav<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
                Text<span class="token punctuation">:</span> <span class="token string">'Books'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
                Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            books<span class="token punctuation">:</span> books
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> bookRouter<span class="token punctuation">;</span> <span class="token comment">/* the bookRouter has to be exported to be available for require in app.js */</span></code></pre></div>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/bookRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* We now require the book routes that we moved to bookRouter.js*/</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* bookRouter is called here when you access /Books - routes are taken from bookRouter.js */</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
        nav<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Books'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="10-creating-a-single-book-by-id-route--view"><a href="#10-creating-a-single-book-by-id-route--view" aria-label="10 creating a single book by id route  view permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>10 Creating a Single Book by ID Route &#x26; View</h2>
<p>Now we want to add another route to a detailed view of a single books. The Route should be accessible by /Books/:id (ID of the book inside the hardcoded books object - later we will pull an ID from MongoDB). The view rendered will be bookView.ejs.</p>
<p><strong>bookRoutes.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> books <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'War and Peace'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Historical Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Lev Nikolayevich Tolstoy'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Les Misérables'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Historical Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Victor Hugo'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Time Machine'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Science Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'H. G. Wells'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'A Journey into the Center of the Earth'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Science Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Jules Verne'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Dark World'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Fantasy'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Henry Kuttner'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Wind in the Willows'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Fantasy'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Kenneth Grahame'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Life On The Mississippi'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'History'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Mark Twain'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Childhood'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Biography'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Lev Nikolayevich Tolstoy'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>


bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookListView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
            nav<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
                Text<span class="token punctuation">:</span> <span class="token string">'Books'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
                Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/:id'</span><span class="token punctuation">)</span>  <span class="token comment">/* We want to be able to access detailed info about a single book by adding the book ID - /Books/:id */</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> id <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span> <span class="token comment">/* pass id parameter into URL - will be retrieved from books[id] */</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment">/* We have to create another view for the single book - bookView.ejs */</span>
            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
            nav<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
                Text<span class="token punctuation">:</span> <span class="token string">'Books'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
                Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span>
            book<span class="token punctuation">:</span> books<span class="token punctuation">[</span>id<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> bookRouter<span class="token punctuation">;</span></code></pre></div>
<p>Now we need to write the view to be rendered bookView.ejs (the code below only contains the body part - the header is identical to bookListView.ejs):</p>
<p><strong>bookView.ejs</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Library App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-12 center-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel panel-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel-heading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>&lt;%= book.title %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-12 col-sm-2 col-lg-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>story-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Book Cover<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>&lt;%=book.book.image_url%><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>img-responsive<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-12 col-sm-10 col-lg-11<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>label label-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>&lt;%= book.author %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<h2 id="11-cleaning-up-our-routes-by-creating-a-variable-for-the-nav-element"><a href="#11-cleaning-up-our-routes-by-creating-a-variable-for-the-nav-element" aria-label="11 cleaning up our routes by creating a variable for the nav element permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>11 Cleaning up our routes by creating a variable for the NAV element</h2>
<p>We created a navbar in all our views and used EJS to inject some navigational elements in there. But we don´t want to have to copy it into every route. We will create a nav element in app.js instead.</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">5000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nav <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>                           <span class="token comment">/* We create a NAV element in app.js - this is now available for all routes */</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Book'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Author'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/bookRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* The NAV element is now automatically passed into bookRouter to be available on all bookRoutes */</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
        nav<span class="token punctuation">:</span> nav     <span class="token comment">/* We no longer have to type in the whole navigation - YEAH!*/</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now we have to wrap our routes into a router function with NAV as a variable, to make it available to those routes:</p>
<p><strong>bookRoutes.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nav</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* The router is wrapped into a function with NAV as a variable */</span>
    <span class="token keyword">var</span> books <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'War and Peace'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Historical Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Lev Nikolayevich Tolstoy'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Les Misérables'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Historical Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Victor Hugo'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Time Machine'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Science Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'H. G. Wells'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'A Journey into the Center of the Earth'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Science Fiction'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Jules Verne'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Dark World'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Fantasy'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Henry Kuttner'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'The Wind in the Willows'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Fantasy'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Kenneth Grahame'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Life On The Mississippi'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'History'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Mark Twain'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Childhood'</span><span class="token punctuation">,</span>
        genre<span class="token punctuation">:</span> <span class="token string">'Biography'</span><span class="token punctuation">,</span>
        author<span class="token punctuation">:</span> <span class="token string">'Lev Nikolayevich Tolstoy'</span><span class="token punctuation">,</span>
        read<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookListView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
            nav<span class="token punctuation">:</span> nav<span class="token punctuation">,</span>         <span class="token comment">/* All routes wrapped into router function can now use NAV as a variable */</span>
            books<span class="token punctuation">:</span> books
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/:id'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> id <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
            nav<span class="token punctuation">:</span> nav<span class="token punctuation">,</span> <span class="token comment">/* All routes wrapped into router function can now use NAV as a variable */</span>
            book<span class="token punctuation">:</span> books<span class="token punctuation">[</span>id<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> bookRouter<span class="token punctuation">;</span> <span class="token comment">/* bookRouter has now to be returned from our router function */</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>  <span class="token comment">/* We now have to export the router instead of bookRouter - the router function will be executed in app.js with the NAV element to create a router */</span></code></pre></div>
<h2 id="12-adding-mongodb"><a href="#12-adding-mongodb" aria-label="12 adding mongodb permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>12 Adding MongoDB</h2>
<h3 id="download-and-install-mongodb"><a href="#download-and-install-mongodb" aria-label="download and install mongodb permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Download and Install MongoDB</h3>
<p>The installer can be downloaded from <a href="https://www.mongodb.com">MongoDB.com</a></p>
<p>Install the database, navigate to the install directory (e.g. <em>C:\Program Files\MongoDB\Server\3.2\bin</em>) with your command line and start the application with the command <strong>mongod</strong>. Make sure that you created a directory C:\data\db before running the mongod process!</p>
<p>Useful Commands for MongoDB:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><em>Command</em></strong></td>
<td><strong><em>Function</em></strong></td>
</tr>
<tr>
<td><strong>mongo</strong></td>
<td>Start</td>
</tr>
<tr>
<td><strong>show dbs</strong></td>
<td>Display all Databases</td>
</tr>
<tr>
<td><strong>mongo libraryApp</strong></td>
<td>Open libraryApp Database</td>
</tr>
<tr>
<td><strong>show collections</strong></td>
<td>Show all Collections of the opened Databases</td>
</tr>
<tr>
<td><strong>db.books.find();</strong></td>
<td>Display all Objects inside the books Collection</td>
</tr>
<tr>
<td><strong>db.books.remove({})</strong></td>
<td>Remove all Objects from the books Collection</td>
</tr>
</tbody>
</table>
<h3 id="create-adminroutes-to-populate-the-database"><a href="#create-adminroutes-to-populate-the-database" aria-label="create adminroutes to populate the database permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create adminRoutes to populate the Database</h3>
<p>First install mongoDB into our project with <em>npm install —save mongodb</em></p>
<p>Now we create a new file adminRoutes.js in the src/routes directory.</p>
<p>adminRoutes.js</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> adminRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span> <span class="token comment">/* Pull in the mongoClient */</span>

<span class="token keyword">var</span> books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">/* Copy books from bookRoutes.js */</span>
    title<span class="token punctuation">:</span> <span class="token string">'Cryptonomicon'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0060512806'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Neil Stephenson'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'816'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/414L%2BIbzcvL._SX317_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Leviathan Wakes'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0316129089'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'James S.A. Corey'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'9533361'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/51QvTzb2vYL._SX322_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'The Lord of the Rings'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0395193958'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'J.R.R. Tolkien'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'569465'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/51eq24cRtRL._SX331_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Norwegian Wood'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0375704027'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Haruki Murakami'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'11297'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/512ZgaaHjIL._SX322_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Microserfs'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0006548598'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Douglas Coupland'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'2751'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/512ZD5DVC4L._SX345_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Up Country'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0446611913'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Nelson Demille'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'33820'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/512Jrk-RopL._SX290_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'Night over Water'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0451173139'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Ken Follett'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'967690'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/51OON2-%2BI-L._SX297_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'The Stand'</span><span class="token punctuation">,</span>
    isbn10<span class="token punctuation">:</span> <span class="token string">'0307947300'</span><span class="token punctuation">,</span>
    author<span class="token punctuation">:</span> <span class="token string">'Stephen King'</span><span class="token punctuation">,</span>
    bookId<span class="token punctuation">:</span> <span class="token string">'13155183'</span><span class="token punctuation">,</span>
    cover<span class="token punctuation">:</span> <span class="token string">'http://ecx.images-amazon.com/images/I/41IzCMjxPWL._SX320_BO1,204,203,200_.jpg'</span><span class="token punctuation">,</span>
    read<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nav</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    adminRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/addBooks'</span><span class="token punctuation">)</span> <span class="token comment">/* open http://localhost:8080/Admin/addBooks to add books to MongoDB */</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> url <span class="token operator">=</span>
                <span class="token string">'mongodb://localhost:27017/libraryApp'</span><span class="token punctuation">;</span> <span class="token comment">/* Connect to our local installation of MongoDB via the default port 27017 - create DB libraryApp on insert */</span>

            mongodb<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Connect to a Collection in libraryApp named books - is created on first insert */</span>
                collection<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span>books<span class="token punctuation">,</span> <span class="token comment">/* insertMany inserts all Objects from the books variable from above (otherwise insertOne) */</span>
                    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Display the Collection after Insert - Object will be assigned ID by MongoDB*/</span>
                        db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* db.close has to be inside the callback (async !)*/</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> adminRouter<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre></div>
<p>Add the /Admin route to App.js and use adminRouter for it</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">5000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nav <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Book'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Author'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/bookRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> adminRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/adminRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Add adminRoutes */</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Admin'</span><span class="token punctuation">,</span> adminRouter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Use adminRoutes for /Admin */</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Hello from render'</span><span class="token punctuation">,</span>
        nav<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Books'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now make sure mongod is running and access <a href="http://localhost:8080/Admin/addBooks">http://localhost:8080/Admin/addBooks</a> - you will get a JSON Object as MongoDB Response. All books will have an ID assigned by the Database and the DB ‘libraryApp’ and Collection ‘books’ will be created. Use the mongo commands (List, above) to check.</p>
<h2 id="14-use-the-mongodb-response"><a href="#14-use-the-mongodb-response" aria-label="14 use the mongodb response permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>14 Use the MongoDB Response</h2>
<h3 id="select-many"><a href="#select-many" aria-label="select many permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Select Many</h3>
<p>Remove the hardcoded books variable and use the mongoDB response instead. Display all books from the books Collection. (bookListView.ejs)</p>
<p><strong>bookRoutes.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nav</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 <span class="token comment">/* var books = [...]; has been deleted */</span>

    bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> url <span class="token operator">=</span>
                <span class="token string">'mongodb://localhost:27017/libraryApp'</span><span class="token punctuation">;</span>

            mongodb<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Connect to mongoDBs libraryApp books Collection */</span>

                collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span> <span class="token comment">/* find all Objects in the books Collection and put it into an Array */</span>
                    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookListView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">/* Copy the res.render from before into the function to render the result of our mongoDB query*/</span>
                            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
                            nav<span class="token punctuation">:</span> nav<span class="token punctuation">,</span>
                            books<span class="token punctuation">:</span> results
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> bookRouter<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre></div>
<h3 id="select-one"><a href="#select-one" aria-label="select one permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Select One</h3>
<p>Now we want to have a books details page (bookView.ejs) that only displays one book from the books Collection</p>
<p><strong>bookRoutes.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">var</span> objectId <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ObjectID<span class="token punctuation">;</span> <span class="token comment">/* Each book is assigned an ID by mongoDB - we make this ID available for our bookListView.ejs */</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nav</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> url <span class="token operator">=</span>
                <span class="token string">'mongodb://localhost:27017/libraryApp'</span><span class="token punctuation">;</span>

            mongodb<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>
                    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookListView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
                            nav<span class="token punctuation">:</span> nav<span class="token punctuation">,</span>
                            books<span class="token punctuation">:</span> results
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    bookRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/:id'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">objectId</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* We use the mongoDB ID (_id) for id -> URL is now /Books/:_id instead of /Books/:id */</span>
            <span class="token keyword">var</span> url <span class="token operator">=</span>
                <span class="token string">'mongodb://localhost:27017/libraryApp'</span><span class="token punctuation">;</span>

            mongodb<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                collection<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>_id<span class="token punctuation">:</span> id<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">/* findOne returns the first book from the books collection with the same _id */</span>
                    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'bookView'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">/* result will be rendered in bookView.ejs */</span>
                            title<span class="token punctuation">:</span> <span class="token string">'Books'</span><span class="token punctuation">,</span>
                            nav<span class="token punctuation">:</span> nav<span class="token punctuation">,</span>
                            book<span class="token punctuation">:</span> results
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> bookRouter<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre></div>
<p>Now we want to have a books details page (bookView.ejs) that only displays one book from the books Collection</p>
<p><strong>bookListView.ejs</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html">...
<span class="token comment">&lt;!-- ################################################ Media ######################################################### --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        &lt;% for(var i=0; i&lt;books.length;i++){%>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-6 col-md-4 col-lg-3 center-block<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel panel-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel-heading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">></span></span>&lt;%=books[i].title%><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>panel-body<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-12 col-sm-4 col-lg-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>story-title<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Books/&lt;%=books[i]._id%><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>&lt;%=books[i].cover%><span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span>100px</span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>img-thumbnail<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-12 col-sm-8 col-lg-6<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>label label-default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>&lt;%=books[i].author%><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-family</span><span class="token punctuation">:</span>courier<span class="token punctuation">,</span><span class="token string">'new courier'</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-muted<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Books/&lt;%=books[i]._id%><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-muted<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Read More<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Change URL from /Books/:i (&lt;%= i %> with i = 0,1,2,3....8) to /Books/:_id -> _id will be used to findOne --></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
            &lt;%}%>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>
...</code></pre></div>
<h2 id="15-creating-a-signin-form-on-indexejs"><a href="#15-creating-a-signin-form-on-indexejs" aria-label="15 creating a signin form on indexejs permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>15 Creating a SignIn Form on Index.ejs</h2>
<p>Just a simple Input Form</p>
<p><strong>index.ejs</strong></p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html">...
<span class="token comment">&lt;!-- ################################################ Login ######################################################### --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-xs-4 col-xs-offset-1<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-sm-offset-1 col-sm-2 col-xs-12 text-center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>signUpForm<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/auth/signUp<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Creating a form to post SignUp to /auth/signUp --></span>
                    User Name:
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Input userName for post --></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
                    Password:
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Input password for post --></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Sign Up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- Submit post --></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- /row --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- /container --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- /v-center --></span>

<span class="token comment">&lt;!-- ################################################ /Login ######################################################### --></span>
...</code></pre></div>
<h2 id="16-creating-the-authentication-route"><a href="#16-creating-the-authentication-route" aria-label="16 creating the authentication route permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>16 Creating the Authentication Route</h2>
<p>We need to add var bodyParser = require(‘body-parser’); to app.js. The body-parser middleware will be used in app.use(bodyParser.json()); and app.use(bodyParser.urlencoded()); to create a req.body object from JSON elements or URL parameter. Body-parser is install with npm install —save body-parser.</p>
<p><strong>authRoute.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> authRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Creating the Authentication Router */</span>
<span class="token keyword">var</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/signUp'</span><span class="token punctuation">)</span> <span class="token comment">/* Creating the SingUp route */</span>
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* We log the req.body Object created by bodyParser from the signUp post to /auth/signup */</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> authRouter<span class="token punctuation">;</span> <span class="token comment">/* return authRouter to be available for app.js */</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre></div>
<p>We now add the authRoute to app.js</p>
<p><strong>app.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">/* Install bodyParser see above */</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">5000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nav <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Book'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Author'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/bookRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> adminRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/adminRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> authRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/authRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Use the created authRouter for the Authentication routes */</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Use bodyParser to create req.body Object from JSON elements*/</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Use bodyParser to create req.body Object from URL encoded JSON elements*/</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/config/passport'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Admin'</span><span class="token punctuation">,</span> adminRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Auth'</span><span class="token punctuation">,</span> authRouter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Use the created authRouter for the Authentication routes */</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Hello from render'</span><span class="token punctuation">,</span>
        nav<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Books'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="17-adding-passportjs-middleware"><a href="#17-adding-passportjs-middleware" aria-label="17 adding passportjs middleware permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>17 Adding Passport.js Middleware</h2>
<p>First we need to <em>npm install —save cookie-parser passport express-session</em>.</p>
<p><strong>authRoute.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cookieParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cookie-parser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* To parse the session cookie used by passport */</span>
<span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* user authentication */</span>
<span class="token keyword">var</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* for passport-session: creates a session for the logged in user. Session stores the user information inside a cookie for the active session */</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">5000</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nav <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Book'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
    Text<span class="token punctuation">:</span> <span class="token string">'Author'</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bookRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/bookRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> adminRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/adminRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> authRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/routes/authRoutes'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* use cookieParser to parse the session cookie */</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>secret<span class="token punctuation">:</span> <span class="token string">'library'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* The session needs a secret - can be chosen freely */</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./src/config/passport'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* We separate the passport stuff src/config/passport.js - we pull in (app) to be able to app.use inside passport.js */</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> <span class="token string">'./src/views'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Books'</span><span class="token punctuation">,</span> bookRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Admin'</span><span class="token punctuation">,</span> adminRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/Auth'</span><span class="token punctuation">,</span> authRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">'Hello from render'</span><span class="token punctuation">,</span>
        nav<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Books'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Books'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            Link<span class="token punctuation">:</span> <span class="token string">'/Authors'</span><span class="token punctuation">,</span>
            Text<span class="token punctuation">:</span> <span class="token string">'Authors'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/books'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello Books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running server on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Separate the passport component to <em>src/config/passport.js</em>. We need to <em>npm install —save passport-local</em> to use the local strategy of authentication (not OAuth).</p>
<p><strong>passport.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* pull in passport */</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    passport<span class="token punctuation">.</span><span class="token function">serializeUser</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* Add User to Session */</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Callback User from Database */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    passport<span class="token punctuation">.</span><span class="token function">deserializeUser</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* Remove User from Session */</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./strategies/local.strategy'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* We only use a local.strategy for authentication - not passport.google, passport.facebook, etc. - Third-party OAuth. We save the file in src/config/strategies/local.strategy.js */</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h2 id="18-authentication-with-local-strategy"><a href="#18-authentication-with-local-strategy" aria-label="18 authentication with local strategy permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>18 Authentication with Local Strategy</h2>
<p>Now we create the local.strategy.js as required in passport.js:</p>
<p><strong>local.strategy.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    LocalStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport-local'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Strategy<span class="token punctuation">,</span>
    mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          usernameField<span class="token punctuation">:</span> <span class="token string">'userName'</span><span class="token punctuation">,</span> <span class="token comment">/* take userName from input form in index.ejs when posted to /auth/signUp (bodyParser) */</span>
          passwordField<span class="token punctuation">:</span> <span class="token string">'password'</span> <span class="token comment">/* take password from input form in index.ejs when posted to /auth/signUp (bodyParser) */</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* Pass username/password - then callBack done */</span>
          <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>username<span class="token punctuation">:</span> username<span class="token punctuation">,</span>
                      password<span class="token punctuation">:</span> password
                    <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Take user and return user - authentication with mongoDB comes next */</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>req.login and redirect to Profile</p>
<p><strong>authRoute.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> authRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/signUp'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* We do not yet save the user to mongoDB - just redirect him to /auth/profile */</span>
              res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/auth/profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/profile'</span><span class="token punctuation">)</span> <span class="token comment">/* we have to create the profile route */</span>
      <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* When GET /profile... */</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* ... respond with the JSON Object user */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> authRouter<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre></div>
<h2 id="19-saving-the-user-to-mongodb"><a href="#19-saving-the-user-to-mongodb" aria-label="19 saving the user to mongodb permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>19 Saving the User to MongoDB</h2>
<p>SignUp save User to MongoDB</p>
<p><strong>authRoute.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> authRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/signUp'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> url <span class="token operator">=</span>
                <span class="token string">'mongodb://localhost:27017/libraryApp'</span><span class="token punctuation">;</span>
            mongodb<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* connect to local install of mongoDB */</span>
                <span class="token keyword">var</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* open users collection that is created on first signUp */</span>
                <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* Creation of a user object from req.body */</span>
                    username<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
                    password<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>password
                <span class="token punctuation">}</span><span class="token punctuation">;</span>

                collection<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token comment">/* the user is automatically inserted into the users collection (collection is automatically created) */</span>
                    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        req<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>ops<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* user is no longer taken from req.body but from the results ops[0] limits the result to the {username, password, _id} JSON object */</span>
                            res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/auth/profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/profile'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> authRouter<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre></div>
<h2 id="20-user-signin-from-mongodb"><a href="#20-user-signin-from-mongodb" aria-label="20 user signin from mongodb permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>20 User SignIn from mongoDB</h2>
<p>Creating the SignIn Form</p>
<p><strong>index.ejs</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ################################################ Login ######################################################### <span class="token operator">--</span><span class="token operator">></span>

<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"col-xs-4 col-xs-offset-1"</span> style<span class="token operator">=</span><span class="token string">"margin-top: 30px;"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"row"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"col-sm-offset-3 col-sm-2 col-xs-12 text-center"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>form name<span class="token operator">=</span><span class="token string">"signInForm"</span> action<span class="token operator">=</span><span class="token string">"/auth/signIn"</span> method<span class="token operator">=</span><span class="token string">"post"</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> SignIN <span class="token operator">--</span><span class="token operator">></span>
                    User Name<span class="token punctuation">:</span>
                    <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"userName"</span> id<span class="token operator">=</span><span class="token string">"userName"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    Password<span class="token punctuation">:</span>
                    <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"password"</span> id<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"Sign In"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"clearfix visible-xs"</span> style<span class="token operator">=</span><span class="token string">"margin-bottom: 20px;"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"col-sm-offset-1 col-sm-2 col-xs-12 text-center"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>form name<span class="token operator">=</span><span class="token string">"signUpForm"</span> action<span class="token operator">=</span><span class="token string">"/auth/signUp"</span> method<span class="token operator">=</span><span class="token string">"post"</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> SignUp <span class="token operator">--</span><span class="token operator">></span>
                    User Name<span class="token punctuation">:</span>
                    <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"userName"</span> id<span class="token operator">=</span><span class="token string">"userName"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    Password<span class="token punctuation">:</span>
                    <span class="token operator">&lt;</span>input name<span class="token operator">=</span><span class="token string">"password"</span> id<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"Sign Up"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">/</span>row <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">/</span>container <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">/</span>v<span class="token operator">-</span>center <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ################################################ <span class="token operator">/</span>Login ######################################################### <span class="token operator">--</span><span class="token operator">></span></code></pre></div>
<p>SignIn save User to MongoDB</p>
<p><strong>authRoute.js</strong></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> authRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* Pull in passport for signIn */</span>

<span class="token keyword">var</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/signUp'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> url <span class="token operator">=</span>
                <span class="token string">'mongodb://localhost:27017/libraryApp'</span><span class="token punctuation">;</span>
            mongodb<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
                    username<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
                    password<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>password
                <span class="token punctuation">}</span><span class="token punctuation">;</span>

                collection<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span>
                    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        req<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>ops<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/auth/profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/signIn'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">'local'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">/* user post is authenticated with passport local strategy */</span>
            failureRedirect<span class="token punctuation">:</span> <span class="token string">'/'</span> <span class="token comment">/* If user did not sign up first - redirect back to home */</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/auth/profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* If successfully authenticated go to profile page */</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    authRouter<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/profile'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req<span class="token punctuation">.</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> authRouter<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre></div>
<h2 id="21-verifying-user-in-db"><a href="#21-verifying-user-in-db" aria-label="21 verifying user in db permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>21 Verifying User in DB</h2>
<p><strong>authRoute.js</strong></p>
<p>…</p></div><footer class="jss11"><div class="jss12"><span class="jss14">SHARE</span><div class="jss13"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--twitter"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--twitter "><g><circle cx="32" cy="32" r="31" fill="#00aced"></circle></g><g><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></g></svg></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--googlePlus"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--google "><g><circle cx="32" cy="32" r="31" fill="#dd4b39"></circle></g><g><path d="M25.3,30.1v3.8h6.3c-0.3,1.6-1.9,4.8-6.3,4.8c-3.8,0-6.9-3.1-6.9-7s3.1-7,6.9-7c2.2,0,3.6,0.9,4.4,1.7l3-2.9c-1.9-1.8-4.4-2.9-7.4-2.9c-6.1,0-11.1,5-11.1,11.1s5,11.1,11.1,11.1c6.4,0,10.7-4.5,10.7-10.9c0-0.7-0.1-1.3-0.2-1.8H25.3L25.3,30.1z M49.8,28.9h-3.2v-3.2h-3.2v3.2h-3.2v3.2h3.2v3.2h3.2v-3.2h3.2" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--facebook"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--facebook "><g><circle cx="32" cy="32" r="31" fill="#3b5998"></circle></g><g><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--linkedin"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--linkedin "><g><circle cx="32" cy="32" r="31" fill="#007fb1"></circle></g><g><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div></div></div><div class="jss15"><div class="jss2 jss16"><img alt="mike polinowski" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAA8ADwDASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAABgABBAUHAwL/xAA6EAABAwMCBAIHBAoDAAAAAAABAgMEAAUREiEGMUFRE2EHFCIjcaHBFYGRsRYkJTIzQmJygqOywuH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEE/8QAHREBAQACAgMBAAAAAAAAAAAAAAECAxFRBBIiMf/aAAwDAQACEQMRAD8Az+lSqxskWJPmepSnFMrfwll4bhK+gI6g8vw86CuHPvWnRbTabhw3a5X2dHQpTjQVoTgnKwFAnmRz50AXezzbNKLE1opP8qxulY7g1oPCa/E4LhjP8OUgf7gfrQVHpFZgwERI0OBGYW7qUtbbQScDGBt99A1GPpNWTf46M7JjA/eVKoZjwVLQXnj4bQGc9TWXKT9U16stl4xiJSp1lJWSgEJzsDTVqdTpNnnxYzMhyM54DzYcQ4lJKcHz6GoSSpCwpJKVJOQRsQa1yxXOcqywP2O6U+CgJUl1sagBgEAkc+dTXZDzo99YnV/3rZP/AGoKnh67QuLLSYNzbbckoGHEKwNf9aeue+OVeWW4nDER63PSkpb9baeZLhwdBWnP4FKt663O0OS2wYNsTb5KTlL7QaCgfiDn5164Utqv1p+7KEq5odLS1rOvQkAEAdueaARvMmPery5Oa1LYQEttauoA5nPmTVHcpfiq8Js+wk7kdTRzKs9pY4qXDW2tz1hAeajIWEoBydQIyO2QM457VesW2IwgBHD7OodQ20PrU5h9e1duXlSaJp1zju9sbSlS1BKElRPIAZrvNgyYDiG5bSmlrQHAlQwcHlWzodfZThm0KSOyVtj60D8bKmSLy2pVrUMMJAyoKyNSu1UcSM3x7MiWyHDhMNAsspbW44CokjbYZ7YqE/xtfntvXEoHZLSPqKHqu7JbYYbFyvLvhQUn2GhuuQR0A7dz93wAr4Sg3W9J+0LxNkmKRhtoOFHieZxj2fz/ADe9hDAduVhdMZDT6Izvq2Alw9T2JGoDPcGh6+cZzLiyYkNIhQ8adDf7yh2J6DyHzooszKI/o8Z1pz4hCyO+XRj6UFrFt9tblyILqy5NV70POK9+UnYEK57EEbctqEuJH+JOG5Q0XJ92G4fdOLws/BWRzrt6TAuPcrdLZWpt0oUkLScEaSCN/wDI1ChcYidDXbeIW/Gjup0+sIHto7EjrjuN/jQQf03v5RpVNB8/CSD8gK7u8YvyUMmS3qeQjQpYx7W53+dD8+MIktxlDyH0A5Q6g7LSeR/86VHoFTkk4yScbU1KgVaxMHqHCVriupwtS4rZHnqST+RrKmXVsPIdaVpWg5SexqbcL5crmplUyWtws7t7BOk99uvnQGnpRjurjQJKRlltS0HbkVYI/wCNZ3VnN4iu89gsSp7q2jzTkAH4451WUCpUqVB//9k=" class="jss4"/></div><div class="jss17"><p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href="/contact/">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p></div></div></footer></article><footer class="jss21"><div class="jss22"><ul>
<li>This is a personal Developer Blog</li>
<li>Ξ</li>
<li>built by <a href="https://github.com/mpolinowski">Mike Polinowski</a></li>
<li>Ξ</li>
<li>with <a href="https://www.gatsbyjs.org/">Gatsby</a> &#x26; <a href="https://reactjs.org">React</a></li>
<li>Ξ</li>
<li>source code on <a href="https://github.com/mpolinowski/mpolinowski.github.io">GitHub</a></li>
<li>Ξ</li>
<li>deliverd by <a href="https://pages.github.com">Github Pages</a></li>
<li>Ξ</li>
<li>photos from <a href="https://www.flickr.com/people/149680084@N06/">Flickr</a></li>
</ul></div></footer></div><div style="position:absolute;height:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;left:2px;border-radius:3px"><div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div><div style="position:absolute;width:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;top:2px;border-radius:3px"><div style="position:relative;display:block;width:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div></div></main><nav class="jss23 is-aside open "><div class="jss24"><div style="position:relative;overflow:hidden;width:100%;height:100%"><div style="position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-overflow-scrolling:touch;margin-right:0;margin-bottom:0"><div class="jss25"><header></header><ul class="jss26"><li class="jss31 Container" style="display:block"><a class="jss32" href="/nginx-ingress-cert-manager/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>NGINX Ingress with Cert-Manager</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-traefik-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Traefik Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-the-chinese-way/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes the Chinese Way</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-nginx-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes NGINX Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-nginx-https-service/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes NGINX https Service</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-bare-metal-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Bare Metal Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-cluster-logging/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Cluster Monitoring &amp; Logging</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-and-microservices/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes and Microservices</h1><h2>Red Hat Enterprise and Centos Linux Server Administration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/creating-a-kubernetes-cluster/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating a Kubernetes Cluster</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/centos-administration/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Centos Administration</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 IoT" style="display:block"><a class="jss32" href="/zigbee2mqtt-xiaomi-fhem/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Zigbee Sensors in FHEM</h1><h2>Zigbee Sensors with FHEM and Zigbee2MQTT</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/managing-containers-in-kubernetes/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Managing Containers in Kubernetes</h1><h2>An IT professional who is a Red Hat Certified Specialist in Containerized Application Development has demonstrated the skills, knowledge, and abilities needed to create, update container images and run and link containers.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/red-hat-containerized-application-development-rhcs/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Red Hat Certified Specialist in Containerized Application Development</h1><h2>An IT professional who is a Red Hat Certified Specialist in Containerized Application Development has demonstrated the skills, knowledge, and abilities needed to create, update container images and run and link containers.</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-dashboard-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating Node-RED Admin Panel using node-red-dashboard</h1><h2>Creating Node-RED Admin Panel using node-red-dashboard</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-http-connect/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node-RED Interaction with HTTP</h1><h2>A collection of HTTP recipes for Node-RED</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-mqtt-connect/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>A Collection of Node-RED MQTT Recipes</h1><h2>We are going to use a MQTT Broker to test our Node-RED flows under Windows</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-sqlite/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Using SQLite with Node-RED on Windows</h1><h2>Using SQLite with Node-RED on Windows</h2></div></a></li><li class="jss31 SQL" style="display:block"><a class="jss32" href="/postgresql-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with PostgreSQL in Windows 10</h1><h2>Getting started with PostgreSQL in Windows 10</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-cryptocurrency-dashboard/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating a Dashboard displaying Cryptocurrency Data using Node-RED</h1><h2>We will use the STS Binance node to get access to a Cryptocurrency API. The node can be downloaded for Node-RED</h2></div></a></li><li class="jss31 OpenHAB" style="display:block"><a class="jss32" href="/openhab2-mqtt-nodered/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Home Automation and IP Cameras</h1><h2>The following instructions will guide you through the process of setting up OpenHAB 2 to automate an IP camera via the MQTT protocol.</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting Started with Node-RED (Windows 10 Edition)</h1><h2>This guide will help you get Node-RED installed and running in just a few minutes.</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/red-hat-certified-engineer-rhce/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Red Hat Certified Engineer (RHCE) Exam</h1><h2>The performance-based Red Hat Certified Engineer exam (EX300) tests to determine if your knowledge, skill, and ability meet those required of a senior system administrator responsible for Red Hat Enterprise Linux (RHEL) systems.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/express-generator-dockerrized/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>How to wrap your Source Code into a Docker Container</h1><h2>We now want to create a custom Docker Container containing our Node.js project source code by creating a Dockerfile and building an Docker Image.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/express-generator-app-docker/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Link your Node Source Code into a Docker Container</h1><h2>Use Docker to run your source code in a runtime that isn&#x27;t globally installed on your system. We want to test our source code as it would be executed inside a Linux / Node.js@latest environment, while running our development on a Windows 10 machine.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/node-express-docker-container/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Run your Node.js app from a Docker Container</h1><h2>A container image is a lightweight, stand-alone, executable package of a piece of software that includes everything needed to run it - code, runtime, system tools, system libraries, settings. Available for both Linux and Windows based apps, containerized software will always run the same, regardless of the environment.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/server-side-render-react-router/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Server Rendering with React and React Router</h1><h2>Server side rendering a React app can provide a few different benefits including performance and SEO. The problem is with those benefits comes a cost of additional complexity to your application. In this project, we&#x27;ll start from scratch and slowly build a server side rendered React 16.3 with React Router 4.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-transition-group-demo/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>react-transition-group</h1><h2>Introduction to animated transitions with React Router</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-material-ui-starter/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby Material UI Starter</h1><h2>Set up a website with Gatsby.js and Material UI</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/machine-learning-with-python/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Machine Learning with SciKit Learn</h1><h2>An Introduction in building machine learning applications with the SciKit Python library. Learn data preprocessing and implement supervised and unsupervised algorithms as well as performing error analysis to evaluate their performance.</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/securing-elasticsearch-readonlyrest/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Securing Elasticsearch with ReadOnlyREST</h1><h2>Elasticsearch doesn&#x27;t have a basic user authentication - a problem!</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/securing-elasticsearch-xpack/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Securing Elasticsearch with X-Pack</h1><h2>Elasticsearch doesn&#x27;t have a basic user authentication - a problem!</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/elasticsearch-kibana/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Elasticsearch &amp; Kibana</h1><h2>Installing our Search Engine and it&#x27;s Admin Interface</h2></div></a></li><li class="jss31 NGINX" style="display:block"><a class="jss32" href="/nginx-node-security/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>NGINX, Node.js &amp; Security</h1><h2>Using NGINX as an SSL proxy for your Node.js apps</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/umlaute-on-us-keyboard/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Umlaute</h1><h2>Hack your US keyboard to be able to type German Umlaute</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-reactstrap/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby.js with Bootstrap 4</h1><h2>Creating a Gatsby.js starter using Reactstrap</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/python-ssh-logger/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Python Network Logger</h1><h2>We want to use a Python program to connect to servers by SSHv2 using the library Paramiko. We then want to log server parameter by running SSH commands on our server. We are going to plot the results in Matplotlib.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-wiki/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby.js Knowledgebase</h1><h2>Creating a Knowledgbase using Gatsby.js and React.js</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/getting-started-with-python-part-ii/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with Python Part II</h1><h2>According to Wikipedia Python is an interpreted, high-level, general-purpose programming language. And looking around, it seems to be everywhere - Machine Learning, Artificial Intelligence, Big Data Analysis all the way to Web Dev and Dev Ops.</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/getting-started-with-python/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with Python</h1><h2>Acording to Wikipedia Python is an interpreted, high-level, general-purpose programming language. And looking around, it seems to be everywhere - Machine Learning, Artificial Intelligence, Big Data Analysis all the way to Web Dev and Dev Ops.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/next-start/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Next.js Server Side Rendering</h1><h2>A first look at Next.js Version 4!</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-router-4/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React Router 4</h1><h2>A test project to get familiar with React Router v4</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/elasticsearch-react-example/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React Search Interface</h1><h2>An example project showing how to use Elasticsearch with React</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/search-engine-setup-and-configuration/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Search Engine Setup and Configuration</h1><h2>Elasticsearch is a distributed, JSON-based search and analytics engine designed for horizontal scalability, maximum reliability, and easy management.</h2></div></a></li><li class="jss31 NGINX" style="display:block"><a class="jss32" href="/using-nginx-as-proxy-for-your-nodejs-apps/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Using NGINX as proxy for your nodejs apps</h1><h2>We want to set up NGINX with http/2 to serve multiple node apps and an instance of Elasticsearch on a single centOS server</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/developing-software-in-china/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Developing Software in China</h1><h2>Being a Software Developer in China can be a nightmare. Every time you try to install some library there is a really good chance that your run into a 404. A lot of the Open Source efforts are all but invisible behind the Golden Shield - Proxy Squid to the rescue.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-under-the-hood/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React under the Hood</h1><h2>A look behind the curtain of React Starters</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/reactive-material/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>create-react-app and Material-UI</h1><h2>This is a practice run to add some to a react app, generated by the starter kit. So let&#x27;s get started!</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-blog-starter/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby Blog Starter</h1><h2>Build a JAM Stack Blog with Gatsby.js</h2></div></a></li><li class="jss31 Google Analytics" style="display:block"><a class="jss32" href="/google-analytics-amp/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Google Analytics</h1><h2>How to add Google Analytics to your AMP Webpage,</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/obligatory-react-todo-list/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React TODO List</h1><h2>Every web-dev should have one or two of them on Github ~</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/caloric-burn/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Food Caloric Table App</h1><h2>A sample app will be a simple food nutrition lookup table. The data driving the app is supplied by the USDA&#x27;s National Nutrient Database.</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/windows10-control/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Windows Control</h1><h2>Every time Microsoft decides to take control away from us users, I am one step closer to permanetly switch to LINUX #DELETEWINDOWS</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/windows-cmd/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Windows CMD</h1><h2>You can create a bootable USB flash drive to use to deploy your OS of choice . The first step is to prepare the USB flash drive by using DiskPart, which is a command-line utility.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/random-password-generator/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Random Password Generator</h1><h2>We want to use the React App generator to create static pages from our React Pass-Gen App, routed through a Node/Express Server.</h2></div></a></li><li class="jss31 C++" style="display:block"><a class="jss32" href="/unreal-engine-coding-standards/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Unreal Engine Coding Standards (I)</h1><h2>The Unreal Engine Developer Course - Learn C++ &amp; Make Games. Learn C++ from scratch. How to make your first video game in Unreal engine. Gain confidence in programming.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/node-express-static-wiki/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node Express Static</h1><h2>Building a product Wiki based on Node.js, Express.js, AMP and Elasticsearch</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a aria-current="page" class="jss32 active" href="/node-express-mongodb/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node/Express with MongoDB</h1><h2>Building a Express Web Library with a MongoDB Backend and Goodreads API Integration</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/javascript-apis-and-ajax/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>An Introduction into APIs</h1><h2>JavaScript and Getting Started with APIs and AJAX</h2></div></a></li></ul></div></div><div style="position:absolute;height:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;left:2px;border-radius:3px"><div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div><div style="position:absolute;width:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;top:2px;border-radius:3px"><div style="position:relative;display:block;width:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div></div></div></nav><div class="jss35"><div class="jss36"><button class="jss11 jss5 jss37" tabindex="0" type="button" aria-label="Back to list" title="Back to the list"><span class="jss10"><svg class="jss14" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg></span></button></div><div class="jss36"><nav class="jss56"><div><button class="jss11 jss5 jss57" tabindex="0" type="button" aria-label="Increase font size" aria-haspopup="true" title="Change font size"><span class="jss10"><svg class="jss14" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z"></path></svg></span></button></div></nav><button class="jss11 jss5" tabindex="0" type="button" aria-label="Back to top" title="Scroll to top"><span class="jss10"><svg class="jss14 jss37" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"></path></svg></span></button></div></div><aside class="jss62"><a class="jss64" href="/"><div class="jss2 jss65"><img alt="mike polinowski" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAA8ADwDASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAABgABBAUHAwL/xAA6EAABAwMCBAIHBAoDAAAAAAABAgMEAAUREiEGMUFRE2EHFCIjcaHBFYGRsRYkJTIzQmJygqOywuH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEE/8QAHREBAQACAgMBAAAAAAAAAAAAAAECAxFRBBIiMf/aAAwDAQACEQMRAD8Az+lSqxskWJPmepSnFMrfwll4bhK+gI6g8vw86CuHPvWnRbTabhw3a5X2dHQpTjQVoTgnKwFAnmRz50AXezzbNKLE1opP8qxulY7g1oPCa/E4LhjP8OUgf7gfrQVHpFZgwERI0OBGYW7qUtbbQScDGBt99A1GPpNWTf46M7JjA/eVKoZjwVLQXnj4bQGc9TWXKT9U16stl4xiJSp1lJWSgEJzsDTVqdTpNnnxYzMhyM54DzYcQ4lJKcHz6GoSSpCwpJKVJOQRsQa1yxXOcqywP2O6U+CgJUl1sagBgEAkc+dTXZDzo99YnV/3rZP/AGoKnh67QuLLSYNzbbckoGHEKwNf9aeue+OVeWW4nDER63PSkpb9baeZLhwdBWnP4FKt663O0OS2wYNsTb5KTlL7QaCgfiDn5164Utqv1p+7KEq5odLS1rOvQkAEAdueaARvMmPery5Oa1LYQEttauoA5nPmTVHcpfiq8Js+wk7kdTRzKs9pY4qXDW2tz1hAeajIWEoBydQIyO2QM457VesW2IwgBHD7OodQ20PrU5h9e1duXlSaJp1zju9sbSlS1BKElRPIAZrvNgyYDiG5bSmlrQHAlQwcHlWzodfZThm0KSOyVtj60D8bKmSLy2pVrUMMJAyoKyNSu1UcSM3x7MiWyHDhMNAsspbW44CokjbYZ7YqE/xtfntvXEoHZLSPqKHqu7JbYYbFyvLvhQUn2GhuuQR0A7dz93wAr4Sg3W9J+0LxNkmKRhtoOFHieZxj2fz/ADe9hDAduVhdMZDT6Izvq2Alw9T2JGoDPcGh6+cZzLiyYkNIhQ8adDf7yh2J6DyHzooszKI/o8Z1pz4hCyO+XRj6UFrFt9tblyILqy5NV70POK9+UnYEK57EEbctqEuJH+JOG5Q0XJ92G4fdOLws/BWRzrt6TAuPcrdLZWpt0oUkLScEaSCN/wDI1ChcYidDXbeIW/Gjup0+sIHto7EjrjuN/jQQf03v5RpVNB8/CSD8gK7u8YvyUMmS3qeQjQpYx7W53+dD8+MIktxlDyH0A5Q6g7LSeR/86VHoFTkk4yScbU1KgVaxMHqHCVriupwtS4rZHnqST+RrKmXVsPIdaVpWg5SexqbcL5crmplUyWtws7t7BOk99uvnQGnpRjurjQJKRlltS0HbkVYI/wCNZ3VnN4iu89gsSp7q2jzTkAH4451WUCpUqVB//9k=" class="jss4"/></div></a><h3 class="jss63">mike polinowski<small>developer blog</small></h3><nav class="jss66"><div><button class="jss11 jss5 jss67" tabindex="0" type="button" aria-label="More" aria-haspopup="true"><span class="jss10"><svg class="jss14" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></span></button></div></nav></aside></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76200392-4', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-template-js","jsonName":"node-express-mongodb-45d","path":"/node-express-mongodb/"};window.dataPath="714/path---node-express-mongodb-45-d-c60-rhrkMoXcltLwiBnnpMAvct9Jejc";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-da3819f05330f793f0f0.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-130e24d055f67ef20d25.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-5c83e13c4628baa8d54f.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-e32268743df53ec50851.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-32477b62471d8d9732e5.js"],"component---src-pages-index-js":["/component---src-pages-index-js-2b85ea0b523334c28d73.js"],"component---src-pages-search-js":["/component---src-pages-search-js-7c42598891c17c152995.js"],"pages-manifest":["/pages-manifest-416a0a29473d77b61592.js"]};/*]]>*/</script><script src="/component---src-templates-post-template-js-5c83e13c4628baa8d54f.js" async=""></script><script src="/11-27b3b11fcd77a7b2f8de.js" async=""></script><script src="/0-d359e2059c411e3ebb25.js" async=""></script><script src="/styles-59c6ce951e190b0b96b8.js" async=""></script><script src="/app-da3819f05330f793f0f0.js" async=""></script><script src="/webpack-runtime-bee6189e671fd3751e86.js" async=""></script></body></html>