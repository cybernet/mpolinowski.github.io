<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.0f49e50ff629a0714c19.css">@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300-60c866748ff15f5b347fdba64596b1b1.woff2) format("woff2"),url(/static/open-sans-latin-300-521d17bc9f3526c690e8ada6eee55bec.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic-06bbd3188b34820cd83a0e0b3d0a6f57.woff2) format("woff2"),url(/static/open-sans-latin-300italic-8a648ff38ded89ea15916e84529d62d3.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400-cffb686d7d2f4682df8342bd4d276e09.woff2) format("woff2"),url(/static/open-sans-latin-400-bf2d0783515b7d75c35bde69e01b3135.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic-987032ea5d57c93d8da215678eae3b86.woff2) format("woff2"),url(/static/open-sans-latin-400italic-db70d0b9cb27ada1a260a2b35e756b8b.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600-223a277bd88d8a90c8cdf24cda0ad5f5.woff2) format("woff2"),url(/static/open-sans-latin-600-1cd5320f8937d337b61d5117cf9d7b28.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic-4950a7205f0b5cefe41fc03ac346e236.woff2) format("woff2"),url(/static/open-sans-latin-600italic-318ea1ada4102c0704a0637228dcad03.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700-d08c09f2f169f4a6edbcf8b8d1636cb4.woff2) format("woff2"),url(/static/open-sans-latin-700-623e3205570002af47fc2b88f9335d19.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic-c02f5da6e82e1efe0b45841bfd49ce37.woff2) format("woff2"),url(/static/open-sans-latin-700italic-72e19cbb0e38c6773a7751156752cec4.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800-aaeffaf205b9bbb09920089a14dbe9e8.woff2) format("woff2"),url(/static/open-sans-latin-800-c6aa0c4a601fb6ac66f8253fa594dff5.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic-6b3973ffe02bb6a8be0f8453506ec032.woff2) format("woff2"),url(/static/open-sans-latin-800italic-79b58175343190550489efe46a7f1138.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;-webkit-transform:rotate(-2deg);transform:rotate(-2deg)}:not(pre)>code[class*=language-]:after,pre[class*=language-]:after{right:.75em;left:auto;-webkit-transform:rotate(2deg);transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}</style><meta name="generator" content="Gatsby 2.1.30"/><style type="text/css" id="jss-server-side">.jss44 {
  color: inherit;
  border: 0;
  margin: 0;
  cursor: pointer;
  display: inline-flex;
  outline: none;
  padding: 0;
  position: relative;
  align-items: center;
  user-select: none;
  border-radius: 0;
  vertical-align: middle;
  justify-content: center;
  -moz-appearance: none;
  text-decoration: none;
  background-color: transparent;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}
.jss44::-moz-focus-inner {
  border-style: none;
}
.jss44.jss45 {
  cursor: default;
  pointer-events: none;
}
.jss38 {
  flex: 0 0 auto;
  color: rgba(0, 0, 0, 0.54);
  padding: 12px;
  overflow: visible;
  font-size: 1.7142857142857142rem;
  text-align: center;
  transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  border-radius: 50%;
}
.jss38:hover {
  background-color: rgba(0, 0, 0, 0.08);
}
.jss38.jss42 {
  color: rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .jss38:hover {
    background-color: transparent;
  }
}
.jss38:hover.jss42 {
  background-color: transparent;
}
.jss39 {
  color: inherit;
}
.jss40 {
  color: #358ccb;
}
.jss40:hover {
  background-color: rgba(53, 140, 203, 0.08);
}
@media (hover: none) {
  .jss40:hover {
    background-color: transparent;
  }
}
.jss41 {
  color: #f50057;
}
.jss41:hover {
  background-color: rgba(245, 0, 87, 0.08);
}
@media (hover: none) {
  .jss41:hover {
    background-color: transparent;
  }
}
.jss43 {
  width: 100%;
  display: flex;
  align-items: inherit;
  justify-content: inherit;
}
.jss47 {
  fill: currentColor;
  width: 1em;
  height: 1em;
  display: inline-block;
  font-size: 24px;
  transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  user-select: none;
  flex-shrink: 0;
}
.jss48 {
  color: #358ccb;
}
.jss49 {
  color: #f50057;
}
.jss50 {
  color: rgba(0, 0, 0, 0.54);
}
.jss51 {
  color: #f44336;
}
.jss52 {
  color: rgba(0, 0, 0, 0.26);
}
.jss53 {
  font-size: inherit;
}
.jss54 {
  font-size: 20px;
}
.jss55 {
  font-size: 35px;
}
.jss60 {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1300;
  position: fixed;
}
.jss61 {
  visibility: hidden;
}
.jss59 {
  outline: none;
  position: absolute;
  min-width: 16px;
  max-width: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 16px;
  max-height: calc(100% - 32px);
}
.jss58 {
  max-height: calc(100% - 96px);
  -webkit-overflow-scrolling: touch;
}
.jss18 {
  width: 40px;
  height: 40px;
  display: flex;
  position: relative;
  overflow: hidden;
  font-size: 1.4285714285714284rem;
  align-items: center;
  flex-shrink: 0;
  font-family: Arial, sans-serif;
  user-select: none;
  border-radius: 50%;
  justify-content: center;
}
.jss19 {
  color: #fafafa;
  background-color: #bdbdbd;
}
.jss20 {
  width: 100%;
  height: 100%;
  text-align: center;
  object-fit: cover;
}
html {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
*, *::before, *::after {
  box-sizing: inherit;
}
body {
  margin: 0;
  background-color: #fafafa;
}
@media print {
  body {
    background-color: #fff;
  }
}
.jss27 {
  display: none;
}
.is-aside.closed .jss27, .moving-featured.closed .jss27 {
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
  height: 80px;
  display: flex;
  padding: 0 30px 0 40px;
  position: absolute;
  align-items: center;
  flex-direction: row;
  justify-content: space-between;
}
.jss27 h3 {
  color: #444444;
  margin: -.2em 0 0 0;
  font-size: 1.1em;
  font-weight: 600;
  text-transform: uppercase;
}
.jss27 h3 small {
  margin: 0 0 .1em;
  display: block;
  font-size: .6em;
  font-weight: 300;
  letter-spacing: .2em;
}
.jss28 {
  color: #444444;
}
.jss29 {
  color: #358ccb;
  margin: 0 calc(-.5rem + 20px) 1em calc(-.5rem + 20px);
  padding: 0 1em 1em;
  position: relative;
  font-size: 1.2em;
  line-height: 1;
  font-weight: 300;
  border-bottom: 1px solid #dedede;
}
.jss29 strong {
  display: block;
  font-weight: 600;
}
.jss29 small {
  margin: 0 0 .3em 0;
  display: block;
}
@media (min-width: 1024px) {
  .jss29 {
    margin: 0 0 1em 0;
    padding: 0 1em 1.5em;
  }
  .is-aside .jss29 {
    margin: 0 calc(-.5rem + 20px) 1em calc(-.5rem + 20px);
    padding: 0 0 1em .5em;
  }
}
.jss30 {
  top: 0;
  right: 0;
  position: absolute;
}
.jss31 {
  margin: 0 0 .7em 0;
  transition: height 1s;
}
@media (min-width: 600px) {
  .jss31 {
    margin: 0 0 1.5rem 0;
  }
}
@media (min-width: 1024px) {
  .moving-featured .jss31, .is-aside .jss31 {
    margin: 0 0 0 0;
  }
}
.jss32 {
  color: #444444;
  display: flex;
  padding: .7em 1em .7em 1em;
  align-items: center;
  align-content: center;
  flex-direction: row;
  justify-content: flex-start;
}
@media (hover: hover) {
  .jss32:hover {
    color: #358ccb;
  }
  .jss32:hover .pointer {
    border-radius: 65% 75%;
  }
}
.jss33 {
  width: 60px;
  height: 60px;
  margin: 0;
  position: relative;
  overflow: hidden;
  transition: all .5s;
  flex-shrink: 0;
  border-radius: 75% 65%;
}
.jss33 img {
  width: 100%;
  height: 100%;
}
@media (min-width: 600px) {
  .jss33 {
    width: 80px;
    height: 80px;
    margin-right: .5em;
  }
}
@media (min-width: 1024px) {
  .jss33 {
    width: 90px;
    height: 90px;
    transition: all .3s;
    margin-right: .8em;
    transition-timing-function: ease;
  }
  .moving-featured .jss33, .is-aside .jss33 {
    width: 30px;
    height: 30px;
  }
}
.jss34 {
  width: 100%;
  margin: 0 0 0 1.5em;
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}
.jss34 h1 {
  margin: 0;
  font-size: 1.3em;
  line-height: 1.15;
  font-weight: 600;
  letter-spacing: -0.03em;
}
.jss34 h2 {
  margin: .3em 0 0 0;
  display: block;
  font-size: 1.1em;
  line-height: 1.2;
}
@media (min-width: 1024px) {
  .moving-featured .jss34, .is-aside .jss34 {
    margin: 0 0 0 .5em;
  }
}
@media (min-width: 600px) {
  .jss34 h2 {
    font-size: 1.265em;
  }
}
@media (min-width: 1024px) {
  .jss34 h2 {
    font-size: 1.4300000000000002em;
  }
  .moving-featured .jss34 h2, .is-aside .jss34 h2 {
    display: none;
  }
}
@media (min-width: 600px) {
  .jss34 h1 {
    font-size: 1.4949999999999999em;
  }
}
@media (min-width: 1024px) {
  .jss34 h1 {
    font-size: 1.6900000000000002em;
  }
  .moving-featured .jss34 h1, .is-aside .jss34 h1 {
    font-size: 1em;
    font-weight: 400;
  }
}
.jss24 {
  top: 0;
  left: 0;
  width: 100%;
  bottom: 0;
  position: absolute;
}
.jss25 {
  padding: calc(60px + 1.3rem) 1.3rem calc(60px + 1.3rem) 1.3rem;
}
@media (min-width: 600px) {
  .jss25 {
    padding: calc(60px + 2rem) 2rem calc(60px + 2rem) 2rem;
  }
}
@media (min-width: 1024px) {
  .jss25 {
    left: 320px;
    padding: 2rem  calc(1rem + 17px) calc(2rem + 17px) 2rem;
  }
  .moving-featured .jss25, .is-aside .jss25 {
    padding: 1rem .5rem 1rem .5rem;
  }
}
.jss26 {
  margin: 0;
  padding: 0;
  list-style: none;
}
.is-aside.closed .jss26, .moving-featured.closed .jss26 {
  display: none;
}
.jss23 {
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  position: absolute;
  transform: translate3d(0, 0, 0);
  background: #ffffff;
  transition: left .9s;
  will-change: left, top, bottom, width;
  transition-timing-function: ease;
}
@media (max-width: 1023px) {
  .jss23.is-aside {
    left: -100%;
  }
  .jss23.is-featured {
    left: 0;
  }
}
@media (min-width: 1024px) {
  .jss23.is-featured {
    top: 0;
    left: 320px;
    width: calc(100vw - 320px - 60px);
    transition: left .9s;
  }
  .jss23.is-aside {
    top: auto;
    left: 0;
    width: 319px;
    z-index: 1;
    transition: none, bottom 0.5s;
  }
  .jss23.moving-aside {
    top: 0;
    left: calc(-100vw + 700px);
    width: calc(100vw - 320px - 60px);
    transition: left 0.9s;
  }
  .jss23.resizing-aside {
    top: auto;
    left: 0;
    width: 319px;
    transition: none;
  }
  .jss23.moving-featured {
    top: auto;
    left: 0;
    width: 319px;
    bottom: -100%;
    z-index: 1;
    transition: bottom .3s;
  }
  .jss23.resizing-featured {
    top: 0;
    left: calc(-100vw + 700px);
    width: calc(100vw - 320px - 60px);
    bottom: auto;
    transition: none;
  }
  .jss23.resizing-aside.closed {
    bottom: calc(-100% + 100px);
    height: calc(100% - 100px);
  }
  .jss23.resizing-aside.open {
    bottom: calc(-100% + 100px);
    height: calc(100% - 100px);
  }
  .jss23.is-aside.closed {
    bottom: calc(-100% + 100px + 80px);
    height: calc(100% - 100px);
  }
  .jss23.is-aside.open {
    bottom: 0;
    height: calc(100% - 100px);
  }
  .jss23.is-aside::after {
    top: 0;
    left: 20px;
    right: 20px;
    height: 0;
    content: "";
    position: absolute;
    border-top: 1px solid #dedede;
  }
}
.jss57 {
  color: #444444;
}
.jss35 {
  left: 0;
  width: 100%;
  bottom: 0;
  height: 60px;
  display: flex;
  padding: 0 20px;
  position: absolute;
  background: #ffffff;
  flex-direction: row;
  justify-content: space-between;
}
.jss35::before {
  top: 0;
  left: 20px;
  right: 20px;
  height: 0;
  content: "";
  position: absolute;
  border-top: 1px solid #dedede;
}
@media (min-width: 600px) {
  .jss35 {
    padding: 0 calc(20px * 1.5);
  }
}
@media (min-width: 1024px) {
  .jss35 {
    top: 0;
    left: auto;
    right: 0;
    width: 60px;
    height: 100%;
    padding: 20px 0;
    flex-direction: column;
  }
  .jss35::before {
    top: 20px;
    left: 0;
    right: auto;
    width: 0;
    bottom: 20px;
    height: auto;
    border-left: 1px solid #dedede;
  }
}
.jss36 {
  display: flex;
  align-items: center;
  flex-direction: row;
}
@media (min-width: 1024px) {
  .jss36 {
    flex-direction: column;
  }
}
.jss37 {
  color: #444444;
}
.jss66 {
  float: right;
  margin: 5px 10px 0 0;
}
.jss67 {
  color: #444444;
}
.jss62 {
  top: 0;
  left: 0;
  width: 100%;
  height: 60px;
  position: absolute;
  background: #ffffff;
}
.jss62::before {
  left: 20px;
  right: 20px;
  height: 0;
  bottom: 0;
  content: "";
  position: absolute;
  border-top: 1px solid #dedede;
}
@media (min-width: 1024px) {
  .jss62 {
    display: none;
  }
}
.jss63 {
  float: left;
  color: #444444;
  margin: 10px 0 0 15px;
}
.jss63 small {
  margin: 2px 0 0 0;
  display: block;
  font-size: .65em;
}
.jss64 {
  float: left;
  margin: 13px 0 0 30px;
  display: block;
}
.jss65 {
  width: 31px;
  border: 1px solid #ddd;
  height: 31px;
  border-radius: 65% 75%;
}
.jss1 {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 1px;
  position: absolute;
  overflow: hidden;
}
@media print {
  .jss1 {
    position: relative;
    overflow: visible;
  }
}
article, aside, footer, header, nav, section, figcaption, figure, main {
  display: block;
}
h1 {
  margin: 0.67em 0;
  font-size: 2em;
}
hr {
  height: 0;
  overflow: visible;
  box-sizing: content-box;
}
pre {
  font-size: 1em;
  font-family: monospace, monospace;
}
a:active, a:hover {
  outline-width: 0;
}
abbr[title] {
  border-bottom: none;
  text-decoration: underline;
}
b, strong {
  font-weight: bolder;
}
code, kbp, samp {
  font-size: 1em;
  font-family: monospace, monospace;
}
dfn {
  font-style: italic;
}
mark {
  color: #000;
  background-color: #ff0;
}
small {
  font-size: 80%;
}
sub, sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
audio, video {
  display: inline-block;
}
audio:not([controls]) {
  height: 0;
  display: none;
}
img {
  border-style: none;
  vertical-align: middle;
}
svg:not(:root) {
  overflow: hidden;
}
button, input, optgroup, select, textarea {
  margin: 0;
  font-size: 100%;
  font-family: sans-serif;
  line-height: 1.15;
}
button, input {
  overflow: visible;
}
button, select {
  text-transform: none;
}
button, [type=reset], [type=submit] {
  -webkit-appearance: button;
}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner {
  padding: 0;
  border-style: none;
}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring {
  outline: 1px dotted ButtonText;
}
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  color: inherit;
  display: table;
  padding: 0;
  max-width: 100%;
  box-sizing: border-box;
  white-space: normal;
}
progress {
  display: inline-block;
  vertical-align: baseline;
}
textarea {
  overflow: auto;
}
[type=checkbox], [type=radio] {
  padding: 0;
  box-sizing: border-box;
}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button {
  height: auto;
}
[type=search] {
  appearance: textfield;
  outline-offset: -2px;
}
[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration {
  appearance: none;
}
::-webkit-file-upload-button {
  font: inherit;
  appearance: button;
}
details, menu {
  display: block;
}
summary {
  display: list-item;
}
canvas {
  display: inline-block;
}
template {
  display: none;
}
[hidden] {
  display: none;
}
html {
  box-sizing: border-box;
  font-family: Open Sans;
  line-height: 1.15;
  text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: 100%;
}
html.wf-active {
  font-family: Open Sans;
}
*, *:before, *:after {
  box-sizing: inherit;
}
noscript {
  top: 50%;
  left: 50%;
  color: #fff;
  z-index: 1000;
  padding: 1.5rem 2.5rem;
  position: absolute;
  transform: translate(-50%, -50%);
  background: #d00;
  box-shadow: 0 0 10px 52px rgba(255,255,255,.8);
  font-weight: 400;
  border-radius: 2px;
}
body {
  margin: 0;
  background: #ffffff;
  -webkit-tap-highlight-color: rgba(0,0,0,.05);
}
main {
  position: relative;
}
h1, h2, h3 {
  font-weight: 300;
}
a {
  background: transparent;
  transition: 0.3s;
  font-weight: bold;
  text-decoration: none;
  text-decoration-skip: objects;
}
input:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 50px white inset;
}
:not(pre) > code[class*='language-'] {
  color: #666;
  padding: 1px 5px;
  background: #eee;
  text-shadow: none;
  border-radius: 2px;
}
.jss2 {
  top: 0;
  left: 0;
  width: 100%;
  bottom: 0;
  position: absolute;
  animation-name: main-entry;
  animation-duration: .5s;
}
@media (min-width: 1024px) {
  .jss2 {
    left: 320px;
    width: calc(100vw - 320px - 60px);
  }
}
@media print {
  .jss2 {
    position: relative;
  }
  .jss2 > div {
    overflow: visible!important;
  }
  .jss2 > div > div {
    position: relative!important;
  }
}
.jss3 {
  margin: 0 auto;
  padding: calc(1.5rem + undefinedpx) 1.8rem 1.5rem 1.5rem;
}
.jss3 strong, .jss3 b {
  font-weight: 600;
  letter-spacing: -.02em;
}
.jss3 a {
  display: inline-block;
  transition: 0.3s;
  font-weight: 600;
  text-shadow: 
         2px  2px #ffffff,
        -2px  2px #ffffff,
        -2px -2px #ffffff,
        -2px  2px #ffffff,
        -2px  0   #ffffff,
         2px  0   #ffffff
      ;
  letter-spacing: -.02em;
  text-decoration: none;
}
@media (min-width: 600px) {
  .jss3 {
    padding: calc(2.5rem + undefinedpx) 3.5rem 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss3 {
    padding: 3.5rem;
  }
}
.jss3 a:hover {
  color: hsl(205.20000000000005, 59.1%, 55.2%);
}
@keyframes main-entry {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}
.jss4 {
  margin: 0 auto;
  padding: calc(60px + 1.5rem) 1.5rem  1.5rem 1.5rem;
  max-width: 50em;
  background: #ffffff;
}
.jss4 strong, .jss4 b {
  letter-spacing: -.02em;
}
.jss4 a {
  transition: 0.3s;
  font-weight: bold;
  letter-spacing: -.02em;
  text-decoration: underline;
}
@media (min-width: 600px) {
  .jss4 {
    padding: calc(2.5rem + 60px) 3.5rem 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss4 {
    padding: 3.5rem;
  }
}
.jss4 a:hover {
  color: hsl(205.20000000000005, 59.1%, 55.2%);
}
.jss5 {
  margin: 0 0 3em;
}
.jss6 {
  color: #444444;
  margin: 0 0 0.4em;
  font-size: 1.6em;
  font-weight: 600;
  line-height: 1.1;
  letter-spacing: -0.04em;
}
@media (min-width: 600px) {
  .jss6 {
    font-size: 2.3em;
  }
}
@media (min-width: 1024px) {
  .jss6 {
    font-size: 2.5em;
    letter-spacing: -0.05em;
  }
}
.jss7 {
  color: #444444;
  font-size: 1.2em;
  line-height: 1.1;
  font-weight: 300;
}
@media (min-width: 600px) {
  .jss7 {
    font-size: 1.4em;
  }
}
@media (min-width: 1024px) {
  .jss7 {
    font-size: 1.5em;
  }
}
.jss8 {
  color: #444444;
  font-size: 0.9em;
  font-weight: 600;
}
.jss9 {
  color: #333333;
  line-height: 1.6;
}
.jss9 a {
  color: #358ccb;
}
.jss9 .gatsby-highlight {
  margin: 2em 0;
}
.jss9 .gatsby-resp-iframe-wrapper {
  margin: 2em 0;
}
.jss9 .gatsby-resp-image-link {
  margin: 2em -1.5rem;
  border: none;
}
.jss9 h2, .jss9 h3 {
  color: #444444;
  margin: 2em 0 1em;
  font-size: 1.5em;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.02em;
}
.jss9 h3 {
  font-size: 1.3em;
}
.jss9 p {
  margin: 0 0 1.5em 0;
  font-weight: 400;
}
.jss9 ul {
  padding: 0 0 0 1.3em;
  list-style: circle;
}
.jss9 li {
  margin: 0 0 .5em 0;
}
.jss9 blockquote {
  border: 5px solid #bbbbbb;
  margin: 2.5em 0;
  padding: 1em 1.1em 1em 1.3em;
  position: relative;
  font-style: italic;
}
@media (min-width: 600px) {
  .jss9 {
    font-size: 1.15em;
  }
}
@media (min-width: 1024px) {
  .jss9 {
    font-size: 1.1em;
  }
}
.jss9 blockquote p {
  margin: 0;
}
.jss9 blockquote::before, .jss9 blockquote::after {
  top: -5px;
  left: 50%;
  width: 94%;
  height: 5px;
  content: "";
  position: absolute;
  background: #ffffff;
  margin-left: -47%;
}
.jss9 blockquote::after {
  top: auto;
  bottom: -5px;
}
@media (min-width: 600px) {
  .jss9 ul {
    padding: 0 0 0 2em;
  }
}
@media (min-width: 600px) {
  .jss9 .gatsby-resp-image-link {
    margin: 2.5em -3.5rem;
  }
}
.jss10 {
  font-size: calc(1em * 1);
}
.jss15 {
  margin: 3em 0 0;
  padding: 3em 0 0;
  display: flex;
  border-top: 1px solid #ddd;
  align-items: center;
  flex-direction: column;
}
.jss15 a {
  color: #358ccb;
}
@media (min-width: 600px) {
  .jss15 {
    flex-direction: row;
    justify-content: center;
  }
}
.jss16 {
  width: 60px;
  margin: 0 1em 1em;
  height: 60px;
  border: 1px solid #ddd;
  flex-shrink: 0;
  border-radius: 75% 65%;
}
@media (min-width: 600px) {
  .jss16 {
    margin: 0 1em 0;
  }
}
.jss17 {
  display: flex;
  min-height: 50px;
  align-items: center;
  flex-dirction: column;
}
.jss12 {
  display: flex;
  padding: 1em 0 0;
  align-items: center;
  flex-direction: column;
  justify-content: center;
}
@media (min-width: 600px) {
  .jss12 {
    flex-direction: row;
  }
}
.jss13 {
  display: flex;
  flex-direction: row;
}
.jss13 .SocialMediaShareButton {
  margin: 0 .8em;
  cursor: pointer;
}
.jss14 {
  margin: 0 1em 1em;
  font-size: 1.2em;
}
@media (min-width: 600px) {
  .jss14 {
    margin: 0 1em;
  }
}
.jss11 {
  color: #444444;
  font-size: 1em;
  line-height: 1.4;
}
.jss11 p {
  margin: 0;
}
.jss22 {
  color: hsl(0, 0%, 40%);
  font-size: 0.8em;
  line-height: 1.4;
}
.jss22 a {
  color: #358ccb;
  font-weight: normal;
  text-shadow: none;
}
.jss22 a:hover {
  color: hsl(205.20000000000005, 59.1%, 60.2%);
}
.jss22 ul {
  margin: 0;
  padding: 0;
  list-style: none;
  text-align: center;
}
.jss22 li {
  margin: 0 .3em;
  display: inline-block;
}
.jss21 {
  color: #444444;
  padding: 1.5rem 1.5rem  calc(60px + 1.5rem) 1.5rem;
}
.jss21 p {
  margin: 0;
}
@media (min-width: 600px) {
  .jss21 {
    padding: 2rem 2.5rem  calc(60px + 2rem) 2.5rem;
  }
}
@media (min-width: 1024px) {
  .jss21 {
    padding: 2rem 3rem 2rem 3rem;
  }
}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Creating a Kubernetes Cluster - Mike Polinowski</title><meta data-react-helmet="true" name="description" content="Mike Polinowski :: A Developer Blog and Personal Technology Playground"/><meta data-react-helmet="true" property="og:url" content="https://mpolinowski.github.io/creating-a-kubernetes-cluster/"/><meta data-react-helmet="true" property="og:title" content="Creating a Kubernetes Cluster - Mike Polinowski"/><meta data-react-helmet="true" property="og:description" content="Mike Polinowski :: A Developer Blog and Personal Technology Playground"/><meta data-react-helmet="true" property="og:image" content="/static/fed35a3b606dbf01b33ea8cccb2c3a31/152f9/photo-34219553960_350f18edbb_o-cover.png"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mpolinowski"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-1058079da16173a83d8c.js"/><link as="script" rel="preload" href="/app-b0f9e8dda494748b33ac.js"/><link as="script" rel="preload" href="/styles-7a71594915e4c68be36c.js"/><link as="script" rel="preload" href="/0-5279c26cd4b509e72b04.js"/><link as="script" rel="preload" href="/11-948e9d87a0698a8abc0b.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-7cebd6bb96627eb11338.js"/><link as="fetch" rel="preload" href="/static/d/606/path---creating-a-kubernetes-cluster-742-b0d-cZgLIhMsmmtMakjmFandZpLX0qU.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="jss1"><main class="jss2"><div style="position:relative;overflow:hidden;width:100%;height:100%"><div style="position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-overflow-scrolling:touch;margin-right:0;margin-bottom:0"><article class="jss4"><header class="jss5"><h1 class="jss6">Creating a Kubernetes Cluster</h1><h3 class="jss7">Red Hat Enterprise and Centos Linux Server Adminsitration</h3><div class="jss8">Tue, 15 Jan 2019</div></header><div class="jss9 jss10"><p><a
    class="gatsby-resp-image-link"
    href="/static/3ab587ce485b29f47f37ae231348ba9a/e16af/photo-34219553960_350f18edbb_o.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 45.1271186440678%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACSUlEQVQozw2RSW/TABBG/VO4ILVCXZLi1k4dZ3W8JHYcJ3GcpXHthDYuSUpbqRsUlapQqReWG+LAFa4ICcGfe/gwh9Ho07w3I9hmjGZMMa0DdGNORV/SMOcM7CmxO2TeDUh6CXuDC+LxCcPhkm6yoDtf0u4esddfMOyfMBkdE7QXCFN3kob3eD9b4hn76OUItxQSmSGdWp+p7XM2GDJuTZgnt9y/vuDV0T7Jfo+rg4DTvTHns1NG7oieEyE4VkDbSRs3ppLvoSkxsbbksDYhSCnPhyGDmoNddPCtPoEb0LE86qrG43HMdRzydpKSWwlhM0GYBYd0GxFdK2LZHPDtYMaH299MB/f4XpKSdYmsFuPmiFLJR1UaOGWbecOnr/dxah1uJi/4dPGGu6N3CL8uz7gzhrQLHUJvxPlohG2eoeb6aGpAId9Aq3ZotsL0HC1iy6Jb0enVQ/xKi/auhyMZuMUyvm4ifD+J0oGHpGhkRYts1kQVK9RlHVOScKp19FTPkmVMw2M2HDB1LcStMjW5zlz3+dibcVXXcHcVhOuxweelTdOQUiUFQ9qhkBVJKlvE+TUy6yq2WkLJNchumxTlSqpt8HynhppRuHQU/l13+HPZ5kskIYRVhZ8PCbHfRpU1vN0sjrxFWZSppmUXylRyRkpeZGstgylus7lZIrtRoimJzO1tflxl+Dt7wlfnKUIpk+MxKnKzeImeb2JnVvHkLNUUv5xT069rSGKR9XWRtfUdVlZ2eLZRJZ8unxVXeQhlAl2hl8/Rlsv8BwhhYhtmiCl2AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Shanghai, China"
        title=""
        src="/static/3ab587ce485b29f47f37ae231348ba9a/de8ec/photo-34219553960_350f18edbb_o.png"
        srcset="/static/3ab587ce485b29f47f37ae231348ba9a/81654/photo-34219553960_350f18edbb_o.png 200w,
/static/3ab587ce485b29f47f37ae231348ba9a/3601a/photo-34219553960_350f18edbb_o.png 400w,
/static/3ab587ce485b29f47f37ae231348ba9a/de8ec/photo-34219553960_350f18edbb_o.png 800w,
/static/3ab587ce485b29f47f37ae231348ba9a/4c3ca/photo-34219553960_350f18edbb_o.png 1200w,
/static/3ab587ce485b29f47f37ae231348ba9a/5c56c/photo-34219553960_350f18edbb_o.png 1600w,
/static/3ab587ce485b29f47f37ae231348ba9a/2a493/photo-34219553960_350f18edbb_o.png 2400w,
/static/3ab587ce485b29f47f37ae231348ba9a/e16af/photo-34219553960_350f18edbb_o.png 2832w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<p>In this hands-on lab from <a href="https://linuxacademy.com/cp">Linux Academy</a>, we will install and configure a Kubernetes cluster consisting of 1 master and 2 nodes for the pods. Once the installation and configuration are complete, we will have a 3-node Kubernetes cluster that uses Flannel as the network overlay.</p>
<!-- TOC -->
<ul>
<li>
<p><a href="#instructions">Instructions</a></p>
<ul>
<li><a href="#objectives">Objectives</a></li>
</ul>
</li>
<li>
<p><a href="#install-docker-and-kubernetes">Install Docker and Kubernetes</a></p>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#install-docker-ce">Install Docker CE</a></li>
<li><a href="#install-kubernetes">Install Kubernetes</a></li>
<li><a href="#start-docker-and-kublet">Start Docker and Kublet</a></li>
</ul>
</li>
<li>
<p><a href="#cluster-initialization">Cluster Initialization</a></p>
<ul>
<li><a href="#installing-a-pod-network-add-on">Installing a Pod Network Add-on</a></li>
<li><a href="#check-the-cluster-state">Check the cluster state.</a></li>
</ul>
</li>
<li>
<p><a href="#create-and-scale-a-deployment-using-kubectl">Create and scale a deployment using kubectl</a></p>
<ul>
<li><a href="#kubernetes-stuck-on-containercreating">Kubernetes stuck on ContainerCreating</a></li>
<li><a href="#scaling">Scaling</a></li>
</ul>
</li>
<li><a href="#pod-deployment">Pod Deployment</a></li>
<li><a href="#kubernetes-services">Kubernetes Services</a></li>
<li><a href="#updating-the-pod">Updating the Pod</a></li>
<li><a href="#adding-a-queue-server">Adding a Queue Server</a></li>
<li>
<p><a href="#replication-not-recommended">Replication (not recommended)</a></p>
<ul>
<li><a href="#replicasets">ReplicaSets</a></li>
</ul>
</li>
<li>
<p><a href="#deployment-recommended">Deployment (recommended)</a></p>
<ul>
<li><a href="#rolling-update-and-rollback">Rolling Update and Rollback</a></li>
</ul>
</li>
<li>
<p><a href="#networking-and-service-discovery">Networking and Service Discovery</a></p>
<ul>
<li><a href="#creating-a-database-pod">Creating a Database Pod</a></li>
</ul>
</li>
<li>
<p><a href="#kubernetes--compose--kompose">Kubernetes + Compose = Kompose</a></p>
<ul>
<li><a href="#use-kompose">Use Kompose</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="instructions"><a href="#instructions" aria-label="instructions permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Instructions</h2>
<p>In this learning activity, we will create a Kubernetes cluster. The commands we will use for this process can be found in the task list by clicking on the orange question mark buttons.</p>
<p>Once you have completed the lab, leave your cluster in its final state. Do not delete the deployment:</p>
<h3 id="objectives"><a href="#objectives" aria-label="objectives permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Objectives</h3>
<ul>
<li>Install Docker and Kubernetes on all servers.</li>
<li>Create and scale a deployment using kubectl.</li>
</ul>
<h2 id="install-docker-and-kubernetes"><a href="#install-docker-and-kubernetes" aria-label="install docker and kubernetes permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Docker and Kubernetes</h2>
<h3 id="prerequisites"><a href="#prerequisites" aria-label="prerequisites permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h3>
<ol>
<li>You first need to login as your root user or elevate your users privileges via sudo on your master and two minion servers:</li>
</ol>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">su</span></code></pre></div>
<ol>
<li>This next step is not recommended in production (<a href="https://docs.docker.com/engine/security/seccomp/">How do you create a SE Linux policy?</a>) - but we are going to disable SE Linux on all 3 servers:</li>
</ol>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">setenforce 0
sed -i --follow-symlinks &#39;s/SELINUX=enforcing/SELINUX=disabled/g&#39; /etc/sysconfig/selinux</code></pre></div>
<ol start="3">
<li>Now we need to enable the <code class="language-text">br_netfilter</code> module on all servers to allow our cluster to communicate:</li>
</ol>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">modprobe br_netfilter
<span class="token keyword">echo</span> <span class="token string">'1'</span> <span class="token operator">></span> /proc/sys/net/bridge/bridge-nf-call-iptables</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/f2901ed8c58feb6fdbde92110cff0800/a7715/kubernetes_cluster_01.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 797px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 11.91969887076537%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAaUlEQVQI1yWMCQ6AIBADlSh44PEDlUuBBcXo/7/mqknTtE2mWW/PAS5uU+fOyuzozXrUZmcqFMKV0jMFpfBUAlXAdMCAFUcmIUNyjDd36cNemKrQ2sTxS8fKxNrEH8PHYnH5tKHIbMm8PX60Dl1FvFRPAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/f2901ed8c58feb6fdbde92110cff0800/a7715/kubernetes_cluster_01.png"
        srcset="/static/f2901ed8c58feb6fdbde92110cff0800/399bb/kubernetes_cluster_01.png 200w,
/static/f2901ed8c58feb6fdbde92110cff0800/82d5f/kubernetes_cluster_01.png 400w,
/static/f2901ed8c58feb6fdbde92110cff0800/a7715/kubernetes_cluster_01.png 797w"
        sizes="(max-width: 797px) 100vw, 797px"
      />
  </span>
  </a></p>
<hr>
<ol start="4">
<li>Make sure that swap has been turned off:</li>
</ol>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/c89d6dbaef3b03200445c9c6a153701e/4da31/kubernetes_cluster_02.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 20.52565707133917%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhklEQVQI14WPXRKCMAyEiyBa2h5B1FJo2vDT4v3v5jLIGzPOfA+ZTXaTCNnPN+CmqhvlO5KN0bK3XD4G0fo/NMOiKN37+dpxZbk4qN1UvgImiicB0Z5lacoqZB2y4Y+irCmZsCLOxBUiWtIjPdduPDfDthsw2lDav9h2HmtxEYCI+rIpP/MXWx0Z+yQfPDEAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/c89d6dbaef3b03200445c9c6a153701e/4da31/kubernetes_cluster_02.png"
        srcset="/static/c89d6dbaef3b03200445c9c6a153701e/c5bb8/kubernetes_cluster_02.png 200w,
/static/c89d6dbaef3b03200445c9c6a153701e/8f34d/kubernetes_cluster_02.png 400w,
/static/c89d6dbaef3b03200445c9c6a153701e/4da31/kubernetes_cluster_02.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr>
<blockquote>
<p>To turn off swap on centos type <code class="language-text">swapoff -a</code> and check that the swap was removed with <code class="language-text">free -h</code>. Edit the <code class="language-text">/etc/fstab</code> file, search for the swap line and comment the entire line by adding a <code class="language-text">#</code> in front of the line:</p>
</blockquote>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/814369e93af7cb4fe8f16633e5ef5fd5/de8ec/kubernetes_cluster_02a.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 42.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHklEQVQoz4VQ2W7CMBDkC0jwmqspJA5QHHt9QSqV9/7/N3UWkKigUqXVysfOsTNRNumOfetLx2XH7WpQc6sXqEEv/6mJioWOqTJcdTztWJlAvZRuvUysUE760v4FTkWFosqJQiaXKBbls7zkk3SXcaUh6bXT8yt+8Rs8nlUuijPm6BjpI8II7QKZoLdM9nrug/zCDije/QNcf19ml08RPJ9UKXrj9VrcCpEJs6/xzshZ6IDEFg/lIILTcaw+Yo3wAAMemtjcJjgiG2nr784XTzvbNG/5EIvreX8I1DiNUcMyBxZE1bF05Ne8gCGrDe9zGQz3kGq8bvnmkA5R9BHBxkOD4PkFnKjlyud6OdSIBPSNp5ua7O9oy5ICzm/Pyj/aikOM2D3ZtQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/814369e93af7cb4fe8f16633e5ef5fd5/de8ec/kubernetes_cluster_02a.png"
        srcset="/static/814369e93af7cb4fe8f16633e5ef5fd5/81654/kubernetes_cluster_02a.png 200w,
/static/814369e93af7cb4fe8f16633e5ef5fd5/3601a/kubernetes_cluster_02a.png 400w,
/static/814369e93af7cb4fe8f16633e5ef5fd5/de8ec/kubernetes_cluster_02a.png 800w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<p><a
    class="gatsby-resp-image-link"
    href="/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/d12c5/kubernetes_cluster_02b.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 798px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 27.31829573934837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1UlEQVQY01WOXU8CMRBF+6y0sJ02SBGjYRf2g35MV2J8IArR8ESC8gL+/x/idLPBmJyc3E7mZsqG+404vvPvHT9/8EuPOO0ETY5bGg5+Pgn+H/G1FYc3pu5rQutSi0IPi2RitEjwQt/miZtcD4r0vNKtMXBRrlsZIsQWHEqPMqBcBRkjGSoPCyfJD40aV2pSq7s6uYONHGYeM4sZhdJnuaPtnrmF0vcht2rW9Q31qxTGFZu+Pk82L2bdmtobjCagelzBrAHyk4Wllxhh7tKPbEj3p3/lX28VKuSHJ7TfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/d12c5/kubernetes_cluster_02b.png"
        srcset="/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/bd712/kubernetes_cluster_02b.png 200w,
/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/fd6ca/kubernetes_cluster_02b.png 400w,
/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/d12c5/kubernetes_cluster_02b.png 798w"
        sizes="(max-width: 798px) 100vw, 798px"
      />
  </span>
  </a></p>
<hr>
<blockquote>
<p>Now delete the remaining swap file - check the location <code class="language-text">blkid</code> and remove it <code class="language-text">rm /dev/mapper/centos-swap</code>:</p>
</blockquote>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/90d2f664655149aef9aa43b9ea60f9e3/ae9d5/kubernetes_cluster_02c.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 23.134328358208954%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAzElEQVQY01XOUWrDMAwG4JygJlIah7GOsqRtYseWJcdL2NPY/Q81mbHC4Hv4ZWRJTfu1o0jIElaCe4SQcKHKa0h/gfBBeIvdxeOb714rvKyNfm6PYliMCEZGYiBBHaFWxZCkvvhagk5xBNrmE0RpWhYtTNnMx3byydziaSYzJ9DWe8S5LoSZFLqEY8TpV8BHauxnsYk9sWSmkmnPvGdfcp/zwKKsBkcDSa9n26UbnlwD3wce23XfJkcj8XuWidKoa6dwfnHnfnnqlP3nBxuqKz/0rFgEAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/90d2f664655149aef9aa43b9ea60f9e3/de8ec/kubernetes_cluster_02c.png"
        srcset="/static/90d2f664655149aef9aa43b9ea60f9e3/81654/kubernetes_cluster_02c.png 200w,
/static/90d2f664655149aef9aa43b9ea60f9e3/3601a/kubernetes_cluster_02c.png 400w,
/static/90d2f664655149aef9aa43b9ea60f9e3/de8ec/kubernetes_cluster_02c.png 800w,
/static/90d2f664655149aef9aa43b9ea60f9e3/ae9d5/kubernetes_cluster_02c.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<ol>
<li>Add a FirewallD Service</li>
</ol>
<p>Configure FirewallD for Kubernetes to work correctly. First download the k8s-master.xml and k8s-worker.xml files to <code class="language-text">cd /etc/firewalld/services</code> on your master and minion server:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">wget</span> https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-master.xml

<span class="token function">wget</span> https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-worker.xml

firewall-cmd --reload</code></pre></div>
<p><strong>On Master Node</strong></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">firewall-cmd --add-service<span class="token operator">=</span>k8s-master --zone<span class="token operator">=</span>public --permanent</code></pre></div>
<p><strong>On Minion Nodes</strong></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">firewall-cmd --add-service<span class="token operator">=</span>k8s-worker --zone<span class="token operator">=</span>public --permanent</code></pre></div>
<p><strong>TODO</strong>: I have to add <code class="language-text">firewall-cmd --add-service=dns --zone=public --permanent</code> ?</p>
<!--
systemctl stop firewalld && systemctl disable firewalld
systemctl start firewalld && systemctl enable firewalld
-->
<h3 id="install-docker-ce"><a href="#install-docker-ce" aria-label="install docker ce permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Docker CE</h3>
<ol>
<li>Ensure that all Docker dependencies are installed:</li>
</ol>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/8674b77524180ba538f7f2ba939211ea/ca61e/kubernetes_cluster_03.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 794px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.03274559193955%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApElEQVQI10WO2w6CMBAFQcJNBZHokwISLi10S6ktJf7/j7kEwWSymZezGStmKuXmwtQFdNyrIx1DIoKa+xtBM+zuVWDnZMcKqUyEObP3dTDJMPkNd8ru8KJW1lpPpFlYPdvA2coN9EN+7twkfErFnI5zDPrUyYgpDFlyUJiKeoV/3Yp5NdgF/Y0laAG6xdpWINjmVuBhYY0X/E0w2Cl7uyD/ZU6+oSwcZw0b+vYAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/8674b77524180ba538f7f2ba939211ea/ca61e/kubernetes_cluster_03.png"
        srcset="/static/8674b77524180ba538f7f2ba939211ea/51a02/kubernetes_cluster_03.png 200w,
/static/8674b77524180ba538f7f2ba939211ea/a582a/kubernetes_cluster_03.png 400w,
/static/8674b77524180ba538f7f2ba939211ea/ca61e/kubernetes_cluster_03.png 794w"
        sizes="(max-width: 794px) 100vw, 794px"
      />
  </span>
  </a></p>
<hr>
<ol start="2">
<li>Now we can add the Docker repository and install it:</li>
</ol>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
yum <span class="token function">install</span> -y docker-ce</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/1cf7f1db03d628789cd84ba8b5af1ad7/4da31/kubernetes_cluster_04.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 106.75844806007508%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACNElEQVQ4y32U6W7bMBCEZVu+b6cB+sNOLNm6SImU5KsB+v7P1W9F203QVMDA2Iic3dndYbxFVq/zy0LVc3V+zWobWx0Zdcz1sdgHqvOWtMCbZtWmvC30aW1va3sdx6Yfqn6gvF0s4EYLJol9KX+tzXVtLnN9Gidld5913lPBPnPxPdG/6QaHHPLG3l7rD8efqXqSlhJkFYqmaTmKDIrGsR0n9gu5f9DIXpkbKZb5GT5MQDtkgT/X9TAqeoHiph9qhCDnQQ61qwxWxQVQyuGRohrFBoJ/0C4F6Lw/ZKNwzrT1iUso9EPFWdN24urIYOl2G39pHkg/iRke8+GxQBW5+PUDRSBfAuUwOBakvp+GGr2cetRk1ESARKilw8Exn8QWzXwB8mdi6Z/fUSQ3uUNT3rq4/Dz/nqYVWaUFVfeYxzaiGnzuyaq2EaVgTpJSCm6jzi6B783ScmOvZPWaxmZZ7QcNOdSypNhIrl1McfGPyBb/kJEjTCKDnTdbGbllggifSWOuvUfc9I//Qu3W5j23QuL7QYO7yVrhMa3nkl0/3zvxW4ir7BXmEntkVa/xM+g1T6qFKZXZBK6GJvz8TPM8T4KVubjZ/I8sPof8o/og4kluzHWuTvI85ZFdu/u0pTKT9vDWsjizg2lWN8Or3PyQ4AdtlWVAjT1Lt8BekP11siBpmxzfp7F94Rk3j5END/FjbO6beEv8x7YxicTUQM6Tn0dGo5MbjT2dGT6P1P0z6X5e7+P0D+rQjK/G+oOTAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/1cf7f1db03d628789cd84ba8b5af1ad7/4da31/kubernetes_cluster_04.png"
        srcset="/static/1cf7f1db03d628789cd84ba8b5af1ad7/c5bb8/kubernetes_cluster_04.png 200w,
/static/1cf7f1db03d628789cd84ba8b5af1ad7/8f34d/kubernetes_cluster_04.png 400w,
/static/1cf7f1db03d628789cd84ba8b5af1ad7/4da31/kubernetes_cluster_04.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr>
<h3 id="install-kubernetes"><a href="#install-kubernetes" aria-label="install kubernetes permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Kubernetes</h3>
<p>First we need to add the Kubernetes repository all servers:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> EOF <span class="token operator">></span> /etc/yum.repos.d/kubernetes.repo  
<span class="token punctuation">[</span>kubernetes<span class="token punctuation">]</span>  
name<span class="token operator">=</span>Kubernetes  
baseurl<span class="token operator">=</span>https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64  
enabled<span class="token operator">=</span>1  
gpgcheck<span class="token operator">=</span>0  
repo_gpgcheck<span class="token operator">=</span>0  
gpgkey<span class="token operator">=</span>https://packages.cloud.google.com/yum/doc/yum-key.gpg  
 https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg  
EOF</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/6c87035b12fefc43f6109abedb7b3832/4da31/kubernetes_cluster_05.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 20.02503128911139%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAjklEQVQI122PUQuDIBSFBc2SuTEY662YrnRp1koGY/v//2vHehvC4fIhfpx7ydGtl+f7HF7CzrwLZReqPgCEmYWZ8AiozMS0I639D+Tr+pGPhWnPlKc3B6DKUQ1wCVSCQvu8XMfvyUc0lH1AyZ69EM3FfSSNIY3NyT7KYTlskcOKVfGbdyPfJq5Icmuz+QHj6BptjciFLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/6c87035b12fefc43f6109abedb7b3832/4da31/kubernetes_cluster_05.png"
        srcset="/static/6c87035b12fefc43f6109abedb7b3832/c5bb8/kubernetes_cluster_05.png 200w,
/static/6c87035b12fefc43f6109abedb7b3832/8f34d/kubernetes_cluster_05.png 400w,
/static/6c87035b12fefc43f6109abedb7b3832/4da31/kubernetes_cluster_05.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr>
<p>Now we can install Kubernetes on all servers via yum:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yum <span class="token function">install</span> -y kubelet kubeadm kubectl</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/e0c274725c27642ae935e59b2fe11d4e/c901b/kubernetes_cluster_06.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 795px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 109.0566037735849%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACUklEQVQ4y42T6XLiMBCEBQRzs1ybX4m5fMi2LNuYcOz7P9h+Y+1SkKTYrZpSSbZ6pme6pcbpYZZ/TLLDOKsXSZXHRRbZJDBpmCdBnkbWBPlirZUft/xYfYpRUi2K0yQ9sM6L0zCy3i7rbtOWH6l3iRbrV5iLoS6X5WVmT4viPM2Og8i2XJ11wkaqvUcPcQ/uBmZZnMG/1r+Ef3r4YY70QpBrmtWDqBjpshfaQVzcUv8F7w01F4I/z63wHydExTo1x0lavdDFPutsElm36WPlvVkdroIvL7La0zAu+1HBOoypWXV3qXoL1Y3/PdjbG4hJxAVFiPYm+X48n8DsB3FJ+n5oCS8wRLPJiV6QU7zX7Pk+EDr3R6sYD9OiGQrSmLfPEE8obNPuLiMvt9kTjI2JwNQdyaUY9aq6IAzNdxvazEmYo/BG0zm3HVvAyCEz49daQ9CZ5Eyalx3FNcUBiLxvodyIbEcShQC4jQqdjZZffixJITYRSWvcQvF+mHNJqDYskMfRcXvh/OeYclRuDARFvAYsowqlIOTba912m42W/f0RCvPGXnN7ph+mJZKKJKF6YumbVGAw1jz/mFnxpnMfWVvPkS4GsWXawGZWLM38XP/tew9/V5buFO39rK6MsTF2Tayq602eJ2CRijnRM6XAoDAviY38+FfDDTjIZVSBkZegeRIW8UTq57T9WKTyeK5Z7YyNgC1fkxVtG5/nzqfNCJNeiNuNGHFvGudEahnaV3ySVPL6vrzYXuAA5Mqdfx/qp7rUuhztso54yDjrqv/RyY9/A/5zklfE/RMvAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/e0c274725c27642ae935e59b2fe11d4e/c901b/kubernetes_cluster_06.png"
        srcset="/static/e0c274725c27642ae935e59b2fe11d4e/20142/kubernetes_cluster_06.png 200w,
/static/e0c274725c27642ae935e59b2fe11d4e/35b6a/kubernetes_cluster_06.png 400w,
/static/e0c274725c27642ae935e59b2fe11d4e/c901b/kubernetes_cluster_06.png 795w"
        sizes="(max-width: 795px) 100vw, 795px"
      />
  </span>
  </a></p>
<hr>
<h3 id="start-docker-and-kublet"><a href="#start-docker-and-kublet" aria-label="start docker and kublet permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Start Docker and Kublet</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">systemctl <span class="token function">enable</span> docker
systemctl <span class="token function">enable</span> kubelet
systemctl start docker
systemctl start kubelet</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/722179931250471aa3c8948856aa217b/d5c4f/kubernetes_cluster_07.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 17.353308364544322%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiElEQVQI1zWO2wrDIBBEkzSXJlELpe9pzc2uJkYttP//ZR2FwHCYWZjdzXrlhPkwcjDdenDyjLzQvn+7ejKl1BU06lISdHlRNRrESGmymw4P9+M6dKttzzKI8nXZm3lr5h2mnjbsQi3GNAEzQeF+fFnqtIsVOqQXLKeAO/mgiqcqBpWfQoxM5g/mxxWFoGgd3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/722179931250471aa3c8948856aa217b/de8ec/kubernetes_cluster_07.png"
        srcset="/static/722179931250471aa3c8948856aa217b/81654/kubernetes_cluster_07.png 200w,
/static/722179931250471aa3c8948856aa217b/3601a/kubernetes_cluster_07.png 400w,
/static/722179931250471aa3c8948856aa217b/de8ec/kubernetes_cluster_07.png 800w,
/static/722179931250471aa3c8948856aa217b/d5c4f/kubernetes_cluster_07.png 801w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>To check in what Group Docker is running, run <code class="language-text">docker info | grep -i cgroup</code>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/b2f97b5453b34bb8ecac0959b0310fde/4da31/kubernetes_cluster_08.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 6.132665832290362%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAMUlEQVQI12MQ09AT0jHm0zIEMrjVDThUdVmVtVmVdYAku4ouo7wGg5w6FiSrxqqkDQDVkwaBUkxRegAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/b2f97b5453b34bb8ecac0959b0310fde/4da31/kubernetes_cluster_08.png"
        srcset="/static/b2f97b5453b34bb8ecac0959b0310fde/c5bb8/kubernetes_cluster_08.png 200w,
/static/b2f97b5453b34bb8ecac0959b0310fde/8f34d/kubernetes_cluster_08.png 400w,
/static/b2f97b5453b34bb8ecac0959b0310fde/4da31/kubernetes_cluster_08.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr>
<p>In this case it is <code class="language-text">cgroupfs</code> - we can now make sure that Kubernetes is added to this group:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">sed</span> -i <span class="token string">'s/cgroup-driver=systemd/cgroup-driver=cgroupfs/g'</span> /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
systemctl daemon-reload
systemctl restart kubelet</code></pre></div>
<h2 id="cluster-initialization"><a href="#cluster-initialization" aria-label="cluster initialization permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cluster Initialization</h2>
<p>So far we did the basic setup for all our servers - now we will initialize our cluster from the <strong>MASTER SERVER</strong> using the IP range for Flannel. Kubeadm is a tool built to provide <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/">kubeadm init</a> and <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-join/">kubeadm join</a> as best-practice <em>fast paths</em> for creating Kubernetes clusters. The <strong>init command</strong> executes the following phases:</p>
<!-- Flannel CNI backup
```bash
kubeadm init --pod-network-cidr=10.244.0.0/16
```
kubeadm init --pod-network-cidr=10.244.0.0/16 --ignore-preflight-errors=NumCPU
-->
<!-- Calico CNI backup
```bash
kubeadm init --pod-network-cidr=192.168.0.0/16
```

> The flag `--pod-network-cidr=192.168.0.0/16` has to be passed in for our [Container Network Interface (CNI)](https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network) to work - see below. __Note__ that we are going to use the [Calico CNI](https://docs.projectcalico.org/latest/getting-started/kubernetes/) - other CNI's need different parameter.
-->
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubeadm init</code></pre></div>
<p>Your Kubernetes master has initialized successfully! You can now join any number of machines by running the following on each node as root:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/dfdb2e41e6da1d38b41467e1b23bbddb/d7315/kubernetes_cluster_09.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 30.79800498753117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7CAAAOwgEVKEqAAAABFElEQVQY03WRTUsCURSGb2p+zoQtE1NznHHGcSY/0KWbVrUKosAKkhYG/RahXQsrCALF2gVuhX7Z2znHJq5Bi4fDnXvmOWfeUUmriZQdEgGSNYbOVNNOKGep1LNVdhGruIgfeFJVqQ6176yrDjdnnENk3RZyXluEiaqPbXq+xv+hKTK+i1W8/4UpK4Dpd5Gtt2A2ujBIangdkTNGoyNDWCYCHV0a1Rxtlg/7wg6JWbCrnfNBT4aw3KQ7jiAebfgXlqoiT7OhCpZ8DufGealCDWqvClW0NzbiHuZXoCFRXJxd4m54g/vrW3x8LrFcfeHh+RVHwxFORmNMpi+YzhZ4fJvhaf6O9vGpvJymHxnlG0UyOL/CN94Preaygn2HAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/dfdb2e41e6da1d38b41467e1b23bbddb/de8ec/kubernetes_cluster_09.png"
        srcset="/static/dfdb2e41e6da1d38b41467e1b23bbddb/81654/kubernetes_cluster_09.png 200w,
/static/dfdb2e41e6da1d38b41467e1b23bbddb/3601a/kubernetes_cluster_09.png 400w,
/static/dfdb2e41e6da1d38b41467e1b23bbddb/de8ec/kubernetes_cluster_09.png 800w,
/static/dfdb2e41e6da1d38b41467e1b23bbddb/d7315/kubernetes_cluster_09.png 802w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubeadm <span class="token function">join</span> X.X.X.X:6443 --token XXXXXXXXXXXXXXX --discovery-token-ca-cert-hash sha256:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</code></pre></div>
<p>Copy the <code class="language-text">kubeadmin join</code> command that is in the output and past it into your minion server terminals:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/a371daebcb3d46cd9f35833ad43dad6a/d5c4f/kubernetes_cluster_10.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 50.56179775280899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/klEQVQozzWRy2sTURTGb5Imk7SZyYxpfbSpdt7vO6/MTAimAdNYUqVFRKQUqS0uQhcSUEGtFrNxISqlimv3LgQXLhSUioiPf8pvDMLH5cyc893zO/eQad2vOU3BjRcMf3D9xsHj8Wh079XRm0/ff3z8evzw2curw9v7zw+Pf/7+9uvPh89fdu4+QH1JdhjFJRXdw8dc2ObdWF7uu4MNo395LmrbK5dWtnbWd4cIGq0ubj8ZtsXzvaoRVK0wv2Tmzxmk5sZIcHaTp3FBNMmCQs5I80nn4MXR23fvh/tPGNXNNVRyWjoVtkfjp+PD1xc2t/OiWVIcwloRZ0dVMwB/f2sXVBu39tCkkXbn4w7+l1UaDK4k69eU5YswlBS3KDtZIDsEToEmUN1LpU7f6q2p3VWeJmWdooJRnbrf2r5zf+/RuLd5s6x7ZdWd+HMT7BN+ytrRjBkwGi3KNhKg+MfiTRs+lDurk4ZaFK2K7lc0ChZGpVOSTXgvnQ1anNPEgwleip5oJVC8QgQza4W4BZoxsuswfybFnZKsrDNvhQKcdlSnCeIquml0UoQKRqEoBSeetyBa4EJDCHE2s61S2/Qtw3fMwDZDR/dmMU+Wy/iLUnbCiRMG0tDIokYwBbSok4pKa1bImQFn+KwRsNkaARkAGIvASjEzKApLZsY5sf3XX16SblMw4MsEAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/a371daebcb3d46cd9f35833ad43dad6a/de8ec/kubernetes_cluster_10.png"
        srcset="/static/a371daebcb3d46cd9f35833ad43dad6a/81654/kubernetes_cluster_10.png 200w,
/static/a371daebcb3d46cd9f35833ad43dad6a/3601a/kubernetes_cluster_10.png 400w,
/static/a371daebcb3d46cd9f35833ad43dad6a/de8ec/kubernetes_cluster_10.png 800w,
/static/a371daebcb3d46cd9f35833ad43dad6a/d5c4f/kubernetes_cluster_10.png 801w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<blockquote>
<p>To start over and reset the <strong>init</strong> and <strong>join</strong> process by running the <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-reset/">kubeadm reset</a> command on your master and all minion servers + clean up iptables <code class="language-text">iptables -F &amp;&amp; iptables -t nat -F &amp;&amp; iptables -t mangle -F &amp;&amp; iptables -X</code></p>
</blockquote>
<p>To start using your cluster, you need to run the following as a regular user:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> -p <span class="token variable">$HOME</span>/.kube
<span class="token function">sudo</span> <span class="token function">cp</span> -i /etc/kubernetes/admin.conf <span class="token variable">$HOME</span>/.kube/config
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token keyword">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token variable">$HOME</span>/.kube/config</code></pre></div>
<h3 id="installing-a-pod-network-add-on"><a href="#installing-a-pod-network-add-on" aria-label="installing a pod network add on permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing a Pod Network Add-on</h3>
<p>You must install a pod network add-on so that your pods can communicate with each other. The network must be deployed before any applications. Also, CoreDNS will not start up before a network is installed. kubeadm only supports <a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network">Container Network Interface (CNI)</a> based networks (and does not support kubenet).</p>
<!-- Flannel CNI backup
We will use [Flannel](https://github.com/coreos/flannel) as a simple and easy way to configure a layer 3 network fabric designed for Kubernetes. Flannel runs a small, single binary agent called flanneld on each host, and is responsible for allocating a subnet lease to each host out of a larger, preconfigured address space. Flannel uses either the Kubernetes API or etcd directly to store the network configuration, the allocated subnets, and any auxiliary data (such as the host's public IP). Packets are forwarded using one of several backend mechanisms including VXLAN and various cloud integrations.

For flannel to work correctly, you must pass `--pod-network-cidr=10.244.0.0/16` to `kubeadm init`.

Set _/proc/sys/net/bridge/bridge-nf-call-iptables_ to 1 by running `sysctl net.bridge.bridge-nf-call-iptables=1` to pass bridged IPv4 traffic to iptables chains. This is a requirement for some CNI plugins to work, for more information please see here.


```bash
kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
```
-->
<!-- Calico CNI backup
There are several CNI's listed for Kubernetes - but we will be using the solution from [Calico](https://docs.projectcalico.org/latest/getting-started/kubernetes/). For Calico to work correctly, you needed to pass `--pod-network-cidr=192.168.0.0/16` to `kubeadm init` or update the calico.yml file to match your Pod network. Note that Calico works on amd64, arm64 and ppc64le only. We can install the pod network add-on with the following commands on your Master server:


```bash
kubectl apply -f \
https://docs.projectcalico.org/v3.5/getting-started/kubernetes/installation/hosted/etcd.yaml
kubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/rbac-kdd.yaml
kubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/kubernetes-datastore/calico-networking/1.7/calico.yaml
```
-->
<p>There are several CNI’s listed for Kubernetes - but we will be using the solution from <a href="https://www.weave.works/docs/net/latest/kube-addon/">Weave Net</a>. First Set <strong>/proc/sys/net/bridge/bridge-nf-call-iptables</strong> to <strong>1</strong> by running <code class="language-text">sysctl net.bridge.bridge-nf-call-iptables=1</code> to pass bridged IPv4 traffic to iptables’ chains. This is a requirement for some CNI plugins to work, for more information please see here.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">sysctl -w net.bridge.bridge-nf-call-iptables=1
sysctl -w net.bridge.bridge-nf-call-ip6tables=1
reboot</code></pre></div>
<p>Weave Net works on amd64, arm, arm64 and ppc64le without any extra action required. Weave Net sets hairpin mode by default. This allows Pods to access themselves via their Service IP address if they don’t know their PodIP:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f <span class="token string">"https://cloud.weave.works/k8s/net?k8s-version=<span class="token variable"><span class="token variable">$(</span>kubectl version <span class="token operator">|</span> base64 <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">'\n'</span><span class="token variable">)</span></span>"</span></code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/38331a481dad3bf5b375d30aa367a355/5447d/kubernetes_cluster_11.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 44.114002478314745%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIklEQVQoz31Qa2+CQBDE+gBFXtqamJRaBY477gl3oKb9/7+rQ/zUtJhMNrubnZ3Z9SJuN9T4RMVEVdzeqZbUGGqOBV9WanFpvJx4H/X/iJpup4dED++1Lt33hbWZcBFtA6KxN6jk7ERfPtm44i8i7l7bW6r6N9kfqTkIFzbdmqg10cEYVUgNrK0KASwKsURSCjhaXLgXc5tBWbhE9uum245M/Rj1S4k4P7OH+G+gQ6Fsd/q6N8AN/pGgTEWfyh6aq1LOz83kzakaMAfBVLhM9rGwiRpQwp5fyfnj2smHcZtIB/MYPbivhJo9trAuombLOjzsGRnXwiTIMWtzfbXCKd4h5kT7tR6Vp5jAlrVgbrg9E3XH82odsDaEZqnQn53qJ+QfNp5Abp7+uTcAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/38331a481dad3bf5b375d30aa367a355/de8ec/kubernetes_cluster_11.png"
        srcset="/static/38331a481dad3bf5b375d30aa367a355/81654/kubernetes_cluster_11.png 200w,
/static/38331a481dad3bf5b375d30aa367a355/3601a/kubernetes_cluster_11.png 400w,
/static/38331a481dad3bf5b375d30aa367a355/de8ec/kubernetes_cluster_11.png 800w,
/static/38331a481dad3bf5b375d30aa367a355/5447d/kubernetes_cluster_11.png 807w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h3 id="check-the-cluster-state"><a href="#check-the-cluster-state" aria-label="check the cluster state permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Check the cluster state.</h3>
<p>A quick <code class="language-text">kubectl get nodes</code> should confirm that all our nodes are now connected to the container network (see screenshot above)!</p>
<p>Once a pod network has been installed, you can confirm that it is working by checking that the CoreDNS pod is Running in the output of <code class="language-text">kubectl get pods --all-namespaces</code>. And once the CoreDNS pod is up and running, you can continue by joining your nodes.</p>
<p>Platforms like Kubernetes assume that each container (pod) has a unique, routable IP inside the cluster. The advantage of this model is that it removes the port mapping complexities that come from sharing a single host IP.</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/7b33ca2e6a59200a3f627f4fadda5096/0a0ff/kubernetes_cluster_12.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 24.75369458128079%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA2ElEQVQY002P21aDMBBFA5aCgJbg8q3F1oRcYIYkxUT9/x9zULv0JSuXs8+eMI6pd6m14RFip/06r6idlaAullZnfS+gMr6UsJdYjli8zuyk2KCzQbEeE3fvjfHdkg4YO//RwFsuIDtPFNoJ2El8Dp+NDXSsjW/tlR1vMIdI5ofpyl3iS+IYK4XVuJRyk+xJKOCJGo1nx/Feu8O8/pkJJqadAl8ihajl7jIVYs5fDKWJJJ7u61/Yf7dscD7oG2xDhzTCNv/2cLYZwSdF/yz+mSvlau1o8wN/AeOAJQ78kpeXAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/7b33ca2e6a59200a3f627f4fadda5096/de8ec/kubernetes_cluster_12.png"
        srcset="/static/7b33ca2e6a59200a3f627f4fadda5096/81654/kubernetes_cluster_12.png 200w,
/static/7b33ca2e6a59200a3f627f4fadda5096/3601a/kubernetes_cluster_12.png 400w,
/static/7b33ca2e6a59200a3f627f4fadda5096/de8ec/kubernetes_cluster_12.png 800w,
/static/7b33ca2e6a59200a3f627f4fadda5096/0a0ff/kubernetes_cluster_12.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h2 id="create-and-scale-a-deployment-using-kubectl"><a href="#create-and-scale-a-deployment-using-kubectl" aria-label="create and scale a deployment using kubectl permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create and scale a deployment using kubectl</h2>
<p><a href="https://kubernetes.io/docs/reference/kubectl/overview/">Kubectl</a> is a command line interface for running commands against Kubernetes clusters. We can run a NGINX container with the following command:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl create deployment nginx --image<span class="token operator">=</span>nginx</code></pre></div>
<p>You can verify that the <strong>Pod</strong> was created by Kubernetes:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl get pods</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/9c2c6d56986978d6b425852b0ad9fe1c/d5c4f/kubernetes_cluster_14.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 10.986267166042447%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAY0lEQVQI12Pg1zER0jcX0DHl0zWV1Db21jFxUNO31zAwUtHRVNXVUtbRVNHRU9UVUdBgkFNnlFNnQEYCumZ82sa8WsY8Wkb82sYS6gYqmoZGqnosStqMyjpAxKyiyyiPqgeGABAVD4BuscFsAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/9c2c6d56986978d6b425852b0ad9fe1c/de8ec/kubernetes_cluster_14.png"
        srcset="/static/9c2c6d56986978d6b425852b0ad9fe1c/81654/kubernetes_cluster_14.png 200w,
/static/9c2c6d56986978d6b425852b0ad9fe1c/3601a/kubernetes_cluster_14.png 400w,
/static/9c2c6d56986978d6b425852b0ad9fe1c/de8ec/kubernetes_cluster_14.png 800w,
/static/9c2c6d56986978d6b425852b0ad9fe1c/d5c4f/kubernetes_cluster_14.png 801w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<!-- Flannel backup
### Kubernetes stuck on ContainerCreating

Use `kubectl describe pods` to list all the events associated with the pod, including pulling of images, starting of containers:


```bash
Normal - Scheduled - 13m - default-scheduler - Successfully assigned default/nginx-5c7588df-76mgw to in-centos-minion2

Warning - FailedCreatePodSandBox - 13m - kubelet, in-centos-minion2  Failed create pod sandbox: rpc error: code = Unknown desc = failed to set up sandbox container "8ab7c07633f6170dabd8df9a28680a7b9af79f10374e81df8c85dac609abc209" network for pod "nginx-5c7588df-76mgw": NetworkPlugin cni failed to set up pod "nginx-5c7588df-76mgw_default" network: open /run/flannel/subnet.env: no such file or directory
```


I noticed that - to use Flannel - you need to initialize `kubeadm` with the ` --pod-network-cidr=10.244.0.0/16` flag. You can reset your deployment with:


```bash
kubeadm reset
iptables -F && iptables -t nat -F && iptables -t mangle -F && iptables -X
```


Now back to `kubeadm init --pod-network-cidr=10.244.0.0/16` and rebuild the deployment - success:


---

![Creating a Kubernetes Cluster](./kubernetes_cluster_15.png)

---
-->
<h3 id="scaling"><a href="#scaling" aria-label="scaling permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scaling</h3>
<p>To scale up our web server contingent to <strong>4</strong>, we can use the following <code class="language-text">kubectl</code> command:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl scale deployment nginx --replicas<span class="token operator">=</span>4
kubectl get pods</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/0ee750f3b654d91ec11e16284718e400/1f7d0/kubernetes_cluster_16.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 16.46039603960396%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAgElEQVQI122MsQ7CIBRFMVYGDaLRpQk1KUWgPuCVQNFFR///k6RzTU7OdM8l3OVzKEdIzM8C8tfPbzt97BQMSuVk/1DVEujNkDWnUGrPIR/GyGwUY+yxtBrpAI3BrQQi7qT7V1Y4pAs+r/jiLlHld8ozl5thafY61AvS6c0y1Wt+by8VvDinCogAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/0ee750f3b654d91ec11e16284718e400/de8ec/kubernetes_cluster_16.png"
        srcset="/static/0ee750f3b654d91ec11e16284718e400/81654/kubernetes_cluster_16.png 200w,
/static/0ee750f3b654d91ec11e16284718e400/3601a/kubernetes_cluster_16.png 400w,
/static/0ee750f3b654d91ec11e16284718e400/de8ec/kubernetes_cluster_16.png 800w,
/static/0ee750f3b654d91ec11e16284718e400/1f7d0/kubernetes_cluster_16.png 808w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>To get rid of those pods you can scale it back down to 0 replicas and to delete Nginx completely delete the deployment (not the pods - those would be respawned automatically):</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl scale deployment nginx --replicas<span class="token operator">=</span>0
kubectl delete deployment nginx</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/9d16fb66d2a7d404b8a16e99cadae047/d5c4f/kubernetes_cluster_17.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 12.359550561797752%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAXUlEQVQI12Pg1zXl1Tbm1TLi1DAQ0TC01DKy1jW10DSUVdMXUNXjU9TillfnkddgllNnwET8OibC+uaCuqZAU0S0jO20jc01DU3V9LRUdFVVdJQVtVSUgEibA5tmAN7qD60xv2bbAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/9d16fb66d2a7d404b8a16e99cadae047/de8ec/kubernetes_cluster_17.png"
        srcset="/static/9d16fb66d2a7d404b8a16e99cadae047/81654/kubernetes_cluster_17.png 200w,
/static/9d16fb66d2a7d404b8a16e99cadae047/3601a/kubernetes_cluster_17.png 400w,
/static/9d16fb66d2a7d404b8a16e99cadae047/de8ec/kubernetes_cluster_17.png 800w,
/static/9d16fb66d2a7d404b8a16e99cadae047/d5c4f/kubernetes_cluster_17.png 801w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>If you try to delete the pods by name <code class="language-text">kubectl delete pod nginx-5c7588df-lf2pb</code>, or try to delete all: <code class="language-text">kubectl delete pods --all</code>, Kubernetes will respawn new pods to meet your deployment scale requirement.</p>
<h2 id="pod-deployment"><a href="#pod-deployment" aria-label="pod deployment permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pod Deployment</h2>
<p>Let’s deploy an simple Angular app inside a <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#pod-v1-core">Kubernetes Pod</a> - we will use the 0 release of <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-webapp-angular/tags">this Docker image</a> to get started with. To do this we will have to create a Pod Config file for it called <code class="language-text">webapp-angular.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release0</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/c6ece5af460f568c8360df8d01189e19/a7715/kubernetes_cluster_18.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 797px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 19.196988707653702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAaUlEQVQI12NQtXNVtXVVd3DXcPSAIBVbF2UbZwhSsXWFi8MRULGStZOSjTODgK4pi5IWg5w6OYhP25hDTY9BVp1BVg0nwqVZUM+UV8uIS92AXUUXaAqQZFfV5VDVAyI2FR0gm01FF5dmAE0jHwgmMogxAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/c6ece5af460f568c8360df8d01189e19/a7715/kubernetes_cluster_18.png"
        srcset="/static/c6ece5af460f568c8360df8d01189e19/399bb/kubernetes_cluster_18.png 200w,
/static/c6ece5af460f568c8360df8d01189e19/82d5f/kubernetes_cluster_18.png 400w,
/static/c6ece5af460f568c8360df8d01189e19/a7715/kubernetes_cluster_18.png 797w"
        sizes="(max-width: 797px) 100vw, 797px"
      />
  </span>
  </a></p>
<hr>
<p>We can now use <strong>kubectl</strong> to read our configuration file and generate the webapp Pod:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f webapp-angular.yaml</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/fd77489319b82d60f004fe3f5112af8a/3aff6/kubernetes_cluster_19.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 16.438356164383563%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkUlEQVQI11XLWwuCMBQAYMuZGMqg6EIwm1O2sx13zRHVS///V/UYwvf6Fac5X+Pr4p9Hm/cQqc10Xrp5OeLjq+MH0xu8g2CkUyPywRS9+mOYGSam41nHg0nUpFbHBgKFIActRhQcaqY2PRAO5V2tcguRTHYrsOT6pkInsJa+kW43WaJ8wTWRrppsJbBgcjV79QPUkBag3fawxQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/fd77489319b82d60f004fe3f5112af8a/de8ec/kubernetes_cluster_19.png"
        srcset="/static/fd77489319b82d60f004fe3f5112af8a/81654/kubernetes_cluster_19.png 200w,
/static/fd77489319b82d60f004fe3f5112af8a/3601a/kubernetes_cluster_19.png 400w,
/static/fd77489319b82d60f004fe3f5112af8a/de8ec/kubernetes_cluster_19.png 800w,
/static/fd77489319b82d60f004fe3f5112af8a/3aff6/kubernetes_cluster_19.png 803w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>You can inspect the pod with:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl describe pod webapp</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/a7559982602c2a4d3fc663a5623fceef/d5c4f/kubernetes_cluster_20.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 96.87890137328338%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7CAAAOwgEVKEqAAAACXUlEQVQ4y4WUSY8TQQyFO8tMks4yCxxAk9mypzt7ZsIgDkggLghxQdw48f//g3mfuytqogQOT9Wudj3bz66KrubP1k43Vu0l1hgt7VL2+WBm5/2ZRd2hld727P5ubH3ZGVIb6n+sveh2ZBFrERezJ2tO13YmZ9CcrK3ymNhZL7Xnbz/sy6/fdvPhk0VvHhVg5EEckB1DJ9laS4Tlh6lnSYbY7WRj089fbff9p929fLSK/tcIqmCV+4mVTiCizMZ4mWWlA5eLnUiffA+7oiDng7nbjdHCasO59lP3JwEqwQYuU2u6sVjOsOMUj1e+kr5HDdqEUkO5QcPb0d//iPB6/d7ZISKTdro1tA3o5DYrQA786sOFAznKCl5+UMk1lfNq9WKh9OvlOz+EjgF0vaaDlI5/VvYsmwbH3BNiL6IZREeDqrK9kob+jUaua+rR96V2c5zqMoTXy92+CUQvzpV3rqhXEYczCMiKDCk5lJZlm3jGoaM+p25npaFbdGy46XBHhD4C+WCX/jFn+3kLBIeEzcnKm8Lq4grRzeD/N6JYdpGUtl9okCGKIUXHvJNIEMr2rI7pdrhXHBu0ZAYhguTo4VPNCAj3FpG5Ncwg5GSIvvzDB7uuq7fP9BTqeWmUTHl0mYN8M4d0mBvAXiA81qDsO+9yrIxa6m5dpAQANQXB5nUpy5Fv/HxfQf3qKQAPht8gv4ZqaKySmnqyQJVZpDFCSU4Vrpgei6oOlyHXik9V+0EWVifO73bU14G1mrESUhGtRbyabS2RUyqnuQKmk6VNsfV/IT27vfw1otQCKP0PHGv6uhB9ePgAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/a7559982602c2a4d3fc663a5623fceef/de8ec/kubernetes_cluster_20.png"
        srcset="/static/a7559982602c2a4d3fc663a5623fceef/81654/kubernetes_cluster_20.png 200w,
/static/a7559982602c2a4d3fc663a5623fceef/3601a/kubernetes_cluster_20.png 400w,
/static/a7559982602c2a4d3fc663a5623fceef/de8ec/kubernetes_cluster_20.png 800w,
/static/a7559982602c2a4d3fc663a5623fceef/d5c4f/kubernetes_cluster_20.png 801w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>Just like in Docker, we can use <strong>kubectl</strong> to run commands against our containers - e.g. to access the shell inside your container, contact the webserver (that should be serving our Angular app) and printing out index page:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl -it <span class="token function">exec</span> webapp sh
/ <span class="token comment"># wget http://localhost:80</span>
/ <span class="token comment"># cat index.html</span></code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/a3680b75231b5dbe4d4adef01094c4e5/4da31/kubernetes_cluster_21.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 39.2991239048811%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABDUlEQVQY022R226DMBBEDYG0YGhCpKpSpZRwM74bGwL//2ddmzw0aqQja7SrtWfW6Iu5Wa+SWSOXzaxcLphZzF05aEmM7CWgiJ4GXdUU3Vhc0/i2w9A3c3ezGebIoDAxWS+PgUPDkUegdhc8bkXaikPDkpannTh2Ep3F/CmXitqsYehKPD/jTvTMo3sN3V0fe1XKpRAO8zkjJukEGHtc8eei17z1quAOxoB3ojGdsnHK6ZSPky8O2qfoxOvhks9A2kFOBTFCKp6EE3TSiKimUT2G8xkYLqi9mLXS68VsZ3UHFwCm9kPM0Cq5A3GCXFBnFshHA4AAX8g7pAb2DjuEB3fCSoP2Lvxu4W/+2/4FKy43A8iw4f8AAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/a3680b75231b5dbe4d4adef01094c4e5/4da31/kubernetes_cluster_21.png"
        srcset="/static/a3680b75231b5dbe4d4adef01094c4e5/c5bb8/kubernetes_cluster_21.png 200w,
/static/a3680b75231b5dbe4d4adef01094c4e5/8f34d/kubernetes_cluster_21.png 400w,
/static/a3680b75231b5dbe4d4adef01094c4e5/4da31/kubernetes_cluster_21.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr>
<h2 id="kubernetes-services"><a href="#kubernetes-services" aria-label="kubernetes services permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Kubernetes Services</h2>
<p>We now have a Pod that is serving our Angular frontend. To be able to access this Pod from <em>the outside</em> we need to add a <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#service-v1-core">Kubernetes service</a>. Let’s create a file <code class="language-text">webapp-service.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token comment"># Accept traffic sent to port 80</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token comment"># The nodePort is available from outside of the</span>
      <span class="token comment"># cluster when is set to NodePort. It's value has</span>
      <span class="token comment"># to be > 30000</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token comment"># Define which pods are going to</span>
    <span class="token comment"># be represented by this service</span>
    <span class="token comment"># The service makes an network</span>
    <span class="token comment"># endpoint for our app</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/68c4840a4930b8c1b6f5c521aab64a9d/4da31/kubernetes_cluster_22.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 48.685857321652065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBUlEQVQoz5WQXVOCQBSG18AIBcPqKpUElv3kGzUuyoxM5f//oc7CTN04oTPPnNnZOe+e5ywiuwPZHVl9YnXD64Z+HvH2O3jfB1C3+/DjwNv7X0TdQL/39gWgSbTSfYlmoWJO0IKgOZzxH8/nmLU9E1maNLV4DlX3xS2OtSUfuHTw0sHOoxoYUjGSGjge+lLzBIAWVM13aT+WKB7SVxireXwYSF09weGJmyVHLusJj2jqJJvHvDJJAoxodhdCTeGgdxb/hCEJ5hYvlHkQAcr5Qm0nWU+TzX20smVpywL8rwjDwk68HrMMlgdhI4zN1tnA0QXhrHrKKlsUY57DfPC3Rdl9W2/4B2G6RKGmZezBAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/68c4840a4930b8c1b6f5c521aab64a9d/4da31/kubernetes_cluster_22.png"
        srcset="/static/68c4840a4930b8c1b6f5c521aab64a9d/c5bb8/kubernetes_cluster_22.png 200w,
/static/68c4840a4930b8c1b6f5c521aab64a9d/8f34d/kubernetes_cluster_22.png 400w,
/static/68c4840a4930b8c1b6f5c521aab64a9d/4da31/kubernetes_cluster_22.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr>
<p>We now have to add the <strong>Selector</strong> <code class="language-text">webapp</code> in form of a label in <code class="language-text">webapp-angular.yaml</code> to our frontend pod to connect it to our service:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release0</code></pre></div>
<p>The service can be added to our cluster by the following commands:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f webapp-angular.yaml
kubectl apply -f webapp-service.yaml</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/c51a7ac0645e16efcfdee5285948d045/4da31/kubernetes_cluster_23.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 9.887359198998748%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAcUlEQVQI12Pg1zYRNrCQ0TFV0jPj0TRk1zLi1jDg0DAQUdN3VtN3VTdwVNV1Vtdz1TBwUdd3UtPllVNnkFNnBJMMvFrGQvrmIrpmonpmktrGKrqm/JqGXBqGvOoGUqp6ogoaogqaQCSmqAlhsEC0gREATnIQ6Oliyu8AAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/c51a7ac0645e16efcfdee5285948d045/4da31/kubernetes_cluster_23.png"
        srcset="/static/c51a7ac0645e16efcfdee5285948d045/c5bb8/kubernetes_cluster_23.png 200w,
/static/c51a7ac0645e16efcfdee5285948d045/8f34d/kubernetes_cluster_23.png 400w,
/static/c51a7ac0645e16efcfdee5285948d045/4da31/kubernetes_cluster_23.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr>
<p>By applying our changes, we have updated our pod and created our service.</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/d518f94e0fd4c18a118d9cf692442559/ae9d5/kubernetes_cluster_24.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 13.681592039800993%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAmElEQVQI1z3O2Q6CMBQE0GqMCg9ExAWItLRCl3vbUkr//9uEkJhM5mlOMuRmQqGmCpfSzHeMJcSHTYWJjZzC12qBKDCninSS/HsP04RKXwt4c9MOtjdzK/DVGwGxGv2ZQyGnC4dsdNngTkzngztuZveadBApps+65tCoQHF5CGAu1dI30lOIJVUMorDpyaHT4dqbVR62F+oHL+0W302KEXEAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/d518f94e0fd4c18a118d9cf692442559/de8ec/kubernetes_cluster_24.png"
        srcset="/static/d518f94e0fd4c18a118d9cf692442559/81654/kubernetes_cluster_24.png 200w,
/static/d518f94e0fd4c18a118d9cf692442559/3601a/kubernetes_cluster_24.png 400w,
/static/d518f94e0fd4c18a118d9cf692442559/de8ec/kubernetes_cluster_24.png 800w,
/static/d518f94e0fd4c18a118d9cf692442559/ae9d5/kubernetes_cluster_24.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>The webapp is now accessible on your Cluster IP with the Port <strong>30080</strong>!</p>
<h2 id="updating-the-pod"><a href="#updating-the-pod" aria-label="updating the pod permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Updating the Pod</h2>
<p>To Update a Pod in Production with 0 downtime we can use labels. We can define a second pod inside the same file <code class="language-text">webapp-angular.yaml</code>. Right now we are going to use release versions to define our pods. Later we might change this to a <strong>production</strong> and a <strong>development</strong> version - both of which can then be run inside the same cluster and be served by different services:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">release</span><span class="token punctuation">:</span> <span class="token string">"0"</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release0

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp<span class="token punctuation">-</span>release<span class="token punctuation">-</span>0<span class="token punctuation">-</span><span class="token number">5</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">release</span><span class="token punctuation">:</span> <span class="token string">"0-5"</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release0<span class="token punctuation">-</span><span class="token number">5</span></code></pre></div>
<p>Make sure to surround release version with quotation marks to convert it into a string - <strong>“0”</strong>. Otherwise you end up with the error message <code class="language-text">for: &quot;webapp-angular.yaml&quot;: cannot convert int64 to string</code>.</p>
<p>Now we have to modify our service <code class="language-text">webapp-service.yaml</code>: to not only check for the app name label, but also for the release version - we want to only connect to the current version 0. Once the version 0.5 is deployed we then can update the service to connect us to the updated Pod instead - allowing us to deploy the update with 0 downtime:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token comment"># Accept traffic sent to port 80</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
      <span class="token comment"># The nodePort is available from outside of the</span>
      <span class="token comment"># cluster when is set to NodePort. It's value has</span>
      <span class="token comment"># to be > 30000</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token comment"># Define which pods are going to</span>
    <span class="token comment"># be represented by this service</span>
    <span class="token comment"># The service makes an network</span>
    <span class="token comment"># endpoint for our app</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">release</span><span class="token punctuation">:</span> <span class="token string">"0"</span>
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort</code></pre></div>
<p>Now update both our Pod and Service - as well add the new Pod with our updated Angular app:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">kubectl apply -f webapp-angular.yaml
kubectl apply -f webapp-service.yaml
kubectl get pods --show-labels</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/ec439dac6255e799e99435ed1f1cf80d/d12c5/kubernetes_cluster_25.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 798px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 14.661654135338345%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAm0lEQVQI1y2O2Q6CMBREUUEWKwrhwRcFpLa3+0KL//9nlsRk3mZyzmSdijcZaqKrj66JacXa6XhXEXGvmAvMee6DDCtYB/Y8sexJ9rzonpb7C3PFIvK3OM3ivMgSqybtFnmYWEFMTk2l4gBWgH1gmY1wHOGPSKor960ICHZEclZYIeY7vZVY9mYrZtFQM5itnDmiNlW9+SZBevoDc+sXOPnMga8AAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/ec439dac6255e799e99435ed1f1cf80d/d12c5/kubernetes_cluster_25.png"
        srcset="/static/ec439dac6255e799e99435ed1f1cf80d/bd712/kubernetes_cluster_25.png 200w,
/static/ec439dac6255e799e99435ed1f1cf80d/fd6ca/kubernetes_cluster_25.png 400w,
/static/ec439dac6255e799e99435ed1f1cf80d/d12c5/kubernetes_cluster_25.png 798w"
        sizes="(max-width: 798px) 100vw, 798px"
      />
  </span>
  </a></p>
<hr>
<p>Now that both pods are running we can edit our service <code class="language-text">webapp-service.yaml</code> and change the <code class="language-text">selector</code> to <code class="language-text">release: &quot;0-5&quot;</code>. Apply the change with <code class="language-text">kubectl apply -f webapp-service.yaml</code> and verify that the service is now switched to the new release with <code class="language-text">kubectl describe service fleetman-webapp</code>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/cfbd3173af329d9758dffc48aa0baff8/3aff6/kubernetes_cluster_26.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 37.60896637608966%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJ0lEQVQY03WQ246CMBCGCwqeUESzV+KplJZ2pgUpiDf7/q+1o0ZjNrvJl2bydw7/DMvqIbP9trml0G2bIXN9it0COwf+G/wVfKcvN9tdZN0K2xYYHBR7k2K/qJrEtHPVbJphQ12Mj6TLC3QFqjNUBAddoCmdLd3upNleBntJL1uCD48Vy0u2ExSvwMelDTmMCogLnAg7ETiVLuJAaeOTDl+MzobRTPqjpKhAKs7q65ftd7bfQJtAN1N1LOxMNZHAMQfKoRoKCGrNYoHkPqDhB7W+Lz+kArdnmJHy9EaQr3f8yepp+54hl6ZdoZ+qmh0k+zzMf9CFFvpCewYnvaQ7Uyzs08iL6q/Kh5goN+FmXmLMzdq2SeXGRxVzTWJIV83LIBeP9xd38QdCJjdcEUFNWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/cfbd3173af329d9758dffc48aa0baff8/de8ec/kubernetes_cluster_26.png"
        srcset="/static/cfbd3173af329d9758dffc48aa0baff8/81654/kubernetes_cluster_26.png 200w,
/static/cfbd3173af329d9758dffc48aa0baff8/3601a/kubernetes_cluster_26.png 400w,
/static/cfbd3173af329d9758dffc48aa0baff8/de8ec/kubernetes_cluster_26.png 800w,
/static/cfbd3173af329d9758dffc48aa0baff8/3aff6/kubernetes_cluster_26.png 803w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>Type in the IP of your <strong>Kybernetes Cluster</strong> (<em>WAN IP of your master server</em>) and add the port <strong>30080</strong> to access the updated web interface with your browser:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/1d376eb3d12b1270d7da20625d5d8ab5/0a0ff/kubernetes_cluster_26a.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 43.96551724137931%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABwklEQVQoz11QW2sTQRjdv+SDD77ZKo0PXai2KbVq1V8gCP4EEUVB35SmJk1Q/A/ig+2abPea7Fx2Ljuzt2xDiTSbPOQhhOqsIFiHM4czcM53Ge3K1WtPnj770Dx89/zF+5evm53PB63OfqvdaHUazfbBHzT+8v7Hw/anL6/evL1+s6ZvbGr13b2dB4+3dh9uV3i0eXdvq1L36hv1G7f0lZq+qrC2vlpT0FfW9PXb23d27is+Oja0fFgwLrJ8SChlPKKUOpZ1YhydGN9ts2v1uhWbPdexPdfxPN+yLKNnOpaJINTK6ex8Uk4m5XQ6WywW5z/HeZZGnGZpXGTpaJhlkkvOUhkVeT4qilQwGiL1JCHWprOZipVlOZ/Pl8tlniYsxCECFEOKYESJAidh5UWAUAx8m2GgPBAA7dflMz4bCUbiiHOClUOVUEJQTFGgBIh8AgeJ4DEc4OBS+ELd0empiHgsq3jEqPoDwRmntGrOmBpZDlxifhP9Hsbon/BFFR4XQiInZf2M+hx7JLAEtJPQS4iXsgEPukP4A7pfgWeQMPy/81kRS9JPWJDQIGUgF4gDt5BeEQPJILSP1S6SkYj4JES/AQwPo3UIM+0XAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/1d376eb3d12b1270d7da20625d5d8ab5/de8ec/kubernetes_cluster_26a.png"
        srcset="/static/1d376eb3d12b1270d7da20625d5d8ab5/81654/kubernetes_cluster_26a.png 200w,
/static/1d376eb3d12b1270d7da20625d5d8ab5/3601a/kubernetes_cluster_26a.png 400w,
/static/1d376eb3d12b1270d7da20625d5d8ab5/de8ec/kubernetes_cluster_26a.png 800w,
/static/1d376eb3d12b1270d7da20625d5d8ab5/0a0ff/kubernetes_cluster_26a.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h2 id="adding-a-queue-server"><a href="#adding-a-queue-server" aria-label="adding a queue server permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a Queue Server</h2>
<p>Our finished WebApp is going to need a message broker to work. We are going to us the <a href="https://hub.docker.com/r/richardchesterwood/k8s-fleetman-queue/tags">given Docker Image</a> in the <strong>release1</strong> version to add <a href="http://activemq.apache.org">Apache ActiveMQ</a> as a queue service for our app. ActiveMQ, or in generall all Message Oriented Middleware (MOM) implementations are designed for the purpose of sending messages between two applications, or two components inside one application.</p>
<p>To add this service in a Pod, we need to create a configuration file for it - this can either be a new file called <code class="language-text">webapp-queue.yaml</code>, or we can simply add it to the end of our existing <code class="language-text">webapp-angular.yaml</code> configuration file to keep everything neat and tidy (this also means that we can simplify the filename to <code class="language-text">pods.yaml</code> -> <code class="language-text">mv webapp-angular.yaml pods.yaml</code>):</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>queue<span class="token punctuation">:</span>release1</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/c5c39b18187eddfe941f75f2f5e2dd6d/3aff6/kubernetes_cluster_27.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 67.74595267745953%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+0lEQVQoz52RWY+CMBSF6wZuI9EnTdRRbAulFHGfFxHFwej//0FeqHFJqFvyPdwUTs89p8iOjtb2wHZHJzoBMJBNjIP9KNjj4J+GsTy/xwoP5joiYYxqto+6BLXNG51H2lnIT63xX4PPCgOW/7WB3CegBp9XLT+ZejSbvqXkx5nC5hU61rHQidCxexmIKI1cDYuSyZXiMvUKQ/ZiPZW45a/ACkyAZ/9lr81nVdsvDp3PZBJDLGpsAmKwzV87H7C31q5QL2mLeFpalQYlpT3JqtI4/FnbYPjiSVQ0vSUYfqME6s4UnvRLseEu6mxSJuKSGSeBZXi4NE2kFJ8BUB1Yyfbr8LsAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/c5c39b18187eddfe941f75f2f5e2dd6d/de8ec/kubernetes_cluster_27.png"
        srcset="/static/c5c39b18187eddfe941f75f2f5e2dd6d/81654/kubernetes_cluster_27.png 200w,
/static/c5c39b18187eddfe941f75f2f5e2dd6d/3601a/kubernetes_cluster_27.png 400w,
/static/c5c39b18187eddfe941f75f2f5e2dd6d/de8ec/kubernetes_cluster_27.png 800w,
/static/c5c39b18187eddfe941f75f2f5e2dd6d/3aff6/kubernetes_cluster_27.png 803w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>Use <strong>kubectl</strong> to read our configuration file and generate the Queue Pod:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f pods.yaml</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/723bd8f64c8c20049b23150e9b36878c/ae9d5/kubernetes_cluster_28.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 20.024875621890548%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAqUlEQVQI12XO2Q6CMBQE0GqQRdGiJj65IKXL7e0CpYr//2XWN6PJZN7OZAjF6eBnaiM1cYfh4J97N1P3OJnopDc6WBiNGkA4ddfLqyTf2ahhLX3R21qNtQ47nGoIaajBiQpXMVO0kLeqvEN2U+QHUx33fm5s6mclffIld6XwSQK3Uri+w54h63DxIz8Y43F4JbzVoeB2A2PqFcOcmawFcubp6vIiyL+8yjfbYx1ivtOxxAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/723bd8f64c8c20049b23150e9b36878c/de8ec/kubernetes_cluster_28.png"
        srcset="/static/723bd8f64c8c20049b23150e9b36878c/81654/kubernetes_cluster_28.png 200w,
/static/723bd8f64c8c20049b23150e9b36878c/3601a/kubernetes_cluster_28.png 400w,
/static/723bd8f64c8c20049b23150e9b36878c/de8ec/kubernetes_cluster_28.png 800w,
/static/723bd8f64c8c20049b23150e9b36878c/ae9d5/kubernetes_cluster_28.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>To be able to access the Pod, we need to add it to our service configuration <code class="language-text">webapp-service.yaml</code> which we can rename to <code class="language-text">services.yaml</code> -> <code class="language-text">mv webapp-service.yaml services.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Service instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> fleetman<span class="token punctuation">-</span>queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token comment"># Accept traffic sent to port 8161 (default login is admin/admin)</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8161</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8161</span>
      <span class="token comment"># The nodePort is available from outside of the</span>
      <span class="token comment"># cluster when is set to NodePort. It's value has</span>
      <span class="token comment"># to be > 30000</span>
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">30010</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token comment"># Define which pods are going to</span>
    <span class="token comment"># be represented by this service</span>
    <span class="token comment"># The service makes an network</span>
    <span class="token comment"># endpoint for our app</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
  <span class="token comment"># Setting the Service type to ClusterIP makes the</span>
  <span class="token comment"># service only available from inside the cluster</span>
  <span class="token comment"># To expose a port use NodePort instead</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/7521f2f21a561e11ee0c79f3e034c846/d7315/kubernetes_cluster_29.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 97.2568578553616%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABrElEQVQ4y41S2XKCQBBERUVFwZiXxES5WZfl9koqh1YO8/9flB4w5UMUqeraonR6pqenJeNp7+8O3vs3wHaHEs7rJ2C/fLhvX2z/8x/4y3jeS32WqDxtGgtp6kpTR7q3pakt3QHW33sWNlWqLB2JvO8nQ571/bjjiK4boVdjzq5Cki0OWs+P21bQMnjLXJCKR++ImV8FVIB8E28GLOk4oeJFXTcs5ocdW1D7CnJj5qs8GwW5Hq5QLVtB1wmhAt9ocYUsm3wcrcEn8V4M/0CuKxu99Wg1jjfDIBssUiyP4bWYABROkq0ulrBa8chtzO95keJGLZNfIWM3bKuJHIapi2zAUrw9ullItleTFYfspSEP7gk1d4bPt8kWmuETNJc+n0yubjHwk+LCAgtTTkxOMCgqzTlrGqxVpO08GUUqz3Gqti1KGl50QfLwjR+PS11KGByaxFstyOEwEkYhQ9TKhJXKL8mGNlwYCdHCJappZ0fINJy37aBGwuI1bKOQ0J3SImHwvIbb2BnxxKlBo4R5EYaTTya/MhbAHEpYuBoGuYaX53q01sQSjeBZ9fBf/2B75Fru7RUAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/7521f2f21a561e11ee0c79f3e034c846/de8ec/kubernetes_cluster_29.png"
        srcset="/static/7521f2f21a561e11ee0c79f3e034c846/81654/kubernetes_cluster_29.png 200w,
/static/7521f2f21a561e11ee0c79f3e034c846/3601a/kubernetes_cluster_29.png 400w,
/static/7521f2f21a561e11ee0c79f3e034c846/de8ec/kubernetes_cluster_29.png 800w,
/static/7521f2f21a561e11ee0c79f3e034c846/d7315/kubernetes_cluster_29.png 802w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>We can now apply all changes with:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl apply -f <span class="token keyword">.</span>
kubectl get all</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/a6fd49822dca89292c3800da08a00750/ae9d5/kubernetes_cluster_30.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 42.66169154228855%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABO0lEQVQoz3VRCW6DMBCEhCsQyKm2UgUJBoPvA+dU//+vLknUKlIijSzLs7Mzu/a25roUh7U+5dQu5bHgrhAuY0NPrSVW04FjmVa99xIf7metz1tzibBMiAkQ98puJO5n1ftl578T5/KwUueVPn+JA7aXOTFRKxIsK6z2jUCN2O7J2OKlGKlTWFN/R2LEF73JuduYa9LpTSsrNnwiNqu6W4qnOA8s2BC0ImjlpGZhI8KGZ3QAc+AirAKsvB2Bd2D9ikxr+iT+JqZkbsfcEstCHSFwgtXGXOJWpr1eCDfZk5U6wV6gY0bttGb//gVE7fW8lRAbuFmnU0BvYqwAs05BadSI+yJDxEfxnzMsOYC07Rg4QAyK4AIAZ9BkxN5k+FFddk9j53yYUwvIyLgtMAekxKTjtzEYErp4b77qF60iPXjSodHDAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/a6fd49822dca89292c3800da08a00750/de8ec/kubernetes_cluster_30.png"
        srcset="/static/a6fd49822dca89292c3800da08a00750/81654/kubernetes_cluster_30.png 200w,
/static/a6fd49822dca89292c3800da08a00750/3601a/kubernetes_cluster_30.png 400w,
/static/a6fd49822dca89292c3800da08a00750/de8ec/kubernetes_cluster_30.png 800w,
/static/a6fd49822dca89292c3800da08a00750/ae9d5/kubernetes_cluster_30.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>You can inspect the pod, in case that something doesn’t look right. All events will be logged at the end of the console output:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl describe pod queue</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/006cfa64383fa16d344fd50602cfabf2/ae9d5/kubernetes_cluster_31.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 19.776119402985078%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArklEQVQI1y2P2w6DIBBE0VgvoDZNn1uNF2AVEcU0/f8v66BNNmRydpjdZUK5fLTZsCTdfOvntDdxS3Gr2Vuh0EoHEzUK5OQUNfoqaFaMFg4u12xc0mEpVBAgSTdFLRXScu3A8xOGMbD1BgSC1ZOv54MrOAw+5NL+U+SKAuTnaggVeuPhdYK2knZoVtH+sJ/n+q2mLZNLPXtBrqStNr6aPEyIvpsD09grHIKFr4sgfuCAG+znEiAfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/006cfa64383fa16d344fd50602cfabf2/de8ec/kubernetes_cluster_31.png"
        srcset="/static/006cfa64383fa16d344fd50602cfabf2/81654/kubernetes_cluster_31.png 200w,
/static/006cfa64383fa16d344fd50602cfabf2/3601a/kubernetes_cluster_31.png 400w,
/static/006cfa64383fa16d344fd50602cfabf2/de8ec/kubernetes_cluster_31.png 800w,
/static/006cfa64383fa16d344fd50602cfabf2/ae9d5/kubernetes_cluster_31.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>Type in the IP of your <strong>Kybernetes Cluster</strong> (<em>WAN IP of your master server</em>) and add the port <strong>30010</strong> to access the updated web interface with your browser:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/a5feb4ba5ebf09f41f97271ad02b3231/0a0ff/kubernetes_cluster_31a.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 42.98029556650247%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABuklEQVQoz32Q3U/aUBTA79+4xAWdsqmp4Pa47VUf/HhwiSwKQ5ZpXK0KCFaJiZOthhcYjFpKAYeILmyBugJFitJbSnt3HcnUbNkvv5ycnI+Hc8DomH2VXGO5VDQWT3IpPi2khayQyfHpDM7vKQi4jcX5q3nHCGEDelc3kdnVu5iOppkIqVBttVqdv9CgZhomBiFkGIau6+BmB5nhxc2dCbf/hSM0uURYhx9Y+sQLEQ/1RntRFqtZP1MqFrgMXyieQg2CcrZ4HE9RMy7ns0nP89mVl3OeacfC1Fw+wUun3ytfz8X8Nxx/FkpnR7lEiEkdRj8fRLhIvCk3QIzcY31hNvDpiD5kg0wyyPB05Hgvym0xSW+Y9X384xfvQXxjP0Ht89uR3IdYrXwBpMu6pMg1RRZlqdqU60qj1mygf9E1DbFSOS+eSVIVH6KqKui0Iby8hs02VNr4H+i/XCtX9Ub95guGASEEtIvcda7t/Dbk2dh9Q/lfr/gcy975dwHne/rtOu2hegbdZMBN4sr2ErXlWi2XfoDRx8NPbXY7YRsnxuwEMU7YngxarQOD2KH+R0OWO/bfOvDQcpLP/wIrd6PliyArVAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/a5feb4ba5ebf09f41f97271ad02b3231/de8ec/kubernetes_cluster_31a.png"
        srcset="/static/a5feb4ba5ebf09f41f97271ad02b3231/81654/kubernetes_cluster_31a.png 200w,
/static/a5feb4ba5ebf09f41f97271ad02b3231/3601a/kubernetes_cluster_31a.png 400w,
/static/a5feb4ba5ebf09f41f97271ad02b3231/de8ec/kubernetes_cluster_31a.png 800w,
/static/a5feb4ba5ebf09f41f97271ad02b3231/0a0ff/kubernetes_cluster_31a.png 812w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h2 id="replication-not-recommended"><a href="#replication-not-recommended" aria-label="replication not recommended permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Replication (not recommended)</h2>
<p>So far we spawned all our Pods manually using the <code class="language-text">kubectl apply</code> command. This way it is us who is responsible for the complete life-cycle of the pod. That means that you can delete (gracefully shutdown) or force shutdown those Pods with the <code class="language-text">kubectl delete</code> command:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl delete pod webapp-release-0-5
kubectl delete pod webapp-release-0-5 --force</code></pre></div>
<p>The Pod will just disappear - check with <code class="language-text">kubectl get all</code> - and not be restarted. The same would happen if your app crashes and that is a situation where we want Kubernetes to recover Pods to keep our App running.</p>
<h3 id="replicasets"><a href="#replicasets" aria-label="replicasets permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ReplicaSets</h3>
<p>The <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#replicaset-v1-apps">ReplicaSet</a> is basically just a wrapper around our Pod configuration that defines the number of instances of our Pod we want to be running at all times - if one crashes, it will automatically be replaced by a new version of the same pod.</p>
<p>Let’s re-write our Pod definition to a <strong>ReplicaSet</strong> - below is the original <code class="language-text">pods.yaml</code> file (the webapp with release0 was removed):</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">release</span><span class="token punctuation">:</span> <span class="token string">"0-5"</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release0<span class="token punctuation">-</span><span class="token number">5</span>

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>queue<span class="token punctuation">:</span>release1</code></pre></div>
<p>The <strong>ReplicaSet</strong> just adds a few lines to the top of our Pod configuration:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ReplicaSet
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the ReplicaSet instance</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token comment"># the ReplicaSet manages all Pods</span>
      <span class="token comment"># where the lable = app: webapp</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
  <span class="token comment"># only 1 Pod should exist atm - if it</span>
  <span class="token comment"># crashes, a new pod will be spawned.</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token comment"># Here starts the Pod Definition from b4</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token comment"># name: webapp / now we ReplicaSet name</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release0.5

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>queue<span class="token punctuation">:</span>release1</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/e9904382e3c6ef28b75d23ad63cc576e/d7315/kubernetes_cluster_32.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 58.728179551122196%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABDUlEQVQoz5WSbU/CMBSFq1LYGwiJHxQz1K5r13Vv3dTExIhCIOL//0GeTviiC8PkaXO7m5PTezrCXtfJxydQq90P6Won37fxcsPfNvierr/+IpZbCImvTJCaAdPklpN5ROZ8X9ywPddd2FZkxRP9OFbGk5UTF6M4H/GcRtnZXdILcUQxzZ9a/zpQxk+qQNUDlpKFIAvZA9yuzIsrCsr0kGewBcPWuV+MdZk1sIXg/F5heNpy8aD6xXDwEzPWjStKew4PjVCe4BwKxOMllStLm1YL7u8canQxGi7VIfZV7cnS9sITEvrFRDez4rmNV/4bR5QYGAlb506OiBEsfhJkhrQpy+weaWpr7Pr4m30DjttPBz4fm9QAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/e9904382e3c6ef28b75d23ad63cc576e/de8ec/kubernetes_cluster_32.png"
        srcset="/static/e9904382e3c6ef28b75d23ad63cc576e/81654/kubernetes_cluster_32.png 200w,
/static/e9904382e3c6ef28b75d23ad63cc576e/3601a/kubernetes_cluster_32.png 400w,
/static/e9904382e3c6ef28b75d23ad63cc576e/de8ec/kubernetes_cluster_32.png 800w,
/static/e9904382e3c6ef28b75d23ad63cc576e/d7315/kubernetes_cluster_32.png 802w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>Before applying our new <strong>ReplicaSet</strong> let’s first delete all pods we created earlier <code class="language-text">kubectl delete pods --all</code> and then start the new Pods with <code class="language-text">kubectl apply -f pods.yaml</code>. You can verify that everything worked with <code class="language-text">kubectl get all</code> and <code class="language-text">kubectl describe replicaset webapp</code>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/1901c553d50f00fe30e5f798fcc0e998/d7315/kubernetes_cluster_33.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 81.29675810473816%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACC0lEQVQoz21TiXKqQBDkVEGJmphD48G17M0CiuX7/x97vWjieyZVXdTA0jM9PbNOIk/L+jxXp+f6/CSPM94BEWuWrHkv1CoTq4yvc7HJhLunzgMWdQ/aUp8Xup/yNhHduNR+Ll9K3ZG6JVrnYp3xj5T/Qp7rPpFdmMuImgmpF6qfiQ7khJpNVX9S81ZIZ0ssdpXFv2SIjFkzKpSfiSCXM94inrJ2UtXOgcWiC4keFTqqaj/jYaG8lN/JiTjahs0FgkF4aS6QPVc9+kcW2OEeKNpZtfhuk45Jfa8fsxa5kdLPxahUIIB8faKXSWWCTNz+ftAMLEX3RM2M6ITUEdFBIb9o9aRQUakS1gQH5u0q76dhW93vZbeXp9yck1KPiW0vLDViUWpSKMkaagPJ0U7KwLnbvmwuMbfKn9tLUCgXRVLuZdxPeQgg2FPU9A8M9S1tR2+2A3B7Sg1sgDdP6pTII5yLaQNvsCoxs0foBYAvGEc4BHAHsXM1FkOG55CwUCekg3jQcIz+vZRBzqDoFnzDuv3a/ompQTKr6mCbsb9+EZyfPn0D6SEY0XU3oGo8TG40DAzPcBhbkItfyFisFRYDo8LM5BFriK1wh+JW2P4mxL269YCINhFvvVx4mQVW0rULePPTfszF3d7HJanMFuDtmpoPonETPlmzqcy6qnEl30uF19dc4ugNi/0/+S/n6Gz96vHejAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/1901c553d50f00fe30e5f798fcc0e998/de8ec/kubernetes_cluster_33.png"
        srcset="/static/1901c553d50f00fe30e5f798fcc0e998/81654/kubernetes_cluster_33.png 200w,
/static/1901c553d50f00fe30e5f798fcc0e998/3601a/kubernetes_cluster_33.png 400w,
/static/1901c553d50f00fe30e5f798fcc0e998/de8ec/kubernetes_cluster_33.png 800w,
/static/1901c553d50f00fe30e5f798fcc0e998/d7315/kubernetes_cluster_33.png 802w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>We earlier added a release selector to the <code class="language-text">services.yaml</code> that now needs to be removed as we are no longer using it as a label for our Pod - afterwards run <code class="language-text">kubectl apply -f services.yaml</code>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/25267154a8fc752c811b7dde110b0b5f/ae9d5/kubernetes_cluster_34.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 50.373134328358205%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/0lEQVQoz42R21LCMBRFC4ECpaCivnihNG3TpGmTXpgwjnbAEZD//yJ3i75pZWbNecrK3jmx6Mt7vD2y7RGT7z7PhG/7qN4Hrx+sPojd6Vei+mDNZeXKiviJ9RQ1PIYNDyD4mX/j8gL+hOlZUk5ibYfpKMz6K9Hz+L9YQypdaEzbVJKVQAWY1jP7Zhl3gROQF3oz5TliccsoUggHdpD2vE657/GpKGeyus7WOD2gEhrqDIMUdzXdOmTiyytlnNZHrNPmX1qbLPmdMvfK3GDtonDifECTi0ww95NSmSJb+7EeRwrNMcdMA+Jjc50yXnibbxbKINYV5XmifPthvDv5C7HnRQMWzvroAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/25267154a8fc752c811b7dde110b0b5f/de8ec/kubernetes_cluster_34.png"
        srcset="/static/25267154a8fc752c811b7dde110b0b5f/81654/kubernetes_cluster_34.png 200w,
/static/25267154a8fc752c811b7dde110b0b5f/3601a/kubernetes_cluster_34.png 400w,
/static/25267154a8fc752c811b7dde110b0b5f/de8ec/kubernetes_cluster_34.png 800w,
/static/25267154a8fc752c811b7dde110b0b5f/ae9d5/kubernetes_cluster_34.png 804w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>If you now delete the Pod manually - simulating a crash - a new pod will be automatically spawned by Kubernetes to replace the Pod you just lost:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/de8ec/kubernetes_cluster_35.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 20.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApklEQVQI112P2Q6CMBBFQWNEsOAaX5QlttONttMi+P9/ZnkwUZKTyczDubmTVP0rYyZjlkhP1FDpYT453lRAjg6c6jSpefqAVZz/JI2dOjNeVShUOJjxaKcy+hxPzEpwUiB9aqAGaN92ahZ+qcxIVIjEJcqF8Ftm93q4CG8FCtorZspWrlu5aUSykBsz1dIfwO04xogzvnOBOXfxkRxseodYeOl8+QCtix2srO6QZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/de8ec/kubernetes_cluster_35.png"
        srcset="/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/81654/kubernetes_cluster_35.png 200w,
/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/3601a/kubernetes_cluster_35.png 400w,
/static/b4bf9c6516ce76e25ec6bd0c9fa92cc1/de8ec/kubernetes_cluster_35.png 800w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>In the case above, your web service would have experienced a few seconds of downtime while waiting for the new pod to spin up. To prevent this issue we can go back to <code class="language-text">pods.yaml</code> and set the number of <strong>replicas</strong> to <strong>2</strong>. Now if the first pod crashes, the second one will replace it right away:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/2b874f5c233617a060b5fbd80d8670d6/d12c5/kubernetes_cluster_36.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 798px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 11.403508771929824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAX0lEQVQI12XLywpAQBQA0DsRJa8FViLNmPfFNWbh/39MWVJne6DHWOujlFvlQmVDizEXmKt9cOE0RJqQ+2bWMCk2Kfi48UIfpNwygaWhju5CHxn3yWIZd6lAGFf4t9cDq9oOZ+B6J5IAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/2b874f5c233617a060b5fbd80d8670d6/d12c5/kubernetes_cluster_36.png"
        srcset="/static/2b874f5c233617a060b5fbd80d8670d6/bd712/kubernetes_cluster_36.png 200w,
/static/2b874f5c233617a060b5fbd80d8670d6/fd6ca/kubernetes_cluster_36.png 400w,
/static/2b874f5c233617a060b5fbd80d8670d6/d12c5/kubernetes_cluster_36.png 798w"
        sizes="(max-width: 798px) 100vw, 798px"
      />
  </span>
  </a></p>
<hr>
<h2 id="deployment-recommended"><a href="#deployment-recommended" aria-label="deployment recommended permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deployment (recommended)</h2>
<p>Unlike <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#replicaset-v1-apps">ReplicaSets</a> <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#deployment-v1-apps">Deployments</a> enable <strong>rolling updates</strong> with 0 downtime as well as <strong>roll-backs</strong> to older versions of your app!</p>
<p>Let’s start with deleting our ReplicaSet <code class="language-text">kubectl delete replicaset webapp</code> - this is going to remove both the set and all pods that have been spawned from it:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/7cc1cd902796265e8a6e9a377f26afd9/de8ec/kubernetes_cluster_37.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 17.875000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAtElEQVQI12WNyw6CMBBFa0EkFTSIwkZeYimllEKBgPj//+UobozJySSTuecO8prxWPe+mgjXshkXOc5y7JhqqZRUTkwFKUcx28QM/eNU2uGdW+ljPbiih3XPO5spIynRlX4o3rmo+GGVzZswsgonHKelTZttLlDEoI6UCmecMEUKZWYVKVvrXuOU76iE/Nc/tVPYLxe9wMODGMLhCb7fzl4zQS9c7UKBE/TLuXtYee1wDXOVXyC6HSpvdDJwAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/7cc1cd902796265e8a6e9a377f26afd9/de8ec/kubernetes_cluster_37.png"
        srcset="/static/7cc1cd902796265e8a6e9a377f26afd9/81654/kubernetes_cluster_37.png 200w,
/static/7cc1cd902796265e8a6e9a377f26afd9/3601a/kubernetes_cluster_37.png 400w,
/static/7cc1cd902796265e8a6e9a377f26afd9/de8ec/kubernetes_cluster_37.png 800w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>To now change our <strong>ReplicaSet</strong> into a <strong>Deployment</strong> we only have to change <code class="language-text">type: Deploymet</code> inside our <code class="language-text">pods.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token comment"># Unique key of the Deployment</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token comment"># the Deployment manages all Pods</span>
      <span class="token comment"># where the lable = app: webapp</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
  <span class="token comment"># only 1 Pod should exist atm - if it</span>
  <span class="token comment"># crashes, a new pod will be spawned.</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token comment"># Here starts the Pod Definition from b4</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token comment"># name: webapp / now we Deployment name</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> webapp
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> webapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>webapp<span class="token punctuation">-</span>angular<span class="token punctuation">:</span>release0

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> queue
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> queue
    <span class="token key atrule">image</span><span class="token punctuation">:</span> richardchesterwood/k8s<span class="token punctuation">-</span>fleetman<span class="token punctuation">-</span>queue<span class="token punctuation">:</span>release1</code></pre></div>
<p>We also changed the version of our app back to <code class="language-text">release0</code> so we can later test out the update procedure. Then apply the cahnges you made with <code class="language-text">kubectl apply -f pods.yaml</code>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/7d7a752c790568050471c987688b6b75/d5c4f/kubernetes_cluster_38.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 37.70287141073658%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJ0lEQVQY022Pe2+CUAzFUfCNU5yb2abAhfso5T7FSbbv/8FWsj9mnEnTNGlPz+9EO99vzSWz1zV2mbuu246GFM91EywE3QRVa8O1qtooV/c1CPQlc/1MuhWGFfi5sDNhcmmFcoybI8OkhEkJD8QHe90Ik4HfSLsSZqkCmRPOXrp3rnPwO/I8iugkH4gNeBAWlUNhXrmOCphyQ9gxQ1onwo4qjMtmXDZRDjFrRsUNQordk/5M2y6p9db1aRNIvA9fc2mXyj+7nq4p1Ev3TVlSDNT/KBbK0t2MG7JaKD8VhtYUe1LrKde/p7RKqgGE/Ee32BTswPCD623VTqp2XAL9Sqp2CY4+LqSjeRA8zFzg+QS+wI46w/MbBPIfmMHFlJYhIcRDYPW/fgD2zziiGnEJmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/7d7a752c790568050471c987688b6b75/de8ec/kubernetes_cluster_38.png"
        srcset="/static/7d7a752c790568050471c987688b6b75/81654/kubernetes_cluster_38.png 200w,
/static/7d7a752c790568050471c987688b6b75/3601a/kubernetes_cluster_38.png 400w,
/static/7d7a752c790568050471c987688b6b75/de8ec/kubernetes_cluster_38.png 800w,
/static/7d7a752c790568050471c987688b6b75/d5c4f/kubernetes_cluster_38.png 801w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>As you can see, the <strong>Deployment</strong> was created and set up a <strong>ReplicaSet</strong> for us that spawned two <strong>Pods</strong>:</p>
<ul>
<li>deployment.apps/webapp   2/2</li>
<li>replicaset.apps/webapp-5fb4b78949   2</li>
<li>pod/webapp-5fb4b78949-77ddd   1/1</li>
<li>pod/webapp-5fb4b78949-kf7rr   1/1</li>
</ul>
<h3 id="rolling-update-and-rollback"><a href="#rolling-update-and-rollback" aria-label="rolling update and rollback permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rolling Update and Rollback</h3>
<p>Now to update our app back to <code class="language-text">release0-5</code> edit <code class="language-text">pods.yaml</code> and set the image to back to the 0.5 release. Afterwards run <code class="language-text">kubectl apply -f pods.yaml</code>. This will start up a new <strong>ReplicaSet</strong> with the updated pods, but keep the old set alive until the update is ready - resulting in a 0-downtime, rolling update of our app:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/78c3396872cef91fade6918d44eace6e/dd001/kubernetes_cluster_39.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 796px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 37.311557788944725%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABF0lEQVQY022P2WrDMBBF5SSOlzi2EvpUcGwsa/Nos5WG9qdS6PKS9uOrUIhDKRwGDehc5qK9Oe3MqQQfSKjegt8IlwlXMQPCATOcqLwRi0ZEB47+sNcnrJ+SXmfcpsyk1GTM7uxzIVxCIKcGDx7VFNVs5iaXg8+5TYLDXZAzZqJGFHLcSIcakQsXWHUQEhetjAnEHcx+IcYSJqyO22FKehUqpFQXcqrAh3+VOi5bmfb6YXwJudd0bmc5l1NM9apXCwLLDtbMrIha09+p4+sK6MCiVqKah9rhrvnsx8FjZjHVe24rqqtelQQwNWWvMTNVmNxioqL7qjc+mPkaxoscv8FfpAvv906ea/ra8POBBd5a8Snc+j/5B/22NXJDBpciAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/78c3396872cef91fade6918d44eace6e/dd001/kubernetes_cluster_39.png"
        srcset="/static/78c3396872cef91fade6918d44eace6e/eb3dd/kubernetes_cluster_39.png 200w,
/static/78c3396872cef91fade6918d44eace6e/3ba66/kubernetes_cluster_39.png 400w,
/static/78c3396872cef91fade6918d44eace6e/dd001/kubernetes_cluster_39.png 796w"
        sizes="(max-width: 796px) 100vw, 796px"
      />
  </span>
  </a></p>
<hr>
<p>As seen above, the new ReplicaSet was successfully deployed - but the old one was <strong>not deleted</strong>. In case that something goes wrong during the update and the new pods never spin up, the old ones will not go down - keeping your app alive. This also allows you to always come back to the old version, if something goes wrong after the update. You can follow the rollout process with the following command:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl rollout status deployment webapp</code></pre></div>
<p>To roll back to a working version of your app - after a desasterous update - check the <strong>Rollout History</strong> and run the rollback command to go back to a previous version or specify the revision you need:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">kubectl rollout history deployment webapp
kubectl rollout undo deployment webapp --to-revision=1</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/65c273b1e66eace29d3bc2f0e414adb3/3aff6/kubernetes_cluster_40.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 12.702366127023662%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAgklEQVQI122N2wrCQAxEt6Ktog9eXrv1spu0ZZPsxnr7/y8z0CdBOAzDMHDcnh+n8jnmt5XdqA3IBvMSxQM/gfmWNHIJVCLdURRkAoGQnEfX9W476CG/VoGq8+Ba+I9dfxZceKxsbIDXKHWgOpIVYzZfZnNIBThHsjSzpUHXkSNpL181yhcgcMPQOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/65c273b1e66eace29d3bc2f0e414adb3/de8ec/kubernetes_cluster_40.png"
        srcset="/static/65c273b1e66eace29d3bc2f0e414adb3/81654/kubernetes_cluster_40.png 200w,
/static/65c273b1e66eace29d3bc2f0e414adb3/3601a/kubernetes_cluster_40.png 400w,
/static/65c273b1e66eace29d3bc2f0e414adb3/de8ec/kubernetes_cluster_40.png 800w,
/static/65c273b1e66eace29d3bc2f0e414adb3/3aff6/kubernetes_cluster_40.png 803w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h2 id="networking-and-service-discovery"><a href="#networking-and-service-discovery" aria-label="networking and service discovery permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Networking and Service Discovery</h2>
<p>We will now create a simple Pod to use as a test environment. Create a file named busybox.yaml with the following contents:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> busybox
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> busybox
    <span class="token key atrule">image</span><span class="token punctuation">:</span> busybox<span class="token punctuation">:</span><span class="token number">1.28</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> sleep
      <span class="token punctuation">-</span> <span class="token string">"3600"</span>
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
  <span class="token key atrule">restartPolicy</span><span class="token punctuation">:</span> Always</code></pre></div>
<p>Then create a pod using this file and verify its status:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl create -f busybox.yaml
pod/busybox created

kubectl get pods busybox
NAME      READY     STATUS    RESTARTS   AGE
busybox   1/1       Running   0          12s</code></pre></div>
<p>Once that pod is running, you can <code class="language-text">exec nslookup</code> in that environment. If you see something like the following, DNS is working correctly:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl <span class="token function">exec</span> -ti busybox -- <span class="token function">nslookup</span> kubernetes.default
Server:    10.96.0.10
Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local

Name:      kubernetes.default
Address 1: 10.96.0.1 kubernetes.default.svc.cluster.local</code></pre></div>
<p><code class="language-text">nslookup</code> successfully contacted the internal <strong>CoreDNS server</strong> on <code class="language-text">10.96.0.10</code> that Kubernetes provides and resolved the corresponding IP address for <strong>kubernetes.default</strong>. If the address resolution fails, try to to bring down <strong>FirewallD</strong> and test which port is being blocked - don’t forget to bring it back up afterwards:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">systemctl stop firewalld <span class="token operator">&amp;&amp;</span> systemctl disable firewalld
systemctl start firewalld <span class="token operator">&amp;&amp;</span> systemctl <span class="token function">enable</span> firewalld</code></pre></div>
<p><strong>What to do if shutting down FirewallD “solves” your Problem?</strong></p>
<p>There are several threads on Github talking about this issue - <a href="https://github.com/kubernetes/kubeadm/issues/504">this one</a> solved the issue for me:</p>
<ul>
<li><strong>Problem</strong>: <code class="language-text">nslookup</code> does not resolve any domains when FirewallD is active:</li>
</ul>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@in-centos-master ~<span class="token punctuation">]</span><span class="token comment"># kubectl exec -ti webapp-cf477f847-9wqft sh</span>
/ <span class="token comment"># nslookup database</span>
nslookup: can<span class="token string">'t resolve '</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token string">': Name does not resolve

nslookup: can'</span>t resolve <span class="token string">'database'</span><span class="token keyword">:</span> Try again
/ <span class="token comment"># nslookup google.com</span>
nslookup: can<span class="token string">'t resolve '</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token string">': Name does not resolve

nslookup: can'</span>t resolve <span class="token string">'google.com'</span><span class="token keyword">:</span> Try again
/ <span class="token comment"># exit</span>
<span class="token function">command</span> terminated with <span class="token keyword">exit</span> code 1</code></pre></div>
<ul>
<li><strong>Solution</strong>: Configure <code class="language-text">iptables</code> as follows by <a href="https://github.com/kubernetes/kubeadm/issues/504#issuecomment-404737675">copying this</a> to all nodes in cluster:</li>
</ul>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">systemctl stop kubelet
systemctl stop docker
<span class="token function">rm</span> -rf /var/lib/cni/
<span class="token function">rm</span> -rf /etc/cni/net.d
<span class="token function">rm</span> -rf /run/flannel

iptables -t nat -F
iptables -t mangle -F
iptables -F
iptables -X
iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -P OUTPUT ACCEPT


ip6tables -t nat -F
ip6tables -t mangle -F
ip6tables -F
ip6tables -X
ip6tables -P INPUT ACCEPT
ip6tables -P FORWARD ACCEPT
ip6tables -P OUTPUT ACCEPT

iptables -L -v -n 
iptables -L -v -n -t nat
conntrack -L 
ipset list

lsmod<span class="token operator">|</span><span class="token function">grep</span> br_netfilter
modprobe br_netfilter
systemctl start docker
systemctl start kubelet</code></pre></div>
<p><code class="language-text">nslookup</code> should now work:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">/ <span class="token comment"># nslookup database</span>
nslookup: can<span class="token string">'t resolve '</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span>': Name does not resolve

Name:      database
Address 1: 10.105.73.87 database.default.svc.cluster.local
/ <span class="token comment"># </span></code></pre></div>
<p>Or check the <a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/">DNS Debugging</a> section in the Kubernetes documentation.</p>
<p>To be able to connect applications in different pods - e.g. having a backend container accessing a database in a different pod - Kubernetes has it’s own <strong>DNS Service</strong> and we can assign pods to <strong>Namespaces</strong> to group them together. When we create a pod without specifying a namespace, it will be assigned the <code class="language-text">namespace: default</code>. The command <code class="language-text">kubectl get all</code> shows us all pods that are inside this specific space. We can run <code class="language-text">kubectl get namespaces</code> to see all available spaces that have been assigned by the DNS service:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/74642e7a378a80f37710ca39be0285a5/bc16e/kubernetes_cluster_41.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 791px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 45.13274336283185%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABP0lEQVQoz2WR6W6DMBCEIQeEJIQcNFKbg4BtbIwPrhx9/xfrUPojotLKslbz7ezh7MxjyauA2525h7JdcusR5TG9Iionimclp8oyHSfCuXL3yp33ALwp2yA3a9mEslkw4ybCvRV+Vn6k8pAIYP4lh3QyIgd4JapFbnymg9yui2ZvH5HuIlF9cZuo7piVC+jA/5YYw5Hq0DBe9A/nrb5vdBcyfaGayOZMVEJVStWNlPMR3EtVt9V9CZgP2UkqQ1Gdijo1j8/cHFJ5LdsjUe7IPNL3vX3CHy9mxvDTVCLmWenzKqpf00w6JxrIdkbKcedb08NwjqtXXL8GeAaSKuziYJ8emDPDUr3/MDx3trfFhSa3oj/GmWHhkC5FHTff8z+486gaw7gQpkVhXBixEjXUHtXYXJ8R1TQtwPjMDJ93+Ad6dj+78aBPyQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/74642e7a378a80f37710ca39be0285a5/bc16e/kubernetes_cluster_41.png"
        srcset="/static/74642e7a378a80f37710ca39be0285a5/7e736/kubernetes_cluster_41.png 200w,
/static/74642e7a378a80f37710ca39be0285a5/77bd2/kubernetes_cluster_41.png 400w,
/static/74642e7a378a80f37710ca39be0285a5/bc16e/kubernetes_cluster_41.png 791w"
        sizes="(max-width: 791px) 100vw, 791px"
      />
  </span>
  </a></p>
<hr>
<p>If we want to see Pods running in the <strong>kube-system</strong> namespace we can use the <code class="language-text">kubectl get pods -n kube-system</code> command.</p>
<h3 id="creating-a-database-pod"><a href="#creating-a-database-pod" aria-label="creating a database pod permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a Database Pod</h3>
<p>We now have a Web Application and a message broker in place. Next we want to a add a MariaDB database and we do so with the following configuration file <code class="language-text">networking-tests.yaml</code>:</p>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> mysql
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> mysql
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mysql
     <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5</span>
     <span class="token key atrule">env</span><span class="token punctuation">:</span>
      <span class="token comment"># Use secret in real life</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_ROOT_PASSWORD
        <span class="token key atrule">value</span><span class="token punctuation">:</span> password
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> MYSQL_DATABASE
        <span class="token key atrule">value</span><span class="token punctuation">:</span> fleetman

<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> database
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> mysql
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3306</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP</code></pre></div>
<p>We can apply this configuration to our cluster with <code class="language-text">kubectl apply -f networking-tests.yaml</code> and verify that it is running with <code class="language-text">kubectl get all</code>:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/e4192f04852570412a6737644e00f0e3/dd001/kubernetes_cluster_42.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 796px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 43.21608040201005%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABMUlEQVQoz3WRCW+CQBCFubQoKBaTJm2qHAJ7Hxxi+///WB/BxGLaZDKZXea9+Zh1UjMe1DWRQ0TbHe9i3iFHrK2pNdRq1kpiLO9ErdlF1KVwzuQRiR4PetyLfkts2OiwMRtiwlpFKHCslJ/Re+QsyOhCnMney6iXczejm8ZsqU3NbS8GWKwrBVMvZwvB70jVdd2YmHUxa1cXCSPUEbXembhnAn7cwNc5NVM8Tf6g5pPaHWQ5wxxMw/xXPb5UCj+CG79gWApcgA2uBcibvr2330d01wrA2NZMDgosD3rnRHCEXVCKHe+Dkk8Is3hVSb8U+OAXHNPwbX3PclVKOLpz65/YYaPQF9YafchBwadcCsDDBTUK90nzWBieSg2pvSXqejRf0yPTFqsGMFggw/v9J/4BBj4+XJpE8NMAAAAASUVORK5CYII='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/e4192f04852570412a6737644e00f0e3/dd001/kubernetes_cluster_42.png"
        srcset="/static/e4192f04852570412a6737644e00f0e3/eb3dd/kubernetes_cluster_42.png 200w,
/static/e4192f04852570412a6737644e00f0e3/3ba66/kubernetes_cluster_42.png 400w,
/static/e4192f04852570412a6737644e00f0e3/dd001/kubernetes_cluster_42.png 796w"
        sizes="(max-width: 796px) 100vw, 796px"
      />
  </span>
  </a></p>
<hr>
<p>We now want to see if we can connect to the database from our webapp container. To do so we need to execute the shell command inside the container and check the DNS configuration file:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">kubectl exec -it webapp-cf477f847-9wqft sh
/ # cat /etc/resolv.conf</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/501a0e9528d53bef7a49a08f9a512bad/5d97e/kubernetes_cluster_43.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 11.495673671199011%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAY0lEQVQI10WMywqAIBQFJYOKVi2DitR7fXaVKKH//7IMomCY1ZnDZrdfMWc6i61JLcZOp8bEAcliBCCltmKADZE00CQcW8zL5A9JuVyMSL0KXHi+ulqGSngmw0NZz/rnKxdzAwWwDxwgThyCAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/501a0e9528d53bef7a49a08f9a512bad/de8ec/kubernetes_cluster_43.png"
        srcset="/static/501a0e9528d53bef7a49a08f9a512bad/81654/kubernetes_cluster_43.png 200w,
/static/501a0e9528d53bef7a49a08f9a512bad/3601a/kubernetes_cluster_43.png 400w,
/static/501a0e9528d53bef7a49a08f9a512bad/de8ec/kubernetes_cluster_43.png 800w,
/static/501a0e9528d53bef7a49a08f9a512bad/5d97e/kubernetes_cluster_43.png 809w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>In this case the CoreDNS server is registered under <code class="language-text">nameserver 10.96.0.10</code> - that means that every time we need to resolve a domain name, like we did earlier with <code class="language-text">kubernetes.default</code>, this DNS server is contacted to resolve the underlying IP address for us. We can verify this by typing:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl get services -n kube-system</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/eb5971b21ca15405f3cd6ddf15d9ab00/cc7e6/kubernetes_cluster_44.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 7.777777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAcElEQVQI1yXL4QqCMBAA4KEQaFggBf1JUexu3tFt81xuL9D7P1KJ8P39zE1ig+7vseSW9cLrfck1K1n/9SnZEEHyHD4g6yQJBEcyTzAd7kDixNqDI78NrFfW1m01uvMcKvSn17scqByp6O1+Dsfs8AdVuBCus86wxwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/eb5971b21ca15405f3cd6ddf15d9ab00/de8ec/kubernetes_cluster_44.png"
        srcset="/static/eb5971b21ca15405f3cd6ddf15d9ab00/81654/kubernetes_cluster_44.png 200w,
/static/eb5971b21ca15405f3cd6ddf15d9ab00/3601a/kubernetes_cluster_44.png 400w,
/static/eb5971b21ca15405f3cd6ddf15d9ab00/de8ec/kubernetes_cluster_44.png 800w,
/static/eb5971b21ca15405f3cd6ddf15d9ab00/cc7e6/kubernetes_cluster_44.png 810w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>That means that if we want to connect to our database server from another pod in our cluster (<strong>Service Discovery</strong>), all we need to do is to connect to the domain name <code class="language-text">database</code> that is provided by the database service. This is very important since the assigned IP address can change all the time!</p>
<p>Going back into the webapp container we can run a <code class="language-text">nslookup</code> to see if the DNS service is working correctly:</p>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/f9340f0a8a9ae2afec449da69ccdc196/5447d/kubernetes_cluster_45.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 23.42007434944238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAqUlEQVQY032Oyw6CMBAAESjyEA7eNFHkVcp2y0IpJv7/j1mR6EFDModNdic7zl3NGvSMRokhE0PYUiLGqKWIUyyIVdIvZcgpqNW+6UPes1I613aFNSrgfQyT3fkF+IVkFVrB4t4658L/8JEBjUAzjI8CTQI6A53ClII+gLZ/ghq/p7+cOZ1aykEfa/SWh7aQvYcKd7nYkv1aebaTk/vS0DYv2bCWF92G/ATz4CFcCDq/5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/f9340f0a8a9ae2afec449da69ccdc196/de8ec/kubernetes_cluster_45.png"
        srcset="/static/f9340f0a8a9ae2afec449da69ccdc196/81654/kubernetes_cluster_45.png 200w,
/static/f9340f0a8a9ae2afec449da69ccdc196/3601a/kubernetes_cluster_45.png 400w,
/static/f9340f0a8a9ae2afec449da69ccdc196/de8ec/kubernetes_cluster_45.png 800w,
/static/f9340f0a8a9ae2afec449da69ccdc196/5447d/kubernetes_cluster_45.png 807w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>As you see, we can not only resolve internal cluster IPs but also internet domains - the CoreDNS service is using <code class="language-text">8.8.8.8</code> and <code class="language-text">8.8.4.4</code> as _<em>Upstream DNS Servers</em> <a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-custom-nameservers/#configure-stub-domain-and-upstream-dns-servers">by default</a>.</p>
<p>You can also see that the FQDN (<strong>Fully Qualified Domain Name</strong>) of our database is actually <code class="language-text">database.default.svc.cluster.local</code>. The reason why we can simply use <code class="language-text">databse</code> to get an result, is that the <code class="language-text">/etc/resolv.conf</code> file specifies that if a domain name is not found appened one of the standard strings to it and try again:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">search default.svc.cluster.local svc.cluster.local cluster.local</code></pre></div>
<p>Just using <code class="language-text">database</code> as domain works fine because the pod is inside the <strong>default namespace</strong>. As soon as you start using different namespaces for different type of services, you <strong>have to use the FQDN</strong> instead - or at least appened the used namespace to it, e.g. <code class="language-text">database.mynondefaultnamespace</code> (the DNS service will then add <code class="language-text">svc.cluster.local</code> to find the FQDN for you).</p>
<p>To check if the webapp container can access the MariaDB database, we can install the <strong>mySQL client</strong> on the <em>Alpine image</em> that serves our webapp:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">apk update
apk add mysql-client</code></pre></div>
<p>To connect to our database we just have to type <code class="language-text">mysql</code> followed by the host address <code class="language-text">-h database</code> and the login credentials we set inside the configuration file earlier:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mysql -h database -uroot -ppassword fleetman
MySQL <span class="token punctuation">[</span>fleetman<span class="token punctuation">]</span><span class="token operator">></span> CREATE TABLE testtable <span class="token punctuation">(</span>test varchar <span class="token punctuation">(</span>255<span class="token punctuation">))</span><span class="token punctuation">;</span>
MySQL <span class="token punctuation">[</span>fleetman<span class="token punctuation">]</span><span class="token operator">></span> SHOW TABLES<span class="token punctuation">;</span></code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/18605dc4931b8e66b4d740ac628d32f9/1f7d0/kubernetes_cluster_46.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 66.70792079207921%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaElEQVQoz42SCWvcMBCFN067vvZwEkoCYbNe25JH10iybHlp+/9/V8c9QkvdpfDxEEhveNLT5gX8bCYjhx24EnzOLWkJrgC3EwNx1ONBhbQzyRk2b/0f5OAzjKW7PvjPlb0+YCQqsxjIVplpr0JlYsbx7m/zIzjpZq5HYeMruKQWxLJx4gu/zq04iSfwPUaGEzPTWYX9kt+TUvJtq5N6zfNOIYf8e+zcxBLnPa3NtDPTx94mF3nLSXySg7Sxx0lgbOXQgDtz+9rI57c++S32OieczfiF21mPX8FfazlcVCAaFcpGJRexuTGiAL8kFz4lVSGTQ7aoz4TfMvzQ6u2PklZHFL0l0lbvOrPneOCWOHKswB17+yj8oXc5x3y1qkqPS5N6RBUiTkEHBa5rFGtV1yrR6idq7gz3q1XRl8oYFtxeuAVmTrX42fA7Nx4sZ0itpgzTG3f7F1lnMmZybmjKfS3u6DP9r5l/A2oCWiBWLfb3AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/18605dc4931b8e66b4d740ac628d32f9/de8ec/kubernetes_cluster_46.png"
        srcset="/static/18605dc4931b8e66b4d740ac628d32f9/81654/kubernetes_cluster_46.png 200w,
/static/18605dc4931b8e66b4d740ac628d32f9/3601a/kubernetes_cluster_46.png 400w,
/static/18605dc4931b8e66b4d740ac628d32f9/de8ec/kubernetes_cluster_46.png 800w,
/static/18605dc4931b8e66b4d740ac628d32f9/1f7d0/kubernetes_cluster_46.png 808w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<h2 id="kubernetes--compose--kompose"><a href="#kubernetes--compose--kompose" aria-label="kubernetes  compose  kompose permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Kubernetes + Compose = Kompose</h2>
<p><a href="http://kompose.io">Kompose</a> is a conversion tool for Docker Compose to container orchestrators such as Kubernetes (or OpenShift).</p>
<ul>
<li>Simplify your development process with Docker Compose and then deploy your containers to a production cluster</li>
<li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/translate-compose-kubernetes/">Convert</a> your <em>docker-compose.yaml</em> with one simple command <code class="language-text">kompose convert</code></li>
<li>Immediately bring up your cluster with <code class="language-text">kompose up</code></li>
<li>Bring it back down with <code class="language-text">kompose down</code></li>
</ul>
<p>Kompose is in EPEL CentOS repository. If you don’t have EPEL repository already installed and enabled you can do it by running <code class="language-text">yum install epel-release</code>:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yum -y <span class="token function">install</span> kompose</code></pre></div>
<h3 id="use-kompose"><a href="#use-kompose" aria-label="use kompose permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use Kompose</h3>
<p>In just a few steps, we’ll take you from Docker Compose to Kubernetes. All you need is an existing <code class="language-text">docker-compose.yml</code> file:</p>
<ol>
<li>Go to the directory containing your <em>docker-compose.yml</em> file. Run the <code class="language-text">kompose up</code> command to deploy to Kubernetes directly.</li>
<li>Or convert the <em>docker-compose.yml</em> file to files that you can use with <code class="language-text">kubectl</code>, run <code class="language-text">kompose convert</code>:</li>
</ol>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/cb6f00d71063329541c05275c4765417/5447d/kubernetes_cluster_47.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 49.44237918215614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABVElEQVQoz3WSW2+CQBSEqeANFbk0pi9WRGXZC3uARcCk//93dRaS2qQ1OSEfD8OZmYMTCLOTZp2Tzyqf0aaoLReVz2s3E07KnVPhfLL/B5rVTS+v5U424LC8Qx+IJqMuVe3holbQvxKvc724lsub3qt2y5uY+i2vwYd6gKlFJt9O7KV4y401ySorFk1SDTvRBKo9tl8JIz/lPmwf83HYOPlzPhRP9D2iAck3RQXP+MRGmqM0JI3g9Rm5cr1mBHfwCKeTWexzQkURdRH1NvmtRHiA5Zzci/IucpYJL5NzcCbds5jAywDSmVMf14+E+kAatAWIdLdXd7APPdr6MTnlnPxPsKAuroaYOkRF7Fj36CzUHZ4bjrPZQ3hn8RT/ngU2N4+xJ4OdgKTq3+sHxEn1CFWLOpFilv537ZVqQ6wq77vxb4m0tY1Xa5uRe+azlLupAPwVfwMC/kf5RRZ9qgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/cb6f00d71063329541c05275c4765417/de8ec/kubernetes_cluster_47.png"
        srcset="/static/cb6f00d71063329541c05275c4765417/81654/kubernetes_cluster_47.png 200w,
/static/cb6f00d71063329541c05275c4765417/3601a/kubernetes_cluster_47.png 400w,
/static/cb6f00d71063329541c05275c4765417/de8ec/kubernetes_cluster_47.png 800w,
/static/cb6f00d71063329541c05275c4765417/5447d/kubernetes_cluster_47.png 807w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
  </span>
  </a></p>
<hr>
<p>And then <code class="language-text">kubectl create -f &lt;output files&gt;</code> - e.g. :</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">kubectl create -f api-service.yaml,elasticsearch-service.yaml,frontend-service.yaml,wiki-service.yaml,api-deployment.yaml,api-claim0-persistentvolumeclaim.yaml,elasticsearch-deployment.yaml,esdata-en-persistentvolumeclaim.yaml,frontend-deployment.yaml,frontend-claim0-persistentvolumeclaim.yaml,wiki-deployment.yaml</code></pre></div>
<hr>
<p><a
    class="gatsby-resp-image-link"
    href="/static/214bb6070760fa10146480fde6b74ebd/4da31/kubernetes_cluster_48.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 799px;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 29.036295369211512%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAr0lEQVQY042PWxOCIBSEqbSpDAP1rdukeQVRFLz8/z/WAXsuZ745s8OyBxYFYrxwRWpNhP6KWlNAaJ8rzHrfHoJFrQXCXOMasw5FcqJiAHzWn8vumDVuwoG9mcyN2f7NARCGZMFYTswQxEit4J1DJnavCt1SdE3RPVtFKOdADGE72S0aV/0pb7fPAj3y/ywxmFZA1cEr5WZlOJIzbSA8EtNcE668QuKqc6ACfOxn+AOyHioUMVS2cQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;"
        alt="Creating a Kubernetes Cluster"
        title=""
        src="/static/214bb6070760fa10146480fde6b74ebd/4da31/kubernetes_cluster_48.png"
        srcset="/static/214bb6070760fa10146480fde6b74ebd/c5bb8/kubernetes_cluster_48.png 200w,
/static/214bb6070760fa10146480fde6b74ebd/8f34d/kubernetes_cluster_48.png 400w,
/static/214bb6070760fa10146480fde6b74ebd/4da31/kubernetes_cluster_48.png 799w"
        sizes="(max-width: 799px) 100vw, 799px"
      />
  </span>
  </a></p>
<hr></div><footer class="jss11"><div class="jss12"><span class="jss14">SHARE</span><div class="jss13"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--twitter"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--twitter "><g><circle cx="32" cy="32" r="31" fill="#00aced"></circle></g><g><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></g></svg></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--googlePlus"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--google "><g><circle cx="32" cy="32" r="31" fill="#dd4b39"></circle></g><g><path d="M25.3,30.1v3.8h6.3c-0.3,1.6-1.9,4.8-6.3,4.8c-3.8,0-6.9-3.1-6.9-7s3.1-7,6.9-7c2.2,0,3.6,0.9,4.4,1.7l3-2.9c-1.9-1.8-4.4-2.9-7.4-2.9c-6.1,0-11.1,5-11.1,11.1s5,11.1,11.1,11.1c6.4,0,10.7-4.5,10.7-10.9c0-0.7-0.1-1.3-0.2-1.8H25.3L25.3,30.1z M49.8,28.9h-3.2v-3.2h-3.2v3.2h-3.2v3.2h3.2v3.2h3.2v-3.2h3.2" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--facebook"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--facebook "><g><circle cx="32" cy="32" r="31" fill="#3b5998"></circle></g><g><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--linkedin"><div style="width:36px;height:36px"><svg viewBox="0 0 64 64" width="36" height="36" class="social-icon social-icon--linkedin "><g><circle cx="32" cy="32" r="31" fill="#007fb1"></circle></g><g><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></g></svg></div><div class="SocialMediaShareCount"><div class="share-count"></div></div></div></div></div><div class="jss15"><div class="jss18 jss16"><img alt="mike polinowski" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAA8ADwDASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAABgABBAUHAwL/xAA6EAABAwMCBAIHBAoDAAAAAAABAgMEAAUREiEGMUFRE2EHFCIjcaHBFYGRsRYkJTIzQmJygqOywuH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEE/8QAHREBAQACAgMBAAAAAAAAAAAAAAECAxFRBBIiMf/aAAwDAQACEQMRAD8Az+lSqxskWJPmepSnFMrfwll4bhK+gI6g8vw86CuHPvWnRbTabhw3a5X2dHQpTjQVoTgnKwFAnmRz50AXezzbNKLE1opP8qxulY7g1oPCa/E4LhjP8OUgf7gfrQVHpFZgwERI0OBGYW7qUtbbQScDGBt99A1GPpNWTf46M7JjA/eVKoZjwVLQXnj4bQGc9TWXKT9U16stl4xiJSp1lJWSgEJzsDTVqdTpNnnxYzMhyM54DzYcQ4lJKcHz6GoSSpCwpJKVJOQRsQa1yxXOcqywP2O6U+CgJUl1sagBgEAkc+dTXZDzo99YnV/3rZP/AGoKnh67QuLLSYNzbbckoGHEKwNf9aeue+OVeWW4nDER63PSkpb9baeZLhwdBWnP4FKt663O0OS2wYNsTb5KTlL7QaCgfiDn5164Utqv1p+7KEq5odLS1rOvQkAEAdueaARvMmPery5Oa1LYQEttauoA5nPmTVHcpfiq8Js+wk7kdTRzKs9pY4qXDW2tz1hAeajIWEoBydQIyO2QM457VesW2IwgBHD7OodQ20PrU5h9e1duXlSaJp1zju9sbSlS1BKElRPIAZrvNgyYDiG5bSmlrQHAlQwcHlWzodfZThm0KSOyVtj60D8bKmSLy2pVrUMMJAyoKyNSu1UcSM3x7MiWyHDhMNAsspbW44CokjbYZ7YqE/xtfntvXEoHZLSPqKHqu7JbYYbFyvLvhQUn2GhuuQR0A7dz93wAr4Sg3W9J+0LxNkmKRhtoOFHieZxj2fz/ADe9hDAduVhdMZDT6Izvq2Alw9T2JGoDPcGh6+cZzLiyYkNIhQ8adDf7yh2J6DyHzooszKI/o8Z1pz4hCyO+XRj6UFrFt9tblyILqy5NV70POK9+UnYEK57EEbctqEuJH+JOG5Q0XJ92G4fdOLws/BWRzrt6TAuPcrdLZWpt0oUkLScEaSCN/wDI1ChcYidDXbeIW/Gjup0+sIHto7EjrjuN/jQQf03v5RpVNB8/CSD8gK7u8YvyUMmS3qeQjQpYx7W53+dD8+MIktxlDyH0A5Q6g7LSeR/86VHoFTkk4yScbU1KgVaxMHqHCVriupwtS4rZHnqST+RrKmXVsPIdaVpWg5SexqbcL5crmplUyWtws7t7BOk99uvnQGnpRjurjQJKRlltS0HbkVYI/wCNZ3VnN4iu89gsSp7q2jzTkAH4451WUCpUqVB//9k=" class="jss20"/></div><div class="jss17"><p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href="/contact/">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p></div></div></footer></article><footer class="jss21"><div class="jss22"><ul>
<li>This is a personal Developer Blog</li>
<li>Ξ</li>
<li>built by <a href="https://github.com/mpolinowski">Mike Polinowski</a></li>
<li>Ξ</li>
<li>with <a href="https://www.gatsbyjs.org/">Gatsby</a> &#x26; <a href="https://reactjs.org">React</a></li>
<li>Ξ</li>
<li>source code on <a href="https://github.com/mpolinowski/mpolinowski.github.io">GitHub</a></li>
<li>Ξ</li>
<li>deliverd by <a href="https://pages.github.com">Github Pages</a></li>
<li>Ξ</li>
<li>photos from <a href="https://www.flickr.com/people/149680084@N06/">Flickr</a></li>
</ul></div></footer></div><div style="position:absolute;height:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;left:2px;border-radius:3px"><div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div><div style="position:absolute;width:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;top:2px;border-radius:3px"><div style="position:relative;display:block;width:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div></div></main><nav class="jss23 is-aside open "><div class="jss24"><div style="position:relative;overflow:hidden;width:100%;height:100%"><div style="position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-overflow-scrolling:touch;margin-right:0;margin-bottom:0"><div class="jss25"><header></header><ul class="jss26"><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-the-chinese-way/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes the Chinese Way</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-nginx-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes NGINX Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-nginx-https-service/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes NGINX https Service</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-bare-metal-ingress/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Bare Metal Ingress</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-cluster-logging/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes Cluster Monitoring &amp; Logging</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/kubernetes-and-microservices/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Kubernetes and Microservices</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 Container" style="display:block"><a aria-current="page" class="jss32 active" href="/creating-a-kubernetes-cluster/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating a Kubernetes Cluster</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/centos-administration/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Centos Administration</h1><h2>Red Hat Enterprise and Centos Linux Server Adminsitration</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/managing-containers-in-kubernetes/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Managing Containers in Kubernetes</h1><h2>An IT professional who is a Red Hat Certified Specialist in Containerized Application Development has demonstrated the skills, knowledge, and abilities needed to create, update container images and run and link containers.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/red-hat-containerized-application-development-rhcs/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Red Hat Certified Specialist in Containerized Application Development</h1><h2>An IT professional who is a Red Hat Certified Specialist in Containerized Application Development has demonstrated the skills, knowledge, and abilities needed to create, update container images and run and link containers.</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-dashboard-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating Node-RED Admin Panel using node-red-dashboard</h1><h2>Creating Node-RED Admin Panel using node-red-dashboard</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-http-connect/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node-RED Interaction with HTTP</h1><h2>A collection of HTTP recipes for Node-RED</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-mqtt-connect/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>A Collection of Node-RED MQTT Recipes</h1><h2>We are going to use a MQTT Broker to test our Node-RED flows under Windows</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-sqlite/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Using SQLite with Node-RED on Windows</h1><h2>Using SQLite with Node-RED on Windows</h2></div></a></li><li class="jss31 SQL" style="display:block"><a class="jss32" href="/postgresql-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with PostgreSQL in Windows 10</h1><h2>Getting started with PostgreSQL in Windows 10</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-cryptocurrency-dashboard/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Creating a Dashboard displaying Cryptocurrency Data using Node-RED</h1><h2>We will use the STS Binance node to get access to a Cryptocurrency API. The node can be downloaded for Node-RED</h2></div></a></li><li class="jss31 OpenHAB" style="display:block"><a class="jss32" href="/openhab2-mqtt-nodered/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Home Automation and IP Cameras</h1><h2>The following instructions will guide you through the process of setting up OpenHAB 2 to automate an IP camera via the MQTT protocol.</h2></div></a></li><li class="jss31 NodeRED" style="display:block"><a class="jss32" href="/nodered-getting-started/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting Started with Node-RED (Windows 10 Edition)</h1><h2>This guide will help you get Node-RED installed and running in just a few minutes.</h2></div></a></li><li class="jss31 LINUX" style="display:block"><a class="jss32" href="/red-hat-certified-engineer-rhce/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Red Hat Certified Engineer (RHCE) Exam</h1><h2>The performance-based Red Hat Certified Engineer exam (EX300) tests to determine if your knowledge, skill, and ability meet those required of a senior system administrator responsible for Red Hat Enterprise Linux (RHEL) systems.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/express-generator-dockerrized/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>How to wrap your Source Code into a Docker Container</h1><h2>We now want to create a custom Docker Container containing our Node.js project source code by creating a Dockerfile and building an Docker Image.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/express-generator-app-docker/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Link your Node Source Code into a Docker Container</h1><h2>Use Docker to run your source code in a runtime that isn&#x27;t globally installed on your system. We want to test our source code as it would be executed inside a Linux / Node.js@latest environment, while running our development on a Windows 10 machine.</h2></div></a></li><li class="jss31 Container" style="display:block"><a class="jss32" href="/node-express-docker-container/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Run your Node.js app from a Docker Container</h1><h2>A container image is a lightweight, stand-alone, executable package of a piece of software that includes everything needed to run it - code, runtime, system tools, system libraries, settings. Available for both Linux and Windows based apps, containerized software will always run the same, regardless of the environment.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/server-side-render-react-router/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Server Rendering with React and React Router</h1><h2>Server side rendering a React app can provide a few different benefits including performance and SEO. The problem is with those benefits comes a cost of additional complexity to your application. In this project, we&#x27;ll start from scratch and slowly build a server side rendered React 16.3 with React Router 4.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-transition-group-demo/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>react-transition-group</h1><h2>Introduction to animated transitions with React Router</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-material-ui-starter/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby Material UI Starter</h1><h2>Set up a website with Gatsby.js and Material UI</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/securing-elasticsearch-readonlyrest/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Securing Elasticsearch with ReadOnlyREST</h1><h2>Elasticsearch doesn&#x27;t have a basic user authentication - a problem!</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/securing-elasticsearch-xpack/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Securing Elasticsearch with X-Pack</h1><h2>Elasticsearch doesn&#x27;t have a basic user authentication - a problem!</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/elasticsearch-kibana/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Elasticsearch &amp; Kibana</h1><h2>Installing our Search Engine and it&#x27;s Admin Interface</h2></div></a></li><li class="jss31 NGINX" style="display:block"><a class="jss32" href="/nginx-node-security/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>NGINX, Node.js &amp; Security</h1><h2>Using NGINX as an SSL proxy for your Node.js apps</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/umlaute-on-us-keyboard/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Umlaute</h1><h2>Hack your US keyboard to be able to type German Umlaute</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-reactstrap/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby.js with Bootstrap 4</h1><h2>Creating a Gatsby.js starter using Reactstrap</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-wiki/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby.js Knowledgebase</h1><h2>Creating a Knowledgbase using Gatsby.js and React.js</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/getting-started-with-python-part-ii/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with Python Part II</h1><h2>According to Wikipedia Python is an interpreted, high-level, general-purpose programming language. And looking around, it seems to be everywhere - Machine Learning, Artificial Intelligence, Big Data Analysis all the way to Web Dev and Dev Ops.</h2></div></a></li><li class="jss31 Python" style="display:block"><a class="jss32" href="/getting-started-with-python/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Getting started with Python</h1><h2>Acording to Wikipedia Python is an interpreted, high-level, general-purpose programming language. And looking around, it seems to be everywhere - Machine Learning, Artificial Intelligence, Big Data Analysis all the way to Web Dev and Dev Ops.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/next-start/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Next.js Server Side Rendering</h1><h2>A first look at Next.js Version 4!</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-router-4/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React Router 4</h1><h2>A test project to get familiar with React Router v4</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/elasticsearch-react-example/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React Search Interface</h1><h2>An example project showing how to use Elasticsearch with React</h2></div></a></li><li class="jss31 Elasticsearch" style="display:block"><a class="jss32" href="/search-engine-setup-and-configuration/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Search Engine Setup and Configuration</h1><h2>Elasticsearch is a distributed, JSON-based search and analytics engine designed for horizontal scalability, maximum reliability, and easy management.</h2></div></a></li><li class="jss31 NGINX" style="display:block"><a class="jss32" href="/using-nginx-as-proxy-for-your-nodejs-apps/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Using NGINX as proxy for your nodejs apps</h1><h2>We want to set up NGINX with http/2 to serve multiple node apps and an instance of Elasticsearch on a single centOS server</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/react-under-the-hood/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React under the Hood</h1><h2>A look behind the curtain of React Starters</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/reactive-material/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>create-react-app and Material-UI</h1><h2>This is a practice run to add some to a react app, generated by the starter kit. So let&#x27;s get started!</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/gatsby-blog-starter/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Gatsby Blog Starter</h1><h2>Build a JAM Stack Blog with Gatsby.js</h2></div></a></li><li class="jss31 Google Analytics" style="display:block"><a class="jss32" href="/google-analytics-amp/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Google Analytics</h1><h2>How to add Google Analytics to your AMP Webpage,</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/obligatory-react-todo-list/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>React TODO List</h1><h2>Every web-dev should have one or two of them on Github ~</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/caloric-burn/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Food Caloric Table App</h1><h2>A sample app will be a simple food nutrition lookup table. The data driving the app is supplied by the USDA&#x27;s National Nutrient Database.</h2></div></a></li><li class="jss31 Windows" style="display:block"><a class="jss32" href="/windows-cmd/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Windows CMD</h1><h2>You can create a bootable USB flash drive to use to deploy your OS of choice . The first step is to prepare the USB flash drive by using DiskPart, which is a command-line utility.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/random-password-generator/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Random Password Generator</h1><h2>We want to use the React App generator to create static pages from our React Pass-Gen App, routed through a Node/Express Server.</h2></div></a></li><li class="jss31 C++" style="display:block"><a class="jss32" href="/unreal-engine-coding-standards/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Unreal Engine Coding Standards (I)</h1><h2>The Unreal Engine Developer Course - Learn C++ &amp; Make Games. Learn C++ from scratch. How to make your first video game in Unreal engine. Gain confidence in programming.</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/node-express-static-wiki/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node Express Static</h1><h2>Building a product Wiki based on Node.js, Express.js, AMP and Elasticsearch</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/node-express-mongodb/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>Node/Express with MongoDB</h1><h2>Building a Express Web Library with a MongoDB Backend and Goodreads API Integration</h2></div></a></li><li class="jss31 Javascript" style="display:block"><a class="jss32" href="/javascript-apis-and-ajax/"><div class="jss33 pointer"><div style="height:60px" class="lazyload-placeholder"></div></div><div class="jss34"><h1>An Introduction into APIs</h1><h2>JavaScript and Getting Started with APIs and AJAX</h2></div></a></li></ul></div></div><div style="position:absolute;height:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;left:2px;border-radius:3px"><div style="position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div><div style="position:absolute;width:6px;transition:opacity 200ms;opacity:0;display:none;right:2px;bottom:2px;top:2px;border-radius:3px"><div style="position:relative;display:block;width:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)"></div></div></div></div></nav><div class="jss35"><div class="jss36"><button class="jss44 jss38 jss37" tabindex="0" type="button" aria-label="Back to list" title="Back to the list"><span class="jss43"><svg class="jss47" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg></span></button></div><div class="jss36"><nav class="jss56"><div><button class="jss44 jss38 jss57" tabindex="0" type="button" aria-label="Increase font size" aria-haspopup="true" title="Change font size"><span class="jss43"><svg class="jss47" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z"></path></svg></span></button></div></nav><button class="jss44 jss38" tabindex="0" type="button" aria-label="Back to top" title="Scroll to top"><span class="jss43"><svg class="jss47 jss37" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"></path></svg></span></button></div></div><aside class="jss62"><a class="jss64" href="/"><div class="jss18 jss65"><img alt="mike polinowski" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAA8ADwDASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAABgABBAUHAwL/xAA6EAABAwMCBAIHBAoDAAAAAAABAgMEAAUREiEGMUFRE2EHFCIjcaHBFYGRsRYkJTIzQmJygqOywuH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEE/8QAHREBAQACAgMBAAAAAAAAAAAAAAECAxFRBBIiMf/aAAwDAQACEQMRAD8Az+lSqxskWJPmepSnFMrfwll4bhK+gI6g8vw86CuHPvWnRbTabhw3a5X2dHQpTjQVoTgnKwFAnmRz50AXezzbNKLE1opP8qxulY7g1oPCa/E4LhjP8OUgf7gfrQVHpFZgwERI0OBGYW7qUtbbQScDGBt99A1GPpNWTf46M7JjA/eVKoZjwVLQXnj4bQGc9TWXKT9U16stl4xiJSp1lJWSgEJzsDTVqdTpNnnxYzMhyM54DzYcQ4lJKcHz6GoSSpCwpJKVJOQRsQa1yxXOcqywP2O6U+CgJUl1sagBgEAkc+dTXZDzo99YnV/3rZP/AGoKnh67QuLLSYNzbbckoGHEKwNf9aeue+OVeWW4nDER63PSkpb9baeZLhwdBWnP4FKt663O0OS2wYNsTb5KTlL7QaCgfiDn5164Utqv1p+7KEq5odLS1rOvQkAEAdueaARvMmPery5Oa1LYQEttauoA5nPmTVHcpfiq8Js+wk7kdTRzKs9pY4qXDW2tz1hAeajIWEoBydQIyO2QM457VesW2IwgBHD7OodQ20PrU5h9e1duXlSaJp1zju9sbSlS1BKElRPIAZrvNgyYDiG5bSmlrQHAlQwcHlWzodfZThm0KSOyVtj60D8bKmSLy2pVrUMMJAyoKyNSu1UcSM3x7MiWyHDhMNAsspbW44CokjbYZ7YqE/xtfntvXEoHZLSPqKHqu7JbYYbFyvLvhQUn2GhuuQR0A7dz93wAr4Sg3W9J+0LxNkmKRhtoOFHieZxj2fz/ADe9hDAduVhdMZDT6Izvq2Alw9T2JGoDPcGh6+cZzLiyYkNIhQ8adDf7yh2J6DyHzooszKI/o8Z1pz4hCyO+XRj6UFrFt9tblyILqy5NV70POK9+UnYEK57EEbctqEuJH+JOG5Q0XJ92G4fdOLws/BWRzrt6TAuPcrdLZWpt0oUkLScEaSCN/wDI1ChcYidDXbeIW/Gjup0+sIHto7EjrjuN/jQQf03v5RpVNB8/CSD8gK7u8YvyUMmS3qeQjQpYx7W53+dD8+MIktxlDyH0A5Q6g7LSeR/86VHoFTkk4yScbU1KgVaxMHqHCVriupwtS4rZHnqST+RrKmXVsPIdaVpWg5SexqbcL5crmplUyWtws7t7BOk99uvnQGnpRjurjQJKRlltS0HbkVYI/wCNZ3VnN4iu89gsSp7q2jzTkAH4451WUCpUqVB//9k=" class="jss20"/></div></a><h3 class="jss63">mike polinowski<small>developer blog</small></h3><nav class="jss66"><div><button class="jss44 jss38 jss67" tabindex="0" type="button" aria-label="More" aria-haspopup="true"><span class="jss43"><svg class="jss47" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></span></button></div></nav></aside></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-76200392-4', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-template-js","jsonName":"creating-a-kubernetes-cluster-742","path":"/creating-a-kubernetes-cluster/"};window.dataPath="606/path---creating-a-kubernetes-cluster-742-b0d-cZgLIhMsmmtMakjmFandZpLX0qU";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b0f9e8dda494748b33ac.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-986d14bccc7b328e0848.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-7cebd6bb96627eb11338.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-f3bd3092ef06ddeb6c0e.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-9d5286626cc5915275d7.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c6c403c793a31a475fee.js"],"component---src-pages-search-js":["/component---src-pages-search-js-02b7a9f730db9d15ada3.js"],"pages-manifest":["/pages-manifest-716c78044a96f753f0fd.js"]};/*]]>*/</script><script src="/component---src-templates-post-template-js-7cebd6bb96627eb11338.js" async=""></script><script src="/11-948e9d87a0698a8abc0b.js" async=""></script><script src="/0-5279c26cd4b509e72b04.js" async=""></script><script src="/styles-7a71594915e4c68be36c.js" async=""></script><script src="/app-b0f9e8dda494748b33ac.js" async=""></script><script src="/webpack-runtime-1058079da16173a83d8c.js" async=""></script></body></html>