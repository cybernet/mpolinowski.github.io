{"data":{"post":{"id":"aff6feb0-3512-5010-9a42-7ade5352aa61","html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3713222acff9e6448beb439f037d504/f16ff/11627184673_98a1904863_o.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABTRd5KxJR/8QAFxABAQEBAAAAAAAAAAAAAAAAAAECA//aAAgBAQABBQLljpEyrKq//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/AbGP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECEv/aAAgBAgEBPwGaZo//xAAZEAACAwEAAAAAAAAAAAAAAAAAMQECICH/2gAIAQEABj8C7UUix//EABsQAAICAwEAAAAAAAAAAAAAAAABETEQIVFh/9oACAEBAAE/IdaxIR6LpKbYULH/2gAMAwEAAgADAAAAEIzf/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EA1P/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EElCj//EABwQAAMAAQUAAAAAAAAAAAAAAAABERAhMVGxwf/aAAgBAQABPxCQyJZH6LttcQkEr1G0d3rh/9k='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Shanghai, China\"\n        title=\"\"\n        src=\"/static/a3713222acff9e6448beb439f037d504/78f2b/11627184673_98a1904863_o.jpg\"\n        srcset=\"/static/a3713222acff9e6448beb439f037d504/dce19/11627184673_98a1904863_o.jpg 200w,\n/static/a3713222acff9e6448beb439f037d504/c1413/11627184673_98a1904863_o.jpg 400w,\n/static/a3713222acff9e6448beb439f037d504/78f2b/11627184673_98a1904863_o.jpg 800w,\n/static/a3713222acff9e6448beb439f037d504/ab4c4/11627184673_98a1904863_o.jpg 1200w,\n/static/a3713222acff9e6448beb439f037d504/f16ff/11627184673_98a1904863_o.jpg 1500w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Kubernetes, the open-source system for deploying, managing, and scaling containerized apps, is at the heart of Google Kubernetes Engine. This integration is totally natural. Google developed Kubernetes in-house, and uses it to run its own most popular, global apps. Gmail, YouTube, and even Search run in Kubernetes Engine.</p>\n<p><a href=\"https://kubernetes.io/docs/home/\">Kubernetes Docs</a></p>\n<p>Technologies used:</p>\n<ul>\n<li>\n<p><strong>Kubernetes</strong>: Kubernetes is a manager for cluster of containerized applications. It automates container deployment and scaling containers across clusters of hosts. A Kubernetes cluster is made up of <strong>Nodes</strong> or <strong>Minions</strong> (server instances to which pods are deployed), <strong>Pods</strong> (Pods consist of one or more containers. Those containers are located on the same host machine to facilitate sharing of resources. Pods are assigned unique IPs within each cluster.), <strong>Labels</strong> (key-value-pairs) can be assigned to Pods or Minions to group them, <strong>Selectors</strong> represent queries that are made against labels to resolve matching objects, <strong>Controllers</strong> manage a set of pods and enforce a configuration state and <strong>Containers</strong> (containerized applications/services executed by the docker runtime).</p>\n</li>\n<li>\n<p><strong>Docker</strong>: Docker is the container runtime that we are going to use to run our containerized applications on.</p>\n</li>\n<li>\n<p><strong>ectd</strong>: etcd is a distributed key value store that provides a reliable way to store data across a cluster of machines. Kubernetes uses etcd to exchange messages between master and minion server and reporting on the cluster status.</p>\n</li>\n</ul>\n<!-- TOC -->\n<ul>\n<li><a href=\"#network-time-protocol-service\">Network Time Protocol Service</a></li>\n<li><a href=\"#setting-a-hostname\">Setting a Hostname</a></li>\n<li><a href=\"#install-docker--kuberenetes-on-centos\">Install Docker &#x26; Kuberenetes on CentOS</a></li>\n<li>\n<p><a href=\"#install-and-configure-master-controller\">Install and Configure Master Controller</a></p>\n<ul>\n<li><a href=\"#kubernetes\">Kubernetes</a></li>\n<li><a href=\"#etcd\">etcd</a></li>\n<li><a href=\"#api-server\">API Server</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#install-and-configure-the-minions\">Install and Configure the Minions</a></p>\n<ul>\n<li><a href=\"#kubernetes-1\">Kubernetes</a></li>\n<li><a href=\"#kubelet\">Kubelet</a></li>\n</ul>\n</li>\n<li><a href=\"#testing-kubectl\">Testing Kubectl</a></li>\n<li>\n<p><a href=\"#working-with-docker\">Working with Docker</a></p>\n<ul>\n<li><a href=\"#running-containers\">Running Containers</a></li>\n<li><a href=\"#docker-files\">Docker Files</a></li>\n<li><a href=\"#managing-ports\">Managing Ports</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#working-with-kubernetes\">Working with Kubernetes</a></p>\n<ul>\n<li><a href=\"#pod-definitions\">Pod Definitions</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"network-time-protocol-service\"><a href=\"#network-time-protocol-service\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Network Time Protocol Service</h2>\n<p>NTP- is a protocol which runs over port 123 UDP at Transport Layer and allows computers to synchronize time over networks for an accurate time. This service - by default - is handled by <strong>Chrony.d</strong> on CentOS 7 and higher. But we are going to use the <strong>ntp</strong> package instead. Using the same service everywhere makes sure that every node inside the cluster is set to the same time - or as close as possible.</p>\n<p>You can check if <strong>Chrony.d</strong> is active on your system with the command <code class=\"language-text\">systemctl status chronyd.service</code>, stopping and disabling it with <code class=\"language-text\">systemctl stop chronyd.service</code>, <code class=\"language-text\">systemctl disable chronyd.service</code>.</p>\n<p>To install <strong>ntp</strong> run <code class=\"language-text\">yum install ntp -y</code>. Run <code class=\"language-text\">systemctl enable ntpd &amp;&amp; systemctl start ntpd</code> to activate the NTP service. You can verify that the service is working with <code class=\"language-text\">systemctl status ntpd</code> and <code class=\"language-text\">ntpstat</code>:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/21d0851aafd0e2e68895a64108dc3bbb/69eda/Kubernetes_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 733px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 70.3956343792633%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABzklEQVQoz31T2W7bQAzUF8Taw04cV6gVn7r23pVkpy7Qh/b//6hDWSncFCgwILirHZJDUhnvrEjhqTGq1mNnXK2uh/ZY1GxdL58r+V9kILNL5H0QMcgxSudWu04CXxq5qh5wnp1HsjgqPkbu3AJIIY+eFQ1fVWLTEP+OzQfW9V9k1gf2vRfGlp1507ZsTantrjPrsuVvnShbUXYTWrF9KGfObBy79bIzrbGnwR+NPXjXaLNdnZFfLs+Ex4JfJszkk4ZmNkR2Sfy9F5ckrlEMkXtPcJ7HyQle1FoclDhrURv5WiNcJvaKXnjPviUWA28NbwzHO9S8m7BX5O878bUllHQpNyQ+gww6H5VQBlHBRC10PCoK/6dU2IlA/npWkVHaFGDZMNkxshRg858jt47k3HrUzNEaTBSlwVdWbltEybixdGVBC6QNajGtIeY/Bq4dAnEEtY7gHJuiiEka5GR021N7Fpe48D5/T1gYNC//dUEGficnz64JL0lOa6lnRSOLBpkdXjDrXvpQeCeDZ/ck2JzOEF9bjl5MzFn8xwgz+nZLTzGckvdjeDUux7Zj7QBwKkN9WlbztD/tNvpOSrRlyrJagzN39bn6vBv//Bi/AaHRc60dBNQtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Managing Containers in Kubernetes\"\n        title=\"\"\n        src=\"/static/21d0851aafd0e2e68895a64108dc3bbb/69eda/Kubernetes_01.png\"\n        srcset=\"/static/21d0851aafd0e2e68895a64108dc3bbb/47596/Kubernetes_01.png 200w,\n/static/21d0851aafd0e2e68895a64108dc3bbb/59173/Kubernetes_01.png 400w,\n/static/21d0851aafd0e2e68895a64108dc3bbb/69eda/Kubernetes_01.png 733w\"\n        sizes=\"(max-width: 733px) 100vw, 733px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>The NTP daemon (ntpd) should be considered for systems which are normally kept permanently on. Systems which are required to use broadcast or multicast IP, or to perform authentication of packets with the Autokey protocol, should consider using ntpd.</p>\n<p>Chrony would be considered a best match for the systems which are frequently suspended or otherwise intermittently disconnected from a network (mobile and virtual servers etc).</p>\n<h2 id=\"setting-a-hostname\"><a href=\"#setting-a-hostname\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting a Hostname</h2>\n<p>We now need to make sure that all of our CentOS server can talk to each other via a hostname that is bound to their internal IP address. This can be set in <code class=\"language-text\">nano /etc/hosts</code>:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/56f4fe8fb67471973553363cd893bebb/90d05/Kubernetes_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 13.366336633663364%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhklEQVQI12PgDnPmjnXjTnCHIJ5Ed95oV95IF95wJyCDJ8mDByiY5A4keWPcECjUmS/AkUFRRlNBx0BBVVdBW19eWUdYU19IS19YTU8YSKrqArkgUttAWFNPVFBNVACGBNVFhdQZtLT0tXQNNA0MNUyMjLT0JSS1hCU0ReBIUktEAisCyQIA6rodCHvrcl8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/56f4fe8fb67471973553363cd893bebb/b21dd/Kubernetes_02.png\"\n        srcset=\"/static/56f4fe8fb67471973553363cd893bebb/2d451/Kubernetes_02.png 200w,\n/static/56f4fe8fb67471973553363cd893bebb/06807/Kubernetes_02.png 400w,\n/static/56f4fe8fb67471973553363cd893bebb/b21dd/Kubernetes_02.png 800w,\n/static/56f4fe8fb67471973553363cd893bebb/90d05/Kubernetes_02.png 808w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>Add all server that you want to connect by their local IP and assign a host name, by which you want to call them - add those lines to all your server’s host files:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">192.168.2.110 in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>master\n192.168.2.111 in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>minion1</code></pre></div>\n<p>You can test if the hostname is used by pinging it:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/36520959f255d73bcc4560e6983e811c/9d423/Kubernetes_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.06475716064757%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAfklEQVQI112NTQ6CMBCFuQAE5jW6khgFTaEdpjNtIN7/YMJGE5Ivb/P+qm7L3VZoze2a+0/JRbWYbmZZXRCaBY+IZ8TI6Gd38e76pyJOFBOCYJJWtQ5Sx9T4pRmZkh7uJMRKahj4XIaXI1SMzMAJuybdt9x7wT3gxe52PvzxBVf/GNAIDOjBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/36520959f255d73bcc4560e6983e811c/b21dd/Kubernetes_03.png\"\n        srcset=\"/static/36520959f255d73bcc4560e6983e811c/2d451/Kubernetes_03.png 200w,\n/static/36520959f255d73bcc4560e6983e811c/06807/Kubernetes_03.png 400w,\n/static/36520959f255d73bcc4560e6983e811c/b21dd/Kubernetes_03.png 800w,\n/static/36520959f255d73bcc4560e6983e811c/9d423/Kubernetes_03.png 803w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h2 id=\"install-docker--kuberenetes-on-centos\"><a href=\"#install-docker--kuberenetes-on-centos\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Docker &#x26; Kuberenetes on CentOS</h2>\n<p>First we need to add the repository to pull the Docker code from - type <code class=\"language-text\">nano /etc/yum.repos.d/virt7-docker-common-release.repo</code> and add:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">[</span>virt7<span class=\"token punctuation\">-</span>docker<span class=\"token punctuation\">-</span>common<span class=\"token punctuation\">-</span>release<span class=\"token punctuation\">]</span>\nname=virt7<span class=\"token punctuation\">-</span>docker<span class=\"token punctuation\">-</span>common<span class=\"token punctuation\">-</span>release\nbaseurl=http<span class=\"token punctuation\">:</span>//cbs.centos.org/repos/virt7<span class=\"token punctuation\">-</span>docker<span class=\"token punctuation\">-</span>common<span class=\"token punctuation\">-</span>release/x86_64/os/\ngpgcheck=0</code></pre></div>\n<p>Then install <a href=\"https://www.docker.com/\">Docker</a>, <a href=\"https://kubernetes.io\">Kubernetes</a> and <a href=\"https://coreos.com/etcd/docs/latest/\">etcd</a> on the master server as well as all your hosts:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum update\nyum -y <span class=\"token function\">install</span> --enablerepo<span class=\"token operator\">=</span>virt7-docker-common-release kubernetes docker etcd\nsystemctl <span class=\"token function\">enable</span> docker \nsystemctl start docker</code></pre></div>\n<h2 id=\"install-and-configure-master-controller\"><a href=\"#install-and-configure-master-controller\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install and Configure Master Controller</h2>\n<h3 id=\"kubernetes\"><a href=\"#kubernetes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes</h3>\n<p>Let’s start with editing the configuration file for Kubernetes in <code class=\"language-text\">nano /etc/kubernetes/config</code>. We need to add two information:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">KUBE_MASTER=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>master=http<span class=\"token punctuation\">:</span>//in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>master<span class=\"token punctuation\">:</span>8080\"\n\nKUBE_ETCD_SERVERS=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>etcd<span class=\"token punctuation\">-</span>servers=http<span class=\"token punctuation\">:</span>//in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>master<span class=\"token punctuation\">:</span>2379\"</code></pre></div>\n<p>The address / hostname of our master server and the etcd server - which, in our case, also resides on the master server.</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2dc2d6a2af558d566255e417030e4822/04f61/Kubernetes_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.69565217391305%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABS0lEQVQoz22QaU7DMBCFc4EExeM2SZc0TSuwY4+XtBSBQHST+MUuAb3/RRiD1CIR6ZP1PPJ7M+Po7OE2edvEr5v4cxcf9vHXPv7YJi/r5HmdPN4nT2si/tiF+pHDPnnfUj0CaWGGfKKh0jDRPJe8J3jR8EwGTWSh0mMXf+EgOBcRU475lrmWoQ/aeJhqqDFkTTEIShyrU1Z+Co1gbthiwZYLZj1znq5AT7kI/X/py0DWQcSETe9W6c0lWy3DCqXmIwVESegQdBy+w6wc+BZcCyTQB5QLc9K0RKl6fUF0m1PtU9emNixMP8cI2rNoYNjAqIFBQ83ZUHWbB+gy53P0ubS5ckEYT6KYYTHHotZFjeNK9zvN18qi9U4ai84a9yOsVZZOJ9CVja1UW6phLtl/8xVa5T22LVKKMKaxQaDDczRTpWu9qtQsk9DV+Rt4OFJ2uUJi9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/2dc2d6a2af558d566255e417030e4822/b21dd/Kubernetes_04.png\"\n        srcset=\"/static/2dc2d6a2af558d566255e417030e4822/2d451/Kubernetes_04.png 200w,\n/static/2dc2d6a2af558d566255e417030e4822/06807/Kubernetes_04.png 400w,\n/static/2dc2d6a2af558d566255e417030e4822/b21dd/Kubernetes_04.png 800w,\n/static/2dc2d6a2af558d566255e417030e4822/04f61/Kubernetes_04.png 805w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"etcd\"><a href=\"#etcd\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>etcd</h3>\n<p>The etcd configuration can be found in <code class=\"language-text\">nano /etc/etcd/etcd.conf</code>. Here we need to change the following lines:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">ETCD_LISTEN_CLIENT_URLS=\"http<span class=\"token punctuation\">:</span>//0.0.0.0<span class=\"token punctuation\">:</span>2379\"\nETCD_ADVERTISE_CLIENT_URLS=\"http<span class=\"token punctuation\">:</span>//0.0.0.0<span class=\"token punctuation\">:</span>2379\"</code></pre></div>\n<p>Changing those lines from <code class=\"language-text\">http://localhost:2379</code> to <code class=\"language-text\">http://0.0.0.0:2379</code> so we accept messages from every network interface.</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6135059293665503ff01c337bf236cc/b2001/Kubernetes_05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.983930778739186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOElEQVQoz43Q0U6DMBQGYF6A0pbiFB1jwqClUBjQFnRjMGPihZo49f1fRYheKjP5cpJe/CenvwGf9uDUW689OA3g/Qg+juBtmJ4vB/B8GKd5GszP468Ms5WglVYo0HUClxx6KfQ4dBNMKPlmx38xuKrie0k7xeqKiS3jOc2KVBS+z7HDyOUcY93Uq0GP1mIbLHngJqPQTdxLZi8YmWUAJc2DHoGdAo2EYYZwjBbnk1MYtxL1DXps0UODO23LinjcWTDnP2GrqoCWQNVWXgJZW2UFNwIRihxKLs6FWVHSqqT5lkUZiwTbZCxIx0ljYQeZfcNnVhiBrv1e+0MzNncrioCKYMVDb/LT6lxh482dnuyUlRYwEjAUMMjgOiWrdP5yA2uJOo13Cu0VvpNY1STKx86Im5CrM3/+AnQWWc1BPQLfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/f6135059293665503ff01c337bf236cc/b21dd/Kubernetes_05.png\"\n        srcset=\"/static/f6135059293665503ff01c337bf236cc/2d451/Kubernetes_05.png 200w,\n/static/f6135059293665503ff01c337bf236cc/06807/Kubernetes_05.png 400w,\n/static/f6135059293665503ff01c337bf236cc/b21dd/Kubernetes_05.png 800w,\n/static/f6135059293665503ff01c337bf236cc/b2001/Kubernetes_05.png 809w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"api-server\"><a href=\"#api-server\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Server</h3>\n<p>The Kubernetes API Server configuration can be found in <code class=\"language-text\">nano /etc/kubernetes/apiserver</code> - the following lines need to be changed:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">KUBE_API_ADDRESS=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>address=0.0.0.0\"\nKUBE_API_PORT=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>port=8080\"\nKUBELET_PORT=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>kubelet<span class=\"token punctuation\">-</span>port=10250\"\n<span class=\"token comment\"># KUBE_ADMISSION_CONTROL=\"--admission-control=NamespaceLifecycle,NamespaceExists,LimitRanger,SecurityContextD$</span></code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5d726ae50059db8e967540a478007432/9f07b/Kubernetes_06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.24875621890548%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPklEQVQoz32R204CMRCG+wJd2W0LKwQU2QPb7bTTrhDvAOVSSdTEw/u/iFOI6AWQfJn8PfydQ1nyuuFvm+T9kX9t+feWfz7RTrJbJy+r5HkV427NP2j/BCybOznSYqTlUMtBI3uVTCuV1SrGSola9SrFy5MwVYCagaqsKiyJfmEJUVkxg0gBctzKXMvrE7ClcWgxECV4cKgdFEZOIRai5rLfxHLOwB4AO4sLbe8buwA3nRg1acWkjcf5ngvmJaBznhJ6i1hDNzPFuE0HjaLMF53RrJwX6KUPsnHCeFpKg1ntxNxRz/HSucrzhnHsMgxp16UYaPIZ+Gi7MeLWiDugKKkFav7Q/1H0o2AG8MoHEUKGXmgnWsyamFNQcpo5Tb7cQ4KeI0EvHigty9FTWrL9dUjiev/tw99fOerhP0b6BxX4ULgQJVmZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/5d726ae50059db8e967540a478007432/b21dd/Kubernetes_06.png\"\n        srcset=\"/static/5d726ae50059db8e967540a478007432/2d451/Kubernetes_06.png 200w,\n/static/5d726ae50059db8e967540a478007432/06807/Kubernetes_06.png 400w,\n/static/5d726ae50059db8e967540a478007432/b21dd/Kubernetes_06.png 800w,\n/static/5d726ae50059db8e967540a478007432/9f07b/Kubernetes_06.png 804w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>We now have to make sure that the services on the <strong>Master Server</strong> are started in a particular order:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl <span class=\"token function\">enable</span> etcd kube-apiserver kube-controller-manager kube-scheduler\nsystemctl start etcd kube-apiserver kube-controller-manager kube-scheduler\nsystemctl status etcd kube-apiserver kube-controller-manager kube-scheduler <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"(running)\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> -l</code></pre></div>\n<p>The output of the last command should be 4 - as we wanted to start four services in total.</p>\n<h2 id=\"install-and-configure-the-minions\"><a href=\"#install-and-configure-the-minions\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install and Configure the Minions</h2>\n<h3 id=\"kubernetes-1\"><a href=\"#kubernetes-1\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes</h3>\n<p>Let’s start with editing the configuration file for Kubernetes in <code class=\"language-text\">nano /etc/kubernetes/config</code>. As before we need to add two lines:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">KUBE_MASTER=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>master=http<span class=\"token punctuation\">:</span>//in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>master<span class=\"token punctuation\">:</span>8080\"\n\nKUBE_ETCD_SERVERS=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>etcd<span class=\"token punctuation\">-</span>servers=http<span class=\"token punctuation\">:</span>//in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>master<span class=\"token punctuation\">:</span>2379\"</code></pre></div>\n<p>The address / hostname of our master server and the etcd server - which, in our case, also resides on the master server.</p>\n<h3 id=\"kubelet\"><a href=\"#kubelet\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubelet</h3>\n<p>The Kubelet configuration can be found in <code class=\"language-text\">nano /etc/kubernetes/kubelet</code> - the following lines need to be changed:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">KUBELET_ADDRESS=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>address=0.0.0.0\"\nKUBELET_PORT=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>port=10250\"\nKUBELET_HOSTNAME=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>hostname<span class=\"token punctuation\">-</span>override=in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>minion1\"\nKUBELET_API_SERVER=\"<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>api<span class=\"token punctuation\">-</span>servers=http<span class=\"token punctuation\">:</span>//in<span class=\"token punctuation\">-</span>centos<span class=\"token punctuation\">-</span>master<span class=\"token punctuation\">:</span>8080\"\n<span class=\"token comment\"># KUBELET_POD_INFRA_CONTAINER=\"--pod-infra-container-image=registry.access.redhat.com/rhel7/pod-infrastructur$</span></code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/25cf61ac96d2e33e10c6aa5588c51eab/05db0/Kubernetes_07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 39.33002481389578%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLUlEQVQY023PW0vDMBgG4N67g13Sdk3X9TBtm+TLqd3ADhE3duOFKA7R/f8/YqKsThAeXt6LhJfPGz89jI670XF/dTqMTgeX7/vJ627y8ug8uxx/HH59OpM398ALKxmuRJRBtORRyuYps4lxjYNmEKA6wOfuV8F1Fcxqy9sKve7ajTEbrjbadFILKmcF4AzwEnBuk6OUowxQKSwcMzynP7xOaa6NYApAt9qkKzHNwbcI82OGQhqEFA/seEQHnpS6VqZp24apRmnKJKWS2i40SH2zYNOQDlPO5ed7ru646i0m+1r2FfQl3+a8L2Fb8vWtgIKHQYMu98+8TuhYt0QYIg0xLWE6ySDJISmctBRpCe7gHFAhUPF9ue256x5Rxjetz9QsYQ75mwtX8L8I+wLMXUUWGDjdQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/25cf61ac96d2e33e10c6aa5588c51eab/b21dd/Kubernetes_07.png\"\n        srcset=\"/static/25cf61ac96d2e33e10c6aa5588c51eab/2d451/Kubernetes_07.png 200w,\n/static/25cf61ac96d2e33e10c6aa5588c51eab/06807/Kubernetes_07.png 400w,\n/static/25cf61ac96d2e33e10c6aa5588c51eab/b21dd/Kubernetes_07.png 800w,\n/static/25cf61ac96d2e33e10c6aa5588c51eab/05db0/Kubernetes_07.png 806w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>We now have to make sure that the services on the <strong>Minion Server</strong> are started in this particular order:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl <span class=\"token function\">enable</span> kube-proxy kubelet docker\nsystemctl start kube-proxy kubelet docker\nsystemctl status kube-proxy kubelet docker <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"(running)\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> -l</code></pre></div>\n<p>The output of the last command should be 3 - as we wanted to start three services in total. You can verify that docker is running with <code class=\"language-text\">docker --version</code> or <code class=\"language-text\">docker images</code>. To verify that docker is working, let’s pull and run the <code class=\"language-text\">hello-world</code> image:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker pull hello-world\ndocker run hello-world</code></pre></div>\n<p>The image will run, print it’s hello world to your console and exit again - that means everything is in perfect order:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b95f6fc4e3b35901142a47b7b5f15d1/0cd32/Kubernetes_08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 54.613466334164585%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTklEQVQoz3VR20rDQBDNF4i7s2lrqiRpU3PbazZpqyL4JPjk//+NZ2KLaCscwgTmzLlsIsYoXiYa402M2338DP7d+Q/rTd5nWUfLVt11tO7VqlPzrFYtDzMSOUXxPMlpFIcxHeOm94VmVMZnpSaspg1jAfzQTmRxHMVxEk8T9OXrPo2RMUUFRy5Q56lxtLNUO5XrP/xE2iDDANy6kHduaKyrjattbMy60GJjCBy4zX4ZPpM7L13ACaotVVZujXy0DPyWhpFrKrS676/YpsogtjT+W1/6MGOQMeIubQxoLA7lS7KCt7eDHGYmviawEUB7PoFhjJy8MldsqwfNS8yM3E3jZOtOJfFgeQazvCIO25a0p96z1JycWy004Z22BrY5dqEvPc+FtShsODF7hNTcUDmXhAGZcWvZXkUi4dN6BOO0eLbW086p9LyxaP9jAl9yYFbWZkWWRAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/6b95f6fc4e3b35901142a47b7b5f15d1/b21dd/Kubernetes_08.png\"\n        srcset=\"/static/6b95f6fc4e3b35901142a47b7b5f15d1/2d451/Kubernetes_08.png 200w,\n/static/6b95f6fc4e3b35901142a47b7b5f15d1/06807/Kubernetes_08.png 400w,\n/static/6b95f6fc4e3b35901142a47b7b5f15d1/b21dd/Kubernetes_08.png 800w,\n/static/6b95f6fc4e3b35901142a47b7b5f15d1/0cd32/Kubernetes_08.png 802w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h2 id=\"testing-kubectl\"><a href=\"#testing-kubectl\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing Kubectl</h2>\n<p>kubectl is the control function for Kubernetes. A list of commands that you can try on your master server:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get nodes  //this should list all your minions\nkubectl describe node in-centos-minion  //get info <span class=\"token keyword\">for</span> a specific node</code></pre></div>\n<h2 id=\"working-with-docker\"><a href=\"#working-with-docker\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Working with Docker</h2>\n<p>Get information about your Docker installation with <code class=\"language-text\">docker version</code> and <code class=\"language-text\">docker info</code> - the latter can tell you how many images you downloaded, how many of the are running and how much space and memory you have left on your host system. Further information - e.g. on containers and volumes - can be found in <code class=\"language-text\">cd /var/lib/docker</code>.</p>\n<h3 id=\"running-containers\"><a href=\"#running-containers\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Running Containers</h3>\n<p>Ready-build containers can be downloaded from the <a href=\"https://hub.docker.com/\">DockerHub</a> - an example is the official image for <a href=\"https://hub.docker.com/_/ubuntu\">Ubuntu</a>. Requests for specific versions can be added to the pull command. E.g. the following command pulls the Ubuntu 18.04 Bionic image:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker pull ubuntu:bionic</code></pre></div>\n<p>All available versions of the selected image are listed on the corresponding DockerHub page. Running this command will then build the image according to a <a href=\"https://github.com/tianon/docker-brew-ubuntu-core/blob/185c5e23efaa8c7c857683e6dcf4d886acda3cba/bionic/Dockerfile\">Docker File</a>. Alternatively, you can also use the search command to find all available versions:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker search ubuntu</code></pre></div>\n<p>To build an container using that image the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker run -t -i ubuntu:bionic /bin/bash</code></pre></div>\n<p>The <code class=\"language-text\">-i</code> makes it interactive and the <code class=\"language-text\">-t</code> runs the output on your terminal - to run the image in the background instead use <code class=\"language-text\">-d</code> for detached mode. A full list of the <a href=\"https://docs.docker.com/engine/reference/commandline/run/#options\">command options</a> can be found in the docker docs. Adding <code class=\"language-text\">/bin/bash</code> is the command you want Docker to run inside the image, which in this case will attach you as root user to the Ubuntu OS - you can verify with <code class=\"language-text\">dh -f</code> or <code class=\"language-text\">ps aux</code>.</p>\n<p>Typing <code class=\"language-text\">exit</code> will both exit you out of the container and stop it as well. You can verify with <code class=\"language-text\">docker ps</code> that no image is running anymore.</p>\n<p>To restart the container run <code class=\"language-text\">docker ps -a</code> to find out the name that was given to the container - in this case it was <strong>suspicious_lovelace</strong> - then type <code class=\"language-text\">docker restart suspicious_lovelace</code> to run it in detached mode. And <code class=\"language-text\">docker attach suspicious_lovelace</code> when you need to reconnect your terminal.</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e46fd98d894b4d3f9bb44ac001a9b7b1/04f61/Kubernetes_09.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 46.58385093167702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABVUlEQVQoz31R21KDMBDlB6pNNkKBtpSWAgnJLglQR63ji///TW7q5cFxnDkPGebc9pDIeRLPizxj2tO4hGVvzmm/PjrV0UOm1cbIjtRuUKmGvQX+npuIIiKRZpSjV3nklU9L1eLhYPOO7jWtWZlp0AQtMhUOFnqCM8LJRRxcIjWLA9unmnwI+DihJdu6vnHuaOvSCA6prOIW/OAK2+gSwx/6RFxm8fYopil1/tXSdafrTFcNVh0ec1MURjYxlqnASnZJdTSqY/8EGgeDF8usOixD2O2HMuuL2haayq3JMs1zqJv+82aov1tsdCLDJK6XNfot+nccp4HoE3b0BvelkRyVR2rUbOI08XFDIi+LNBSdMi2O7s75VUsr9CsKqxYF19voH/YvJHKeoUGoBj6JVwX0ivf0AaZJvizQ0teRf4qZBDzDLRlOGPW1k8MIzssQ+D/9I/4A4HxHIbE8zgYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/e46fd98d894b4d3f9bb44ac001a9b7b1/b21dd/Kubernetes_09.png\"\n        srcset=\"/static/e46fd98d894b4d3f9bb44ac001a9b7b1/2d451/Kubernetes_09.png 200w,\n/static/e46fd98d894b4d3f9bb44ac001a9b7b1/06807/Kubernetes_09.png 400w,\n/static/e46fd98d894b4d3f9bb44ac001a9b7b1/b21dd/Kubernetes_09.png 800w,\n/static/e46fd98d894b4d3f9bb44ac001a9b7b1/04f61/Kubernetes_09.png 805w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>To start a new container directly in detached mode run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker run -tid ubuntu:bionic /bin/bash</code></pre></div>\n<p>You can see that this spun up a second container from the same image:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4c1744c4056c52b18511feccd5558de8/9d423/Kubernetes_10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.1892901618929%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAlUlEQVQI1yWOWRLCMAxDewMgdlMCdAEa0qTOgssw/eX+l8KFP2lG0lMFhfefFcf0tHF5M11JKacGgilj4/HolUvQEx4DngPYhKeAJqD2qKcKXFYL40A77ev11S58s9FM6RALdrP0lc/wSDAm7Aj+2ia4zNDOlTAVFeypNkEXbpgbl+tfCI2XMtyjAAQrQLmzWRu3iZ6+n0sX1t/L8foAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/4c1744c4056c52b18511feccd5558de8/b21dd/Kubernetes_10.png\"\n        srcset=\"/static/4c1744c4056c52b18511feccd5558de8/2d451/Kubernetes_10.png 200w,\n/static/4c1744c4056c52b18511feccd5558de8/06807/Kubernetes_10.png 400w,\n/static/4c1744c4056c52b18511feccd5558de8/b21dd/Kubernetes_10.png 800w,\n/static/4c1744c4056c52b18511feccd5558de8/9d423/Kubernetes_10.png 803w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>You can get more information about the container with the inspect command followed by the name of the container you want to inspect:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker inspect flamboyant_lamarr\ndocker inspect flamboyant_lamarr <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> IP</code></pre></div>\n<p>The second command will only show you information related to the IP configuration of the container:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6864d419e06eed498d40c9fe551280cb/f206b/Kubernetes_11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 28.99628252788104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAr0lEQVQY042NWw6CMBBFWYGBzrRFIJGAgbY8yqOVYjDG/W9KDPGPiJNzMz9z7niY1VC0tGh13y96WGdsu7FsTF6bS2Xz+hopwiTyHbw1FIRfd/Q5qbsjLwfDgEIzLhn7sKt95VAiilB1ycOFk/XtSEoNkQIuN37KXBIq8lTzyaIxRGjIGoyqTyk/wNtWwERCZeGm02xBdpA3GCtk/8nrHY3Veb6liwsWC6LFSB1+fgN6Bi0fVZqVgwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/6864d419e06eed498d40c9fe551280cb/b21dd/Kubernetes_11.png\"\n        srcset=\"/static/6864d419e06eed498d40c9fe551280cb/2d451/Kubernetes_11.png 200w,\n/static/6864d419e06eed498d40c9fe551280cb/06807/Kubernetes_11.png 400w,\n/static/6864d419e06eed498d40c9fe551280cb/b21dd/Kubernetes_11.png 800w,\n/static/6864d419e06eed498d40c9fe551280cb/f206b/Kubernetes_11.png 807w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"docker-files\"><a href=\"#docker-files\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker Files</h3>\n<p>A Docker File is a recipe for an Docker image. So far we only pulled predefined images from the DockerHub - writing our own Dockerfile allows us to make changes to those images. Lets start by creating a folder in your home directory named <strong>RunAsUser</strong> and add a Dockerfile <code class=\"language-text\">nano Dockerfile</code> with the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"># Dockerfile based on the latest CentOS 7 image - non-privileged user entry\n\nFROM centos:latest\n\nMAINTAINER mpolinowski@gmail.com\n\nRUN useradd -ms /bin/bash user \n\nUSER user</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/627acca4212bac2bd0558c42e5958602/b21dd/Kubernetes_12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 17.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAjUlEQVQI12PgjXbliXfnSfbgTvHkTvYEkjxxbjxRrrzhzjwxriBBkLgHUAFPgjsUJbrzxLrxBjsyCCvrCKvpichoiUhpiUhrCctqiwCRnDaQLSKrBWSARIBsSU1RIXVkJCKiwSCsYwBEQloGwqp6Igo6IuKaImLYEFBcAhWJazKA7ARKgK0VkdSCiBKJAAG7Il2db/JhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/627acca4212bac2bd0558c42e5958602/b21dd/Kubernetes_12.png\"\n        srcset=\"/static/627acca4212bac2bd0558c42e5958602/2d451/Kubernetes_12.png 200w,\n/static/627acca4212bac2bd0558c42e5958602/06807/Kubernetes_12.png 400w,\n/static/627acca4212bac2bd0558c42e5958602/b21dd/Kubernetes_12.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>The Dockerfile can now be used to build a Docker image with the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker build -t centos7/nonroot:v1 /root/docker/builds/RunAsUser\ndocker run -ti centos7/nonroot:v1 /bin/bash</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb33d1724493ff198a39f1c17c9c1050/3e28e/Kubernetes_13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 33.20987654320987%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA60lEQVQY03WO0U6EMBBF+YKFDi2sGxEFt1BoO21pQbLqk///TZbNZjVGkpObeZhzZxKyeghT9uYfncPJokQUiMqYXptWmefRvCrDVUzstD+r+iigFKwUtBQJoCVrgMUTgYcODxzTVqXVmLF+oxC3IUL7lPVw1ehNNo68z/F4zjU9axqzUexBsGKr/8vxx7zKgwHrQJm8x82vRlpLehp+L+2RgLUk/rx44BpeFDxJaFRejXkp7uzLfiKXeZO1ZeiK+DPXRS3LUtxhe3L2tZLPOf2Y2WVeJhe4DK0MnQ5nGRrpW7l2qj0NpPin4htkITbrOPkaNAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/cb33d1724493ff198a39f1c17c9c1050/b21dd/Kubernetes_13.png\"\n        srcset=\"/static/cb33d1724493ff198a39f1c17c9c1050/2d451/Kubernetes_13.png 200w,\n/static/cb33d1724493ff198a39f1c17c9c1050/06807/Kubernetes_13.png 400w,\n/static/cb33d1724493ff198a39f1c17c9c1050/b21dd/Kubernetes_13.png 800w,\n/static/cb33d1724493ff198a39f1c17c9c1050/3e28e/Kubernetes_13.png 810w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>The container is build, the user <strong>user</strong> created and you are connected to the container with the non-privileged account. But we can still connect as the root user. First exit the container and run <code class=\"language-text\">docker ps -a</code> to find out the name that was assigned to it - in this case it was <strong>optimistic_swirles</strong>. Then start the container up again with <code class=\"language-text\">docker start optimistic_swirles</code>. Then run:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker exec -u 0 -it optimistic_swirles /bin/bash</code></pre></div>\n<p>This command connects to the referenced container with the user with id=0 (root) and starts the bash terminal:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/573fe4c785fd90b7789a44e1a161697e/9d423/Kubernetes_14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.438356164383563%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAl0lEQVQI1x3NXRKDIAwEYE8gNgR0qvW3OqQhIGLvf7VqZ/ZhX3a/okuHPTOkQ+U8y542CZOPLYXRh+WfgeMi1DMaQuPQEtaE9i6FObL+nhCS3mIlqZykaln1rFysLFXGlYuowT8s6Y7hLfj8XDM9et1yAVsESbAfQBHOrNeAvcfLcdF0bC5nFlyDfnHTfupFYJJbvi4a+gHemxfJi4AWBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/573fe4c785fd90b7789a44e1a161697e/b21dd/Kubernetes_14.png\"\n        srcset=\"/static/573fe4c785fd90b7789a44e1a161697e/2d451/Kubernetes_14.png 200w,\n/static/573fe4c785fd90b7789a44e1a161697e/06807/Kubernetes_14.png 400w,\n/static/573fe4c785fd90b7789a44e1a161697e/b21dd/Kubernetes_14.png 800w,\n/static/573fe4c785fd90b7789a44e1a161697e/9d423/Kubernetes_14.png 803w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>Another advantage is, that you can now exit the container without stoping it - it will continue running with the default non-privileged <strong>user</strong>.</p>\n<h3 id=\"managing-ports\"><a href=\"#managing-ports\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Managing Ports</h3>\n<p>Docker allows us to expose ports to access services provided by applications inside the container. Let’s pull the <a href=\"https://hub.docker.com/_/nginx\">NGINX</a> image and try to access the default landing page:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker pull nginx\ndocker run -d nginx:latest</code></pre></div>\n<p>We can now run <code class=\"language-text\">docker ps</code> to find out the assigned container name (<strong>lucid_lichterman</strong>) and run <code class=\"language-text\">docker inspect lucid_lichterman</code> to find out the IP address the container is using (<strong>172.17.0.2</strong>). If you have the <a href=\"http://elinks.or.cz/\">elinks text browser</a> istalled, you can run <code class=\"language-text\">elinks http://172.17.0.2</code> to see the NGINX greeting page:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f0b8b82fe9b06be3a6504980f98090d7/05db0/Kubernetes_15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 21.960297766749378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAzElEQVQI12Pw9I2OiM0Ki04Pj8kEoojYzIi4rNCojLTs8sy8ytyimsS0wvCYDKAaiGxIZKpfcHxgaJJ/SCKDiISWkpqFkpq5pIyeBBhJyxlISOvIyBsoqJgqqlnIKJrIyBlIgsT1JWX1JGX1ZRQMgUhYTINBRt5Q39hF28BB19BRXdtaW89eU89eXsNWXtUSqFpKx1VS31NUQktUQhNIiohrQpCoOFBEi0FUSl9C0VJCwUxS0VxC0UpC1hBoraiUrqikDkiRpDaEgRUBAPtgLzHDoF0BAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Red Hat Certified Specialist in Containerized Application Development\"\n        title=\"\"\n        src=\"/static/f0b8b82fe9b06be3a6504980f98090d7/b21dd/Kubernetes_15.png\"\n        srcset=\"/static/f0b8b82fe9b06be3a6504980f98090d7/2d451/Kubernetes_15.png 200w,\n/static/f0b8b82fe9b06be3a6504980f98090d7/06807/Kubernetes_15.png 400w,\n/static/f0b8b82fe9b06be3a6504980f98090d7/b21dd/Kubernetes_15.png 800w,\n/static/f0b8b82fe9b06be3a6504980f98090d7/05db0/Kubernetes_15.png 806w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>But you cannot reach the page over <code class=\"language-text\">elinks http://localhost</code> because the internal port 80 was not exposed to be reachable from outside the Docker network. Let’s stop the container <code class=\"language-text\">docker stop lucid_lichterman</code> and run it again - but this time we are going to forward the internal port 80 to the external port 8081:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker run -d -p 8081:80 nginx:latest</code></pre></div>\n<p>The website is no reachable via <code class=\"language-text\">elinks http://localhost:8081</code> on our host machine as well as on the local IP address on the local network - e.g. over <em><a href=\"http://192.168.2.111:8081\">http://192.168.2.111:8081</a></em>.</p>\n<h2 id=\"working-with-kubernetes\"><a href=\"#working-with-kubernetes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Working with Kubernetes</h2>\n<h3 id=\"pod-definitions\"><a href=\"#pod-definitions\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pod Definitions</h3>\n<p>Create a folder in your home directory on your master server and add <code class=\"language-text\">nano nginx.yaml</code> inside. This file is going to create a pod with a single container that runs the NGINX image v1.7.9:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n   <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.7.9\n   <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n   <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<p>We can now use <strong>kubectl</strong> to create the pod based on our configuration file:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create -f /root/docker/builds/nginx.yaml</code></pre></div>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/a3713222acff9e6448beb439f037d504/f16ff/11627184673_98a1904863_o.jpg","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 51.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABTRd5KxJR/8QAFxABAQEBAAAAAAAAAAAAAAAAAAECA//aAAgBAQABBQLljpEyrKq//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/AbGP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECEv/aAAgBAgEBPwGaZo//xAAZEAACAwEAAAAAAAAAAAAAAAAAMQECICH/2gAIAQEABj8C7UUix//EABsQAAICAwEAAAAAAAAAAAAAAAABETEQIVFh/9oACAEBAAE/IdaxIR6LpKbYULH/2gAMAwEAAgADAAAAEIzf/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/EA1P/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EElCj//EABwQAAMAAQUAAAAAAAAAAAAAAAABERAhMVGxwf/aAAgBAQABPxCQyJZH6LttcQkEr1G0d3rh/9k='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Shanghai, China","title":"","src":"/static/a3713222acff9e6448beb439f037d504/78f2b/11627184673_98a1904863_o.jpg","srcSet":["/static/a3713222acff9e6448beb439f037d504/dce19/11627184673_98a1904863_o.jpg 200w","/static/a3713222acff9e6448beb439f037d504/c1413/11627184673_98a1904863_o.jpg 400w","/static/a3713222acff9e6448beb439f037d504/78f2b/11627184673_98a1904863_o.jpg 800w","/static/a3713222acff9e6448beb439f037d504/ab4c4/11627184673_98a1904863_o.jpg 1200w","/static/a3713222acff9e6448beb439f037d504/f16ff/11627184673_98a1904863_o.jpg 1500w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kubernetes, the open-source system for deploying, managing, and scaling containerized apps, is at the heart of Google Kubernetes Engine. This integration is totally natural. Google developed Kubernetes in-house, and uses it to run its own most popular, global apps. Gmail, YouTube, and even Search run in Kubernetes Engine."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/home/"},"children":[{"type":"text","value":"Kubernetes Docs"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Technologies used:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Kubernetes"}]},{"type":"text","value":": Kubernetes is a manager for cluster of containerized applications. It automates container deployment and scaling containers across clusters of hosts. A Kubernetes cluster is made up of "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Nodes"}]},{"type":"text","value":" or "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Minions"}]},{"type":"text","value":" (server instances to which pods are deployed), "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Pods"}]},{"type":"text","value":" (Pods consist of one or more containers. Those containers are located on the same host machine to facilitate sharing of resources. Pods are assigned unique IPs within each cluster.), "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Labels"}]},{"type":"text","value":" (key-value-pairs) can be assigned to Pods or Minions to group them, "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Selectors"}]},{"type":"text","value":" represent queries that are made against labels to resolve matching objects, "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Controllers"}]},{"type":"text","value":" manage a set of pods and enforce a configuration state and "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Containers"}]},{"type":"text","value":" (containerized applications/services executed by the docker runtime)."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Docker"}]},{"type":"text","value":": Docker is the container runtime that we are going to use to run our containerized applications on."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ectd"}]},{"type":"text","value":": etcd is a distributed key value store that provides a reliable way to store data across a cluster of machines. Kubernetes uses etcd to exchange messages between master and minion server and reporting on the cluster status."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"comment","value":" TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#network-time-protocol-service"},"children":[{"type":"text","value":"Network Time Protocol Service"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#setting-a-hostname"},"children":[{"type":"text","value":"Setting a Hostname"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-docker--kuberenetes-on-centos"},"children":[{"type":"text","value":"Install Docker & Kuberenetes on CentOS"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-and-configure-master-controller"},"children":[{"type":"text","value":"Install and Configure Master Controller"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes"},"children":[{"type":"text","value":"Kubernetes"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#etcd"},"children":[{"type":"text","value":"etcd"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#api-server"},"children":[{"type":"text","value":"API Server"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-and-configure-the-minions"},"children":[{"type":"text","value":"Install and Configure the Minions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes-1"},"children":[{"type":"text","value":"Kubernetes"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubelet"},"children":[{"type":"text","value":"Kubelet"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#testing-kubectl"},"children":[{"type":"text","value":"Testing Kubectl"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#working-with-docker"},"children":[{"type":"text","value":"Working with Docker"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#running-containers"},"children":[{"type":"text","value":"Running Containers"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#docker-files"},"children":[{"type":"text","value":"Docker Files"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#managing-ports"},"children":[{"type":"text","value":"Managing Ports"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#working-with-kubernetes"},"children":[{"type":"text","value":"Working with Kubernetes"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#pod-definitions"},"children":[{"type":"text","value":"Pod Definitions"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"comment","value":" /TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"network-time-protocol-service"},"children":[{"type":"element","tagName":"a","properties":{"href":"#network-time-protocol-service","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Network Time Protocol Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"NTP- is a protocol which runs over port 123 UDP at Transport Layer and allows computers to synchronize time over networks for an accurate time. This service - by default - is handled by "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Chrony.d"}]},{"type":"text","value":" on CentOS 7 and higher. But we are going to use the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ntp"}]},{"type":"text","value":" package instead. Using the same service everywhere makes sure that every node inside the cluster is set to the same time - or as close as possible."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can check if "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Chrony.d"}]},{"type":"text","value":" is active on your system with the command "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"systemctl status chronyd.service"}]},{"type":"text","value":", stopping and disabling it with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"systemctl stop chronyd.service"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"systemctl disable chronyd.service"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To install "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ntp"}]},{"type":"text","value":" run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yum install ntp -y"}]},{"type":"text","value":". Run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"systemctl enable ntpd && systemctl start ntpd"}]},{"type":"text","value":" to activate the NTP service. You can verify that the service is working with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"systemctl status ntpd"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ntpstat"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/21d0851aafd0e2e68895a64108dc3bbb/69eda/Kubernetes_01.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 733px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 70.3956343792633%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABzklEQVQoz31T2W7bQAzUF8Taw04cV6gVn7r23pVkpy7Qh/b//6hDWSncFCgwILirHZJDUhnvrEjhqTGq1mNnXK2uh/ZY1GxdL58r+V9kILNL5H0QMcgxSudWu04CXxq5qh5wnp1HsjgqPkbu3AJIIY+eFQ1fVWLTEP+OzQfW9V9k1gf2vRfGlp1507ZsTantrjPrsuVvnShbUXYTWrF9KGfObBy79bIzrbGnwR+NPXjXaLNdnZFfLs+Ex4JfJszkk4ZmNkR2Sfy9F5ckrlEMkXtPcJ7HyQle1FoclDhrURv5WiNcJvaKXnjPviUWA28NbwzHO9S8m7BX5O878bUllHQpNyQ+gww6H5VQBlHBRC10PCoK/6dU2IlA/npWkVHaFGDZMNkxshRg858jt47k3HrUzNEaTBSlwVdWbltEybixdGVBC6QNajGtIeY/Bq4dAnEEtY7gHJuiiEka5GR021N7Fpe48D5/T1gYNC//dUEGficnz64JL0lOa6lnRSOLBpkdXjDrXvpQeCeDZ/ck2JzOEF9bjl5MzFn8xwgz+nZLTzGckvdjeDUux7Zj7QBwKkN9WlbztD/tNvpOSrRlyrJagzN39bn6vBv//Bi/AaHRc60dBNQtAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Managing Containers in Kubernetes","title":"","src":"/static/21d0851aafd0e2e68895a64108dc3bbb/69eda/Kubernetes_01.png","srcSet":["/static/21d0851aafd0e2e68895a64108dc3bbb/47596/Kubernetes_01.png 200w","/static/21d0851aafd0e2e68895a64108dc3bbb/59173/Kubernetes_01.png 400w","/static/21d0851aafd0e2e68895a64108dc3bbb/69eda/Kubernetes_01.png 733w"],"sizes":["(max-width:","733px)","100vw,","733px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The NTP daemon (ntpd) should be considered for systems which are normally kept permanently on. Systems which are required to use broadcast or multicast IP, or to perform authentication of packets with the Autokey protocol, should consider using ntpd."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chrony would be considered a best match for the systems which are frequently suspended or otherwise intermittently disconnected from a network (mobile and virtual servers etc)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"setting-a-hostname"},"children":[{"type":"element","tagName":"a","properties":{"href":"#setting-a-hostname","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Setting a Hostname"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We now need to make sure that all of our CentOS server can talk to each other via a hostname that is bound to their internal IP address. This can be set in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/hosts"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/56f4fe8fb67471973553363cd893bebb/90d05/Kubernetes_02.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 13.366336633663364%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhklEQVQI12PgDnPmjnXjTnCHIJ5Ed95oV95IF95wJyCDJ8mDByiY5A4keWPcECjUmS/AkUFRRlNBx0BBVVdBW19eWUdYU19IS19YTU8YSKrqArkgUttAWFNPVFBNVACGBNVFhdQZtLT0tXQNNA0MNUyMjLT0JSS1hCU0ReBIUktEAisCyQIA6rodCHvrcl8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/56f4fe8fb67471973553363cd893bebb/b21dd/Kubernetes_02.png","srcSet":["/static/56f4fe8fb67471973553363cd893bebb/2d451/Kubernetes_02.png 200w","/static/56f4fe8fb67471973553363cd893bebb/06807/Kubernetes_02.png 400w","/static/56f4fe8fb67471973553363cd893bebb/b21dd/Kubernetes_02.png 800w","/static/56f4fe8fb67471973553363cd893bebb/90d05/Kubernetes_02.png 808w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Add all server that you want to connect by their local IP and assign a host name, by which you want to call them - add those lines to all your server’s host files:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"192.168.2.110 in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master\n192.168.2.111 in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"minion1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can test if the hostname is used by pinging it:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/36520959f255d73bcc4560e6983e811c/9d423/Kubernetes_03.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 16.06475716064757%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAfklEQVQI112NTQ6CMBCFuQAE5jW6khgFTaEdpjNtIN7/YMJGE5Ivb/P+qm7L3VZoze2a+0/JRbWYbmZZXRCaBY+IZ8TI6Gd38e76pyJOFBOCYJJWtQ5Sx9T4pRmZkh7uJMRKahj4XIaXI1SMzMAJuybdt9x7wT3gxe52PvzxBVf/GNAIDOjBAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/36520959f255d73bcc4560e6983e811c/b21dd/Kubernetes_03.png","srcSet":["/static/36520959f255d73bcc4560e6983e811c/2d451/Kubernetes_03.png 200w","/static/36520959f255d73bcc4560e6983e811c/06807/Kubernetes_03.png 400w","/static/36520959f255d73bcc4560e6983e811c/b21dd/Kubernetes_03.png 800w","/static/36520959f255d73bcc4560e6983e811c/9d423/Kubernetes_03.png 803w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"install-docker--kuberenetes-on-centos"},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-docker--kuberenetes-on-centos","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Install Docker & Kuberenetes on CentOS"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First we need to add the repository to pull the Docker code from - type "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/yum.repos.d/virt7-docker-common-release.repo"}]},{"type":"text","value":" and add:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"virt7"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"docker"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"common"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"release"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\nname=virt7"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"docker"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"common"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"release\nbaseurl=http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//cbs.centos.org/repos/virt7"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"docker"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"common"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"release/x86_64/os/\ngpgcheck=0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then install "},{"type":"element","tagName":"a","properties":{"href":"https://www.docker.com/"},"children":[{"type":"text","value":"Docker"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io"},"children":[{"type":"text","value":"Kubernetes"}]},{"type":"text","value":" and "},{"type":"element","tagName":"a","properties":{"href":"https://coreos.com/etcd/docs/latest/"},"children":[{"type":"text","value":"etcd"}]},{"type":"text","value":" on the master server as well as all your hosts:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"yum update\nyum -y "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" --enablerepo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"virt7-docker-common-release kubernetes docker etcd\nsystemctl "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enable"}]},{"type":"text","value":" docker \nsystemctl start docker"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"install-and-configure-master-controller"},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-and-configure-master-controller","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Install and Configure Master Controller"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"kubernetes"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kubernetes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s start with editing the configuration file for Kubernetes in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/kubernetes/config"}]},{"type":"text","value":". We need to add two information:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"KUBE_MASTER=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master=http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"8080\"\n\nKUBE_ETCD_SERVERS=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"etcd"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"servers=http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"2379\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The address / hostname of our master server and the etcd server - which, in our case, also resides on the master server."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/2dc2d6a2af558d566255e417030e4822/04f61/Kubernetes_04.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 48.69565217391305%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABS0lEQVQoz22QaU7DMBCFc4EExeM2SZc0TSuwY4+XtBSBQHST+MUuAb3/RRiD1CIR6ZP1PPJ7M+Po7OE2edvEr5v4cxcf9vHXPv7YJi/r5HmdPN4nT2si/tiF+pHDPnnfUj0CaWGGfKKh0jDRPJe8J3jR8EwGTWSh0mMXf+EgOBcRU475lrmWoQ/aeJhqqDFkTTEIShyrU1Z+Co1gbthiwZYLZj1znq5AT7kI/X/py0DWQcSETe9W6c0lWy3DCqXmIwVESegQdBy+w6wc+BZcCyTQB5QLc9K0RKl6fUF0m1PtU9emNixMP8cI2rNoYNjAqIFBQ83ZUHWbB+gy53P0ubS5ckEYT6KYYTHHotZFjeNK9zvN18qi9U4ai84a9yOsVZZOJ9CVja1UW6phLtl/8xVa5T22LVKKMKaxQaDDczRTpWu9qtQsk9DV+Rt4OFJ2uUJi9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/2dc2d6a2af558d566255e417030e4822/b21dd/Kubernetes_04.png","srcSet":["/static/2dc2d6a2af558d566255e417030e4822/2d451/Kubernetes_04.png 200w","/static/2dc2d6a2af558d566255e417030e4822/06807/Kubernetes_04.png 400w","/static/2dc2d6a2af558d566255e417030e4822/b21dd/Kubernetes_04.png 800w","/static/2dc2d6a2af558d566255e417030e4822/04f61/Kubernetes_04.png 805w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"etcd"},"children":[{"type":"element","tagName":"a","properties":{"href":"#etcd","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"etcd"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The etcd configuration can be found in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/etcd/etcd.conf"}]},{"type":"text","value":". Here we need to change the following lines:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"ETCD_LISTEN_CLIENT_URLS=\"http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//0.0.0.0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"2379\"\nETCD_ADVERTISE_CLIENT_URLS=\"http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//0.0.0.0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"2379\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Changing those lines from "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"http://localhost:2379"}]},{"type":"text","value":" to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"http://0.0.0.0:2379"}]},{"type":"text","value":" so we accept messages from every network interface."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/f6135059293665503ff01c337bf236cc/b2001/Kubernetes_05.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 56.983930778739186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOElEQVQoz43Q0U6DMBQGYF6A0pbiFB1jwqClUBjQFnRjMGPihZo49f1fRYheKjP5cpJe/CenvwGf9uDUW689OA3g/Qg+juBtmJ4vB/B8GKd5GszP468Ms5WglVYo0HUClxx6KfQ4dBNMKPlmx38xuKrie0k7xeqKiS3jOc2KVBS+z7HDyOUcY93Uq0GP1mIbLHngJqPQTdxLZi8YmWUAJc2DHoGdAo2EYYZwjBbnk1MYtxL1DXps0UODO23LinjcWTDnP2GrqoCWQNVWXgJZW2UFNwIRihxKLs6FWVHSqqT5lkUZiwTbZCxIx0ljYQeZfcNnVhiBrv1e+0MzNncrioCKYMVDb/LT6lxh482dnuyUlRYwEjAUMMjgOiWrdP5yA2uJOo13Cu0VvpNY1STKx86Im5CrM3/+AnQWWc1BPQLfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/f6135059293665503ff01c337bf236cc/b21dd/Kubernetes_05.png","srcSet":["/static/f6135059293665503ff01c337bf236cc/2d451/Kubernetes_05.png 200w","/static/f6135059293665503ff01c337bf236cc/06807/Kubernetes_05.png 400w","/static/f6135059293665503ff01c337bf236cc/b21dd/Kubernetes_05.png 800w","/static/f6135059293665503ff01c337bf236cc/b2001/Kubernetes_05.png 809w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"api-server"},"children":[{"type":"element","tagName":"a","properties":{"href":"#api-server","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"API Server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Kubernetes API Server configuration can be found in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/kubernetes/apiserver"}]},{"type":"text","value":" - the following lines need to be changed:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"KUBE_API_ADDRESS=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"address=0.0.0.0\"\nKUBE_API_PORT=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"port=8080\"\nKUBELET_PORT=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"kubelet"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"port=10250\"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# KUBE_ADMISSION_CONTROL=\"--admission-control=NamespaceLifecycle,NamespaceExists,LimitRanger,SecurityContextD$"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/5d726ae50059db8e967540a478007432/9f07b/Kubernetes_06.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 50.24875621890548%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPklEQVQoz32R204CMRCG+wJd2W0LKwQU2QPb7bTTrhDvAOVSSdTEw/u/iFOI6AWQfJn8PfydQ1nyuuFvm+T9kX9t+feWfz7RTrJbJy+r5HkV427NP2j/BCybOznSYqTlUMtBI3uVTCuV1SrGSola9SrFy5MwVYCagaqsKiyJfmEJUVkxg0gBctzKXMvrE7ClcWgxECV4cKgdFEZOIRai5rLfxHLOwB4AO4sLbe8buwA3nRg1acWkjcf5ngvmJaBznhJ6i1hDNzPFuE0HjaLMF53RrJwX6KUPsnHCeFpKg1ntxNxRz/HSucrzhnHsMgxp16UYaPIZ+Gi7MeLWiDugKKkFav7Q/1H0o2AG8MoHEUKGXmgnWsyamFNQcpo5Tb7cQ4KeI0EvHigty9FTWrL9dUjiev/tw99fOerhP0b6BxX4ULgQJVmZAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/5d726ae50059db8e967540a478007432/b21dd/Kubernetes_06.png","srcSet":["/static/5d726ae50059db8e967540a478007432/2d451/Kubernetes_06.png 200w","/static/5d726ae50059db8e967540a478007432/06807/Kubernetes_06.png 400w","/static/5d726ae50059db8e967540a478007432/b21dd/Kubernetes_06.png 800w","/static/5d726ae50059db8e967540a478007432/9f07b/Kubernetes_06.png 804w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We now have to make sure that the services on the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Master Server"}]},{"type":"text","value":" are started in a particular order:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"systemctl "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enable"}]},{"type":"text","value":" etcd kube-apiserver kube-controller-manager kube-scheduler\nsystemctl start etcd kube-apiserver kube-controller-manager kube-scheduler\nsystemctl status etcd kube-apiserver kube-controller-manager kube-scheduler "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"grep"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"(running)\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wc"}]},{"type":"text","value":" -l"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The output of the last command should be 4 - as we wanted to start four services in total."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"install-and-configure-the-minions"},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-and-configure-the-minions","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Install and Configure the Minions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"kubernetes-1"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes-1","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kubernetes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s start with editing the configuration file for Kubernetes in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/kubernetes/config"}]},{"type":"text","value":". As before we need to add two lines:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"KUBE_MASTER=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master=http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"8080\"\n\nKUBE_ETCD_SERVERS=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"etcd"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"servers=http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"2379\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The address / hostname of our master server and the etcd server - which, in our case, also resides on the master server."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"kubelet"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubelet","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kubelet"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Kubelet configuration can be found in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/kubernetes/kubelet"}]},{"type":"text","value":" - the following lines need to be changed:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"KUBELET_ADDRESS=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"address=0.0.0.0\"\nKUBELET_PORT=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"port=10250\"\nKUBELET_HOSTNAME=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"hostname"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"override=in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"minion1\"\nKUBELET_API_SERVER=\""},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"api"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"servers=http"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//in"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"centos"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"master"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"8080\"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# KUBELET_POD_INFRA_CONTAINER=\"--pod-infra-container-image=registry.access.redhat.com/rhel7/pod-infrastructur$"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/25cf61ac96d2e33e10c6aa5588c51eab/05db0/Kubernetes_07.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 39.33002481389578%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLUlEQVQY023PW0vDMBgG4N67g13Sdk3X9TBtm+TLqd3ADhE3duOFKA7R/f8/YqKsThAeXt6LhJfPGz89jI670XF/dTqMTgeX7/vJ627y8ug8uxx/HH59OpM398ALKxmuRJRBtORRyuYps4lxjYNmEKA6wOfuV8F1Fcxqy9sKve7ajTEbrjbadFILKmcF4AzwEnBuk6OUowxQKSwcMzynP7xOaa6NYApAt9qkKzHNwbcI82OGQhqEFA/seEQHnpS6VqZp24apRmnKJKWS2i40SH2zYNOQDlPO5ed7ru646i0m+1r2FfQl3+a8L2Fb8vWtgIKHQYMu98+8TuhYt0QYIg0xLWE6ySDJISmctBRpCe7gHFAhUPF9ue256x5Rxjetz9QsYQ75mwtX8L8I+wLMXUUWGDjdQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/25cf61ac96d2e33e10c6aa5588c51eab/b21dd/Kubernetes_07.png","srcSet":["/static/25cf61ac96d2e33e10c6aa5588c51eab/2d451/Kubernetes_07.png 200w","/static/25cf61ac96d2e33e10c6aa5588c51eab/06807/Kubernetes_07.png 400w","/static/25cf61ac96d2e33e10c6aa5588c51eab/b21dd/Kubernetes_07.png 800w","/static/25cf61ac96d2e33e10c6aa5588c51eab/05db0/Kubernetes_07.png 806w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We now have to make sure that the services on the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Minion Server"}]},{"type":"text","value":" are started in this particular order:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"systemctl "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enable"}]},{"type":"text","value":" kube-proxy kubelet docker\nsystemctl start kube-proxy kubelet docker\nsystemctl status kube-proxy kubelet docker "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"grep"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"(running)\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wc"}]},{"type":"text","value":" -l"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The output of the last command should be 3 - as we wanted to start three services in total. You can verify that docker is running with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker --version"}]},{"type":"text","value":" or "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker images"}]},{"type":"text","value":". To verify that docker is working, let’s pull and run the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hello-world"}]},{"type":"text","value":" image:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker pull hello-world\ndocker run hello-world"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The image will run, print it’s hello world to your console and exit again - that means everything is in perfect order:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/6b95f6fc4e3b35901142a47b7b5f15d1/0cd32/Kubernetes_08.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 54.613466334164585%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTklEQVQoz3VR20rDQBDNF4i7s2lrqiRpU3PbazZpqyL4JPjk//+NZ2KLaCscwgTmzLlsIsYoXiYa402M2338DP7d+Q/rTd5nWUfLVt11tO7VqlPzrFYtDzMSOUXxPMlpFIcxHeOm94VmVMZnpSaspg1jAfzQTmRxHMVxEk8T9OXrPo2RMUUFRy5Q56lxtLNUO5XrP/xE2iDDANy6kHduaKyrjattbMy60GJjCBy4zX4ZPpM7L13ACaotVVZujXy0DPyWhpFrKrS676/YpsogtjT+W1/6MGOQMeIubQxoLA7lS7KCt7eDHGYmviawEUB7PoFhjJy8MldsqwfNS8yM3E3jZOtOJfFgeQazvCIO25a0p96z1JycWy004Z22BrY5dqEvPc+FtShsODF7hNTcUDmXhAGZcWvZXkUi4dN6BOO0eLbW086p9LyxaP9jAl9yYFbWZkWWRAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/6b95f6fc4e3b35901142a47b7b5f15d1/b21dd/Kubernetes_08.png","srcSet":["/static/6b95f6fc4e3b35901142a47b7b5f15d1/2d451/Kubernetes_08.png 200w","/static/6b95f6fc4e3b35901142a47b7b5f15d1/06807/Kubernetes_08.png 400w","/static/6b95f6fc4e3b35901142a47b7b5f15d1/b21dd/Kubernetes_08.png 800w","/static/6b95f6fc4e3b35901142a47b7b5f15d1/0cd32/Kubernetes_08.png 802w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"testing-kubectl"},"children":[{"type":"element","tagName":"a","properties":{"href":"#testing-kubectl","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Testing Kubectl"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"kubectl is the control function for Kubernetes. A list of commands that you can try on your master server:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl get nodes  //this should list all your minions\nkubectl describe node in-centos-minion  //get info "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"for"}]},{"type":"text","value":" a specific node"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"working-with-docker"},"children":[{"type":"element","tagName":"a","properties":{"href":"#working-with-docker","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Working with Docker"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Get information about your Docker installation with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker version"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker info"}]},{"type":"text","value":" - the latter can tell you how many images you downloaded, how many of the are running and how much space and memory you have left on your host system. Further information - e.g. on containers and volumes - can be found in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"cd /var/lib/docker"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"running-containers"},"children":[{"type":"element","tagName":"a","properties":{"href":"#running-containers","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Running Containers"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ready-build containers can be downloaded from the "},{"type":"element","tagName":"a","properties":{"href":"https://hub.docker.com/"},"children":[{"type":"text","value":"DockerHub"}]},{"type":"text","value":" - an example is the official image for "},{"type":"element","tagName":"a","properties":{"href":"https://hub.docker.com/_/ubuntu"},"children":[{"type":"text","value":"Ubuntu"}]},{"type":"text","value":". Requests for specific versions can be added to the pull command. E.g. the following command pulls the Ubuntu 18.04 Bionic image:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker pull ubuntu:bionic"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All available versions of the selected image are listed on the corresponding DockerHub page. Running this command will then build the image according to a "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/tianon/docker-brew-ubuntu-core/blob/185c5e23efaa8c7c857683e6dcf4d886acda3cba/bionic/Dockerfile"},"children":[{"type":"text","value":"Docker File"}]},{"type":"text","value":". Alternatively, you can also use the search command to find all available versions:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker search ubuntu"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To build an container using that image the following command:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker run -t -i ubuntu:bionic /bin/bash"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-i"}]},{"type":"text","value":" makes it interactive and the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-t"}]},{"type":"text","value":" runs the output on your terminal - to run the image in the background instead use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":" for detached mode. A full list of the "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/engine/reference/commandline/run/#options"},"children":[{"type":"text","value":"command options"}]},{"type":"text","value":" can be found in the docker docs. Adding "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/bin/bash"}]},{"type":"text","value":" is the command you want Docker to run inside the image, which in this case will attach you as root user to the Ubuntu OS - you can verify with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"dh -f"}]},{"type":"text","value":" or "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ps aux"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Typing "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"exit"}]},{"type":"text","value":" will both exit you out of the container and stop it as well. You can verify with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps"}]},{"type":"text","value":" that no image is running anymore."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To restart the container run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps -a"}]},{"type":"text","value":" to find out the name that was given to the container - in this case it was "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"suspicious_lovelace"}]},{"type":"text","value":" - then type "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker restart suspicious_lovelace"}]},{"type":"text","value":" to run it in detached mode. And "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker attach suspicious_lovelace"}]},{"type":"text","value":" when you need to reconnect your terminal."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/e46fd98d894b4d3f9bb44ac001a9b7b1/04f61/Kubernetes_09.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 46.58385093167702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABVUlEQVQoz31R21KDMBDlB6pNNkKBtpSWAgnJLglQR63ji///TW7q5cFxnDkPGebc9pDIeRLPizxj2tO4hGVvzmm/PjrV0UOm1cbIjtRuUKmGvQX+npuIIiKRZpSjV3nklU9L1eLhYPOO7jWtWZlp0AQtMhUOFnqCM8LJRRxcIjWLA9unmnwI+DihJdu6vnHuaOvSCA6prOIW/OAK2+gSwx/6RFxm8fYopil1/tXSdafrTFcNVh0ec1MURjYxlqnASnZJdTSqY/8EGgeDF8usOixD2O2HMuuL2haayq3JMs1zqJv+82aov1tsdCLDJK6XNfot+nccp4HoE3b0BvelkRyVR2rUbOI08XFDIi+LNBSdMi2O7s75VUsr9CsKqxYF19voH/YvJHKeoUGoBj6JVwX0ivf0AaZJvizQ0teRf4qZBDzDLRlOGPW1k8MIzssQ+D/9I/4A4HxHIbE8zgYAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/e46fd98d894b4d3f9bb44ac001a9b7b1/b21dd/Kubernetes_09.png","srcSet":["/static/e46fd98d894b4d3f9bb44ac001a9b7b1/2d451/Kubernetes_09.png 200w","/static/e46fd98d894b4d3f9bb44ac001a9b7b1/06807/Kubernetes_09.png 400w","/static/e46fd98d894b4d3f9bb44ac001a9b7b1/b21dd/Kubernetes_09.png 800w","/static/e46fd98d894b4d3f9bb44ac001a9b7b1/04f61/Kubernetes_09.png 805w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To start a new container directly in detached mode run:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker run -tid ubuntu:bionic /bin/bash"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can see that this spun up a second container from the same image:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/4c1744c4056c52b18511feccd5558de8/9d423/Kubernetes_10.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 16.1892901618929%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAlUlEQVQI1yWOWRLCMAxDewMgdlMCdAEa0qTOgssw/eX+l8KFP2lG0lMFhfefFcf0tHF5M11JKacGgilj4/HolUvQEx4DngPYhKeAJqD2qKcKXFYL40A77ev11S58s9FM6RALdrP0lc/wSDAm7Aj+2ia4zNDOlTAVFeypNkEXbpgbl+tfCI2XMtyjAAQrQLmzWRu3iZ6+n0sX1t/L8foAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/4c1744c4056c52b18511feccd5558de8/b21dd/Kubernetes_10.png","srcSet":["/static/4c1744c4056c52b18511feccd5558de8/2d451/Kubernetes_10.png 200w","/static/4c1744c4056c52b18511feccd5558de8/06807/Kubernetes_10.png 400w","/static/4c1744c4056c52b18511feccd5558de8/b21dd/Kubernetes_10.png 800w","/static/4c1744c4056c52b18511feccd5558de8/9d423/Kubernetes_10.png 803w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can get more information about the container with the inspect command followed by the name of the container you want to inspect:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker inspect flamboyant_lamarr\ndocker inspect flamboyant_lamarr "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"grep"}]},{"type":"text","value":" IP"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The second command will only show you information related to the IP configuration of the container:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/6864d419e06eed498d40c9fe551280cb/f206b/Kubernetes_11.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 28.99628252788104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAr0lEQVQY042NWw6CMBBFWYGBzrRFIJGAgbY8yqOVYjDG/W9KDPGPiJNzMz9z7niY1VC0tGh13y96WGdsu7FsTF6bS2Xz+hopwiTyHbw1FIRfd/Q5qbsjLwfDgEIzLhn7sKt95VAiilB1ycOFk/XtSEoNkQIuN37KXBIq8lTzyaIxRGjIGoyqTyk/wNtWwERCZeGm02xBdpA3GCtk/8nrHY3Veb6liwsWC6LFSB1+fgN6Bi0fVZqVgwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/6864d419e06eed498d40c9fe551280cb/b21dd/Kubernetes_11.png","srcSet":["/static/6864d419e06eed498d40c9fe551280cb/2d451/Kubernetes_11.png 200w","/static/6864d419e06eed498d40c9fe551280cb/06807/Kubernetes_11.png 400w","/static/6864d419e06eed498d40c9fe551280cb/b21dd/Kubernetes_11.png 800w","/static/6864d419e06eed498d40c9fe551280cb/f206b/Kubernetes_11.png 807w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"docker-files"},"children":[{"type":"element","tagName":"a","properties":{"href":"#docker-files","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Docker Files"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A Docker File is a recipe for an Docker image. So far we only pulled predefined images from the DockerHub - writing our own Dockerfile allows us to make changes to those images. Lets start by creating a folder in your home directory named "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"RunAsUser"}]},{"type":"text","value":" and add a Dockerfile "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano Dockerfile"}]},{"type":"text","value":" with the following content:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"dockerfile"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-dockerfile"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-dockerfile"]},"children":[{"type":"text","value":"# Dockerfile based on the latest CentOS 7 image - non-privileged user entry\n\nFROM centos:latest\n\nMAINTAINER mpolinowski@gmail.com\n\nRUN useradd -ms /bin/bash user \n\nUSER user"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/627acca4212bac2bd0558c42e5958602/b21dd/Kubernetes_12.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 17.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAjUlEQVQI12PgjXbliXfnSfbgTvHkTvYEkjxxbjxRrrzhzjwxriBBkLgHUAFPgjsUJbrzxLrxBjsyCCvrCKvpichoiUhpiUhrCctqiwCRnDaQLSKrBWSARIBsSU1RIXVkJCKiwSCsYwBEQloGwqp6Igo6IuKaImLYEFBcAhWJazKA7ARKgK0VkdSCiBKJAAG7Il2db/JhAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/627acca4212bac2bd0558c42e5958602/b21dd/Kubernetes_12.png","srcSet":["/static/627acca4212bac2bd0558c42e5958602/2d451/Kubernetes_12.png 200w","/static/627acca4212bac2bd0558c42e5958602/06807/Kubernetes_12.png 400w","/static/627acca4212bac2bd0558c42e5958602/b21dd/Kubernetes_12.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Dockerfile can now be used to build a Docker image with the following command:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker build -t centos7/nonroot:v1 /root/docker/builds/RunAsUser\ndocker run -ti centos7/nonroot:v1 /bin/bash"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/cb33d1724493ff198a39f1c17c9c1050/3e28e/Kubernetes_13.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 33.20987654320987%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA60lEQVQY03WO0U6EMBBF+YKFDi2sGxEFt1BoO21pQbLqk///TZbNZjVGkpObeZhzZxKyeghT9uYfncPJokQUiMqYXptWmefRvCrDVUzstD+r+iigFKwUtBQJoCVrgMUTgYcODxzTVqXVmLF+oxC3IUL7lPVw1ehNNo68z/F4zjU9axqzUexBsGKr/8vxx7zKgwHrQJm8x82vRlpLehp+L+2RgLUk/rx44BpeFDxJaFRejXkp7uzLfiKXeZO1ZeiK+DPXRS3LUtxhe3L2tZLPOf2Y2WVeJhe4DK0MnQ5nGRrpW7l2qj0NpPin4htkITbrOPkaNAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/cb33d1724493ff198a39f1c17c9c1050/b21dd/Kubernetes_13.png","srcSet":["/static/cb33d1724493ff198a39f1c17c9c1050/2d451/Kubernetes_13.png 200w","/static/cb33d1724493ff198a39f1c17c9c1050/06807/Kubernetes_13.png 400w","/static/cb33d1724493ff198a39f1c17c9c1050/b21dd/Kubernetes_13.png 800w","/static/cb33d1724493ff198a39f1c17c9c1050/3e28e/Kubernetes_13.png 810w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The container is build, the user "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"user"}]},{"type":"text","value":" created and you are connected to the container with the non-privileged account. But we can still connect as the root user. First exit the container and run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps -a"}]},{"type":"text","value":" to find out the name that was assigned to it - in this case it was "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"optimistic_swirles"}]},{"type":"text","value":". Then start the container up again with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker start optimistic_swirles"}]},{"type":"text","value":". Then run:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker exec -u 0 -it optimistic_swirles /bin/bash"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This command connects to the referenced container with the user with id=0 (root) and starts the bash terminal:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/573fe4c785fd90b7789a44e1a161697e/9d423/Kubernetes_14.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 16.438356164383563%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAl0lEQVQI1x3NXRKDIAwEYE8gNgR0qvW3OqQhIGLvf7VqZ/ZhX3a/okuHPTOkQ+U8y542CZOPLYXRh+WfgeMi1DMaQuPQEtaE9i6FObL+nhCS3mIlqZykaln1rFysLFXGlYuowT8s6Y7hLfj8XDM9et1yAVsESbAfQBHOrNeAvcfLcdF0bC5nFlyDfnHTfupFYJJbvi4a+gHemxfJi4AWBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/573fe4c785fd90b7789a44e1a161697e/b21dd/Kubernetes_14.png","srcSet":["/static/573fe4c785fd90b7789a44e1a161697e/2d451/Kubernetes_14.png 200w","/static/573fe4c785fd90b7789a44e1a161697e/06807/Kubernetes_14.png 400w","/static/573fe4c785fd90b7789a44e1a161697e/b21dd/Kubernetes_14.png 800w","/static/573fe4c785fd90b7789a44e1a161697e/9d423/Kubernetes_14.png 803w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Another advantage is, that you can now exit the container without stoping it - it will continue running with the default non-privileged "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"user"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"managing-ports"},"children":[{"type":"element","tagName":"a","properties":{"href":"#managing-ports","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Managing Ports"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Docker allows us to expose ports to access services provided by applications inside the container. Let’s pull the "},{"type":"element","tagName":"a","properties":{"href":"https://hub.docker.com/_/nginx"},"children":[{"type":"text","value":"NGINX"}]},{"type":"text","value":" image and try to access the default landing page:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker pull nginx\ndocker run -d nginx:latest"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can now run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps"}]},{"type":"text","value":" to find out the assigned container name ("},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"lucid_lichterman"}]},{"type":"text","value":") and run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker inspect lucid_lichterman"}]},{"type":"text","value":" to find out the IP address the container is using ("},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"172.17.0.2"}]},{"type":"text","value":"). If you have the "},{"type":"element","tagName":"a","properties":{"href":"http://elinks.or.cz/"},"children":[{"type":"text","value":"elinks text browser"}]},{"type":"text","value":" istalled, you can run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"elinks http://172.17.0.2"}]},{"type":"text","value":" to see the NGINX greeting page:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/f0b8b82fe9b06be3a6504980f98090d7/05db0/Kubernetes_15.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 21.960297766749378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAzElEQVQI12Pw9I2OiM0Ki04Pj8kEoojYzIi4rNCojLTs8sy8ytyimsS0wvCYDKAaiGxIZKpfcHxgaJJ/SCKDiISWkpqFkpq5pIyeBBhJyxlISOvIyBsoqJgqqlnIKJrIyBlIgsT1JWX1JGX1ZRQMgUhYTINBRt5Q39hF28BB19BRXdtaW89eU89eXsNWXtUSqFpKx1VS31NUQktUQhNIiohrQpCoOFBEi0FUSl9C0VJCwUxS0VxC0UpC1hBoraiUrqikDkiRpDaEgRUBAPtgLzHDoF0BAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Red Hat Certified Specialist in Containerized Application Development","title":"","src":"/static/f0b8b82fe9b06be3a6504980f98090d7/b21dd/Kubernetes_15.png","srcSet":["/static/f0b8b82fe9b06be3a6504980f98090d7/2d451/Kubernetes_15.png 200w","/static/f0b8b82fe9b06be3a6504980f98090d7/06807/Kubernetes_15.png 400w","/static/f0b8b82fe9b06be3a6504980f98090d7/b21dd/Kubernetes_15.png 800w","/static/f0b8b82fe9b06be3a6504980f98090d7/05db0/Kubernetes_15.png 806w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"But you cannot reach the page over "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"elinks http://localhost"}]},{"type":"text","value":" because the internal port 80 was not exposed to be reachable from outside the Docker network. Let’s stop the container "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker stop lucid_lichterman"}]},{"type":"text","value":" and run it again - but this time we are going to forward the internal port 80 to the external port 8081:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker run -d -p 8081:80 nginx:latest"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The website is no reachable via "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"elinks http://localhost:8081"}]},{"type":"text","value":" on our host machine as well as on the local IP address on the local network - e.g. over "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://192.168.2.111:8081"},"children":[{"type":"text","value":"http://192.168.2.111:8081"}]}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"working-with-kubernetes"},"children":[{"type":"element","tagName":"a","properties":{"href":"#working-with-kubernetes","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Working with Kubernetes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"pod-definitions"},"children":[{"type":"element","tagName":"a","properties":{"href":"#pod-definitions","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Pod Definitions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create a folder in your home directory on your master server and add "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano nginx.yaml"}]},{"type":"text","value":" inside. This file is going to create a pod with a single container that runs the NGINX image v1.7.9:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Pod\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" nginx\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" nginx\n   "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" nginx"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"1.7.9\n   "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"ports"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n   "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containerPort"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can now use "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"kubectl"}]},{"type":"text","value":" to create the pod based on our configuration file:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl create -f /root/docker/builds/nginx.yaml"}]}]}]}],"data":{"quirksMode":false}},"fields":{"slug":"/managing-containers-in-kubernetes/","prefix":"2019-01-02"},"frontmatter":{"title":"Managing Containers in Kubernetes","subTitle":"An IT professional who is a Red Hat Certified Specialist in Containerized Application Development has demonstrated the skills, knowledge, and abilities needed to create, update container images and run and link containers.","cover":{"childImageSharp":{"resize":{"src":"/static/4dbf4a9d51aa80152895d7c4a6fc77c0/f2a5a/11627184673_98a1904863_o-cover.png"}}}}},"author":{"id":"9c69de06-11ab-55c9-b52a-3cc0b2f51365","html":"<p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href=\"/contact/\">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p>"},"footnote":{"id":"24817670-3434-5a21-9de1-e9fab89708d7","html":"<ul>\n<li>This is a personal Developer Blog</li>\n<li>Ξ</li>\n<li>built by <a href=\"https://github.com/mpolinowski\">Mike Polinowski</a></li>\n<li>Ξ</li>\n<li>with <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> &#x26; <a href=\"https://reactjs.org\">React</a></li>\n<li>Ξ</li>\n<li>source code on <a href=\"https://github.com/mpolinowski/mpolinowski.github.io\">GitHub</a></li>\n<li>Ξ</li>\n<li>deliverd by <a href=\"https://pages.github.com\">Github Pages</a></li>\n<li>Ξ</li>\n<li>photos from <a href=\"https://www.flickr.com/people/149680084@N06/\">Flickr</a></li>\n</ul>"}},"pageContext":{"slug":"/managing-containers-in-kubernetes/"}}