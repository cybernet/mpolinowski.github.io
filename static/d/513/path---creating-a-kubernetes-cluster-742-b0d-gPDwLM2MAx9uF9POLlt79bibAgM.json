{"data":{"post":{"id":"0ad84b15-9695-539b-88df-a23f76f74784","html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ab587ce485b29f47f37ae231348ba9a/bc79b/photo-34219553960_350f18edbb_o.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 45.1271186440678%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACSUlEQVQozw2RSW/TABBG/VO4ILVCXZLi1k4dZ3W8JHYcJ3GcpXHthDYuSUpbqRsUlapQqReWG+LAFa4ICcGfe/gwh9Ho07w3I9hmjGZMMa0DdGNORV/SMOcM7CmxO2TeDUh6CXuDC+LxCcPhkm6yoDtf0u4esddfMOyfMBkdE7QXCFN3kob3eD9b4hn76OUItxQSmSGdWp+p7XM2GDJuTZgnt9y/vuDV0T7Jfo+rg4DTvTHns1NG7oieEyE4VkDbSRs3ppLvoSkxsbbksDYhSCnPhyGDmoNddPCtPoEb0LE86qrG43HMdRzydpKSWwlhM0GYBYd0GxFdK2LZHPDtYMaH299MB/f4XpKSdYmsFuPmiFLJR1UaOGWbecOnr/dxah1uJi/4dPGGu6N3CL8uz7gzhrQLHUJvxPlohG2eoeb6aGpAId9Aq3ZotsL0HC1iy6Jb0enVQ/xKi/auhyMZuMUyvm4ifD+J0oGHpGhkRYts1kQVK9RlHVOScKp19FTPkmVMw2M2HDB1LcStMjW5zlz3+dibcVXXcHcVhOuxweelTdOQUiUFQ9qhkBVJKlvE+TUy6yq2WkLJNchumxTlSqpt8HynhppRuHQU/l13+HPZ5kskIYRVhZ8PCbHfRpU1vN0sjrxFWZSppmUXylRyRkpeZGstgylus7lZIrtRoimJzO1tflxl+Dt7wlfnKUIpk+MxKnKzeImeb2JnVvHkLNUUv5xT069rSGKR9XWRtfUdVlZ2eLZRJZ8unxVXeQhlAl2hl8/Rlsv8BwhhYhtmiCl2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Shanghai, China\"\n        title=\"\"\n        src=\"/static/3ab587ce485b29f47f37ae231348ba9a/b21dd/photo-34219553960_350f18edbb_o.png\"\n        srcset=\"/static/3ab587ce485b29f47f37ae231348ba9a/2d451/photo-34219553960_350f18edbb_o.png 200w,\n/static/3ab587ce485b29f47f37ae231348ba9a/06807/photo-34219553960_350f18edbb_o.png 400w,\n/static/3ab587ce485b29f47f37ae231348ba9a/b21dd/photo-34219553960_350f18edbb_o.png 800w,\n/static/3ab587ce485b29f47f37ae231348ba9a/c9309/photo-34219553960_350f18edbb_o.png 1200w,\n/static/3ab587ce485b29f47f37ae231348ba9a/fe46d/photo-34219553960_350f18edbb_o.png 1600w,\n/static/3ab587ce485b29f47f37ae231348ba9a/6d953/photo-34219553960_350f18edbb_o.png 2400w,\n/static/3ab587ce485b29f47f37ae231348ba9a/bc79b/photo-34219553960_350f18edbb_o.png 2832w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>In this hands-on lab from <a href=\"https://linuxacademy.com/cp\">Linux Academy</a>, we will install and configure a Kubernetes cluster consisting of 1 master and 2 nodes for the pods. Once the installation and configuration are complete, we will have a 3-node Kubernetes cluster that uses Flannel as the network overlay.</p>\n<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#instructions\">Instructions</a></p>\n<ul>\n<li><a href=\"#objectives\">Objectives</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#install-docker-and-kubernetes\">Install Docker and Kubernetes</a></p>\n<ul>\n<li><a href=\"#prerequisites\">Prerequisites</a></li>\n<li><a href=\"#install-docker-ce\">Install Docker CE</a></li>\n<li><a href=\"#install-kubernetes\">Install Kubernetes</a></li>\n<li><a href=\"#start-docker-and-kublet\">Start Docker and Kublet</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#cluster-initialization\">Cluster Initialization</a></p>\n<ul>\n<li><a href=\"#networking-details\">Networking details</a></li>\n<li><a href=\"#check-the-cluster-state\">Check the cluster state.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#create-and-scale-a-deployment-using-kubectl\">Create and scale a deployment using kubectl</a></p>\n<ul>\n<li><a href=\"#kubernetes-stuck-on-containercreating\">Kubernetes stuck on ContainerCreating</a></li>\n<li><a href=\"#scaling\">Scaling</a></li>\n</ul>\n</li>\n<li><a href=\"#pod-deployment\">Pod Deployment</a></li>\n<li><a href=\"#kubernetes-services\">Kubernetes Services</a></li>\n<li><a href=\"#updating-the-pod\">Updating the Pod</a></li>\n<li>\n<p><a href=\"#kubernetes--compose--kompose\">Kubernetes + Compose = Kompose</a></p>\n<ul>\n<li><a href=\"#use-kompose\">Use Kompose</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"instructions\"><a href=\"#instructions\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Instructions</h2>\n<p>In this learning activity, we will create a Kubernetes cluster. The commands we will use for this process can be found in the task list by clicking on the orange question mark buttons.</p>\n<p>Once you have completed the lab, leave your cluster in its final state. Do not delete the deployment:</p>\n<h3 id=\"objectives\"><a href=\"#objectives\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Objectives</h3>\n<ul>\n<li>Install Docker and Kubernetes on all servers.</li>\n<li>Create and scale a deployment using kubectl.</li>\n</ul>\n<h2 id=\"install-docker-and-kubernetes\"><a href=\"#install-docker-and-kubernetes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Docker and Kubernetes</h2>\n<h3 id=\"prerequisites\"><a href=\"#prerequisites\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h3>\n<ol>\n<li>You first need to login as your root user or elevate your users privileges via sudo on your master and two minion servers:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">su</span></code></pre></div>\n<ol>\n<li>This next step is not recommended in production (<a href=\"https://docs.docker.com/engine/security/seccomp/\">How do you create a SE Linux policy?</a>) - but we are going to disable SE Linux on all 3 servers:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">setenforce 0\nsed -i --follow-symlinks &#39;s/SELINUX=enforcing/SELINUX=disabled/g&#39; /etc/sysconfig/selinux</code></pre></div>\n<ol start=\"3\">\n<li>Now we need to enable the <code class=\"language-text\">br_netfilter</code> module on all servers to allow our cluster to communicate:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">modprobe br_netfilter\n<span class=\"token keyword\">echo</span> <span class=\"token string\">'1'</span> <span class=\"token operator\">></span> /proc/sys/net/bridge/bridge-nf-call-iptables</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f2901ed8c58feb6fdbde92110cff0800/2df25/kubernetes_cluster_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 797px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 11.91969887076537%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAaUlEQVQI1yWMCQ6AIBADlSh44PEDlUuBBcXo/7/mqknTtE2mWW/PAS5uU+fOyuzozXrUZmcqFMKV0jMFpfBUAlXAdMCAFUcmIUNyjDd36cNemKrQ2sTxS8fKxNrEH8PHYnH5tKHIbMm8PX60Dl1FvFRPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/f2901ed8c58feb6fdbde92110cff0800/2df25/kubernetes_cluster_01.png\"\n        srcset=\"/static/f2901ed8c58feb6fdbde92110cff0800/2e1d6/kubernetes_cluster_01.png 200w,\n/static/f2901ed8c58feb6fdbde92110cff0800/ab190/kubernetes_cluster_01.png 400w,\n/static/f2901ed8c58feb6fdbde92110cff0800/2df25/kubernetes_cluster_01.png 797w\"\n        sizes=\"(max-width: 797px) 100vw, 797px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<ol start=\"4\">\n<li>Make sure that swap has been turned off:</li>\n</ol>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c89d6dbaef3b03200445c9c6a153701e/2cb05/kubernetes_cluster_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 20.52565707133917%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhklEQVQI14WPXRKCMAyEiyBa2h5B1FJo2vDT4v3v5jLIGzPOfA+ZTXaTCNnPN+CmqhvlO5KN0bK3XD4G0fo/NMOiKN37+dpxZbk4qN1UvgImiicB0Z5lacoqZB2y4Y+irCmZsCLOxBUiWtIjPdduPDfDthsw2lDav9h2HmtxEYCI+rIpP/MXWx0Z+yQfPDEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/c89d6dbaef3b03200445c9c6a153701e/2cb05/kubernetes_cluster_02.png\"\n        srcset=\"/static/c89d6dbaef3b03200445c9c6a153701e/ddfc7/kubernetes_cluster_02.png 200w,\n/static/c89d6dbaef3b03200445c9c6a153701e/b02cb/kubernetes_cluster_02.png 400w,\n/static/c89d6dbaef3b03200445c9c6a153701e/2cb05/kubernetes_cluster_02.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<blockquote>\n<p>To turn off swap on centos type <code class=\"language-text\">swapoff -a</code> and check that the swap was removed with <code class=\"language-text\">free -h</code>. Edit the <code class=\"language-text\">/etc/fstab</code> file, search for the swap line and comment the entire line by adding a <code class=\"language-text\">#</code> in front of the line:</p>\n</blockquote>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/814369e93af7cb4fe8f16633e5ef5fd5/b21dd/kubernetes_cluster_02a.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 42.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHklEQVQoz4VQ2W7CMBDkC0jwmqspJA5QHHt9QSqV9/7/N3UWkKigUqXVysfOsTNRNumOfetLx2XH7WpQc6sXqEEv/6mJioWOqTJcdTztWJlAvZRuvUysUE760v4FTkWFosqJQiaXKBbls7zkk3SXcaUh6bXT8yt+8Rs8nlUuijPm6BjpI8II7QKZoLdM9nrug/zCDije/QNcf19ml08RPJ9UKXrj9VrcCpEJs6/xzshZ6IDEFg/lIILTcaw+Yo3wAAMemtjcJjgiG2nr784XTzvbNG/5EIvreX8I1DiNUcMyBxZE1bF05Ne8gCGrDe9zGQz3kGq8bvnmkA5R9BHBxkOD4PkFnKjlyud6OdSIBPSNp5ua7O9oy5ICzm/Pyj/aikOM2D3ZtQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/814369e93af7cb4fe8f16633e5ef5fd5/b21dd/kubernetes_cluster_02a.png\"\n        srcset=\"/static/814369e93af7cb4fe8f16633e5ef5fd5/2d451/kubernetes_cluster_02a.png 200w,\n/static/814369e93af7cb4fe8f16633e5ef5fd5/06807/kubernetes_cluster_02a.png 400w,\n/static/814369e93af7cb4fe8f16633e5ef5fd5/b21dd/kubernetes_cluster_02a.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/9771d/kubernetes_cluster_02b.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 798px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.31829573934837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1UlEQVQY01WOXU8CMRBF+6y0sJ02SBGjYRf2g35MV2J8IArR8ESC8gL+/x/idLPBmJyc3E7mZsqG+404vvPvHT9/8EuPOO0ETY5bGg5+Pgn+H/G1FYc3pu5rQutSi0IPi2RitEjwQt/miZtcD4r0vNKtMXBRrlsZIsQWHEqPMqBcBRkjGSoPCyfJD40aV2pSq7s6uYONHGYeM4sZhdJnuaPtnrmF0vcht2rW9Q31qxTGFZu+Pk82L2bdmtobjCagelzBrAHyk4Wllxhh7tKPbEj3p3/lX28VKuSHJ7TfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/9771d/kubernetes_cluster_02b.png\"\n        srcset=\"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/84ded/kubernetes_cluster_02b.png 200w,\n/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/53cad/kubernetes_cluster_02b.png 400w,\n/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/9771d/kubernetes_cluster_02b.png 798w\"\n        sizes=\"(max-width: 798px) 100vw, 798px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<blockquote>\n<p>Now delete the remaining swap file - check the location <code class=\"language-text\">blkid</code> and remove it <code class=\"language-text\">rm /dev/mapper/centos-swap</code>:</p>\n</blockquote>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/90d2f664655149aef9aa43b9ea60f9e3/9f07b/kubernetes_cluster_02c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 23.134328358208954%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAzElEQVQY01XOUWrDMAwG4JygJlIah7GOsqRtYseWJcdL2NPY/Q81mbHC4Hv4ZWRJTfu1o0jIElaCe4SQcKHKa0h/gfBBeIvdxeOb714rvKyNfm6PYliMCEZGYiBBHaFWxZCkvvhagk5xBNrmE0RpWhYtTNnMx3byydziaSYzJ9DWe8S5LoSZFLqEY8TpV8BHauxnsYk9sWSmkmnPvGdfcp/zwKKsBkcDSa9n26UbnlwD3wce23XfJkcj8XuWidKoa6dwfnHnfnnqlP3nBxuqKz/0rFgEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/90d2f664655149aef9aa43b9ea60f9e3/b21dd/kubernetes_cluster_02c.png\"\n        srcset=\"/static/90d2f664655149aef9aa43b9ea60f9e3/2d451/kubernetes_cluster_02c.png 200w,\n/static/90d2f664655149aef9aa43b9ea60f9e3/06807/kubernetes_cluster_02c.png 400w,\n/static/90d2f664655149aef9aa43b9ea60f9e3/b21dd/kubernetes_cluster_02c.png 800w,\n/static/90d2f664655149aef9aa43b9ea60f9e3/9f07b/kubernetes_cluster_02c.png 804w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<ol>\n<li>Add a FirewallD Service</li>\n</ol>\n<p>Configure FirewallD for Kubernetes to work correctly. First download the k8s-master.xml and k8s-worker.xml files to <code class=\"language-text\">cd /etc/firewalld/services</code> on your master and minion server:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-master.xml\n\n<span class=\"token function\">wget</span> https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-worker.xml\n\nfirewall-cmd --reload</code></pre></div>\n<p><strong>On Master Node</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd --add-service<span class=\"token operator\">=</span>k8s-master --zone<span class=\"token operator\">=</span>public --permanent</code></pre></div>\n<p><strong>On Minion Nodes</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd --add-service<span class=\"token operator\">=</span>k8s-worker --zone<span class=\"token operator\">=</span>public --permanent</code></pre></div>\n<h3 id=\"install-docker-ce\"><a href=\"#install-docker-ce\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Docker CE</h3>\n<ol>\n<li>Ensure that all Docker dependencies are installed:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> -y yum-utils device-mapper-persistent-data lvm2</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8674b77524180ba538f7f2ba939211ea/a8afd/kubernetes_cluster_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 794px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 21.03274559193955%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApElEQVQI10WO2w6CMBAFQcJNBZHokwISLi10S6ktJf7/j7kEwWSymZezGStmKuXmwtQFdNyrIx1DIoKa+xtBM+zuVWDnZMcKqUyEObP3dTDJMPkNd8ru8KJW1lpPpFlYPdvA2coN9EN+7twkfErFnI5zDPrUyYgpDFlyUJiKeoV/3Yp5NdgF/Y0laAG6xdpWINjmVuBhYY0X/E0w2Cl7uyD/ZU6+oSwcZw0b+vYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/8674b77524180ba538f7f2ba939211ea/a8afd/kubernetes_cluster_03.png\"\n        srcset=\"/static/8674b77524180ba538f7f2ba939211ea/4de2f/kubernetes_cluster_03.png 200w,\n/static/8674b77524180ba538f7f2ba939211ea/6fd50/kubernetes_cluster_03.png 400w,\n/static/8674b77524180ba538f7f2ba939211ea/a8afd/kubernetes_cluster_03.png 794w\"\n        sizes=\"(max-width: 794px) 100vw, 794px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<ol start=\"2\">\n<li>Now we can add the Docker repository and install it:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\nyum <span class=\"token function\">install</span> -y docker-ce</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1cf7f1db03d628789cd84ba8b5af1ad7/2cb05/kubernetes_cluster_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 106.75844806007508%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACNElEQVQ4y32U6W7bMBCEZVu+b6cB+sNOLNm6SImU5KsB+v7P1W9F203QVMDA2Iic3dndYbxFVq/zy0LVc3V+zWobWx0Zdcz1sdgHqvOWtMCbZtWmvC30aW1va3sdx6Yfqn6gvF0s4EYLJol9KX+tzXVtLnN9Gidld5913lPBPnPxPdG/6QaHHPLG3l7rD8efqXqSlhJkFYqmaTmKDIrGsR0n9gu5f9DIXpkbKZb5GT5MQDtkgT/X9TAqeoHiph9qhCDnQQ61qwxWxQVQyuGRohrFBoJ/0C4F6Lw/ZKNwzrT1iUso9EPFWdN24urIYOl2G39pHkg/iRke8+GxQBW5+PUDRSBfAuUwOBakvp+GGr2cetRk1ESARKilw8Exn8QWzXwB8mdi6Z/fUSQ3uUNT3rq4/Dz/nqYVWaUFVfeYxzaiGnzuyaq2EaVgTpJSCm6jzi6B783ScmOvZPWaxmZZ7QcNOdSypNhIrl1McfGPyBb/kJEjTCKDnTdbGbllggifSWOuvUfc9I//Qu3W5j23QuL7QYO7yVrhMa3nkl0/3zvxW4ir7BXmEntkVa/xM+g1T6qFKZXZBK6GJvz8TPM8T4KVubjZ/I8sPof8o/og4kluzHWuTvI85ZFdu/u0pTKT9vDWsjizg2lWN8Or3PyQ4AdtlWVAjT1Lt8BekP11siBpmxzfp7F94Rk3j5END/FjbO6beEv8x7YxicTUQM6Tn0dGo5MbjT2dGT6P1P0z6X5e7+P0D+rQjK/G+oOTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/1cf7f1db03d628789cd84ba8b5af1ad7/2cb05/kubernetes_cluster_04.png\"\n        srcset=\"/static/1cf7f1db03d628789cd84ba8b5af1ad7/ddfc7/kubernetes_cluster_04.png 200w,\n/static/1cf7f1db03d628789cd84ba8b5af1ad7/b02cb/kubernetes_cluster_04.png 400w,\n/static/1cf7f1db03d628789cd84ba8b5af1ad7/2cb05/kubernetes_cluster_04.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"install-kubernetes\"><a href=\"#install-kubernetes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Kubernetes</h3>\n<p>First we need to add the Kubernetes repository all servers:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span> EOF <span class=\"token operator\">></span> /etc/yum.repos.d/kubernetes.repo  \n<span class=\"token punctuation\">[</span>kubernetes<span class=\"token punctuation\">]</span>  \nname<span class=\"token operator\">=</span>Kubernetes  \nbaseurl<span class=\"token operator\">=</span>https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64  \nenabled<span class=\"token operator\">=</span>1  \ngpgcheck<span class=\"token operator\">=</span>0  \nrepo_gpgcheck<span class=\"token operator\">=</span>0  \ngpgkey<span class=\"token operator\">=</span>https://packages.cloud.google.com/yum/doc/yum-key.gpg  \n https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg  \nEOF</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c87035b12fefc43f6109abedb7b3832/2cb05/kubernetes_cluster_05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 20.02503128911139%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAjklEQVQI122PUQuDIBSFBc2SuTEY662YrnRp1koGY/v//2vHehvC4fIhfpx7ydGtl+f7HF7CzrwLZReqPgCEmYWZ8AiozMS0I639D+Tr+pGPhWnPlKc3B6DKUQ1wCVSCQvu8XMfvyUc0lH1AyZ69EM3FfSSNIY3NyT7KYTlskcOKVfGbdyPfJq5Icmuz+QHj6BptjciFLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/6c87035b12fefc43f6109abedb7b3832/2cb05/kubernetes_cluster_05.png\"\n        srcset=\"/static/6c87035b12fefc43f6109abedb7b3832/ddfc7/kubernetes_cluster_05.png 200w,\n/static/6c87035b12fefc43f6109abedb7b3832/b02cb/kubernetes_cluster_05.png 400w,\n/static/6c87035b12fefc43f6109abedb7b3832/2cb05/kubernetes_cluster_05.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>Now we can install Kubernetes on all servers via yum:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> -y kubelet kubeadm kubectl</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0c274725c27642ae935e59b2fe11d4e/7d3b4/kubernetes_cluster_06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 795px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 109.0566037735849%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACUklEQVQ4y42T6XLiMBCEBQRzs1ybX4m5fMi2LNuYcOz7P9h+Y+1SkKTYrZpSSbZ6pme6pcbpYZZ/TLLDOKsXSZXHRRbZJDBpmCdBnkbWBPlirZUft/xYfYpRUi2K0yQ9sM6L0zCy3i7rbtOWH6l3iRbrV5iLoS6X5WVmT4viPM2Og8i2XJ11wkaqvUcPcQ/uBmZZnMG/1r+Ef3r4YY70QpBrmtWDqBjpshfaQVzcUv8F7w01F4I/z63wHydExTo1x0lavdDFPutsElm36WPlvVkdroIvL7La0zAu+1HBOoypWXV3qXoL1Y3/PdjbG4hJxAVFiPYm+X48n8DsB3FJ+n5oCS8wRLPJiV6QU7zX7Pk+EDr3R6sYD9OiGQrSmLfPEE8obNPuLiMvt9kTjI2JwNQdyaUY9aq6IAzNdxvazEmYo/BG0zm3HVvAyCEz49daQ9CZ5Eyalx3FNcUBiLxvodyIbEcShQC4jQqdjZZffixJITYRSWvcQvF+mHNJqDYskMfRcXvh/OeYclRuDARFvAYsowqlIOTba912m42W/f0RCvPGXnN7ph+mJZKKJKF6YumbVGAw1jz/mFnxpnMfWVvPkS4GsWXawGZWLM38XP/tew9/V5buFO39rK6MsTF2Tayq602eJ2CRijnRM6XAoDAviY38+FfDDTjIZVSBkZegeRIW8UTq57T9WKTyeK5Z7YyNgC1fkxVtG5/nzqfNCJNeiNuNGHFvGudEahnaV3ySVPL6vrzYXuAA5Mqdfx/qp7rUuhztso54yDjrqv/RyY9/A/5zklfE/RMvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/e0c274725c27642ae935e59b2fe11d4e/7d3b4/kubernetes_cluster_06.png\"\n        srcset=\"/static/e0c274725c27642ae935e59b2fe11d4e/ab524/kubernetes_cluster_06.png 200w,\n/static/e0c274725c27642ae935e59b2fe11d4e/19467/kubernetes_cluster_06.png 400w,\n/static/e0c274725c27642ae935e59b2fe11d4e/7d3b4/kubernetes_cluster_06.png 795w\"\n        sizes=\"(max-width: 795px) 100vw, 795px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"start-docker-and-kublet\"><a href=\"#start-docker-and-kublet\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start Docker and Kublet</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl <span class=\"token function\">enable</span> docker\nsystemctl <span class=\"token function\">enable</span> kubelet\nsystemctl start docker\nsystemctl start kubelet</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/722179931250471aa3c8948856aa217b/c4494/kubernetes_cluster_07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 17.353308364544322%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiElEQVQI1zWO2wrDIBBEkzSXJlELpe9pzc2uJkYttP//ZR2FwHCYWZjdzXrlhPkwcjDdenDyjLzQvn+7ejKl1BU06lISdHlRNRrESGmymw4P9+M6dKttzzKI8nXZm3lr5h2mnjbsQi3GNAEzQeF+fFnqtIsVOqQXLKeAO/mgiqcqBpWfQoxM5g/mxxWFoGgd3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/722179931250471aa3c8948856aa217b/b21dd/kubernetes_cluster_07.png\"\n        srcset=\"/static/722179931250471aa3c8948856aa217b/2d451/kubernetes_cluster_07.png 200w,\n/static/722179931250471aa3c8948856aa217b/06807/kubernetes_cluster_07.png 400w,\n/static/722179931250471aa3c8948856aa217b/b21dd/kubernetes_cluster_07.png 800w,\n/static/722179931250471aa3c8948856aa217b/c4494/kubernetes_cluster_07.png 801w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>To check in what Group Docker is running, run <code class=\"language-text\">docker info | grep -i cgroup</code>:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2f97b5453b34bb8ecac0959b0310fde/2cb05/kubernetes_cluster_08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 6.132665832290362%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAMUlEQVQI12MQ09AT0jHm0zIEMrjVDThUdVmVtVmVdYAku4ouo7wGg5w6FiSrxqqkDQDVkwaBUkxRegAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/b2f97b5453b34bb8ecac0959b0310fde/2cb05/kubernetes_cluster_08.png\"\n        srcset=\"/static/b2f97b5453b34bb8ecac0959b0310fde/ddfc7/kubernetes_cluster_08.png 200w,\n/static/b2f97b5453b34bb8ecac0959b0310fde/b02cb/kubernetes_cluster_08.png 400w,\n/static/b2f97b5453b34bb8ecac0959b0310fde/2cb05/kubernetes_cluster_08.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>In this case it is <code class=\"language-text\">cgroupfs</code> - we can now make sure that Kubernetes is added to this group:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sed</span> -i <span class=\"token string\">'s/cgroup-driver=systemd/cgroup-driver=cgroupfs/g'</span> /etc/systemd/system/kubelet.service.d/10-kubeadm.conf\nsystemctl daemon-reload\nsystemctl restart kubelet</code></pre></div>\n<h2 id=\"cluster-initialization\"><a href=\"#cluster-initialization\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cluster Initialization</h2>\n<p>So far we did the basic setup for all our servers - now we will initialize our cluster from the <strong>MASTER SERVER</strong> using the IP range for Flannel. Kubeadm is a tool built to provide <a href=\"https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/\">kubeadm init</a> and <a href=\"https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-join/\">kubeadm join</a> as best-practice <em>fast paths</em> for creating Kubernetes clusters. The <strong>init command</strong> executes the following phases:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubeadm init --pod-network-cidr<span class=\"token operator\">=</span>10.244.0.0/16</code></pre></div>\n<!-- kubeadm init --pod-network-cidr=10.244.0.0/16 --ignore-preflight-errors=NumCPU -->\n<p>Your Kubernetes master has initialized successfully! You can now join any number of machines by running the following on each node as root:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfdb2e41e6da1d38b41467e1b23bbddb/0cd32/kubernetes_cluster_09.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 30.79800498753117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7CAAAOwgEVKEqAAAABFElEQVQY03WRTUsCURSGb2p+zoQtE1NznHHGcSY/0KWbVrUKosAKkhYG/RahXQsrCALF2gVuhX7Z2znHJq5Bi4fDnXvmOWfeUUmriZQdEgGSNYbOVNNOKGep1LNVdhGruIgfeFJVqQ6176yrDjdnnENk3RZyXluEiaqPbXq+xv+hKTK+i1W8/4UpK4Dpd5Gtt2A2ujBIangdkTNGoyNDWCYCHV0a1Rxtlg/7wg6JWbCrnfNBT4aw3KQ7jiAebfgXlqoiT7OhCpZ8DufGealCDWqvClW0NzbiHuZXoCFRXJxd4m54g/vrW3x8LrFcfeHh+RVHwxFORmNMpi+YzhZ4fJvhaf6O9vGpvJymHxnlG0UyOL/CN94Preaygn2HAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/dfdb2e41e6da1d38b41467e1b23bbddb/b21dd/kubernetes_cluster_09.png\"\n        srcset=\"/static/dfdb2e41e6da1d38b41467e1b23bbddb/2d451/kubernetes_cluster_09.png 200w,\n/static/dfdb2e41e6da1d38b41467e1b23bbddb/06807/kubernetes_cluster_09.png 400w,\n/static/dfdb2e41e6da1d38b41467e1b23bbddb/b21dd/kubernetes_cluster_09.png 800w,\n/static/dfdb2e41e6da1d38b41467e1b23bbddb/0cd32/kubernetes_cluster_09.png 802w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubeadm <span class=\"token function\">join</span> X.X.X.X:6443 --token XXXXXXXXXXXXXXX --discovery-token-ca-cert-hash sha256:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</code></pre></div>\n<p>Copy the <code class=\"language-text\">kubeadmin join</code> command that is in the output and past it into your minion server terminals:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a371daebcb3d46cd9f35833ad43dad6a/c4494/kubernetes_cluster_10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.56179775280899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/klEQVQozzWRy2sTURTGb5Imk7SZyYxpfbSpdt7vO6/MTAimAdNYUqVFRKQUqS0uQhcSUEGtFrNxISqlimv3LgQXLhSUioiPf8pvDMLH5cyc893zO/eQad2vOU3BjRcMf3D9xsHj8Wh079XRm0/ff3z8evzw2curw9v7zw+Pf/7+9uvPh89fdu4+QH1JdhjFJRXdw8dc2ObdWF7uu4MNo395LmrbK5dWtnbWd4cIGq0ubj8ZtsXzvaoRVK0wv2Tmzxmk5sZIcHaTp3FBNMmCQs5I80nn4MXR23fvh/tPGNXNNVRyWjoVtkfjp+PD1xc2t/OiWVIcwloRZ0dVMwB/f2sXVBu39tCkkXbn4w7+l1UaDK4k69eU5YswlBS3KDtZIDsEToEmUN1LpU7f6q2p3VWeJmWdooJRnbrf2r5zf+/RuLd5s6x7ZdWd+HMT7BN+ytrRjBkwGi3KNhKg+MfiTRs+lDurk4ZaFK2K7lc0ChZGpVOSTXgvnQ1anNPEgwleip5oJVC8QgQza4W4BZoxsuswfybFnZKsrDNvhQKcdlSnCeIquml0UoQKRqEoBSeetyBa4EJDCHE2s61S2/Qtw3fMwDZDR/dmMU+Wy/iLUnbCiRMG0tDIokYwBbSok4pKa1bImQFn+KwRsNkaARkAGIvASjEzKApLZsY5sf3XX16SblMw4MsEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/a371daebcb3d46cd9f35833ad43dad6a/b21dd/kubernetes_cluster_10.png\"\n        srcset=\"/static/a371daebcb3d46cd9f35833ad43dad6a/2d451/kubernetes_cluster_10.png 200w,\n/static/a371daebcb3d46cd9f35833ad43dad6a/06807/kubernetes_cluster_10.png 400w,\n/static/a371daebcb3d46cd9f35833ad43dad6a/b21dd/kubernetes_cluster_10.png 800w,\n/static/a371daebcb3d46cd9f35833ad43dad6a/c4494/kubernetes_cluster_10.png 801w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>To start using your cluster, you need to run the following as a regular user:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p <span class=\"token variable\">$HOME</span>/.kube\n<span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> -i /etc/kubernetes/admin.conf <span class=\"token variable\">$HOME</span>/.kube/config\n<span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -u<span class=\"token variable\">)</span></span><span class=\"token keyword\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -g<span class=\"token variable\">)</span></span> <span class=\"token variable\">$HOME</span>/.kube/config</code></pre></div>\n<p>We will use <a href=\"https://github.com/coreos/flannel\">Flannel</a> as a simple and easy way to configure a layer 3 network fabric designed for Kubernetes. Flannel runs a small, single binary agent called flanneld on each host, and is responsible for allocating a subnet lease to each host out of a larger, preconfigured address space. Flannel uses either the Kubernetes API or etcd directly to store the network configuration, the allocated subnets, and any auxiliary data (such as the host’s public IP). Packets are forwarded using one of several backend mechanisms including VXLAN and various cloud integrations:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4536a0eaa84a494cdbbeafa9f2922f6a/c4494/kubernetes_cluster_11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 22.347066167290887%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiElEQVQI13WObQuCQBCEF4wyFc2ujxUYdsfpvflS3f//Zc4Wfkt4GHZhZ3ao0OPJvkozV2ZKpTsqn6kAZSRwh6fdt2bFYmVahsp+EuFz9kzFEXOmfMo2qNs9erorusn/1O59GSIUZlSAFt2Y65DrIWk6uko2b4Hr32cRYu0jZkSIbxHU4/ht8wLnGBxyvVZblwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/4536a0eaa84a494cdbbeafa9f2922f6a/b21dd/kubernetes_cluster_11.png\"\n        srcset=\"/static/4536a0eaa84a494cdbbeafa9f2922f6a/2d451/kubernetes_cluster_11.png 200w,\n/static/4536a0eaa84a494cdbbeafa9f2922f6a/06807/kubernetes_cluster_11.png 400w,\n/static/4536a0eaa84a494cdbbeafa9f2922f6a/b21dd/kubernetes_cluster_11.png 800w,\n/static/4536a0eaa84a494cdbbeafa9f2922f6a/c4494/kubernetes_cluster_11.png 801w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"networking-details\"><a href=\"#networking-details\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Networking details</h3>\n<p>Platforms like Kubernetes assume that each container (pod) has a unique, routable IP inside the cluster. The advantage of this model is that it removes the port mapping complexities that come from sharing a single host IP.</p>\n<p>Flannel is responsible for providing a layer 3 IPv4 network between multiple nodes in a cluster. Flannel does not control how containers are networked to the host, only how the traffic is transported between hosts. However, flannel does provide a CNI plugin for Kubernetes and a guidance on integrating with Docker.</p>\n<h3 id=\"check-the-cluster-state\"><a href=\"#check-the-cluster-state\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Check the cluster state.</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods --all-namespaces</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df753f9b305bfa132acba984b14d0965/9771d/kubernetes_cluster_12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 798px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.94486215538847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+klEQVQY0yVQaZOCMAztioDIrlz6aUdUjh6UtpSVw///x/YVZjKZpsk7EpKqKaImke+g7iOqEWGr/FoiTtRc5OhXMmyU9xSHh/Be3anVx0oiyJ2Sq13PfMj0nJvlaj94nJkhJXO9O42YCRp1s5+fboz5gPLwFODFmBvIzRwLm6gJtctmuci/bzGGrcbQ5qIHLwS8l/CdIIM+/JJyUwZrqufCroVZcuOyc1WyrwfHRgCkak76d8ytv/0DDI/OXQZlPqAHTfAdqw4YeHO9kmFb2C6GNagl+W3hZQc7Zdi+2RXI3GkumZ5gMmh6HG8Hgwuj0NwvtJMi45Z4/AO4Eiu8kMCM9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/df753f9b305bfa132acba984b14d0965/9771d/kubernetes_cluster_12.png\"\n        srcset=\"/static/df753f9b305bfa132acba984b14d0965/84ded/kubernetes_cluster_12.png 200w,\n/static/df753f9b305bfa132acba984b14d0965/53cad/kubernetes_cluster_12.png 400w,\n/static/df753f9b305bfa132acba984b14d0965/9771d/kubernetes_cluster_12.png 798w\"\n        sizes=\"(max-width: 798px) 100vw, 798px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>Then check your nodes from the master:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get nodes</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82a5a3ab8ad9c987abb425c38f311356/04f61/kubernetes_cluster_13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 11.304347826086957%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAATElEQVQI12MQ1DHl0TLi0jDgUDcQ0jY20TY20DIy1jSUVtdnVdNjkFPHh/i1jPh1TQV0TLk1DPl0TNg0DFjV9VnU9dlV9bjU9fFrBgCF8Q3RsBnR3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/82a5a3ab8ad9c987abb425c38f311356/b21dd/kubernetes_cluster_13.png\"\n        srcset=\"/static/82a5a3ab8ad9c987abb425c38f311356/2d451/kubernetes_cluster_13.png 200w,\n/static/82a5a3ab8ad9c987abb425c38f311356/06807/kubernetes_cluster_13.png 400w,\n/static/82a5a3ab8ad9c987abb425c38f311356/b21dd/kubernetes_cluster_13.png 800w,\n/static/82a5a3ab8ad9c987abb425c38f311356/04f61/kubernetes_cluster_13.png 805w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h2 id=\"create-and-scale-a-deployment-using-kubectl\"><a href=\"#create-and-scale-a-deployment-using-kubectl\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create and scale a deployment using kubectl</h2>\n<p><a href=\"https://kubernetes.io/docs/reference/kubectl/overview/\">Kubectl</a> is a command line interface for running commands against Kubernetes clusters. We can run a NGINX container with the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create deployment nginx --image<span class=\"token operator\">=</span>nginx</code></pre></div>\n<p>You can verify that the <strong>Pod</strong> was created by Kubernetes:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c2c6d56986978d6b425852b0ad9fe1c/c4494/kubernetes_cluster_14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 10.986267166042447%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAY0lEQVQI12Pg1zER0jcX0DHl0zWV1Db21jFxUNO31zAwUtHRVNXVUtbRVNHRU9UVUdBgkFNnlFNnQEYCumZ82sa8WsY8Wkb82sYS6gYqmoZGqnosStqMyjpAxKyiyyiPqgeGABAVD4BuscFsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/9c2c6d56986978d6b425852b0ad9fe1c/b21dd/kubernetes_cluster_14.png\"\n        srcset=\"/static/9c2c6d56986978d6b425852b0ad9fe1c/2d451/kubernetes_cluster_14.png 200w,\n/static/9c2c6d56986978d6b425852b0ad9fe1c/06807/kubernetes_cluster_14.png 400w,\n/static/9c2c6d56986978d6b425852b0ad9fe1c/b21dd/kubernetes_cluster_14.png 800w,\n/static/9c2c6d56986978d6b425852b0ad9fe1c/c4494/kubernetes_cluster_14.png 801w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"kubernetes-stuck-on-containercreating\"><a href=\"#kubernetes-stuck-on-containercreating\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes stuck on ContainerCreating</h3>\n<p>Use <code class=\"language-text\">kubectl describe pods</code> to list all the events associated with the pod, including pulling of images, starting of containers:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Normal - Scheduled - 13m - default-scheduler - Successfully assigned default/nginx-5c7588df-76mgw to in-centos-minion2\n\nWarning - FailedCreatePodSandBox - 13m - kubelet, in-centos-minion2  Failed create pod sandbox: rpc error: code <span class=\"token operator\">=</span> Unknown desc <span class=\"token operator\">=</span> failed to <span class=\"token keyword\">set</span> up sandbox container <span class=\"token string\">\"8ab7c07633f6170dabd8df9a28680a7b9af79f10374e81df8c85dac609abc209\"</span> network <span class=\"token keyword\">for</span> pod <span class=\"token string\">\"nginx-5c7588df-76mgw\"</span><span class=\"token keyword\">:</span> NetworkPlugin cni failed to <span class=\"token keyword\">set</span> up pod <span class=\"token string\">\"nginx-5c7588df-76mgw_default\"</span> network: <span class=\"token function\">open</span> /run/flannel/subnet.env: no such <span class=\"token function\">file</span> or directory</code></pre></div>\n<p>I noticed that - to use Flannel - you need to initialize <code class=\"language-text\">kubeadm</code> with the <code class=\"language-text\">--pod-network-cidr=10.244.0.0/16</code> flag. You can reset your deployment with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubeadm reset\niptables -F <span class=\"token operator\">&amp;&amp;</span> iptables -t nat -F <span class=\"token operator\">&amp;&amp;</span> iptables -t mangle -F <span class=\"token operator\">&amp;&amp;</span> iptables -X</code></pre></div>\n<p>Now back to <code class=\"language-text\">kubeadm init --pod-network-cidr=10.244.0.0/16</code> and rebuild the deployment - success:</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c8f56f6e5ae825238ae8904606cbf34/90d05/kubernetes_cluster_15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 7.797029702970297%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAYUlEQVQI12PgUtf/zwnEHOoG/y21jf5baBv/N9Q1+W+nafhfFYgZlLT/c6jo/meQU//PIKsGoXFhkDyfjvF/PqAh3EADWTUM/6sraf0PUgUaoKD5nxmIGeU1/rMqaxNtIAAkQTWu6LfS9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/0c8f56f6e5ae825238ae8904606cbf34/b21dd/kubernetes_cluster_15.png\"\n        srcset=\"/static/0c8f56f6e5ae825238ae8904606cbf34/2d451/kubernetes_cluster_15.png 200w,\n/static/0c8f56f6e5ae825238ae8904606cbf34/06807/kubernetes_cluster_15.png 400w,\n/static/0c8f56f6e5ae825238ae8904606cbf34/b21dd/kubernetes_cluster_15.png 800w,\n/static/0c8f56f6e5ae825238ae8904606cbf34/90d05/kubernetes_cluster_15.png 808w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h3 id=\"scaling\"><a href=\"#scaling\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scaling</h3>\n<p>To scale up our web server contingent to <strong>4</strong>, we can use the following <code class=\"language-text\">kubectl</code> command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl scale deployment nginx --replicas<span class=\"token operator\">=</span>4\nkubectl get pods</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0ee750f3b654d91ec11e16284718e400/90d05/kubernetes_cluster_16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.46039603960396%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAgElEQVQI122MsQ7CIBRFMVYGDaLRpQk1KUWgPuCVQNFFR///k6RzTU7OdM8l3OVzKEdIzM8C8tfPbzt97BQMSuVk/1DVEujNkDWnUGrPIR/GyGwUY+yxtBrpAI3BrQQi7qT7V1Y4pAs+r/jiLlHld8ozl5thafY61AvS6c0y1Wt+by8VvDinCogAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/0ee750f3b654d91ec11e16284718e400/b21dd/kubernetes_cluster_16.png\"\n        srcset=\"/static/0ee750f3b654d91ec11e16284718e400/2d451/kubernetes_cluster_16.png 200w,\n/static/0ee750f3b654d91ec11e16284718e400/06807/kubernetes_cluster_16.png 400w,\n/static/0ee750f3b654d91ec11e16284718e400/b21dd/kubernetes_cluster_16.png 800w,\n/static/0ee750f3b654d91ec11e16284718e400/90d05/kubernetes_cluster_16.png 808w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>To get rid of those pods you can scale it back down to 0 replicas:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl scale deployment nginx --replicas<span class=\"token operator\">=</span>0</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9d16fb66d2a7d404b8a16e99cadae047/c4494/kubernetes_cluster_17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 12.359550561797752%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAXUlEQVQI12Pg1zXl1Tbm1TLi1DAQ0TC01DKy1jW10DSUVdMXUNXjU9TillfnkddgllNnwET8OibC+uaCuqZAU0S0jO20jc01DU3V9LRUdFVVdJQVtVSUgEibA5tmAN7qD60xv2bbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/9d16fb66d2a7d404b8a16e99cadae047/b21dd/kubernetes_cluster_17.png\"\n        srcset=\"/static/9d16fb66d2a7d404b8a16e99cadae047/2d451/kubernetes_cluster_17.png 200w,\n/static/9d16fb66d2a7d404b8a16e99cadae047/06807/kubernetes_cluster_17.png 400w,\n/static/9d16fb66d2a7d404b8a16e99cadae047/b21dd/kubernetes_cluster_17.png 800w,\n/static/9d16fb66d2a7d404b8a16e99cadae047/c4494/kubernetes_cluster_17.png 801w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>If you try to delete the pods by name <code class=\"language-text\">kubectl delete pod nginx-5c7588df-lf2pb</code>, or try to delete all: <code class=\"language-text\">kubectl delete pods --all</code>, Kubernetes will respawn new pods to meet your deployment scale requirement.</p>\n<h2 id=\"pod-deployment\"><a href=\"#pod-deployment\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pod Deployment</h2>\n<p>Let’s deploy an simple Angular app inside a <a href=\"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#pod-v1-core\">Kubernetes Pod</a> - we will use the 0 release of <a href=\"https://hub.docker.com/r/richardchesterwood/k8s-fleetman-webapp-angular/tags\">this Docker image</a> to get started with. To do this we will have to create a Pod Config file for it called <code class=\"language-text\">webapp-angular.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> richardchesterwood/k8s<span class=\"token punctuation\">-</span>fleetman<span class=\"token punctuation\">-</span>webapp<span class=\"token punctuation\">-</span>angular<span class=\"token punctuation\">:</span>release0</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6ece5af460f568c8360df8d01189e19/2df25/kubernetes_cluster_18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 797px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 19.196988707653702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAaUlEQVQI12NQtXNVtXVVd3DXcPSAIBVbF2UbZwhSsXWFi8MRULGStZOSjTODgK4pi5IWg5w6OYhP25hDTY9BVp1BVg0nwqVZUM+UV8uIS92AXUUXaAqQZFfV5VDVAyI2FR0gm01FF5dmAE0jHwgmMogxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/c6ece5af460f568c8360df8d01189e19/2df25/kubernetes_cluster_18.png\"\n        srcset=\"/static/c6ece5af460f568c8360df8d01189e19/2e1d6/kubernetes_cluster_18.png 200w,\n/static/c6ece5af460f568c8360df8d01189e19/ab190/kubernetes_cluster_18.png 400w,\n/static/c6ece5af460f568c8360df8d01189e19/2df25/kubernetes_cluster_18.png 797w\"\n        sizes=\"(max-width: 797px) 100vw, 797px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>We can now use <strong>kubectl</strong> to read our configuration file and generate the webapp Pod:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f webapp-angular.yaml</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fd77489319b82d60f004fe3f5112af8a/9d423/kubernetes_cluster_19.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.438356164383563%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkUlEQVQI11XLWwuCMBQAYMuZGMqg6EIwm1O2sx13zRHVS///V/UYwvf6Fac5X+Pr4p9Hm/cQqc10Xrp5OeLjq+MH0xu8g2CkUyPywRS9+mOYGSam41nHg0nUpFbHBgKFIActRhQcaqY2PRAO5V2tcguRTHYrsOT6pkInsJa+kW43WaJ8wTWRrppsJbBgcjV79QPUkBag3fawxQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/fd77489319b82d60f004fe3f5112af8a/b21dd/kubernetes_cluster_19.png\"\n        srcset=\"/static/fd77489319b82d60f004fe3f5112af8a/2d451/kubernetes_cluster_19.png 200w,\n/static/fd77489319b82d60f004fe3f5112af8a/06807/kubernetes_cluster_19.png 400w,\n/static/fd77489319b82d60f004fe3f5112af8a/b21dd/kubernetes_cluster_19.png 800w,\n/static/fd77489319b82d60f004fe3f5112af8a/9d423/kubernetes_cluster_19.png 803w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>You can inspect the pod with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl describe pod webapp</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a7559982602c2a4d3fc663a5623fceef/c4494/kubernetes_cluster_20.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 96.87890137328338%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7CAAAOwgEVKEqAAAACXUlEQVQ4y4WUSY8TQQyFO8tMks4yCxxAk9mypzt7ZsIgDkggLghxQdw48f//g3mfuytqogQOT9Wudj3bz66KrubP1k43Vu0l1hgt7VL2+WBm5/2ZRd2hld727P5ubH3ZGVIb6n+sveh2ZBFrERezJ2tO13YmZ9CcrK3ymNhZL7Xnbz/sy6/fdvPhk0VvHhVg5EEckB1DJ9laS4Tlh6lnSYbY7WRj089fbff9p929fLSK/tcIqmCV+4mVTiCizMZ4mWWlA5eLnUiffA+7oiDng7nbjdHCasO59lP3JwEqwQYuU2u6sVjOsOMUj1e+kr5HDdqEUkO5QcPb0d//iPB6/d7ZISKTdro1tA3o5DYrQA786sOFAznKCl5+UMk1lfNq9WKh9OvlOz+EjgF0vaaDlI5/VvYsmwbH3BNiL6IZREeDqrK9kob+jUaua+rR96V2c5zqMoTXy92+CUQvzpV3rqhXEYczCMiKDCk5lJZlm3jGoaM+p25npaFbdGy46XBHhD4C+WCX/jFn+3kLBIeEzcnKm8Lq4grRzeD/N6JYdpGUtl9okCGKIUXHvJNIEMr2rI7pdrhXHBu0ZAYhguTo4VPNCAj3FpG5Ncwg5GSIvvzDB7uuq7fP9BTqeWmUTHl0mYN8M4d0mBvAXiA81qDsO+9yrIxa6m5dpAQANQXB5nUpy5Fv/HxfQf3qKQAPht8gv4ZqaKySmnqyQJVZpDFCSU4Vrpgei6oOlyHXik9V+0EWVifO73bU14G1mrESUhGtRbyabS2RUyqnuQKmk6VNsfV/IT27vfw1otQCKP0PHGv6uhB9ePgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/a7559982602c2a4d3fc663a5623fceef/b21dd/kubernetes_cluster_20.png\"\n        srcset=\"/static/a7559982602c2a4d3fc663a5623fceef/2d451/kubernetes_cluster_20.png 200w,\n/static/a7559982602c2a4d3fc663a5623fceef/06807/kubernetes_cluster_20.png 400w,\n/static/a7559982602c2a4d3fc663a5623fceef/b21dd/kubernetes_cluster_20.png 800w,\n/static/a7559982602c2a4d3fc663a5623fceef/c4494/kubernetes_cluster_20.png 801w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>Just like in Docker, we can use <strong>kubectl</strong> to run commands against our containers - e.g. to access the shell inside your container, contact the webserver (that should be serving our Angular app) and printing out index page:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl -it <span class=\"token function\">exec</span> webapp sh\n/ <span class=\"token comment\"># wget http://localhost:80</span>\n/ <span class=\"token comment\"># cat index.html</span></code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3680b75231b5dbe4d4adef01094c4e5/2cb05/kubernetes_cluster_21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 39.2991239048811%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABDUlEQVQY022R226DMBBEDYG0YGhCpKpSpZRwM74bGwL//2ddmzw0aqQja7SrtWfW6Iu5Wa+SWSOXzaxcLphZzF05aEmM7CWgiJ4GXdUU3Vhc0/i2w9A3c3ezGebIoDAxWS+PgUPDkUegdhc8bkXaikPDkpannTh2Ep3F/CmXitqsYehKPD/jTvTMo3sN3V0fe1XKpRAO8zkjJukEGHtc8eei17z1quAOxoB3ojGdsnHK6ZSPky8O2qfoxOvhks9A2kFOBTFCKp6EE3TSiKimUT2G8xkYLqi9mLXS68VsZ3UHFwCm9kPM0Cq5A3GCXFBnFshHA4AAX8g7pAb2DjuEB3fCSoP2Lvxu4W/+2/4FKy43A8iw4f8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/a3680b75231b5dbe4d4adef01094c4e5/2cb05/kubernetes_cluster_21.png\"\n        srcset=\"/static/a3680b75231b5dbe4d4adef01094c4e5/ddfc7/kubernetes_cluster_21.png 200w,\n/static/a3680b75231b5dbe4d4adef01094c4e5/b02cb/kubernetes_cluster_21.png 400w,\n/static/a3680b75231b5dbe4d4adef01094c4e5/2cb05/kubernetes_cluster_21.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h2 id=\"kubernetes-services\"><a href=\"#kubernetes-services\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Services</h2>\n<p>We now have a Pod that is serving our Angular frontend. To be able to access this Pod from <em>the outside</em> we need to add a <a href=\"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#service-v1-core\">Kubernetes service</a>. Let’s create a file <code class=\"language-text\">webapp-service.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Unique key of the Service instance</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> fleetman<span class=\"token punctuation\">-</span>webapp\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Accept traffic sent to port 80</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token comment\"># The nodePort is available from outside of the</span>\n      <span class=\"token comment\"># cluster when is set to NodePort. It's value has</span>\n      <span class=\"token comment\"># to be > 30000</span>\n      <span class=\"token key atrule\">nodePort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30080</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Define which pods are going to</span>\n    <span class=\"token comment\"># be represented by this service</span>\n    <span class=\"token comment\"># The service makes an network</span>\n    <span class=\"token comment\"># endpoint for our app</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> webapp\n  <span class=\"token comment\"># Setting the Service type to ClusterIP makes the</span>\n  <span class=\"token comment\"># service only available from inside the cluster</span>\n  <span class=\"token comment\"># To expose a port use NodePort instead</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> NodePort</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/68c4840a4930b8c1b6f5c521aab64a9d/2cb05/kubernetes_cluster_22.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.685857321652065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBUlEQVQoz5WQXVOCQBSG18AIBcPqKpUElv3kGzUuyoxM5f//oc7CTN04oTPPnNnZOe+e5ywiuwPZHVl9YnXD64Z+HvH2O3jfB1C3+/DjwNv7X0TdQL/39gWgSbTSfYlmoWJO0IKgOZzxH8/nmLU9E1maNLV4DlX3xS2OtSUfuHTw0sHOoxoYUjGSGjge+lLzBIAWVM13aT+WKB7SVxireXwYSF09weGJmyVHLusJj2jqJJvHvDJJAoxodhdCTeGgdxb/hCEJ5hYvlHkQAcr5Qm0nWU+TzX20smVpywL8rwjDwk68HrMMlgdhI4zN1tnA0QXhrHrKKlsUY57DfPC3Rdl9W2/4B2G6RKGmZezBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/68c4840a4930b8c1b6f5c521aab64a9d/2cb05/kubernetes_cluster_22.png\"\n        srcset=\"/static/68c4840a4930b8c1b6f5c521aab64a9d/ddfc7/kubernetes_cluster_22.png 200w,\n/static/68c4840a4930b8c1b6f5c521aab64a9d/b02cb/kubernetes_cluster_22.png 400w,\n/static/68c4840a4930b8c1b6f5c521aab64a9d/2cb05/kubernetes_cluster_22.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>We now have to add the <strong>Selector</strong> <code class=\"language-text\">webapp</code> in form of a label in <code class=\"language-text\">webapp-angular.yaml</code> to our frontend pod to connect it to our service:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> webapp\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> richardchesterwood/k8s<span class=\"token punctuation\">-</span>fleetman<span class=\"token punctuation\">-</span>webapp<span class=\"token punctuation\">-</span>angular<span class=\"token punctuation\">:</span>release0</code></pre></div>\n<p>The service can be added to our cluster by the following commands:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f webapp-angular.yaml\nkubectl apply -f webapp-service.yaml</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c51a7ac0645e16efcfdee5285948d045/2cb05/kubernetes_cluster_23.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 9.887359198998748%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAcUlEQVQI12Pg1zYRNrCQ0TFV0jPj0TRk1zLi1jDg0DAQUdN3VtN3VTdwVNV1Vtdz1TBwUdd3UtPllVNnkFNnBJMMvFrGQvrmIrpmonpmktrGKrqm/JqGXBqGvOoGUqp6ogoaogqaQCSmqAlhsEC0gREATnIQ6Oliyu8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/c51a7ac0645e16efcfdee5285948d045/2cb05/kubernetes_cluster_23.png\"\n        srcset=\"/static/c51a7ac0645e16efcfdee5285948d045/ddfc7/kubernetes_cluster_23.png 200w,\n/static/c51a7ac0645e16efcfdee5285948d045/b02cb/kubernetes_cluster_23.png 400w,\n/static/c51a7ac0645e16efcfdee5285948d045/2cb05/kubernetes_cluster_23.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>By applying our changes, we have updated our pod and created our service.</p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d518f94e0fd4c18a118d9cf692442559/9f07b/kubernetes_cluster_24.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 13.681592039800993%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAmElEQVQI1z3O2Q6CMBQE0GqMCg9ExAWItLRCl3vbUkr//9uEkJhM5mlOMuRmQqGmCpfSzHeMJcSHTYWJjZzC12qBKDCninSS/HsP04RKXwt4c9MOtjdzK/DVGwGxGv2ZQyGnC4dsdNngTkzngztuZveadBApps+65tCoQHF5CGAu1dI30lOIJVUMorDpyaHT4dqbVR62F+oHL+0W302KEXEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/d518f94e0fd4c18a118d9cf692442559/b21dd/kubernetes_cluster_24.png\"\n        srcset=\"/static/d518f94e0fd4c18a118d9cf692442559/2d451/kubernetes_cluster_24.png 200w,\n/static/d518f94e0fd4c18a118d9cf692442559/06807/kubernetes_cluster_24.png 400w,\n/static/d518f94e0fd4c18a118d9cf692442559/b21dd/kubernetes_cluster_24.png 800w,\n/static/d518f94e0fd4c18a118d9cf692442559/9f07b/kubernetes_cluster_24.png 804w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h2 id=\"updating-the-pod\"><a href=\"#updating-the-pod\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Updating the Pod</h2>\n<p>To Update a Pod in Production with 0 downtime we can use labels. We can define a second pod inside the same file <code class=\"language-text\">webapp-angular.yaml</code>. Right now we are going to use release versions to define our pods. Later we might change this to a <strong>production</strong> and a <strong>development</strong> version - both of which can then be run inside the same cluster and be served by different services:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> webapp\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> richardchesterwood/k8s<span class=\"token punctuation\">-</span>fleetman<span class=\"token punctuation\">-</span>webapp<span class=\"token punctuation\">-</span>angular<span class=\"token punctuation\">:</span>release0\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp<span class=\"token punctuation\">-</span>release<span class=\"token punctuation\">-</span>0<span class=\"token punctuation\">-</span><span class=\"token number\">5</span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> webapp\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0-5\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> webapp\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> richardchesterwood/k8s<span class=\"token punctuation\">-</span>fleetman<span class=\"token punctuation\">-</span>webapp<span class=\"token punctuation\">-</span>angular<span class=\"token punctuation\">:</span>release0<span class=\"token punctuation\">-</span><span class=\"token number\">5</span></code></pre></div>\n<p>Make sure to surround release version with quotation marks to convert it into a string - <strong>“0”</strong>. Otherwise you end up with the error message <code class=\"language-text\">for: &quot;webapp-angular.yaml&quot;: cannot convert int64 to string</code></p>\n<p>Now we have to modify our service <code class=\"language-text\">webapp-service.yaml</code>: to not only check for the app name label, but also for the release version - we want to only connect to the current version 0. Once the version 0.5 is deployed we then can update the service to connect us to the updated Pod instead - allowing us to deploy the update with 0 downtime:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># Unique key of the Service instance</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> fleetman<span class=\"token punctuation\">-</span>webapp\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Accept traffic sent to port 80</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token comment\"># The nodePort is available from outside of the</span>\n      <span class=\"token comment\"># cluster when is set to NodePort. It's value has</span>\n      <span class=\"token comment\"># to be > 30000</span>\n      <span class=\"token key atrule\">nodePort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30080</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Define which pods are going to</span>\n    <span class=\"token comment\"># be represented by this service</span>\n    <span class=\"token comment\"># The service makes an network</span>\n    <span class=\"token comment\"># endpoint for our app</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> webapp\n    <span class=\"token key atrule\">release</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0\"</span>\n  <span class=\"token comment\"># Setting the Service type to ClusterIP makes the</span>\n  <span class=\"token comment\"># service only available from inside the cluster</span>\n  <span class=\"token comment\"># To expose a port use NodePort instead</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> NodePort</code></pre></div>\n<p>Now update both our Pod and Service - as well add the new Pod with our updated Angular app:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl apply -f webapp-angular.yaml\nkubectl apply -f webapp-service.yaml\nkubectl get pods --show-labels</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec439dac6255e799e99435ed1f1cf80d/9771d/kubernetes_cluster_25.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 798px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 14.661654135338345%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAm0lEQVQI1y2O2Q6CMBREUUEWKwrhwRcFpLa3+0KL//9nlsRk3mZyzmSdijcZaqKrj66JacXa6XhXEXGvmAvMee6DDCtYB/Y8sexJ9rzonpb7C3PFIvK3OM3ivMgSqybtFnmYWEFMTk2l4gBWgH1gmY1wHOGPSKor960ICHZEclZYIeY7vZVY9mYrZtFQM5itnDmiNlW9+SZBevoDc+sXOPnMga8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/ec439dac6255e799e99435ed1f1cf80d/9771d/kubernetes_cluster_25.png\"\n        srcset=\"/static/ec439dac6255e799e99435ed1f1cf80d/84ded/kubernetes_cluster_25.png 200w,\n/static/ec439dac6255e799e99435ed1f1cf80d/53cad/kubernetes_cluster_25.png 400w,\n/static/ec439dac6255e799e99435ed1f1cf80d/9771d/kubernetes_cluster_25.png 798w\"\n        sizes=\"(max-width: 798px) 100vw, 798px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>Now that both pods are running we can edit our service <code class=\"language-text\">webapp-service.yaml</code> and change the <code class=\"language-text\">selector</code> to <code class=\"language-text\">release: &quot;0-5&quot;</code>. Apply the change with <code class=\"language-text\">kubectl apply -f webapp-service.yaml</code> and verify that the service is now switched to the new release with <code class=\"language-text\">kubectl describe service fleetman-webapp</code></p>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cfbd3173af329d9758dffc48aa0baff8/9d423/kubernetes_cluster_26.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.60896637608966%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJ0lEQVQY03WQ246CMBCGCwqeUESzV+KplJZ2pgUpiDf7/q+1o0ZjNrvJl2bydw7/DMvqIbP9trml0G2bIXN9it0COwf+G/wVfKcvN9tdZN0K2xYYHBR7k2K/qJrEtHPVbJphQ12Mj6TLC3QFqjNUBAddoCmdLd3upNleBntJL1uCD48Vy0u2ExSvwMelDTmMCogLnAg7ETiVLuJAaeOTDl+MzobRTPqjpKhAKs7q65ftd7bfQJtAN1N1LOxMNZHAMQfKoRoKCGrNYoHkPqDhB7W+Lz+kArdnmJHy9EaQr3f8yepp+54hl6ZdoZ+qmh0k+zzMf9CFFvpCewYnvaQ7Uyzs08iL6q/Kh5goN+FmXmLMzdq2SeXGRxVzTWJIV83LIBeP9xd38QdCJjdcEUFNWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/cfbd3173af329d9758dffc48aa0baff8/b21dd/kubernetes_cluster_26.png\"\n        srcset=\"/static/cfbd3173af329d9758dffc48aa0baff8/2d451/kubernetes_cluster_26.png 200w,\n/static/cfbd3173af329d9758dffc48aa0baff8/06807/kubernetes_cluster_26.png 400w,\n/static/cfbd3173af329d9758dffc48aa0baff8/b21dd/kubernetes_cluster_26.png 800w,\n/static/cfbd3173af329d9758dffc48aa0baff8/9d423/kubernetes_cluster_26.png 803w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<h2 id=\"kubernetes--compose--kompose\"><a href=\"#kubernetes--compose--kompose\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes + Compose = Kompose</h2>\n<p><a href=\"http://kompose.io\">Kompose</a> is a conversion tool for Docker Compose to container orchestrators such as Kubernetes (or OpenShift).</p>\n<ul>\n<li>Simplify your development process with Docker Compose and then deploy your containers to a production cluster</li>\n<li><a href=\"https://kubernetes.io/docs/tasks/configure-pod-container/translate-compose-kubernetes/\">Convert</a> your <em>docker-compose.yaml</em> with one simple command <code class=\"language-text\">kompose convert</code></li>\n<li>Immediately bring up your cluster with <code class=\"language-text\">kompose up</code></li>\n<li>Bring it back down with <code class=\"language-text\">kompose down</code></li>\n</ul>\n<p>Kompose is in EPEL CentOS repository. If you don’t have EPEL repository already installed and enabled you can do it by running <code class=\"language-text\">yum install epel-release</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum -y <span class=\"token function\">install</span> kompose</code></pre></div>\n<h3 id=\"use-kompose\"><a href=\"#use-kompose\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use Kompose</h3>\n<p>In just a few steps, we’ll take you from Docker Compose to Kubernetes. All you need is an existing <code class=\"language-text\">docker-compose.yml</code> file:</p>\n<ol>\n<li>Go to the directory containing your <em>docker-compose.yml</em> file. Run the <code class=\"language-text\">kompose up</code> command to deploy to Kubernetes directly.</li>\n<li>Or convert the <em>docker-compose.yml</em> file to files that you can use with <code class=\"language-text\">kubectl</code>, run <code class=\"language-text\">kompose convert</code>:</li>\n</ol>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb6f00d71063329541c05275c4765417/f206b/kubernetes_cluster_x1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 49.44237918215614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABVElEQVQoz3WSW2+CQBSEqeANFbk0pi9WRGXZC3uARcCk//93dRaS2qQ1OSEfD8OZmYMTCLOTZp2Tzyqf0aaoLReVz2s3E07KnVPhfLL/B5rVTS+v5U424LC8Qx+IJqMuVe3holbQvxKvc724lsub3qt2y5uY+i2vwYd6gKlFJt9O7KV4y401ySorFk1SDTvRBKo9tl8JIz/lPmwf83HYOPlzPhRP9D2iAck3RQXP+MRGmqM0JI3g9Rm5cr1mBHfwCKeTWexzQkURdRH1NvmtRHiA5Zzci/IucpYJL5NzcCbds5jAywDSmVMf14+E+kAatAWIdLdXd7APPdr6MTnlnPxPsKAuroaYOkRF7Fj36CzUHZ4bjrPZQ3hn8RT/ngU2N4+xJ4OdgKTq3+sHxEn1CFWLOpFilv537ZVqQ6wq77vxb4m0tY1Xa5uRe+azlLupAPwVfwMC/kf5RRZ9qgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/cb6f00d71063329541c05275c4765417/b21dd/kubernetes_cluster_x1.png\"\n        srcset=\"/static/cb6f00d71063329541c05275c4765417/2d451/kubernetes_cluster_x1.png 200w,\n/static/cb6f00d71063329541c05275c4765417/06807/kubernetes_cluster_x1.png 400w,\n/static/cb6f00d71063329541c05275c4765417/b21dd/kubernetes_cluster_x1.png 800w,\n/static/cb6f00d71063329541c05275c4765417/f206b/kubernetes_cluster_x1.png 807w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<hr>\n<p>And then <code class=\"language-text\">kubectl create -f &lt;output files&gt;</code> - e.g. :</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create -f api-service.yaml,elasticsearch-service.yaml,frontend-service.yaml,wiki-service.yaml,api-deployment.yaml,api-claim0-persistentvolumeclaim.yaml,elasticsearch-deployment.yaml,esdata-en-persistentvolumeclaim.yaml,frontend-deployment.yaml,frontend-claim0-persistentvolumeclaim.yaml,wiki-deployment.yaml</code></pre></div>\n<hr>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/214bb6070760fa10146480fde6b74ebd/2cb05/kubernetes_cluster_x2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 29.036295369211512%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAr0lEQVQY042PWxOCIBSEqbSpDAP1rdukeQVRFLz8/z/WAXsuZ745s8OyBxYFYrxwRWpNhP6KWlNAaJ8rzHrfHoJFrQXCXOMasw5FcqJiAHzWn8vumDVuwoG9mcyN2f7NARCGZMFYTswQxEit4J1DJnavCt1SdE3RPVtFKOdADGE72S0aV/0pb7fPAj3y/ywxmFZA1cEr5WZlOJIzbSA8EtNcE668QuKqc6ACfOxn+AOyHioUMVS2cQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Creating a Kubernetes Cluster\"\n        title=\"\"\n        src=\"/static/214bb6070760fa10146480fde6b74ebd/2cb05/kubernetes_cluster_x2.png\"\n        srcset=\"/static/214bb6070760fa10146480fde6b74ebd/ddfc7/kubernetes_cluster_x2.png 200w,\n/static/214bb6070760fa10146480fde6b74ebd/b02cb/kubernetes_cluster_x2.png 400w,\n/static/214bb6070760fa10146480fde6b74ebd/2cb05/kubernetes_cluster_x2.png 799w\"\n        sizes=\"(max-width: 799px) 100vw, 799px\"\n      />\n  </span>\n  </a></p>\n<hr>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/3ab587ce485b29f47f37ae231348ba9a/bc79b/photo-34219553960_350f18edbb_o.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 45.1271186440678%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACSUlEQVQozw2RSW/TABBG/VO4ILVCXZLi1k4dZ3W8JHYcJ3GcpXHthDYuSUpbqRsUlapQqReWG+LAFa4ICcGfe/gwh9Ho07w3I9hmjGZMMa0DdGNORV/SMOcM7CmxO2TeDUh6CXuDC+LxCcPhkm6yoDtf0u4esddfMOyfMBkdE7QXCFN3kob3eD9b4hn76OUItxQSmSGdWp+p7XM2GDJuTZgnt9y/vuDV0T7Jfo+rg4DTvTHns1NG7oieEyE4VkDbSRs3ppLvoSkxsbbksDYhSCnPhyGDmoNddPCtPoEb0LE86qrG43HMdRzydpKSWwlhM0GYBYd0GxFdK2LZHPDtYMaH299MB/f4XpKSdYmsFuPmiFLJR1UaOGWbecOnr/dxah1uJi/4dPGGu6N3CL8uz7gzhrQLHUJvxPlohG2eoeb6aGpAId9Aq3ZotsL0HC1iy6Jb0enVQ/xKi/auhyMZuMUyvm4ifD+J0oGHpGhkRYts1kQVK9RlHVOScKp19FTPkmVMw2M2HDB1LcStMjW5zlz3+dibcVXXcHcVhOuxweelTdOQUiUFQ9qhkBVJKlvE+TUy6yq2WkLJNchumxTlSqpt8HynhppRuHQU/l13+HPZ5kskIYRVhZ8PCbHfRpU1vN0sjrxFWZSppmUXylRyRkpeZGstgylus7lZIrtRoimJzO1tflxl+Dt7wlfnKUIpk+MxKnKzeImeb2JnVvHkLNUUv5xT069rSGKR9XWRtfUdVlZ2eLZRJZ8unxVXeQhlAl2hl8/Rlsv8BwhhYhtmiCl2AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Shanghai, China","title":"","src":"/static/3ab587ce485b29f47f37ae231348ba9a/b21dd/photo-34219553960_350f18edbb_o.png","srcSet":["/static/3ab587ce485b29f47f37ae231348ba9a/2d451/photo-34219553960_350f18edbb_o.png 200w","/static/3ab587ce485b29f47f37ae231348ba9a/06807/photo-34219553960_350f18edbb_o.png 400w","/static/3ab587ce485b29f47f37ae231348ba9a/b21dd/photo-34219553960_350f18edbb_o.png 800w","/static/3ab587ce485b29f47f37ae231348ba9a/c9309/photo-34219553960_350f18edbb_o.png 1200w","/static/3ab587ce485b29f47f37ae231348ba9a/fe46d/photo-34219553960_350f18edbb_o.png 1600w","/static/3ab587ce485b29f47f37ae231348ba9a/6d953/photo-34219553960_350f18edbb_o.png 2400w","/static/3ab587ce485b29f47f37ae231348ba9a/bc79b/photo-34219553960_350f18edbb_o.png 2832w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this hands-on lab from "},{"type":"element","tagName":"a","properties":{"href":"https://linuxacademy.com/cp"},"children":[{"type":"text","value":"Linux Academy"}]},{"type":"text","value":", we will install and configure a Kubernetes cluster consisting of 1 master and 2 nodes for the pods. Once the installation and configuration are complete, we will have a 3-node Kubernetes cluster that uses Flannel as the network overlay."}]},{"type":"text","value":"\n"},{"type":"comment","value":" TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#instructions"},"children":[{"type":"text","value":"Instructions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#objectives"},"children":[{"type":"text","value":"Objectives"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-docker-and-kubernetes"},"children":[{"type":"text","value":"Install Docker and Kubernetes"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#prerequisites"},"children":[{"type":"text","value":"Prerequisites"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-docker-ce"},"children":[{"type":"text","value":"Install Docker CE"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-kubernetes"},"children":[{"type":"text","value":"Install Kubernetes"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#start-docker-and-kublet"},"children":[{"type":"text","value":"Start Docker and Kublet"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#cluster-initialization"},"children":[{"type":"text","value":"Cluster Initialization"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#networking-details"},"children":[{"type":"text","value":"Networking details"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#check-the-cluster-state"},"children":[{"type":"text","value":"Check the cluster state."}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#create-and-scale-a-deployment-using-kubectl"},"children":[{"type":"text","value":"Create and scale a deployment using kubectl"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes-stuck-on-containercreating"},"children":[{"type":"text","value":"Kubernetes stuck on ContainerCreating"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#scaling"},"children":[{"type":"text","value":"Scaling"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#pod-deployment"},"children":[{"type":"text","value":"Pod Deployment"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes-services"},"children":[{"type":"text","value":"Kubernetes Services"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#updating-the-pod"},"children":[{"type":"text","value":"Updating the Pod"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes--compose--kompose"},"children":[{"type":"text","value":"Kubernetes + Compose = Kompose"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#use-kompose"},"children":[{"type":"text","value":"Use Kompose"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"comment","value":" /TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"instructions"},"children":[{"type":"element","tagName":"a","properties":{"href":"#instructions","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Instructions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this learning activity, we will create a Kubernetes cluster. The commands we will use for this process can be found in the task list by clicking on the orange question mark buttons."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Once you have completed the lab, leave your cluster in its final state. Do not delete the deployment:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"objectives"},"children":[{"type":"element","tagName":"a","properties":{"href":"#objectives","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Objectives"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Install Docker and Kubernetes on all servers."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Create and scale a deployment using kubectl."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"install-docker-and-kubernetes"},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-docker-and-kubernetes","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Install Docker and Kubernetes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"prerequisites"},"children":[{"type":"element","tagName":"a","properties":{"href":"#prerequisites","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Prerequisites"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"You first need to login as your root user or elevate your users privileges via sudo on your master and two minion servers:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"su"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"This next step is not recommended in production ("},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/engine/security/seccomp/"},"children":[{"type":"text","value":"How do you create a SE Linux policy?"}]},{"type":"text","value":") - but we are going to disable SE Linux on all 3 servers:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"setenforce 0\nsed -i --follow-symlinks 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/sysconfig/selinux"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{"start":3},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Now we need to enable the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"br_netfilter"}]},{"type":"text","value":" module on all servers to allow our cluster to communicate:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"modprobe br_netfilter\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"echo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'1'"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" /proc/sys/net/bridge/bridge-nf-call-iptables"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/f2901ed8c58feb6fdbde92110cff0800/2df25/kubernetes_cluster_01.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 797px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 11.91969887076537%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAaUlEQVQI1yWMCQ6AIBADlSh44PEDlUuBBcXo/7/mqknTtE2mWW/PAS5uU+fOyuzozXrUZmcqFMKV0jMFpfBUAlXAdMCAFUcmIUNyjDd36cNemKrQ2sTxS8fKxNrEH8PHYnH5tKHIbMm8PX60Dl1FvFRPAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/f2901ed8c58feb6fdbde92110cff0800/2df25/kubernetes_cluster_01.png","srcSet":["/static/f2901ed8c58feb6fdbde92110cff0800/2e1d6/kubernetes_cluster_01.png 200w","/static/f2901ed8c58feb6fdbde92110cff0800/ab190/kubernetes_cluster_01.png 400w","/static/f2901ed8c58feb6fdbde92110cff0800/2df25/kubernetes_cluster_01.png 797w"],"sizes":["(max-width:","797px)","100vw,","797px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{"start":4},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Make sure that swap has been turned off:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/c89d6dbaef3b03200445c9c6a153701e/2cb05/kubernetes_cluster_02.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 20.52565707133917%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhklEQVQI14WPXRKCMAyEiyBa2h5B1FJo2vDT4v3v5jLIGzPOfA+ZTXaTCNnPN+CmqhvlO5KN0bK3XD4G0fo/NMOiKN37+dpxZbk4qN1UvgImiicB0Z5lacoqZB2y4Y+irCmZsCLOxBUiWtIjPdduPDfDthsw2lDav9h2HmtxEYCI+rIpP/MXWx0Z+yQfPDEAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/c89d6dbaef3b03200445c9c6a153701e/2cb05/kubernetes_cluster_02.png","srcSet":["/static/c89d6dbaef3b03200445c9c6a153701e/ddfc7/kubernetes_cluster_02.png 200w","/static/c89d6dbaef3b03200445c9c6a153701e/b02cb/kubernetes_cluster_02.png 400w","/static/c89d6dbaef3b03200445c9c6a153701e/2cb05/kubernetes_cluster_02.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To turn off swap on centos type "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"swapoff -a"}]},{"type":"text","value":" and check that the swap was removed with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"free -h"}]},{"type":"text","value":". Edit the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/fstab"}]},{"type":"text","value":" file, search for the swap line and comment the entire line by adding a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"#"}]},{"type":"text","value":" in front of the line:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/814369e93af7cb4fe8f16633e5ef5fd5/b21dd/kubernetes_cluster_02a.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 42.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHklEQVQoz4VQ2W7CMBDkC0jwmqspJA5QHHt9QSqV9/7/N3UWkKigUqXVysfOsTNRNumOfetLx2XH7WpQc6sXqEEv/6mJioWOqTJcdTztWJlAvZRuvUysUE760v4FTkWFosqJQiaXKBbls7zkk3SXcaUh6bXT8yt+8Rs8nlUuijPm6BjpI8II7QKZoLdM9nrug/zCDije/QNcf19ml08RPJ9UKXrj9VrcCpEJs6/xzshZ6IDEFg/lIILTcaw+Yo3wAAMemtjcJjgiG2nr784XTzvbNG/5EIvreX8I1DiNUcMyBxZE1bF05Ne8gCGrDe9zGQz3kGq8bvnmkA5R9BHBxkOD4PkFnKjlyud6OdSIBPSNp5ua7O9oy5ICzm/Pyj/aikOM2D3ZtQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/814369e93af7cb4fe8f16633e5ef5fd5/b21dd/kubernetes_cluster_02a.png","srcSet":["/static/814369e93af7cb4fe8f16633e5ef5fd5/2d451/kubernetes_cluster_02a.png 200w","/static/814369e93af7cb4fe8f16633e5ef5fd5/06807/kubernetes_cluster_02a.png 400w","/static/814369e93af7cb4fe8f16633e5ef5fd5/b21dd/kubernetes_cluster_02a.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/9771d/kubernetes_cluster_02b.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 798px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 27.31829573934837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1UlEQVQY01WOXU8CMRBF+6y0sJ02SBGjYRf2g35MV2J8IArR8ESC8gL+/x/idLPBmJyc3E7mZsqG+404vvPvHT9/8EuPOO0ETY5bGg5+Pgn+H/G1FYc3pu5rQutSi0IPi2RitEjwQt/miZtcD4r0vNKtMXBRrlsZIsQWHEqPMqBcBRkjGSoPCyfJD40aV2pSq7s6uYONHGYeM4sZhdJnuaPtnrmF0vcht2rW9Q31qxTGFZu+Pk82L2bdmtobjCagelzBrAHyk4Wllxhh7tKPbEj3p3/lX28VKuSHJ7TfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/9771d/kubernetes_cluster_02b.png","srcSet":["/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/84ded/kubernetes_cluster_02b.png 200w","/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/53cad/kubernetes_cluster_02b.png 400w","/static/87caf13f02ad49fcc8cd3c3a5cf72ad3/9771d/kubernetes_cluster_02b.png 798w"],"sizes":["(max-width:","798px)","100vw,","798px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now delete the remaining swap file - check the location "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"blkid"}]},{"type":"text","value":" and remove it "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"rm /dev/mapper/centos-swap"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/90d2f664655149aef9aa43b9ea60f9e3/9f07b/kubernetes_cluster_02c.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 23.134328358208954%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAzElEQVQY01XOUWrDMAwG4JygJlIah7GOsqRtYseWJcdL2NPY/Q81mbHC4Hv4ZWRJTfu1o0jIElaCe4SQcKHKa0h/gfBBeIvdxeOb714rvKyNfm6PYliMCEZGYiBBHaFWxZCkvvhagk5xBNrmE0RpWhYtTNnMx3byydziaSYzJ9DWe8S5LoSZFLqEY8TpV8BHauxnsYk9sWSmkmnPvGdfcp/zwKKsBkcDSa9n26UbnlwD3wce23XfJkcj8XuWidKoa6dwfnHnfnnqlP3nBxuqKz/0rFgEAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/90d2f664655149aef9aa43b9ea60f9e3/b21dd/kubernetes_cluster_02c.png","srcSet":["/static/90d2f664655149aef9aa43b9ea60f9e3/2d451/kubernetes_cluster_02c.png 200w","/static/90d2f664655149aef9aa43b9ea60f9e3/06807/kubernetes_cluster_02c.png 400w","/static/90d2f664655149aef9aa43b9ea60f9e3/b21dd/kubernetes_cluster_02c.png 800w","/static/90d2f664655149aef9aa43b9ea60f9e3/9f07b/kubernetes_cluster_02c.png 804w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Add a FirewallD Service"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Configure FirewallD for Kubernetes to work correctly. First download the k8s-master.xml and k8s-worker.xml files to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"cd /etc/firewalld/services"}]},{"type":"text","value":" on your master and minion server:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-master.xml\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" https://raw.githubusercontent.com/mpolinowski/k8s-firewalld/master/k8s-worker.xml\n\nfirewall-cmd --reload"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"On Master Node"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"firewall-cmd --add-service"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"k8s-master --zone"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"public --permanent"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"On Minion Nodes"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"firewall-cmd --add-service"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"k8s-worker --zone"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"public --permanent"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"install-docker-ce"},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-docker-ce","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Install Docker CE"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Ensure that all Docker dependencies are installed:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"yum "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" -y yum-utils device-mapper-persistent-data lvm2"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/8674b77524180ba538f7f2ba939211ea/a8afd/kubernetes_cluster_03.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 794px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 21.03274559193955%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApElEQVQI10WO2w6CMBAFQcJNBZHokwISLi10S6ktJf7/j7kEwWSymZezGStmKuXmwtQFdNyrIx1DIoKa+xtBM+zuVWDnZMcKqUyEObP3dTDJMPkNd8ru8KJW1lpPpFlYPdvA2coN9EN+7twkfErFnI5zDPrUyYgpDFlyUJiKeoV/3Yp5NdgF/Y0laAG6xdpWINjmVuBhYY0X/E0w2Cl7uyD/ZU6+oSwcZw0b+vYAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/8674b77524180ba538f7f2ba939211ea/a8afd/kubernetes_cluster_03.png","srcSet":["/static/8674b77524180ba538f7f2ba939211ea/4de2f/kubernetes_cluster_03.png 200w","/static/8674b77524180ba538f7f2ba939211ea/6fd50/kubernetes_cluster_03.png 400w","/static/8674b77524180ba538f7f2ba939211ea/a8afd/kubernetes_cluster_03.png 794w"],"sizes":["(max-width:","794px)","100vw,","794px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{"start":2},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Now we can add the Docker repository and install it:"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\nyum "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" -y docker-ce"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/1cf7f1db03d628789cd84ba8b5af1ad7/2cb05/kubernetes_cluster_04.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 106.75844806007508%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACNElEQVQ4y32U6W7bMBCEZVu+b6cB+sNOLNm6SImU5KsB+v7P1W9F203QVMDA2Iic3dndYbxFVq/zy0LVc3V+zWobWx0Zdcz1sdgHqvOWtMCbZtWmvC30aW1va3sdx6Yfqn6gvF0s4EYLJol9KX+tzXVtLnN9Gidld5913lPBPnPxPdG/6QaHHPLG3l7rD8efqXqSlhJkFYqmaTmKDIrGsR0n9gu5f9DIXpkbKZb5GT5MQDtkgT/X9TAqeoHiph9qhCDnQQ61qwxWxQVQyuGRohrFBoJ/0C4F6Lw/ZKNwzrT1iUso9EPFWdN24urIYOl2G39pHkg/iRke8+GxQBW5+PUDRSBfAuUwOBakvp+GGr2cetRk1ESARKilw8Exn8QWzXwB8mdi6Z/fUSQ3uUNT3rq4/Dz/nqYVWaUFVfeYxzaiGnzuyaq2EaVgTpJSCm6jzi6B783ScmOvZPWaxmZZ7QcNOdSypNhIrl1McfGPyBb/kJEjTCKDnTdbGbllggifSWOuvUfc9I//Qu3W5j23QuL7QYO7yVrhMa3nkl0/3zvxW4ir7BXmEntkVa/xM+g1T6qFKZXZBK6GJvz8TPM8T4KVubjZ/I8sPof8o/og4kluzHWuTvI85ZFdu/u0pTKT9vDWsjizg2lWN8Or3PyQ4AdtlWVAjT1Lt8BekP11siBpmxzfp7F94Rk3j5END/FjbO6beEv8x7YxicTUQM6Tn0dGo5MbjT2dGT6P1P0z6X5e7+P0D+rQjK/G+oOTAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/1cf7f1db03d628789cd84ba8b5af1ad7/2cb05/kubernetes_cluster_04.png","srcSet":["/static/1cf7f1db03d628789cd84ba8b5af1ad7/ddfc7/kubernetes_cluster_04.png 200w","/static/1cf7f1db03d628789cd84ba8b5af1ad7/b02cb/kubernetes_cluster_04.png 400w","/static/1cf7f1db03d628789cd84ba8b5af1ad7/2cb05/kubernetes_cluster_04.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"install-kubernetes"},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-kubernetes","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Install Kubernetes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First we need to add the Kubernetes repository all servers:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"cat"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<<"}]},{"type":"text","value":" EOF "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" /etc/yum.repos.d/kubernetes.repo  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"kubernetes"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"  \nname"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"Kubernetes  \nbaseurl"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64  \nenabled"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"1  \ngpgcheck"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"0  \nrepo_gpgcheck"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"0  \ngpgkey"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"https://packages.cloud.google.com/yum/doc/yum-key.gpg  \n https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg  \nEOF"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/6c87035b12fefc43f6109abedb7b3832/2cb05/kubernetes_cluster_05.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 20.02503128911139%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAjklEQVQI122PUQuDIBSFBc2SuTEY662YrnRp1koGY/v//2vHehvC4fIhfpx7ydGtl+f7HF7CzrwLZReqPgCEmYWZ8AiozMS0I639D+Tr+pGPhWnPlKc3B6DKUQ1wCVSCQvu8XMfvyUc0lH1AyZ69EM3FfSSNIY3NyT7KYTlskcOKVfGbdyPfJq5Icmuz+QHj6BptjciFLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/6c87035b12fefc43f6109abedb7b3832/2cb05/kubernetes_cluster_05.png","srcSet":["/static/6c87035b12fefc43f6109abedb7b3832/ddfc7/kubernetes_cluster_05.png 200w","/static/6c87035b12fefc43f6109abedb7b3832/b02cb/kubernetes_cluster_05.png 400w","/static/6c87035b12fefc43f6109abedb7b3832/2cb05/kubernetes_cluster_05.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now we can install Kubernetes on all servers via yum:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"yum "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" -y kubelet kubeadm kubectl"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/e0c274725c27642ae935e59b2fe11d4e/7d3b4/kubernetes_cluster_06.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 795px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 109.0566037735849%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACUklEQVQ4y42T6XLiMBCEBQRzs1ybX4m5fMi2LNuYcOz7P9h+Y+1SkKTYrZpSSbZ6pme6pcbpYZZ/TLLDOKsXSZXHRRbZJDBpmCdBnkbWBPlirZUft/xYfYpRUi2K0yQ9sM6L0zCy3i7rbtOWH6l3iRbrV5iLoS6X5WVmT4viPM2Og8i2XJ11wkaqvUcPcQ/uBmZZnMG/1r+Ef3r4YY70QpBrmtWDqBjpshfaQVzcUv8F7w01F4I/z63wHydExTo1x0lavdDFPutsElm36WPlvVkdroIvL7La0zAu+1HBOoypWXV3qXoL1Y3/PdjbG4hJxAVFiPYm+X48n8DsB3FJ+n5oCS8wRLPJiV6QU7zX7Pk+EDr3R6sYD9OiGQrSmLfPEE8obNPuLiMvt9kTjI2JwNQdyaUY9aq6IAzNdxvazEmYo/BG0zm3HVvAyCEz49daQ9CZ5Eyalx3FNcUBiLxvodyIbEcShQC4jQqdjZZffixJITYRSWvcQvF+mHNJqDYskMfRcXvh/OeYclRuDARFvAYsowqlIOTba912m42W/f0RCvPGXnN7ph+mJZKKJKF6YumbVGAw1jz/mFnxpnMfWVvPkS4GsWXawGZWLM38XP/tew9/V5buFO39rK6MsTF2Tayq602eJ2CRijnRM6XAoDAviY38+FfDDTjIZVSBkZegeRIW8UTq57T9WKTyeK5Z7YyNgC1fkxVtG5/nzqfNCJNeiNuNGHFvGudEahnaV3ySVPL6vrzYXuAA5Mqdfx/qp7rUuhztso54yDjrqv/RyY9/A/5zklfE/RMvAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/e0c274725c27642ae935e59b2fe11d4e/7d3b4/kubernetes_cluster_06.png","srcSet":["/static/e0c274725c27642ae935e59b2fe11d4e/ab524/kubernetes_cluster_06.png 200w","/static/e0c274725c27642ae935e59b2fe11d4e/19467/kubernetes_cluster_06.png 400w","/static/e0c274725c27642ae935e59b2fe11d4e/7d3b4/kubernetes_cluster_06.png 795w"],"sizes":["(max-width:","795px)","100vw,","795px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"start-docker-and-kublet"},"children":[{"type":"element","tagName":"a","properties":{"href":"#start-docker-and-kublet","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Start Docker and Kublet"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"systemctl "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enable"}]},{"type":"text","value":" docker\nsystemctl "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enable"}]},{"type":"text","value":" kubelet\nsystemctl start docker\nsystemctl start kubelet"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/722179931250471aa3c8948856aa217b/c4494/kubernetes_cluster_07.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 17.353308364544322%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiElEQVQI1zWO2wrDIBBEkzSXJlELpe9pzc2uJkYttP//ZR2FwHCYWZjdzXrlhPkwcjDdenDyjLzQvn+7ejKl1BU06lISdHlRNRrESGmymw4P9+M6dKttzzKI8nXZm3lr5h2mnjbsQi3GNAEzQeF+fFnqtIsVOqQXLKeAO/mgiqcqBpWfQoxM5g/mxxWFoGgd3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/722179931250471aa3c8948856aa217b/b21dd/kubernetes_cluster_07.png","srcSet":["/static/722179931250471aa3c8948856aa217b/2d451/kubernetes_cluster_07.png 200w","/static/722179931250471aa3c8948856aa217b/06807/kubernetes_cluster_07.png 400w","/static/722179931250471aa3c8948856aa217b/b21dd/kubernetes_cluster_07.png 800w","/static/722179931250471aa3c8948856aa217b/c4494/kubernetes_cluster_07.png 801w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To check in what Group Docker is running, run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker info | grep -i cgroup"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/b2f97b5453b34bb8ecac0959b0310fde/2cb05/kubernetes_cluster_08.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 6.132665832290362%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAMUlEQVQI12MQ09AT0jHm0zIEMrjVDThUdVmVtVmVdYAku4ouo7wGg5w6FiSrxqqkDQDVkwaBUkxRegAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/b2f97b5453b34bb8ecac0959b0310fde/2cb05/kubernetes_cluster_08.png","srcSet":["/static/b2f97b5453b34bb8ecac0959b0310fde/ddfc7/kubernetes_cluster_08.png 200w","/static/b2f97b5453b34bb8ecac0959b0310fde/b02cb/kubernetes_cluster_08.png 400w","/static/b2f97b5453b34bb8ecac0959b0310fde/2cb05/kubernetes_cluster_08.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In this case it is "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"cgroupfs"}]},{"type":"text","value":" - we can now make sure that Kubernetes is added to this group:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sed"}]},{"type":"text","value":" -i "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'s/cgroup-driver=systemd/cgroup-driver=cgroupfs/g'"}]},{"type":"text","value":" /etc/systemd/system/kubelet.service.d/10-kubeadm.conf\nsystemctl daemon-reload\nsystemctl restart kubelet"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"cluster-initialization"},"children":[{"type":"element","tagName":"a","properties":{"href":"#cluster-initialization","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Cluster Initialization"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So far we did the basic setup for all our servers - now we will initialize our cluster from the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"MASTER SERVER"}]},{"type":"text","value":" using the IP range for Flannel. Kubeadm is a tool built to provide "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/"},"children":[{"type":"text","value":"kubeadm init"}]},{"type":"text","value":" and "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-join/"},"children":[{"type":"text","value":"kubeadm join"}]},{"type":"text","value":" as best-practice "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"fast paths"}]},{"type":"text","value":" for creating Kubernetes clusters. The "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"init command"}]},{"type":"text","value":" executes the following phases:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubeadm init --pod-network-cidr"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"10.244.0.0/16"}]}]}]},{"type":"text","value":"\n"},{"type":"comment","value":" kubeadm init --pod-network-cidr=10.244.0.0/16 --ignore-preflight-errors=NumCPU "},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Your Kubernetes master has initialized successfully! You can now join any number of machines by running the following on each node as root:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/dfdb2e41e6da1d38b41467e1b23bbddb/0cd32/kubernetes_cluster_09.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 30.79800498753117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7CAAAOwgEVKEqAAAABFElEQVQY03WRTUsCURSGb2p+zoQtE1NznHHGcSY/0KWbVrUKosAKkhYG/RahXQsrCALF2gVuhX7Z2znHJq5Bi4fDnXvmOWfeUUmriZQdEgGSNYbOVNNOKGep1LNVdhGruIgfeFJVqQ6176yrDjdnnENk3RZyXluEiaqPbXq+xv+hKTK+i1W8/4UpK4Dpd5Gtt2A2ujBIangdkTNGoyNDWCYCHV0a1Rxtlg/7wg6JWbCrnfNBT4aw3KQ7jiAebfgXlqoiT7OhCpZ8DufGealCDWqvClW0NzbiHuZXoCFRXJxd4m54g/vrW3x8LrFcfeHh+RVHwxFORmNMpi+YzhZ4fJvhaf6O9vGpvJymHxnlG0UyOL/CN94Preaygn2HAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/dfdb2e41e6da1d38b41467e1b23bbddb/b21dd/kubernetes_cluster_09.png","srcSet":["/static/dfdb2e41e6da1d38b41467e1b23bbddb/2d451/kubernetes_cluster_09.png 200w","/static/dfdb2e41e6da1d38b41467e1b23bbddb/06807/kubernetes_cluster_09.png 400w","/static/dfdb2e41e6da1d38b41467e1b23bbddb/b21dd/kubernetes_cluster_09.png 800w","/static/dfdb2e41e6da1d38b41467e1b23bbddb/0cd32/kubernetes_cluster_09.png 802w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubeadm "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" X.X.X.X:6443 --token XXXXXXXXXXXXXXX --discovery-token-ca-cert-hash sha256:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Copy the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubeadmin join"}]},{"type":"text","value":" command that is in the output and past it into your minion server terminals:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/a371daebcb3d46cd9f35833ad43dad6a/c4494/kubernetes_cluster_10.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 50.56179775280899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/klEQVQozzWRy2sTURTGb5Imk7SZyYxpfbSpdt7vO6/MTAimAdNYUqVFRKQUqS0uQhcSUEGtFrNxISqlimv3LgQXLhSUioiPf8pvDMLH5cyc893zO/eQad2vOU3BjRcMf3D9xsHj8Wh079XRm0/ff3z8evzw2curw9v7zw+Pf/7+9uvPh89fdu4+QH1JdhjFJRXdw8dc2ObdWF7uu4MNo395LmrbK5dWtnbWd4cIGq0ubj8ZtsXzvaoRVK0wv2Tmzxmk5sZIcHaTp3FBNMmCQs5I80nn4MXR23fvh/tPGNXNNVRyWjoVtkfjp+PD1xc2t/OiWVIcwloRZ0dVMwB/f2sXVBu39tCkkXbn4w7+l1UaDK4k69eU5YswlBS3KDtZIDsEToEmUN1LpU7f6q2p3VWeJmWdooJRnbrf2r5zf+/RuLd5s6x7ZdWd+HMT7BN+ytrRjBkwGi3KNhKg+MfiTRs+lDurk4ZaFK2K7lc0ChZGpVOSTXgvnQ1anNPEgwleip5oJVC8QgQza4W4BZoxsuswfybFnZKsrDNvhQKcdlSnCeIquml0UoQKRqEoBSeetyBa4EJDCHE2s61S2/Qtw3fMwDZDR/dmMU+Wy/iLUnbCiRMG0tDIokYwBbSok4pKa1bImQFn+KwRsNkaARkAGIvASjEzKApLZsY5sf3XX16SblMw4MsEAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/a371daebcb3d46cd9f35833ad43dad6a/b21dd/kubernetes_cluster_10.png","srcSet":["/static/a371daebcb3d46cd9f35833ad43dad6a/2d451/kubernetes_cluster_10.png 200w","/static/a371daebcb3d46cd9f35833ad43dad6a/06807/kubernetes_cluster_10.png 400w","/static/a371daebcb3d46cd9f35833ad43dad6a/b21dd/kubernetes_cluster_10.png 800w","/static/a371daebcb3d46cd9f35833ad43dad6a/c4494/kubernetes_cluster_10.png 801w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To start using your cluster, you need to run the following as a regular user:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"mkdir"}]},{"type":"text","value":" -p "},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$HOME"}]},{"type":"text","value":"/.kube\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"cp"}]},{"type":"text","value":" -i /etc/kubernetes/admin.conf "},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$HOME"}]},{"type":"text","value":"/.kube/config\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"chown"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" -u"},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":")"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" -g"},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":")"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$HOME"}]},{"type":"text","value":"/.kube/config"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We will use "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/coreos/flannel"},"children":[{"type":"text","value":"Flannel"}]},{"type":"text","value":" as a simple and easy way to configure a layer 3 network fabric designed for Kubernetes. Flannel runs a small, single binary agent called flanneld on each host, and is responsible for allocating a subnet lease to each host out of a larger, preconfigured address space. Flannel uses either the Kubernetes API or etcd directly to store the network configuration, the allocated subnets, and any auxiliary data (such as the host’s public IP). Packets are forwarded using one of several backend mechanisms including VXLAN and various cloud integrations:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/4536a0eaa84a494cdbbeafa9f2922f6a/c4494/kubernetes_cluster_11.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 22.347066167290887%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiElEQVQI13WObQuCQBCEF4wyFc2ujxUYdsfpvflS3f//Zc4Wfkt4GHZhZ3ao0OPJvkozV2ZKpTsqn6kAZSRwh6fdt2bFYmVahsp+EuFz9kzFEXOmfMo2qNs9erorusn/1O59GSIUZlSAFt2Y65DrIWk6uko2b4Hr32cRYu0jZkSIbxHU4/ht8wLnGBxyvVZblwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/4536a0eaa84a494cdbbeafa9f2922f6a/b21dd/kubernetes_cluster_11.png","srcSet":["/static/4536a0eaa84a494cdbbeafa9f2922f6a/2d451/kubernetes_cluster_11.png 200w","/static/4536a0eaa84a494cdbbeafa9f2922f6a/06807/kubernetes_cluster_11.png 400w","/static/4536a0eaa84a494cdbbeafa9f2922f6a/b21dd/kubernetes_cluster_11.png 800w","/static/4536a0eaa84a494cdbbeafa9f2922f6a/c4494/kubernetes_cluster_11.png 801w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"networking-details"},"children":[{"type":"element","tagName":"a","properties":{"href":"#networking-details","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Networking details"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Platforms like Kubernetes assume that each container (pod) has a unique, routable IP inside the cluster. The advantage of this model is that it removes the port mapping complexities that come from sharing a single host IP."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flannel is responsible for providing a layer 3 IPv4 network between multiple nodes in a cluster. Flannel does not control how containers are networked to the host, only how the traffic is transported between hosts. However, flannel does provide a CNI plugin for Kubernetes and a guidance on integrating with Docker."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"check-the-cluster-state"},"children":[{"type":"element","tagName":"a","properties":{"href":"#check-the-cluster-state","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Check the cluster state."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl get pods --all-namespaces"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/df753f9b305bfa132acba984b14d0965/9771d/kubernetes_cluster_12.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 798px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 27.94486215538847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+klEQVQY0yVQaZOCMAztioDIrlz6aUdUjh6UtpSVw///x/YVZjKZpsk7EpKqKaImke+g7iOqEWGr/FoiTtRc5OhXMmyU9xSHh/Be3anVx0oiyJ2Sq13PfMj0nJvlaj94nJkhJXO9O42YCRp1s5+fboz5gPLwFODFmBvIzRwLm6gJtctmuci/bzGGrcbQ5qIHLwS8l/CdIIM+/JJyUwZrqufCroVZcuOyc1WyrwfHRgCkak76d8ytv/0DDI/OXQZlPqAHTfAdqw4YeHO9kmFb2C6GNagl+W3hZQc7Zdi+2RXI3GkumZ5gMmh6HG8Hgwuj0NwvtJMi45Z4/AO4Eiu8kMCM9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/df753f9b305bfa132acba984b14d0965/9771d/kubernetes_cluster_12.png","srcSet":["/static/df753f9b305bfa132acba984b14d0965/84ded/kubernetes_cluster_12.png 200w","/static/df753f9b305bfa132acba984b14d0965/53cad/kubernetes_cluster_12.png 400w","/static/df753f9b305bfa132acba984b14d0965/9771d/kubernetes_cluster_12.png 798w"],"sizes":["(max-width:","798px)","100vw,","798px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then check your nodes from the master:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl get nodes"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/82a5a3ab8ad9c987abb425c38f311356/04f61/kubernetes_cluster_13.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 11.304347826086957%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAATElEQVQI12MQ1DHl0TLi0jDgUDcQ0jY20TY20DIy1jSUVtdnVdNjkFPHh/i1jPh1TQV0TLk1DPl0TNg0DFjV9VnU9dlV9bjU9fFrBgCF8Q3RsBnR3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/82a5a3ab8ad9c987abb425c38f311356/b21dd/kubernetes_cluster_13.png","srcSet":["/static/82a5a3ab8ad9c987abb425c38f311356/2d451/kubernetes_cluster_13.png 200w","/static/82a5a3ab8ad9c987abb425c38f311356/06807/kubernetes_cluster_13.png 400w","/static/82a5a3ab8ad9c987abb425c38f311356/b21dd/kubernetes_cluster_13.png 800w","/static/82a5a3ab8ad9c987abb425c38f311356/04f61/kubernetes_cluster_13.png 805w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"create-and-scale-a-deployment-using-kubectl"},"children":[{"type":"element","tagName":"a","properties":{"href":"#create-and-scale-a-deployment-using-kubectl","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Create and scale a deployment using kubectl"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/kubectl/overview/"},"children":[{"type":"text","value":"Kubectl"}]},{"type":"text","value":" is a command line interface for running commands against Kubernetes clusters. We can run a NGINX container with the following command:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl create deployment nginx --image"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"nginx"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can verify that the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Pod"}]},{"type":"text","value":" was created by Kubernetes:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl get pods"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/9c2c6d56986978d6b425852b0ad9fe1c/c4494/kubernetes_cluster_14.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 10.986267166042447%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAY0lEQVQI12Pg1zER0jcX0DHl0zWV1Db21jFxUNO31zAwUtHRVNXVUtbRVNHRU9UVUdBgkFNnlFNnQEYCumZ82sa8WsY8Wkb82sYS6gYqmoZGqnosStqMyjpAxKyiyyiPqgeGABAVD4BuscFsAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/9c2c6d56986978d6b425852b0ad9fe1c/b21dd/kubernetes_cluster_14.png","srcSet":["/static/9c2c6d56986978d6b425852b0ad9fe1c/2d451/kubernetes_cluster_14.png 200w","/static/9c2c6d56986978d6b425852b0ad9fe1c/06807/kubernetes_cluster_14.png 400w","/static/9c2c6d56986978d6b425852b0ad9fe1c/b21dd/kubernetes_cluster_14.png 800w","/static/9c2c6d56986978d6b425852b0ad9fe1c/c4494/kubernetes_cluster_14.png 801w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"kubernetes-stuck-on-containercreating"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes-stuck-on-containercreating","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kubernetes stuck on ContainerCreating"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl describe pods"}]},{"type":"text","value":" to list all the events associated with the pod, including pulling of images, starting of containers:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"Normal - Scheduled - 13m - default-scheduler - Successfully assigned default/nginx-5c7588df-76mgw to in-centos-minion2\n\nWarning - FailedCreatePodSandBox - 13m - kubelet, in-centos-minion2  Failed create pod sandbox: rpc error: code "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" Unknown desc "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" failed to "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" up sandbox container "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"8ab7c07633f6170dabd8df9a28680a7b9af79f10374e81df8c85dac609abc209\""}]},{"type":"text","value":" network "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"for"}]},{"type":"text","value":" pod "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"nginx-5c7588df-76mgw\""}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" NetworkPlugin cni failed to "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" up pod "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"nginx-5c7588df-76mgw_default\""}]},{"type":"text","value":" network: "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"open"}]},{"type":"text","value":" /run/flannel/subnet.env: no such "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"file"}]},{"type":"text","value":" or directory"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I noticed that - to use Flannel - you need to initialize "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubeadm"}]},{"type":"text","value":" with the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--pod-network-cidr=10.244.0.0/16"}]},{"type":"text","value":" flag. You can reset your deployment with:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubeadm reset\niptables -F "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" iptables -t nat -F "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" iptables -t mangle -F "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" iptables -X"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now back to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubeadm init --pod-network-cidr=10.244.0.0/16"}]},{"type":"text","value":" and rebuild the deployment - success:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/0c8f56f6e5ae825238ae8904606cbf34/90d05/kubernetes_cluster_15.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 7.797029702970297%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAYUlEQVQI12PgUtf/zwnEHOoG/y21jf5baBv/N9Q1+W+nafhfFYgZlLT/c6jo/meQU//PIKsGoXFhkDyfjvF/PqAh3EADWTUM/6sraf0PUgUaoKD5nxmIGeU1/rMqaxNtIAAkQTWu6LfS9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/0c8f56f6e5ae825238ae8904606cbf34/b21dd/kubernetes_cluster_15.png","srcSet":["/static/0c8f56f6e5ae825238ae8904606cbf34/2d451/kubernetes_cluster_15.png 200w","/static/0c8f56f6e5ae825238ae8904606cbf34/06807/kubernetes_cluster_15.png 400w","/static/0c8f56f6e5ae825238ae8904606cbf34/b21dd/kubernetes_cluster_15.png 800w","/static/0c8f56f6e5ae825238ae8904606cbf34/90d05/kubernetes_cluster_15.png 808w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"scaling"},"children":[{"type":"element","tagName":"a","properties":{"href":"#scaling","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Scaling"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To scale up our web server contingent to "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"4"}]},{"type":"text","value":", we can use the following "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl"}]},{"type":"text","value":" command:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl scale deployment nginx --replicas"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"4\nkubectl get pods"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/0ee750f3b654d91ec11e16284718e400/90d05/kubernetes_cluster_16.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 16.46039603960396%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAgElEQVQI122MsQ7CIBRFMVYGDaLRpQk1KUWgPuCVQNFFR///k6RzTU7OdM8l3OVzKEdIzM8C8tfPbzt97BQMSuVk/1DVEujNkDWnUGrPIR/GyGwUY+yxtBrpAI3BrQQi7qT7V1Y4pAs+r/jiLlHld8ozl5thafY61AvS6c0y1Wt+by8VvDinCogAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/0ee750f3b654d91ec11e16284718e400/b21dd/kubernetes_cluster_16.png","srcSet":["/static/0ee750f3b654d91ec11e16284718e400/2d451/kubernetes_cluster_16.png 200w","/static/0ee750f3b654d91ec11e16284718e400/06807/kubernetes_cluster_16.png 400w","/static/0ee750f3b654d91ec11e16284718e400/b21dd/kubernetes_cluster_16.png 800w","/static/0ee750f3b654d91ec11e16284718e400/90d05/kubernetes_cluster_16.png 808w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To get rid of those pods you can scale it back down to 0 replicas:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl scale deployment nginx --replicas"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/9d16fb66d2a7d404b8a16e99cadae047/c4494/kubernetes_cluster_17.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 12.359550561797752%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAXUlEQVQI12Pg1zXl1Tbm1TLi1DAQ0TC01DKy1jW10DSUVdMXUNXjU9TillfnkddgllNnwET8OibC+uaCuqZAU0S0jO20jc01DU3V9LRUdFVVdJQVtVSUgEibA5tmAN7qD60xv2bbAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/9d16fb66d2a7d404b8a16e99cadae047/b21dd/kubernetes_cluster_17.png","srcSet":["/static/9d16fb66d2a7d404b8a16e99cadae047/2d451/kubernetes_cluster_17.png 200w","/static/9d16fb66d2a7d404b8a16e99cadae047/06807/kubernetes_cluster_17.png 400w","/static/9d16fb66d2a7d404b8a16e99cadae047/b21dd/kubernetes_cluster_17.png 800w","/static/9d16fb66d2a7d404b8a16e99cadae047/c4494/kubernetes_cluster_17.png 801w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you try to delete the pods by name "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl delete pod nginx-5c7588df-lf2pb"}]},{"type":"text","value":", or try to delete all: "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl delete pods --all"}]},{"type":"text","value":", Kubernetes will respawn new pods to meet your deployment scale requirement."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"pod-deployment"},"children":[{"type":"element","tagName":"a","properties":{"href":"#pod-deployment","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Pod Deployment"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s deploy an simple Angular app inside a "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#pod-v1-core"},"children":[{"type":"text","value":"Kubernetes Pod"}]},{"type":"text","value":" - we will use the 0 release of "},{"type":"element","tagName":"a","properties":{"href":"https://hub.docker.com/r/richardchesterwood/k8s-fleetman-webapp-angular/tags"},"children":[{"type":"text","value":"this Docker image"}]},{"type":"text","value":" to get started with. To do this we will have to create a Pod Config file for it called "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"webapp-angular.yaml"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Pod\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" richardchesterwood/k8s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"fleetman"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"webapp"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"angular"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"release0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/c6ece5af460f568c8360df8d01189e19/2df25/kubernetes_cluster_18.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 797px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 19.196988707653702%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAaUlEQVQI12NQtXNVtXVVd3DXcPSAIBVbF2UbZwhSsXWFi8MRULGStZOSjTODgK4pi5IWg5w6OYhP25hDTY9BVp1BVg0nwqVZUM+UV8uIS92AXUUXaAqQZFfV5VDVAyI2FR0gm01FF5dmAE0jHwgmMogxAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/c6ece5af460f568c8360df8d01189e19/2df25/kubernetes_cluster_18.png","srcSet":["/static/c6ece5af460f568c8360df8d01189e19/2e1d6/kubernetes_cluster_18.png 200w","/static/c6ece5af460f568c8360df8d01189e19/ab190/kubernetes_cluster_18.png 400w","/static/c6ece5af460f568c8360df8d01189e19/2df25/kubernetes_cluster_18.png 797w"],"sizes":["(max-width:","797px)","100vw,","797px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can now use "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"kubectl"}]},{"type":"text","value":" to read our configuration file and generate the webapp Pod:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl apply -f webapp-angular.yaml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/fd77489319b82d60f004fe3f5112af8a/9d423/kubernetes_cluster_19.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 16.438356164383563%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkUlEQVQI11XLWwuCMBQAYMuZGMqg6EIwm1O2sx13zRHVS///V/UYwvf6Fac5X+Pr4p9Hm/cQqc10Xrp5OeLjq+MH0xu8g2CkUyPywRS9+mOYGSam41nHg0nUpFbHBgKFIActRhQcaqY2PRAO5V2tcguRTHYrsOT6pkInsJa+kW43WaJ8wTWRrppsJbBgcjV79QPUkBag3fawxQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/fd77489319b82d60f004fe3f5112af8a/b21dd/kubernetes_cluster_19.png","srcSet":["/static/fd77489319b82d60f004fe3f5112af8a/2d451/kubernetes_cluster_19.png 200w","/static/fd77489319b82d60f004fe3f5112af8a/06807/kubernetes_cluster_19.png 400w","/static/fd77489319b82d60f004fe3f5112af8a/b21dd/kubernetes_cluster_19.png 800w","/static/fd77489319b82d60f004fe3f5112af8a/9d423/kubernetes_cluster_19.png 803w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can inspect the pod with:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl describe pod webapp"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/a7559982602c2a4d3fc663a5623fceef/c4494/kubernetes_cluster_20.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 96.87890137328338%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7CAAAOwgEVKEqAAAACXUlEQVQ4y4WUSY8TQQyFO8tMks4yCxxAk9mypzt7ZsIgDkggLghxQdw48f//g3mfuytqogQOT9Wudj3bz66KrubP1k43Vu0l1hgt7VL2+WBm5/2ZRd2hld727P5ubH3ZGVIb6n+sveh2ZBFrERezJ2tO13YmZ9CcrK3ymNhZL7Xnbz/sy6/fdvPhk0VvHhVg5EEckB1DJ9laS4Tlh6lnSYbY7WRj089fbff9p929fLSK/tcIqmCV+4mVTiCizMZ4mWWlA5eLnUiffA+7oiDng7nbjdHCasO59lP3JwEqwQYuU2u6sVjOsOMUj1e+kr5HDdqEUkO5QcPb0d//iPB6/d7ZISKTdro1tA3o5DYrQA786sOFAznKCl5+UMk1lfNq9WKh9OvlOz+EjgF0vaaDlI5/VvYsmwbH3BNiL6IZREeDqrK9kob+jUaua+rR96V2c5zqMoTXy92+CUQvzpV3rqhXEYczCMiKDCk5lJZlm3jGoaM+p25npaFbdGy46XBHhD4C+WCX/jFn+3kLBIeEzcnKm8Lq4grRzeD/N6JYdpGUtl9okCGKIUXHvJNIEMr2rI7pdrhXHBu0ZAYhguTo4VPNCAj3FpG5Ncwg5GSIvvzDB7uuq7fP9BTqeWmUTHl0mYN8M4d0mBvAXiA81qDsO+9yrIxa6m5dpAQANQXB5nUpy5Fv/HxfQf3qKQAPht8gv4ZqaKySmnqyQJVZpDFCSU4Vrpgei6oOlyHXik9V+0EWVifO73bU14G1mrESUhGtRbyabS2RUyqnuQKmk6VNsfV/IT27vfw1otQCKP0PHGv6uhB9ePgAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/a7559982602c2a4d3fc663a5623fceef/b21dd/kubernetes_cluster_20.png","srcSet":["/static/a7559982602c2a4d3fc663a5623fceef/2d451/kubernetes_cluster_20.png 200w","/static/a7559982602c2a4d3fc663a5623fceef/06807/kubernetes_cluster_20.png 400w","/static/a7559982602c2a4d3fc663a5623fceef/b21dd/kubernetes_cluster_20.png 800w","/static/a7559982602c2a4d3fc663a5623fceef/c4494/kubernetes_cluster_20.png 801w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Just like in Docker, we can use "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"kubectl"}]},{"type":"text","value":" to run commands against our containers - e.g. to access the shell inside your container, contact the webserver (that should be serving our Angular app) and printing out index page:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl -it "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"exec"}]},{"type":"text","value":" webapp sh\n/ "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# wget http://localhost:80"}]},{"type":"text","value":"\n/ "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# cat index.html"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/a3680b75231b5dbe4d4adef01094c4e5/2cb05/kubernetes_cluster_21.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 39.2991239048811%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABDUlEQVQY022R226DMBBEDYG0YGhCpKpSpZRwM74bGwL//2ddmzw0aqQja7SrtWfW6Iu5Wa+SWSOXzaxcLphZzF05aEmM7CWgiJ4GXdUU3Vhc0/i2w9A3c3ezGebIoDAxWS+PgUPDkUegdhc8bkXaikPDkpannTh2Ep3F/CmXitqsYehKPD/jTvTMo3sN3V0fe1XKpRAO8zkjJukEGHtc8eei17z1quAOxoB3ojGdsnHK6ZSPky8O2qfoxOvhks9A2kFOBTFCKp6EE3TSiKimUT2G8xkYLqi9mLXS68VsZ3UHFwCm9kPM0Cq5A3GCXFBnFshHA4AAX8g7pAb2DjuEB3fCSoP2Lvxu4W/+2/4FKy43A8iw4f8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/a3680b75231b5dbe4d4adef01094c4e5/2cb05/kubernetes_cluster_21.png","srcSet":["/static/a3680b75231b5dbe4d4adef01094c4e5/ddfc7/kubernetes_cluster_21.png 200w","/static/a3680b75231b5dbe4d4adef01094c4e5/b02cb/kubernetes_cluster_21.png 400w","/static/a3680b75231b5dbe4d4adef01094c4e5/2cb05/kubernetes_cluster_21.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"kubernetes-services"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes-services","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kubernetes Services"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We now have a Pod that is serving our Angular frontend. To be able to access this Pod from "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"the outside"}]},{"type":"text","value":" we need to add a "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#service-v1-core"},"children":[{"type":"text","value":"Kubernetes service"}]},{"type":"text","value":". Let’s create a file "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"webapp-service.yaml"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Service\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Unique key of the Service instance"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" fleetman"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"webapp\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"ports"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Accept traffic sent to port 80"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" http\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"port"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"targetPort"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# The nodePort is available from outside of the"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# cluster when is set to NodePort. It's value has"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# to be > 30000"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"nodePort"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"30080"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"selector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Define which pods are going to"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# be represented by this service"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# The service makes an network"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# endpoint for our app"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Setting the Service type to ClusterIP makes the"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# service only available from inside the cluster"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# To expose a port use NodePort instead"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"type"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" NodePort"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/68c4840a4930b8c1b6f5c521aab64a9d/2cb05/kubernetes_cluster_22.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 48.685857321652065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBUlEQVQoz5WQXVOCQBSG18AIBcPqKpUElv3kGzUuyoxM5f//oc7CTN04oTPPnNnZOe+e5ywiuwPZHVl9YnXD64Z+HvH2O3jfB1C3+/DjwNv7X0TdQL/39gWgSbTSfYlmoWJO0IKgOZzxH8/nmLU9E1maNLV4DlX3xS2OtSUfuHTw0sHOoxoYUjGSGjge+lLzBIAWVM13aT+WKB7SVxireXwYSF09weGJmyVHLusJj2jqJJvHvDJJAoxodhdCTeGgdxb/hCEJ5hYvlHkQAcr5Qm0nWU+TzX20smVpywL8rwjDwk68HrMMlgdhI4zN1tnA0QXhrHrKKlsUY57DfPC3Rdl9W2/4B2G6RKGmZezBAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/68c4840a4930b8c1b6f5c521aab64a9d/2cb05/kubernetes_cluster_22.png","srcSet":["/static/68c4840a4930b8c1b6f5c521aab64a9d/ddfc7/kubernetes_cluster_22.png 200w","/static/68c4840a4930b8c1b6f5c521aab64a9d/b02cb/kubernetes_cluster_22.png 400w","/static/68c4840a4930b8c1b6f5c521aab64a9d/2cb05/kubernetes_cluster_22.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We now have to add the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Selector"}]},{"type":"text","value":" "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"webapp"}]},{"type":"text","value":" in form of a label in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"webapp-angular.yaml"}]},{"type":"text","value":" to our frontend pod to connect it to our service:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Pod\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"labels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" richardchesterwood/k8s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"fleetman"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"webapp"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"angular"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"release0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The service can be added to our cluster by the following commands:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl apply -f webapp-angular.yaml\nkubectl apply -f webapp-service.yaml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/c51a7ac0645e16efcfdee5285948d045/2cb05/kubernetes_cluster_23.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 9.887359198998748%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAcUlEQVQI12Pg1zYRNrCQ0TFV0jPj0TRk1zLi1jDg0DAQUdN3VtN3VTdwVNV1Vtdz1TBwUdd3UtPllVNnkFNnBJMMvFrGQvrmIrpmonpmktrGKrqm/JqGXBqGvOoGUqp6ogoaogqaQCSmqAlhsEC0gREATnIQ6Oliyu8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/c51a7ac0645e16efcfdee5285948d045/2cb05/kubernetes_cluster_23.png","srcSet":["/static/c51a7ac0645e16efcfdee5285948d045/ddfc7/kubernetes_cluster_23.png 200w","/static/c51a7ac0645e16efcfdee5285948d045/b02cb/kubernetes_cluster_23.png 400w","/static/c51a7ac0645e16efcfdee5285948d045/2cb05/kubernetes_cluster_23.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"By applying our changes, we have updated our pod and created our service."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/d518f94e0fd4c18a118d9cf692442559/9f07b/kubernetes_cluster_24.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 13.681592039800993%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAmElEQVQI1z3O2Q6CMBQE0GqMCg9ExAWItLRCl3vbUkr//9uEkJhM5mlOMuRmQqGmCpfSzHeMJcSHTYWJjZzC12qBKDCninSS/HsP04RKXwt4c9MOtjdzK/DVGwGxGv2ZQyGnC4dsdNngTkzngztuZveadBApps+65tCoQHF5CGAu1dI30lOIJVUMorDpyaHT4dqbVR62F+oHL+0W302KEXEAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/d518f94e0fd4c18a118d9cf692442559/b21dd/kubernetes_cluster_24.png","srcSet":["/static/d518f94e0fd4c18a118d9cf692442559/2d451/kubernetes_cluster_24.png 200w","/static/d518f94e0fd4c18a118d9cf692442559/06807/kubernetes_cluster_24.png 400w","/static/d518f94e0fd4c18a118d9cf692442559/b21dd/kubernetes_cluster_24.png 800w","/static/d518f94e0fd4c18a118d9cf692442559/9f07b/kubernetes_cluster_24.png 804w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"updating-the-pod"},"children":[{"type":"element","tagName":"a","properties":{"href":"#updating-the-pod","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Updating the Pod"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To Update a Pod in Production with 0 downtime we can use labels. We can define a second pod inside the same file "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"webapp-angular.yaml"}]},{"type":"text","value":". Right now we are going to use release versions to define our pods. Later we might change this to a "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"production"}]},{"type":"text","value":" and a "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"development"}]},{"type":"text","value":" version - both of which can then be run inside the same cluster and be served by different services:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Pod\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"labels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"release"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"0\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" richardchesterwood/k8s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"fleetman"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"webapp"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"angular"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"release0\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"---"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Pod\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"release"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"labels"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"release"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"0-5\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"containers"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"image"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" richardchesterwood/k8s"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"fleetman"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"webapp"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"angular"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"release0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Make sure to surround release version with quotation marks to convert it into a string - "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"“0”"}]},{"type":"text","value":". Otherwise you end up with the error message "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"for: \"webapp-angular.yaml\": cannot convert int64 to string"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now we have to modify our service "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"webapp-service.yaml"}]},{"type":"text","value":": to not only check for the app name label, but also for the release version - we want to only connect to the current version 0. Once the version 0.5 is deployed we then can update the service to connect us to the updated Pod instead - allowing us to deploy the update with 0 downtime:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Service\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Unique key of the Service instance"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" fleetman"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"webapp\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"ports"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Accept traffic sent to port 80"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" http\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"port"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"targetPort"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# The nodePort is available from outside of the"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# cluster when is set to NodePort. It's value has"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# to be > 30000"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"nodePort"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"30080"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"selector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Define which pods are going to"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# be represented by this service"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# The service makes an network"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# endpoint for our app"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" webapp\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"release"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"0\""}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Setting the Service type to ClusterIP makes the"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# service only available from inside the cluster"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# To expose a port use NodePort instead"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"type"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" NodePort"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now update both our Pod and Service - as well add the new Pod with our updated Angular app:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl apply -f webapp-angular.yaml\nkubectl apply -f webapp-service.yaml\nkubectl get pods --show-labels"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ec439dac6255e799e99435ed1f1cf80d/9771d/kubernetes_cluster_25.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 798px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 14.661654135338345%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAm0lEQVQI1y2O2Q6CMBREUUEWKwrhwRcFpLa3+0KL//9nlsRk3mZyzmSdijcZaqKrj66JacXa6XhXEXGvmAvMee6DDCtYB/Y8sexJ9rzonpb7C3PFIvK3OM3ivMgSqybtFnmYWEFMTk2l4gBWgH1gmY1wHOGPSKor960ICHZEclZYIeY7vZVY9mYrZtFQM5itnDmiNlW9+SZBevoDc+sXOPnMga8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/ec439dac6255e799e99435ed1f1cf80d/9771d/kubernetes_cluster_25.png","srcSet":["/static/ec439dac6255e799e99435ed1f1cf80d/84ded/kubernetes_cluster_25.png 200w","/static/ec439dac6255e799e99435ed1f1cf80d/53cad/kubernetes_cluster_25.png 400w","/static/ec439dac6255e799e99435ed1f1cf80d/9771d/kubernetes_cluster_25.png 798w"],"sizes":["(max-width:","798px)","100vw,","798px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now that both pods are running we can edit our service "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"webapp-service.yaml"}]},{"type":"text","value":" and change the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"selector"}]},{"type":"text","value":" to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"release: \"0-5\""}]},{"type":"text","value":". Apply the change with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl apply -f webapp-service.yaml"}]},{"type":"text","value":" and verify that the service is now switched to the new release with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl describe service fleetman-webapp"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/cfbd3173af329d9758dffc48aa0baff8/9d423/kubernetes_cluster_26.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 37.60896637608966%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJ0lEQVQY03WQ246CMBCGCwqeUESzV+KplJZ2pgUpiDf7/q+1o0ZjNrvJl2bydw7/DMvqIbP9trml0G2bIXN9it0COwf+G/wVfKcvN9tdZN0K2xYYHBR7k2K/qJrEtHPVbJphQ12Mj6TLC3QFqjNUBAddoCmdLd3upNleBntJL1uCD48Vy0u2ExSvwMelDTmMCogLnAg7ETiVLuJAaeOTDl+MzobRTPqjpKhAKs7q65ftd7bfQJtAN1N1LOxMNZHAMQfKoRoKCGrNYoHkPqDhB7W+Lz+kArdnmJHy9EaQr3f8yepp+54hl6ZdoZ+qmh0k+zzMf9CFFvpCewYnvaQ7Uyzs08iL6q/Kh5goN+FmXmLMzdq2SeXGRxVzTWJIV83LIBeP9xd38QdCJjdcEUFNWAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/cfbd3173af329d9758dffc48aa0baff8/b21dd/kubernetes_cluster_26.png","srcSet":["/static/cfbd3173af329d9758dffc48aa0baff8/2d451/kubernetes_cluster_26.png 200w","/static/cfbd3173af329d9758dffc48aa0baff8/06807/kubernetes_cluster_26.png 400w","/static/cfbd3173af329d9758dffc48aa0baff8/b21dd/kubernetes_cluster_26.png 800w","/static/cfbd3173af329d9758dffc48aa0baff8/9d423/kubernetes_cluster_26.png 803w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"kubernetes--compose--kompose"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kubernetes--compose--kompose","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kubernetes + Compose = Kompose"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://kompose.io"},"children":[{"type":"text","value":"Kompose"}]},{"type":"text","value":" is a conversion tool for Docker Compose to container orchestrators such as Kubernetes (or OpenShift)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Simplify your development process with Docker Compose and then deploy your containers to a production cluster"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/tasks/configure-pod-container/translate-compose-kubernetes/"},"children":[{"type":"text","value":"Convert"}]},{"type":"text","value":" your "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"docker-compose.yaml"}]},{"type":"text","value":" with one simple command "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kompose convert"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Immediately bring up your cluster with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kompose up"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Bring it back down with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kompose down"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kompose is in EPEL CentOS repository. If you don’t have EPEL repository already installed and enabled you can do it by running "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"yum install epel-release"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"yum -y "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" kompose"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"use-kompose"},"children":[{"type":"element","tagName":"a","properties":{"href":"#use-kompose","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Use Kompose"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In just a few steps, we’ll take you from Docker Compose to Kubernetes. All you need is an existing "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" file:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Go to the directory containing your "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" file. Run the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kompose up"}]},{"type":"text","value":" command to deploy to Kubernetes directly."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Or convert the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"docker-compose.yml"}]},{"type":"text","value":" file to files that you can use with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl"}]},{"type":"text","value":", run "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kompose convert"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/cb6f00d71063329541c05275c4765417/f206b/kubernetes_cluster_x1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 49.44237918215614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABVElEQVQoz3WSW2+CQBSEqeANFbk0pi9WRGXZC3uARcCk//93dRaS2qQ1OSEfD8OZmYMTCLOTZp2Tzyqf0aaoLReVz2s3E07KnVPhfLL/B5rVTS+v5U424LC8Qx+IJqMuVe3holbQvxKvc724lsub3qt2y5uY+i2vwYd6gKlFJt9O7KV4y401ySorFk1SDTvRBKo9tl8JIz/lPmwf83HYOPlzPhRP9D2iAck3RQXP+MRGmqM0JI3g9Rm5cr1mBHfwCKeTWexzQkURdRH1NvmtRHiA5Zzci/IucpYJL5NzcCbds5jAywDSmVMf14+E+kAatAWIdLdXd7APPdr6MTnlnPxPsKAuroaYOkRF7Fj36CzUHZ4bjrPZQ3hn8RT/ngU2N4+xJ4OdgKTq3+sHxEn1CFWLOpFilv537ZVqQ6wq77vxb4m0tY1Xa5uRe+azlLupAPwVfwMC/kf5RRZ9qgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/cb6f00d71063329541c05275c4765417/b21dd/kubernetes_cluster_x1.png","srcSet":["/static/cb6f00d71063329541c05275c4765417/2d451/kubernetes_cluster_x1.png 200w","/static/cb6f00d71063329541c05275c4765417/06807/kubernetes_cluster_x1.png 400w","/static/cb6f00d71063329541c05275c4765417/b21dd/kubernetes_cluster_x1.png 800w","/static/cb6f00d71063329541c05275c4765417/f206b/kubernetes_cluster_x1.png 807w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And then "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl create -f <output files>"}]},{"type":"text","value":" - e.g. :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"kubectl create -f api-service.yaml,elasticsearch-service.yaml,frontend-service.yaml,wiki-service.yaml,api-deployment.yaml,api-claim0-persistentvolumeclaim.yaml,elasticsearch-deployment.yaml,esdata-en-persistentvolumeclaim.yaml,frontend-deployment.yaml,frontend-claim0-persistentvolumeclaim.yaml,wiki-deployment.yaml"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/214bb6070760fa10146480fde6b74ebd/2cb05/kubernetes_cluster_x2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 799px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 29.036295369211512%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAr0lEQVQY042PWxOCIBSEqbSpDAP1rdukeQVRFLz8/z/WAXsuZ745s8OyBxYFYrxwRWpNhP6KWlNAaJ8rzHrfHoJFrQXCXOMasw5FcqJiAHzWn8vumDVuwoG9mcyN2f7NARCGZMFYTswQxEit4J1DJnavCt1SdE3RPVtFKOdADGE72S0aV/0pb7fPAj3y/ywxmFZA1cEr5WZlOJIzbSA8EtNcE668QuKqc6ACfOxn+AOyHioUMVS2cQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Creating a Kubernetes Cluster","title":"","src":"/static/214bb6070760fa10146480fde6b74ebd/2cb05/kubernetes_cluster_x2.png","srcSet":["/static/214bb6070760fa10146480fde6b74ebd/ddfc7/kubernetes_cluster_x2.png 200w","/static/214bb6070760fa10146480fde6b74ebd/b02cb/kubernetes_cluster_x2.png 400w","/static/214bb6070760fa10146480fde6b74ebd/2cb05/kubernetes_cluster_x2.png 799w"],"sizes":["(max-width:","799px)","100vw,","799px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]}],"data":{"quirksMode":false}},"fields":{"slug":"/creating-a-kubernetes-cluster/","prefix":"2019-01-15"},"frontmatter":{"title":"Creating a Kubernetes Cluster","subTitle":"Red Hat Enterprise and Centos Linux Server Adminsitration","cover":{"childImageSharp":{"resize":{"src":"/static/fed35a3b606dbf01b33ea8cccb2c3a31/f2a5a/photo-34219553960_350f18edbb_o-cover.png"}}}}},"author":{"id":"9c69de06-11ab-55c9-b52a-3cc0b2f51365","html":"<p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href=\"/contact/\">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p>"},"footnote":{"id":"24817670-3434-5a21-9de1-e9fab89708d7","html":"<ul>\n<li>This is a personal Developer Blog</li>\n<li>Ξ</li>\n<li>built by <a href=\"https://github.com/mpolinowski\">Mike Polinowski</a></li>\n<li>Ξ</li>\n<li>with <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> &#x26; <a href=\"https://reactjs.org\">React</a></li>\n<li>Ξ</li>\n<li>source code on <a href=\"https://github.com/mpolinowski/mpolinowski.github.io\">GitHub</a></li>\n<li>Ξ</li>\n<li>deliverd by <a href=\"https://pages.github.com\">Github Pages</a></li>\n<li>Ξ</li>\n<li>photos from <a href=\"https://www.flickr.com/people/149680084@N06/\">Flickr</a></li>\n</ul>"}},"pageContext":{"slug":"/creating-a-kubernetes-cluster/"}}