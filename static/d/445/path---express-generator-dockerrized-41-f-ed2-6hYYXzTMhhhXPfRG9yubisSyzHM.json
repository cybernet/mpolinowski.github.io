{"data":{"post":{"id":"5f06ef91-3d0e-5b03-8436-1e3680d46ecd","html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55deb56abbe1ca5e3ff5c13a1545716e/b721b/photo-19196703263_69f9f0df5f_o.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 57.266666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAACTpAAAk6QFQJOf4AAACUUlEQVQozw2Ou27TUACG3djnavscH9uJb/EltpvEdpMm0JS0TXGLElr1KoRApUgMIFVE6sBEoSsLj8CABBMPwYZYeSiy/PqG75N+CcqSQQHDio5kn8GWDtsC5U3ic2SpyFQRI5ARsGJOgcHoaglUlEZDbqxJGGJPEHelUhgZuNei6zbeCGjh0dzRQ0E8jj1ONwNh6ypzUo1gCmUKodyQJZthRwXTUM9stefqRZNmJq4CNbZI5miRpaUtXsRu3rZd0xTJ0GTC4N4qVmRZQkqDYxCaxNHhbre9V2U+J6GglacNAn0UscpnD2NjkogqjoP+PHZ8g/c0hBBAEicyJ4AAJWBwUYiLgbEo+PWWuK351ZZ1VBp7XbvOnVlmbQbpfqvOXNHUsCBQYCyNQzTwYB2jeUpO+urVRK+7Wt+hpaemtuoZWmCyB7286qSh0S69KVs9BhApimeqUuGixASOrmhQ5kh2mcIoYhh6Qq1C883j7HyS7Y3H292Ovz4yps85AhAgqACMoKSsSYq0FjWAA2SCoMPVbhPNJ9HhyL981L47TW9Php9vXp9Ph0G64ZSHDAMKSZGQKsOSwdV+bG1y2qbIMfUsEDuZ+nQnmfRaV3W+PEqXi97X29Nne4PLg9lsd+abVtSk+4U/WnelnTqZHydFh3ZtvSVoHKDQUYuE12P35qy6ezn6+ensz/flx+vH77cPL4bVwbBfxWYSse0ulzol65VW2ERNDepEiXxShrSM+asn/tvj/Mu72b9f97+/Lf/+uP/wYrHfdwvX6EXCMeEwN/4DPldQ0HeHuo8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Shanghai, China\"\n        title=\"\"\n        src=\"/static/55deb56abbe1ca5e3ff5c13a1545716e/b21dd/photo-19196703263_69f9f0df5f_o.png\"\n        srcset=\"/static/55deb56abbe1ca5e3ff5c13a1545716e/2d451/photo-19196703263_69f9f0df5f_o.png 200w,\n/static/55deb56abbe1ca5e3ff5c13a1545716e/06807/photo-19196703263_69f9f0df5f_o.png 400w,\n/static/55deb56abbe1ca5e3ff5c13a1545716e/b21dd/photo-19196703263_69f9f0df5f_o.png 800w,\n/static/55deb56abbe1ca5e3ff5c13a1545716e/c9309/photo-19196703263_69f9f0df5f_o.png 1200w,\n/static/55deb56abbe1ca5e3ff5c13a1545716e/b721b/photo-19196703263_69f9f0df5f_o.png 1500w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>As an example, we are going to use <a href=\"https://expressjs.com/en/starter/generator.html\">express-generator</a> to scaffold a <a href=\"https://nodejs.org\">Node.js</a> Web App and wrap it’s source code into a Docker Container.</p>\n<p><a href=\"https://github.com/mpolinowski/express-generator-dockerrized\">Github Repository</a></p>\n<!-- TOC -->\n<ul>\n<li><a href=\"#create-a-nodejs-web-app\">Create a Node.js Web App</a></li>\n<li>\n<p><a href=\"#creating-a-dockerfile-for-our-app\">Creating a Dockerfile for our App</a></p>\n<ul>\n<li><a href=\"#from\">FROM</a></li>\n<li><a href=\"#env\">ENV</a></li>\n<li><a href=\"#copy\">COPY</a></li>\n<li><a href=\"#workdir\">WORKDIR</a></li>\n<li><a href=\"#run\">RUN</a></li>\n<li><a href=\"#expose\">EXPOSE</a></li>\n<li><a href=\"#entrypoint\">ENTRYPOINT</a></li>\n</ul>\n</li>\n<li><a href=\"#building-our-custom-docker-image\">Building our custom Docker Image</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"create-a-nodejs-web-app\"><a href=\"#create-a-nodejs-web-app\" aria-label=\"create a nodejs web app permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a Node.js Web App</h2>\n<p>We want to use express-generator to generate a basic Node Web App. We first need to install the generator globally on our machine:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g express-generator</code></pre></div>\n<p>We then run express-generator to scaffold an app for use, using the <a href=\"http://ejs.co\">EJS Templating Engine</a> - check out <a href=\"https://expressjs.com/en/starter/generator.html\">their website</a> for more options - and put the source code into a folder named <em>express-generator-app-docker</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">express --view<span class=\"token operator\">=</span>ejs express-generator-dockerrized</code></pre></div>\n<p>To install dependencies we need to enter the created directory and run <em>npm install</em> :</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cd</span> express-generator-dockerrized <span class=\"token operator\">&amp;</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<p>We can test our web app by running <em>npm start</em> and accessing <em><a href=\"http://localhos:3000\">http://localhos:3000</a></em> with a web browser:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/18c3527497af1fc0f8d4da4e128c53a0/a1323/express-dockerrized_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.51748251748251%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAjElEQVQY02PYpa2/y9D0oIX1QmOzMGX1WDXtMAUVLxEJb1FJgojhfH0zCNU1nWtoOdvQcq6x9Wx9M5GI4c+fP//////3799/0gHDvz9/nj55cv/+/RcvXvz+DTToH9AkIhEDED96+PDy5cu3b93+9u0b2BVE2/z371+gy3///v3zx49fP3+S5mxK/AwABrNYtZgzNosAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Express App in Docker Container\"\n        title=\"\"\n        src=\"/static/18c3527497af1fc0f8d4da4e128c53a0/b21dd/express-dockerrized_01.png\"\n        srcset=\"/static/18c3527497af1fc0f8d4da4e128c53a0/2d451/express-dockerrized_01.png 200w,\n/static/18c3527497af1fc0f8d4da4e128c53a0/06807/express-dockerrized_01.png 400w,\n/static/18c3527497af1fc0f8d4da4e128c53a0/b21dd/express-dockerrized_01.png 800w,\n/static/18c3527497af1fc0f8d4da4e128c53a0/a1323/express-dockerrized_01.png 858w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<h2 id=\"creating-a-dockerfile-for-our-app\"><a href=\"#creating-a-dockerfile-for-our-app\" aria-label=\"creating a dockerfile for our app permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a Dockerfile for our App</h2>\n<p>The <a href=\"https://docs.docker.com/engine/reference/builder/\">Dockerfile</a> is a text file that contains all the commands that the <a href=\"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#build-context\">docker build</a> command uses, in order, to build a our Docker image.</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\">FROM        node:latest\nMAINTAINER  Mike Polinowski\nENV         NODE_ENV=production\nENV         PORT=3000\nCOPY        . /app\nWORKDIR     /app\nRUN         npm install\nEXPOSE      3000\nENTRYPOINT  [&quot;npm&quot;, &quot;start&quot;]</code></pre></div>\n<h3 id=\"from\"><a href=\"#from\" aria-label=\"from permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FROM</h3>\n<p>We are using the <a href=\"https://hub.docker.com/_/node/\">node</a> Docker image as a base for our app. By just writing <em>[FROM](<a href=\"https://docs.docker.com/develop/develop-images/dockerfile\">https://docs.docker.com/develop/develop-images/dockerfile</a></em>best-practices/#from)_ <strong>node</strong> we will use the @latest version of Node.js available on the <a href=\"https://hub.docker.com\">Docker Hub</a> - <a href=\"https://hub.docker.com/r/library/node/tags/\">specify a version</a> when required - e.g. <code class=\"language-text\">node:latest</code>, <code class=\"language-text\">node:9.10.2</code></p>\n<h3 id=\"env\"><a href=\"#env\" aria-label=\"env permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ENV</h3>\n<p>The <a href=\"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#env\">Environment Variable</a> can be used to set, e.g. the Node Envrionment. Our app, as created by express-generator, also allows to change the port, the application is running on, to a different value, depending on the environment port defined here (see <em>./bin/www</em> for how this is done).</p>\n<h3 id=\"copy\"><a href=\"#copy\" aria-label=\"copy permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>COPY</h3>\n<p><a href=\"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#add-or-copy\">Copy</a> copies the source code into a folder inside the container. The given example <strong>. /app</strong> copies everything from the current directory into an <em>/app</em> directory, that is generated inside the container.</p>\n<h3 id=\"workdir\"><a href=\"#workdir\" aria-label=\"workdir permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WORKDIR</h3>\n<p>The <a href=\"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#workdir\">Working Directory</a> sets the context where scripts are run. We are going to add an <code class=\"language-text\">npm install</code> step, that needs to be run in the directory that contains our <em>package.json</em>.</p>\n<h3 id=\"run\"><a href=\"#run\" aria-label=\"run permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RUN</h3>\n<p>The most common use-case for RUN is a <em>Node Application</em> of <code class=\"language-text\">npm install</code>, to install our app dependencies, once our source code is copied into the container. </p>\n<h3 id=\"expose\"><a href=\"#expose\" aria-label=\"expose permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EXPOSE</h3>\n<p>This <a href=\"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#expose\">exposes</a> a port that our app will be reached through, once the container is running. When a <strong>PORT</strong> was defined as a <em>Environment Variable</em> (s. above), you can also use this value, by settings <strong>EXPOSE $PORT</strong></p>\n<h3 id=\"entrypoint\"><a href=\"#entrypoint\" aria-label=\"entrypoint permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ENTRYPOINT</h3>\n<p>The <a href=\"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#entrypoint\">Entrypoint</a> allows you to configure a container that will run as an executable. Point it to the images main command. Since we installed our app through <em>express-generator</em>, the main file to run would be <strong>./bin/www</strong>. In our case, the file will be executed by <code class=\"language-text\">node ./bin/www</code>. But checking the generated <em>package.json</em> file, we can see that we already have an NPM Script for that, that allows us to simply call <strong>npm start</strong> instead.</p>\n<h2 id=\"building-our-custom-docker-image\"><a href=\"#building-our-custom-docker-image\" aria-label=\"building our custom docker image permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building our custom Docker Image</h2>\n<p>First we need to make sure that our Docker Image does not get unnecessary file - especially the <strong>node_modules</strong> and <strong>.git</strong> folder should be excluded. Just like with a <a href=\"https://www.gitignore.io\">.gitignore</a> file, that excludes folders and files from git commits, we can create a <strong>.dockerignore</strong> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.git\nDockerfile*\nnode_modules</code></pre></div>\n<p>Now we can run the <strong>docker build</strong> command.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker build -f Dockerfile -t expressapp/node <span class=\"token keyword\">.</span></code></pre></div>\n<p>This will run the <code class=\"language-text\">build</code> function of Docker using the our Dockerfile (<strong>Note</strong>: you don’t have to add the <code class=\"language-text\">-f</code> flag when naming your file <em>Dockerfile</em>. The flag is useful when you have more then one Dockerfiles for different scenarios and have to give them different names accordingly.). The <code class=\"language-text\">-t</code> flag adds a tag to the Docker image - this can be your docker hub username, or a build version, for internal use. The <code class=\"language-text\">.</code> in the end signifies that docker should search for your code in the current work directory.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/90881f5709d2f2fda9a05cec16b4d113/09055/express-dockerrized_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 39.70873786407767%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA5ElEQVQY02NQdc3TdisAIlnrDEnzFHGzaH79OG6dGE7taC7taH6DeFb1SAblUEaVMDhiVgtnkA008C5mkLJO03EvVHHMAerh0Y1lUAxlUAoFqoYipVBG5TBknVDNMgHG/mUMMrYZuh6Fqk45IsaJbBqRbBoRTKroqrFqNvIrY1B1yTX0LtF0zefVi+XVi+PTj2cmQbNrnq57oY5HoZRlGtCrQCOYVMOJ1azumm/gXaLrWShlkQrUzEOSZgXHbF33Ij2PQlmbdHGzFEGjRBI0KznlGHiVqLvkKdhmChgkcGhFE68ZANcwXZ3u2fKaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Express App in Docker Container\"\n        title=\"\"\n        src=\"/static/90881f5709d2f2fda9a05cec16b4d113/b21dd/express-dockerrized_02.png\"\n        srcset=\"/static/90881f5709d2f2fda9a05cec16b4d113/2d451/express-dockerrized_02.png 200w,\n/static/90881f5709d2f2fda9a05cec16b4d113/06807/express-dockerrized_02.png 400w,\n/static/90881f5709d2f2fda9a05cec16b4d113/b21dd/express-dockerrized_02.png 800w,\n/static/90881f5709d2f2fda9a05cec16b4d113/09055/express-dockerrized_02.png 1030w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>You can check if the image was build by typing </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker images</code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/898c922e12088d0c35abd655ee86e37f/09055/express-dockerrized_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 3.6893203883495143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAARElEQVQI12Pg148XMEjkN4gWMAjk048TNkkSNExgUA5lUA6TskpXtM/i1I5mVotQss8SNk7k1YsTMEyQNE8FyjKqhAEAbxkMK4nUErAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Express App in Docker Container\"\n        title=\"\"\n        src=\"/static/898c922e12088d0c35abd655ee86e37f/b21dd/express-dockerrized_03.png\"\n        srcset=\"/static/898c922e12088d0c35abd655ee86e37f/2d451/express-dockerrized_03.png 200w,\n/static/898c922e12088d0c35abd655ee86e37f/06807/express-dockerrized_03.png 400w,\n/static/898c922e12088d0c35abd655ee86e37f/b21dd/express-dockerrized_03.png 800w,\n/static/898c922e12088d0c35abd655ee86e37f/09055/express-dockerrized_03.png 1030w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>And run the container by typing:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run -d -p 8080:3000 expressapp/node</code></pre></div>\n<p>This command will run your container in <code class=\"language-text\">-d</code> daemon mode in the background and set the external port of your app to 8080 (the internal port is set by the express app to 3000). You can verify that your app is running by typing:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker ps</code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1fa05bedf939cdf0f43362e15a50c4a0/e30d5/express-dockerrized_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 6.110572259941804%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAQklEQVQI12PQ8ynRcs3XcivQdC1QsEvX8UiUtUoTN09RtM8SMIjn1Yvl1I5mVAlj14wCIiCDWS2CRy+WQTbQNa4JAMCqDdkJRpcEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Express App in Docker Container\"\n        title=\"\"\n        src=\"/static/1fa05bedf939cdf0f43362e15a50c4a0/b21dd/express-dockerrized_04.png\"\n        srcset=\"/static/1fa05bedf939cdf0f43362e15a50c4a0/2d451/express-dockerrized_04.png 200w,\n/static/1fa05bedf939cdf0f43362e15a50c4a0/06807/express-dockerrized_04.png 400w,\n/static/1fa05bedf939cdf0f43362e15a50c4a0/b21dd/express-dockerrized_04.png 800w,\n/static/1fa05bedf939cdf0f43362e15a50c4a0/e30d5/express-dockerrized_04.png 1031w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>You now have your app running inside the container and can access it by opening <a href=\"http://localhost:8080\">http://localhost:8080</a> inside your web browser:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/892a7507a83b0c2d8a879b24edc5a1cd/112ff/express-dockerrized_05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 31.627906976744185%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAj0lEQVQY02M4YW69S1Nnl7b+EVOLNnXtGAWVdGX1MBHJYEHxECECiKHV3fvmrHk3Zs69PnPOzZlzb8+ad2vWvNuziUIMMWnp//6DAIQkCTCkpab/+vHjxtWrl86ff/rkyf+/f//9+UMkYkhNTf/379+bN2+ePXv2+vXrP3/+kGBzfEIiyM1g8Bdo7T8SnA8A6QgauGW41ToAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Express App in Docker Container\"\n        title=\"\"\n        src=\"/static/892a7507a83b0c2d8a879b24edc5a1cd/b21dd/express-dockerrized_05.png\"\n        srcset=\"/static/892a7507a83b0c2d8a879b24edc5a1cd/2d451/express-dockerrized_05.png 200w,\n/static/892a7507a83b0c2d8a879b24edc5a1cd/06807/express-dockerrized_05.png 400w,\n/static/892a7507a83b0c2d8a879b24edc5a1cd/b21dd/express-dockerrized_05.png 800w,\n/static/892a7507a83b0c2d8a879b24edc5a1cd/112ff/express-dockerrized_05.png 860w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>You can stop and delete the container (the docker image stays in place - so you can always restart it) by:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker stop c165\n\ndocker rm c165</code></pre></div>\n<p>The <strong>c165</strong> are the first characters of the Container ID and can be used as a selector - of course, the ID will differ every time you rerun the container.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d6eaf83e86c943a4f235e5529f520c31/09055/express-dockerrized_06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.699029126213592%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArUlEQVQI12PQ9ylRdshRsMvUcMmXtU5VcYqWs0lnVgsXNEzg049l14wUMEoAkpxa0QKGCdw6MZzaMaKmyUwqYe4JzQwqzrniZinSVmlSlmlSFklSViH8BnFAORb1CBa1CEYgQy2CSTUcIgI0lFU9kkUjgkEuyCW2icEkoFzFMUfOJgOIBAxiVJxiJSxSgKqFjRPZNaN4dGOBTgByBcHWAjUD7WfTiGSQ9neKaQQAKIsm7P7ywvAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Express App in Docker Container\"\n        title=\"\"\n        src=\"/static/d6eaf83e86c943a4f235e5529f520c31/b21dd/express-dockerrized_06.png\"\n        srcset=\"/static/d6eaf83e86c943a4f235e5529f520c31/2d451/express-dockerrized_06.png 200w,\n/static/d6eaf83e86c943a4f235e5529f520c31/06807/express-dockerrized_06.png 400w,\n/static/d6eaf83e86c943a4f235e5529f520c31/b21dd/express-dockerrized_06.png 800w,\n/static/d6eaf83e86c943a4f235e5529f520c31/09055/express-dockerrized_06.png 1030w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>If you want to remove the complete image, you first have to check the image ID (just as shown above, you just need to type the first few characters to select the image - e.g. <em>9190</em>) by typing <code class=\"language-text\">docker images</code>, then delete it with <code class=\"language-text\">docker rmi 9190</code></p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/55deb56abbe1ca5e3ff5c13a1545716e/b721b/photo-19196703263_69f9f0df5f_o.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 57.266666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAACTpAAAk6QFQJOf4AAACUUlEQVQozw2Ou27TUACG3djnavscH9uJb/EltpvEdpMm0JS0TXGLElr1KoRApUgMIFVE6sBEoSsLj8CABBMPwYZYeSiy/PqG75N+CcqSQQHDio5kn8GWDtsC5U3ic2SpyFQRI5ARsGJOgcHoaglUlEZDbqxJGGJPEHelUhgZuNei6zbeCGjh0dzRQ0E8jj1ONwNh6ypzUo1gCmUKodyQJZthRwXTUM9stefqRZNmJq4CNbZI5miRpaUtXsRu3rZd0xTJ0GTC4N4qVmRZQkqDYxCaxNHhbre9V2U+J6GglacNAn0UscpnD2NjkogqjoP+PHZ8g/c0hBBAEicyJ4AAJWBwUYiLgbEo+PWWuK351ZZ1VBp7XbvOnVlmbQbpfqvOXNHUsCBQYCyNQzTwYB2jeUpO+urVRK+7Wt+hpaemtuoZWmCyB7286qSh0S69KVs9BhApimeqUuGixASOrmhQ5kh2mcIoYhh6Qq1C883j7HyS7Y3H292Ovz4yps85AhAgqACMoKSsSYq0FjWAA2SCoMPVbhPNJ9HhyL981L47TW9Php9vXp9Ph0G64ZSHDAMKSZGQKsOSwdV+bG1y2qbIMfUsEDuZ+nQnmfRaV3W+PEqXi97X29Nne4PLg9lsd+abVtSk+4U/WnelnTqZHydFh3ZtvSVoHKDQUYuE12P35qy6ezn6+ensz/flx+vH77cPL4bVwbBfxWYSse0ulzol65VW2ERNDepEiXxShrSM+asn/tvj/Mu72b9f97+/Lf/+uP/wYrHfdwvX6EXCMeEwN/4DPldQ0HeHuo8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Shanghai, China","title":"","src":"/static/55deb56abbe1ca5e3ff5c13a1545716e/b21dd/photo-19196703263_69f9f0df5f_o.png","srcSet":["/static/55deb56abbe1ca5e3ff5c13a1545716e/2d451/photo-19196703263_69f9f0df5f_o.png 200w","/static/55deb56abbe1ca5e3ff5c13a1545716e/06807/photo-19196703263_69f9f0df5f_o.png 400w","/static/55deb56abbe1ca5e3ff5c13a1545716e/b21dd/photo-19196703263_69f9f0df5f_o.png 800w","/static/55deb56abbe1ca5e3ff5c13a1545716e/c9309/photo-19196703263_69f9f0df5f_o.png 1200w","/static/55deb56abbe1ca5e3ff5c13a1545716e/b721b/photo-19196703263_69f9f0df5f_o.png 1500w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As an example, we are going to use "},{"type":"element","tagName":"a","properties":{"href":"https://expressjs.com/en/starter/generator.html"},"children":[{"type":"text","value":"express-generator"}]},{"type":"text","value":" to scaffold a "},{"type":"element","tagName":"a","properties":{"href":"https://nodejs.org"},"children":[{"type":"text","value":"Node.js"}]},{"type":"text","value":" Web App and wrap it’s source code into a Docker Container."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/mpolinowski/express-generator-dockerrized"},"children":[{"type":"text","value":"Github Repository"}]}]},{"type":"text","value":"\n"},{"type":"comment","value":" TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#create-a-nodejs-web-app"},"children":[{"type":"text","value":"Create a Node.js Web App"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#creating-a-dockerfile-for-our-app"},"children":[{"type":"text","value":"Creating a Dockerfile for our App"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#from"},"children":[{"type":"text","value":"FROM"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#env"},"children":[{"type":"text","value":"ENV"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#copy"},"children":[{"type":"text","value":"COPY"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#workdir"},"children":[{"type":"text","value":"WORKDIR"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#run"},"children":[{"type":"text","value":"RUN"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#expose"},"children":[{"type":"text","value":"EXPOSE"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#entrypoint"},"children":[{"type":"text","value":"ENTRYPOINT"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#building-our-custom-docker-image"},"children":[{"type":"text","value":"Building our custom Docker Image"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"comment","value":" /TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"create-a-nodejs-web-app"},"children":[{"type":"element","tagName":"a","properties":{"href":"#create-a-nodejs-web-app","ariaLabel":"create a nodejs web app permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Create a Node.js Web App"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We want to use express-generator to generate a basic Node Web App. We first need to install the generator globally on our machine:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" -g express-generator"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We then run express-generator to scaffold an app for use, using the "},{"type":"element","tagName":"a","properties":{"href":"http://ejs.co"},"children":[{"type":"text","value":"EJS Templating Engine"}]},{"type":"text","value":" - check out "},{"type":"element","tagName":"a","properties":{"href":"https://expressjs.com/en/starter/generator.html"},"children":[{"type":"text","value":"their website"}]},{"type":"text","value":" for more options - and put the source code into a folder named "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"express-generator-app-docker"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"express --view"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"ejs express-generator-dockerrized"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To install dependencies we need to enter the created directory and run "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"npm install"}]},{"type":"text","value":" :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"cd"}]},{"type":"text","value":" express-generator-dockerrized "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"&"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can test our web app by running "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"npm start"}]},{"type":"text","value":" and accessing "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://localhos:3000"},"children":[{"type":"text","value":"http://localhos:3000"}]}]},{"type":"text","value":" with a web browser:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/18c3527497af1fc0f8d4da4e128c53a0/a1323/express-dockerrized_01.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 32.51748251748251%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAjElEQVQY02PYpa2/y9D0oIX1QmOzMGX1WDXtMAUVLxEJb1FJgojhfH0zCNU1nWtoOdvQcq6x9Wx9M5GI4c+fP//////3799/0gHDvz9/nj55cv/+/RcvXvz+DTToH9AkIhEDED96+PDy5cu3b93+9u0b2BVE2/z371+gy3///v3zx49fP3+S5mxK/AwABrNYtZgzNosAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Express App in Docker Container","title":"","src":"/static/18c3527497af1fc0f8d4da4e128c53a0/b21dd/express-dockerrized_01.png","srcSet":["/static/18c3527497af1fc0f8d4da4e128c53a0/2d451/express-dockerrized_01.png 200w","/static/18c3527497af1fc0f8d4da4e128c53a0/06807/express-dockerrized_01.png 400w","/static/18c3527497af1fc0f8d4da4e128c53a0/b21dd/express-dockerrized_01.png 800w","/static/18c3527497af1fc0f8d4da4e128c53a0/a1323/express-dockerrized_01.png 858w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"creating-a-dockerfile-for-our-app"},"children":[{"type":"element","tagName":"a","properties":{"href":"#creating-a-dockerfile-for-our-app","ariaLabel":"creating a dockerfile for our app permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Creating a Dockerfile for our App"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/engine/reference/builder/"},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":" is a text file that contains all the commands that the "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#build-context"},"children":[{"type":"text","value":"docker build"}]},{"type":"text","value":" command uses, in order, to build a our Docker image."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"dockerfile"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-dockerfile"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-dockerfile"]},"children":[{"type":"text","value":"FROM        node:latest\nMAINTAINER  Mike Polinowski\nENV         NODE_ENV=production\nENV         PORT=3000\nCOPY        . /app\nWORKDIR     /app\nRUN         npm install\nEXPOSE      3000\nENTRYPOINT  [\"npm\", \"start\"]"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"from"},"children":[{"type":"element","tagName":"a","properties":{"href":"#from","ariaLabel":"from permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"FROM"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We are using the "},{"type":"element","tagName":"a","properties":{"href":"https://hub.docker.com/_/node/"},"children":[{"type":"text","value":"node"}]},{"type":"text","value":" Docker image as a base for our app. By just writing "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"[FROM]("},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/develop/develop-images/dockerfile"},"children":[{"type":"text","value":"https://docs.docker.com/develop/develop-images/dockerfile"}]}]},{"type":"text","value":"best-practices/#from)_ "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"node"}]},{"type":"text","value":" we will use the @latest version of Node.js available on the "},{"type":"element","tagName":"a","properties":{"href":"https://hub.docker.com"},"children":[{"type":"text","value":"Docker Hub"}]},{"type":"text","value":" - "},{"type":"element","tagName":"a","properties":{"href":"https://hub.docker.com/r/library/node/tags/"},"children":[{"type":"text","value":"specify a version"}]},{"type":"text","value":" when required - e.g. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"node:latest"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"node:9.10.2"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"env"},"children":[{"type":"element","tagName":"a","properties":{"href":"#env","ariaLabel":"env permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"ENV"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#env"},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"text","value":" can be used to set, e.g. the Node Envrionment. Our app, as created by express-generator, also allows to change the port, the application is running on, to a different value, depending on the environment port defined here (see "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"./bin/www"}]},{"type":"text","value":" for how this is done)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"copy"},"children":[{"type":"element","tagName":"a","properties":{"href":"#copy","ariaLabel":"copy permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"COPY"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#add-or-copy"},"children":[{"type":"text","value":"Copy"}]},{"type":"text","value":" copies the source code into a folder inside the container. The given example "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":". /app"}]},{"type":"text","value":" copies everything from the current directory into an "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"/app"}]},{"type":"text","value":" directory, that is generated inside the container."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"workdir"},"children":[{"type":"element","tagName":"a","properties":{"href":"#workdir","ariaLabel":"workdir permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"WORKDIR"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#workdir"},"children":[{"type":"text","value":"Working Directory"}]},{"type":"text","value":" sets the context where scripts are run. We are going to add an "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"npm install"}]},{"type":"text","value":" step, that needs to be run in the directory that contains our "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"run"},"children":[{"type":"element","tagName":"a","properties":{"href":"#run","ariaLabel":"run permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"RUN"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The most common use-case for RUN is a "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Node Application"}]},{"type":"text","value":" of "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"npm install"}]},{"type":"text","value":", to install our app dependencies, once our source code is copied into the container. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"expose"},"children":[{"type":"element","tagName":"a","properties":{"href":"#expose","ariaLabel":"expose permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"EXPOSE"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#expose"},"children":[{"type":"text","value":"exposes"}]},{"type":"text","value":" a port that our app will be reached through, once the container is running. When a "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"PORT"}]},{"type":"text","value":" was defined as a "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Environment Variable"}]},{"type":"text","value":" (s. above), you can also use this value, by settings "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"EXPOSE $PORT"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"entrypoint"},"children":[{"type":"element","tagName":"a","properties":{"href":"#entrypoint","ariaLabel":"entrypoint permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"ENTRYPOINT"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#entrypoint"},"children":[{"type":"text","value":"Entrypoint"}]},{"type":"text","value":" allows you to configure a container that will run as an executable. Point it to the images main command. Since we installed our app through "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"express-generator"}]},{"type":"text","value":", the main file to run would be "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"./bin/www"}]},{"type":"text","value":". In our case, the file will be executed by "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"node ./bin/www"}]},{"type":"text","value":". But checking the generated "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":" file, we can see that we already have an NPM Script for that, that allows us to simply call "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"npm start"}]},{"type":"text","value":" instead."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"building-our-custom-docker-image"},"children":[{"type":"element","tagName":"a","properties":{"href":"#building-our-custom-docker-image","ariaLabel":"building our custom docker image permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Building our custom Docker Image"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First we need to make sure that our Docker Image does not get unnecessary file - especially the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"node_modules"}]},{"type":"text","value":" and "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":".git"}]},{"type":"text","value":" folder should be excluded. Just like with a "},{"type":"element","tagName":"a","properties":{"href":"https://www.gitignore.io"},"children":[{"type":"text","value":".gitignore"}]},{"type":"text","value":" file, that excludes folders and files from git commits, we can create a "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":".dockerignore"}]},{"type":"text","value":" file:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".git\nDockerfile*\nnode_modules"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now we can run the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"docker build"}]},{"type":"text","value":" command."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"docker build -f Dockerfile -t expressapp/node "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This will run the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"build"}]},{"type":"text","value":" function of Docker using the our Dockerfile ("},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note"}]},{"type":"text","value":": you don’t have to add the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-f"}]},{"type":"text","value":" flag when naming your file "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Dockerfile"}]},{"type":"text","value":". The flag is useful when you have more then one Dockerfiles for different scenarios and have to give them different names accordingly.). The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-t"}]},{"type":"text","value":" flag adds a tag to the Docker image - this can be your docker hub username, or a build version, for internal use. The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":" in the end signifies that docker should search for your code in the current work directory."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/90881f5709d2f2fda9a05cec16b4d113/09055/express-dockerrized_02.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 39.70873786407767%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA5ElEQVQY02NQdc3TdisAIlnrDEnzFHGzaH79OG6dGE7taC7taH6DeFb1SAblUEaVMDhiVgtnkA008C5mkLJO03EvVHHMAerh0Y1lUAxlUAoFqoYipVBG5TBknVDNMgHG/mUMMrYZuh6Fqk45IsaJbBqRbBoRTKroqrFqNvIrY1B1yTX0LtF0zefVi+XVi+PTj2cmQbNrnq57oY5HoZRlGtCrQCOYVMOJ1azumm/gXaLrWShlkQrUzEOSZgXHbF33Ij2PQlmbdHGzFEGjRBI0KznlGHiVqLvkKdhmChgkcGhFE68ZANcwXZ3u2fKaAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Express App in Docker Container","title":"","src":"/static/90881f5709d2f2fda9a05cec16b4d113/b21dd/express-dockerrized_02.png","srcSet":["/static/90881f5709d2f2fda9a05cec16b4d113/2d451/express-dockerrized_02.png 200w","/static/90881f5709d2f2fda9a05cec16b4d113/06807/express-dockerrized_02.png 400w","/static/90881f5709d2f2fda9a05cec16b4d113/b21dd/express-dockerrized_02.png 800w","/static/90881f5709d2f2fda9a05cec16b4d113/09055/express-dockerrized_02.png 1030w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can check if the image was build by typing "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker images"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/898c922e12088d0c35abd655ee86e37f/09055/express-dockerrized_03.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 3.6893203883495143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAARElEQVQI12Pg148XMEjkN4gWMAjk048TNkkSNExgUA5lUA6TskpXtM/i1I5mVotQss8SNk7k1YsTMEyQNE8FyjKqhAEAbxkMK4nUErAAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Express App in Docker Container","title":"","src":"/static/898c922e12088d0c35abd655ee86e37f/b21dd/express-dockerrized_03.png","srcSet":["/static/898c922e12088d0c35abd655ee86e37f/2d451/express-dockerrized_03.png 200w","/static/898c922e12088d0c35abd655ee86e37f/06807/express-dockerrized_03.png 400w","/static/898c922e12088d0c35abd655ee86e37f/b21dd/express-dockerrized_03.png 800w","/static/898c922e12088d0c35abd655ee86e37f/09055/express-dockerrized_03.png 1030w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And run the container by typing:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker run -d -p 8080:3000 expressapp/node"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This command will run your container in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"-d"}]},{"type":"text","value":" daemon mode in the background and set the external port of your app to 8080 (the internal port is set by the express app to 3000). You can verify that your app is running by typing:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker ps"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/1fa05bedf939cdf0f43362e15a50c4a0/e30d5/express-dockerrized_04.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 6.110572259941804%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAQklEQVQI12PQ8ynRcs3XcivQdC1QsEvX8UiUtUoTN09RtM8SMIjn1Yvl1I5mVAlj14wCIiCDWS2CRy+WQTbQNa4JAMCqDdkJRpcEAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Express App in Docker Container","title":"","src":"/static/1fa05bedf939cdf0f43362e15a50c4a0/b21dd/express-dockerrized_04.png","srcSet":["/static/1fa05bedf939cdf0f43362e15a50c4a0/2d451/express-dockerrized_04.png 200w","/static/1fa05bedf939cdf0f43362e15a50c4a0/06807/express-dockerrized_04.png 400w","/static/1fa05bedf939cdf0f43362e15a50c4a0/b21dd/express-dockerrized_04.png 800w","/static/1fa05bedf939cdf0f43362e15a50c4a0/e30d5/express-dockerrized_04.png 1031w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You now have your app running inside the container and can access it by opening "},{"type":"element","tagName":"a","properties":{"href":"http://localhost:8080"},"children":[{"type":"text","value":"http://localhost:8080"}]},{"type":"text","value":" inside your web browser:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/892a7507a83b0c2d8a879b24edc5a1cd/112ff/express-dockerrized_05.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 31.627906976744185%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAj0lEQVQY02M4YW69S1Nnl7b+EVOLNnXtGAWVdGX1MBHJYEHxECECiKHV3fvmrHk3Zs69PnPOzZlzb8+ad2vWvNuziUIMMWnp//6DAIQkCTCkpab/+vHjxtWrl86ff/rkyf+/f//9+UMkYkhNTf/379+bN2+ePXv2+vXrP3/+kGBzfEIiyM1g8Bdo7T8SnA8A6QgauGW41ToAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Express App in Docker Container","title":"","src":"/static/892a7507a83b0c2d8a879b24edc5a1cd/b21dd/express-dockerrized_05.png","srcSet":["/static/892a7507a83b0c2d8a879b24edc5a1cd/2d451/express-dockerrized_05.png 200w","/static/892a7507a83b0c2d8a879b24edc5a1cd/06807/express-dockerrized_05.png 400w","/static/892a7507a83b0c2d8a879b24edc5a1cd/b21dd/express-dockerrized_05.png 800w","/static/892a7507a83b0c2d8a879b24edc5a1cd/112ff/express-dockerrized_05.png 860w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can stop and delete the container (the docker image stays in place - so you can always restart it) by:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker stop c165\n\ndocker rm c165"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"c165"}]},{"type":"text","value":" are the first characters of the Container ID and can be used as a selector - of course, the ID will differ every time you rerun the container."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/d6eaf83e86c943a4f235e5529f520c31/09055/express-dockerrized_06.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 16.699029126213592%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArUlEQVQI12PQ9ylRdshRsMvUcMmXtU5VcYqWs0lnVgsXNEzg049l14wUMEoAkpxa0QKGCdw6MZzaMaKmyUwqYe4JzQwqzrniZinSVmlSlmlSFklSViH8BnFAORb1CBa1CEYgQy2CSTUcIgI0lFU9kkUjgkEuyCW2icEkoFzFMUfOJgOIBAxiVJxiJSxSgKqFjRPZNaN4dGOBTgByBcHWAjUD7WfTiGSQ9neKaQQAKIsm7P7ywvAAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Express App in Docker Container","title":"","src":"/static/d6eaf83e86c943a4f235e5529f520c31/b21dd/express-dockerrized_06.png","srcSet":["/static/d6eaf83e86c943a4f235e5529f520c31/2d451/express-dockerrized_06.png 200w","/static/d6eaf83e86c943a4f235e5529f520c31/06807/express-dockerrized_06.png 400w","/static/d6eaf83e86c943a4f235e5529f520c31/b21dd/express-dockerrized_06.png 800w","/static/d6eaf83e86c943a4f235e5529f520c31/09055/express-dockerrized_06.png 1030w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you want to remove the complete image, you first have to check the image ID (just as shown above, you just need to type the first few characters to select the image - e.g. "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"9190"}]},{"type":"text","value":") by typing "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker images"}]},{"type":"text","value":", then delete it with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"docker rmi 9190"}]}]}],"data":{"quirksMode":false}},"fields":{"slug":"/express-generator-dockerrized/","prefix":"2018-01-28"},"frontmatter":{"title":"How to wrap your Source Code into a Docker Container","subTitle":"We now want to create a custom Docker Container containing our Node.js project source code by creating a Dockerfile and building an Docker Image.","cover":{"childImageSharp":{"resize":{"src":"/static/6632f1b4da079931b8712f1c0fd82010/f2a5a/photo-19196703263_69f9f0df5f_o-cover.png"}}}}},"author":{"id":"9c69de06-11ab-55c9-b52a-3cc0b2f51365","html":"<p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href=\"/contact/\">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p>"},"footnote":{"id":"24817670-3434-5a21-9de1-e9fab89708d7","html":"<ul>\n<li>This is a personal Developer Blog</li>\n<li>Ξ</li>\n<li>built by <a href=\"https://github.com/mpolinowski\">Mike Polinowski</a></li>\n<li>Ξ</li>\n<li>with <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> &#x26; <a href=\"https://reactjs.org\">React</a></li>\n<li>Ξ</li>\n<li>source code on <a href=\"https://github.com/mpolinowski/mpolinowski.github.io\">GitHub</a></li>\n<li>Ξ</li>\n<li>deliverd by <a href=\"https://pages.github.com\">Github Pages</a></li>\n<li>Ξ</li>\n<li>photos from <a href=\"https://www.flickr.com/people/149680084@N06/\">Flickr</a></li>\n</ul>"}},"pageContext":{"slug":"/express-generator-dockerrized/"}}