{"data":{"post":{"id":"33956250-1050-5c1b-ba31-ac324df6dfdb","html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/af171eafea9b6cde5364fd0925dbceac/abed6/photo-11627765794_33a4cf2a0c_o.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.733333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACsUlEQVQozxXS+UvTcRzH8Y8WZadKoBUSIdlhqCiChRKmMoOO4U3ZL5MOKyNjKqm4vM2ZR2la4q14zZbHpnNOncf8knNNZ9vUMssrLbJf+m3wfqX/wIMXT17M5W4huSXUU8ALOQlqNZTQNUsi5Td6w61Sq2GT2gwb1KBdoR7zL5LOrFHL5Hdq4ubI4VoxsX3uFHCVT/dS8ui400kwxizMP6MBURUKxHdoUThsRq12CZ3GdSi/bGJs6Te45T/gVragW/8LlXkNg+ZVVKnnwIKK4XKBD1dPDxx2dKBtDNY7IF/cjrhmDYmHjNSsXyaZeYO6Ztepz7xJfaYNGlzYpKH5n6QwrlKnfolUphXK6V0gFpRNds6n6RCzJm92gC6z/YhgeyzMSyBEUGImnefx4BseisLOXpQq1Ggan0QzN4PqUT3adIv4MLMMyacl9Bh+QFCmhIdvOFL9+Bhzica0jS8NsGPIYDYWtstpN+w8D5LtWQZHL4bAO564nR6FWHE8hBX5KGxvxLBGA/3UBGTvm6FRySBpbIIpIgOLN9JhOBIIHXMlmdVRpO2AF+8LEZJRQoEPHiIyORHlfdvrRqfRrTVjzDgPzqDD6EgvZN0tKCrOw8uqcqT0LaDATwSRvwDnzvARc4JPVcwJop2G7pHxiEguouSKVtTIBjCo1WJqzgzD4lfo500Y13+EQqNGh6ofpfWVeFpUDoFyBS6PGsF7XAaWIgeL6yBn/zR42/tYWFBYGJKyRfSq6jUkcim6Bweg4jSYmNZh8vMsRqYm0dYlgbgkC1f41xEszAVPvQV7sQa2z+TYm9oPFislFlED5pdrYaExMYiOe0JJOVkoqHyH8u0+dZJ2tMu6Ud1UjdRMEUJu3gIvUgA3n2Bcyq/DqfF/sHq7fZ3nHJhQASaQkhWvAlYeKZb/JRTMKtiG0nQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Battambang, Cambodia\"\n        title=\"\"\n        src=\"/static/af171eafea9b6cde5364fd0925dbceac/de8ec/photo-11627765794_33a4cf2a0c_o.png\"\n        srcset=\"/static/af171eafea9b6cde5364fd0925dbceac/81654/photo-11627765794_33a4cf2a0c_o.png 200w,\n/static/af171eafea9b6cde5364fd0925dbceac/3601a/photo-11627765794_33a4cf2a0c_o.png 400w,\n/static/af171eafea9b6cde5364fd0925dbceac/de8ec/photo-11627765794_33a4cf2a0c_o.png 800w,\n/static/af171eafea9b6cde5364fd0925dbceac/4c3ca/photo-11627765794_33a4cf2a0c_o.png 1200w,\n/static/af171eafea9b6cde5364fd0925dbceac/abed6/photo-11627765794_33a4cf2a0c_o.png 1500w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#install-x-pack\">Install X-Pack</a></p>\n<ul>\n<li><a href=\"#elasticsearch-security\">Elasticsearch Security</a></li>\n<li><a href=\"#kibana-security\">Kibana Security</a></li>\n<li><a href=\"#enabling-anonymous-access\">Enabling Anonymous Access</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<p>In an earlier project we set up Elasticsearch to only be accessible via localhost to protect our data. This worked well, since we build our static website server side in Node/Express/EJS and send ready HTML to our client - already containing the rendered response from the database. But what if our app runs client-side?</p>\n<p>The official solution is part of the Elastic Extension Pack, which contains a lot of functionality that you might not really need - and comes at a prize that isn’t quoted anywhere… That isn’t very inviting ~ but lets take a look at it before turning to some free open source alternatives:</p>\n<ul>\n<li><a href=\"https://www.elastic.co/downloads/x-pack\">Elastic X-Pack</a></li>\n<li><a href=\"https://github.com/floragunncom/search-guard\">SearchGuard</a></li>\n<li><a href=\"https://github.com/sscarduzio/elasticsearch-readonlyrest-plugin\">ReadOnlyREST</a></li>\n</ul>\n<h2 id=\"install-x-pack\"><a href=\"#install-x-pack\" aria-label=\"install x pack permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install X-Pack</h2>\n<p>X-Pack is a single extension that integrates handy features — security, alerting, monitoring, reporting, graph exploration, and machine learning — you can trust across the Elastic Stack.</p>\n<h3 id=\"elasticsearch-security\"><a href=\"#elasticsearch-security\" aria-label=\"elasticsearch security permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Elasticsearch Security</h3>\n<p>We need to add a user athentication to our Elasticsearch / Kibana setup. We will do this by installing X-Pack. To get started with installing the Elasticsearch plugin, go to <em>/etc/elasticsearch/</em> and call the following function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bin/elasticsearch-plugin install x-pack</code></pre></div>\n<p>Now restart Elasticsearch:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl stop elasticsearch.service\nsudo systemctl start elasticsearch.service</code></pre></div>\n<p>You can either use the auto function to generate user passwords for Elasticsearch, Kibana (and the not yet installed Logstash):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bin/x-pack/setup-passwords auto</code></pre></div>\n<p>or swap the <em>auto</em> flag with <em>interactive</em> to use your own user logins. The auto output will look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Changed password for user kibana \nPASSWORD kibana = *&amp;$*(80gfddzg\n\nChanged password for user logstash_system\nPASSWORD logstash_system = 58#$)Qljfksh\n\nChanged password for user elastic\nPASSWORD elastic = jgfisg)#*%&amp;(@*#)</code></pre></div>\n<p><strong>Now every interaction with Elasticsearch or Kibana will require you to authenticate with <em>username: elastic</em> and <em>password: jgfisg)#<em>%&#x26;(@</em>#)</em></strong></p>\n<h3 id=\"kibana-security\"><a href=\"#kibana-security\" aria-label=\"kibana security permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kibana Security</h3>\n<p>Now we repeat these steps with Kibana. First navigate to <em>/etc/kibana/</em> and call the following function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bin/kibana-plugin install x-pack</code></pre></div>\n<p>And we have to add the login that Kibana has to use to access Elasticsearch (auto generated above) to the <em>kibana.yml</em> file in <em>/etc/kibana/</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">elasticsearch.username: &quot;kibana&quot;\nelasticsearch.password:  &quot;*&amp;$*(80gfddzg&quot;</code></pre></div>\n<p>Now restart Kibana:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl stop kibana.service\nsudo systemctl start kibana.service</code></pre></div>\n<p>Now navigate your browser <em><a href=\"http://localhost:5601/\">http://localhost:5601/</a></em> and login with the “elastic” user we generated above.</p>\n<h3 id=\"enabling-anonymous-access\"><a href=\"#enabling-anonymous-access\" aria-label=\"enabling anonymous access permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enabling Anonymous Access</h3>\n<p>Incoming requests are considered to be anonymous if no authentication token can be extracted from the incoming request. By default, anonymous requests are rejected and an authentication error is returned (status code 401). To allow anonymous user to send search queries (Read access to specified indices), we need to add the following lines to the <em>elasticsearch.yml</em> file in <em>/etc/elasticsearch/</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">xpack.security.authc:\n  anonymous:\n    username: anonymous_user \n    roles: wiki_reader \n    authz_exception: true </code></pre></div>\n<p>Now we have to switch to the Kibana webUI on <em><a href=\"http://localhost:5601/\">http://localhost:5601/</a></em> and create the <em>role:</em> <em>wiki_reader</em> to allow read access to the wiki indices. First switch to the <strong>Management</strong> tab and click on user:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9a531800e728519d6d4bbf580438842/393e6/kibana_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51.8139534883721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABH0lEQVQoz2PwbZqqkdnAF16w8uCp///+fPv+/T/RgEE9s14lvZYtKGft0bNA/s+fv/7/+0esZtnESrnkKpaArHXHgJr//fjzhwSbVdJqlVJrWAOz1x499//f30+Hjv65dRskA7b/158/f3E7hEEmsVIhpZovonDDiQtA/o9DR35fvAxU/u8vUNe/H79+/wEzsAIGsZhi6fgyFv+MNUdO//v5/cPv379AtkLBfyQ2Fs3q+R2aBR28sVVrT1wCBdiPn////iXWz0rl09UqZwrnTth4HuTVP3//EQ8YuENyeENzmfzSVx8+/ef7t2/ff6CpwGMaA094AV9kIRMwqo6fB9r88dt35AD6/vMXUOTn7z8QrwPJ33/+fPr2AxgLQDYAXwkNWcgle4YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Add a Elasticsearch User with Read Access\"\n        title=\"\"\n        src=\"/static/c9a531800e728519d6d4bbf580438842/de8ec/kibana_01.png\"\n        srcset=\"/static/c9a531800e728519d6d4bbf580438842/81654/kibana_01.png 200w,\n/static/c9a531800e728519d6d4bbf580438842/3601a/kibana_01.png 400w,\n/static/c9a531800e728519d6d4bbf580438842/de8ec/kibana_01.png 800w,\n/static/c9a531800e728519d6d4bbf580438842/393e6/kibana_01.png 1075w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Then click on <strong>Add a User</strong> and add a user with the <strong>watcher_user</strong> role:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/adc70e430693671259fe869778965e9f/8bc7b/kibana_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 45.36170212765957%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7CAAAOwgEVKEqAAAABMklEQVQoz5WSz0rDQBDGcxQRL6K1WK2iL+NVEESL2iheBA+mrf3jwXeo+BS+gvgGHrz6B8EGhbRJSVKzSXb3czaxwVvTgbnsDL/9vpnRtm+6KJ+0saa38fxhwhv9wA8YophjHFLK3Kmtn3ZQOGygeNTA+3c/AQghEIYhGGMIgmA64ObZNUrVFkHrMAdOCqSCbdvwPB9xHCeNeUNb1VtYrNSwctxEr+9kFvuWhRHZn9qyApaqzWSOY6Cy7LouoiiC5BxCJTWr90mpFcnqwv4llipGBuRcJPNLflUK1Sdc5ANuXd1ho3aLstHFp+2mQCo4wyGYWs7DI+LXtz8on2x5/qCO2T0Dy3onU8joZO6fXvBFSxIElixMleaZ4dzuBWZ2zlGgxWSWSZlpDWC7PuS/W8wTv7zFjug51GTbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Add a Elasticsearch User with Read Access\"\n        title=\"\"\n        src=\"/static/adc70e430693671259fe869778965e9f/de8ec/kibana_02.png\"\n        srcset=\"/static/adc70e430693671259fe869778965e9f/81654/kibana_02.png 200w,\n/static/adc70e430693671259fe869778965e9f/3601a/kibana_02.png 400w,\n/static/adc70e430693671259fe869778965e9f/de8ec/kibana_02.png 800w,\n/static/adc70e430693671259fe869778965e9f/8bc7b/kibana_02.png 1175w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Switch back to the <strong>Management</strong> tab and click on role:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8534892360f85303c447addd712a0031/393e6/kibana_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.18604651162791%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLElEQVQoz2PQzm1STq9l9M9cdvDk////f/z69Z9owCCdUCGfUs3kl7HsAFDzv+8/fvz/9w+B4ABZEIYYlFJrVNJrmQMylwI1//v79dt3ZA2/////8/7D7xOngKZisVk2sVIxtYY7NH/lkbNA/p+/f8G6wODv3x///v969uLnxi1/P30GOgMo8g8JMIjFlMgmljP6pS/df+L/758fPn78+fMnXBpiDsI4VMCglNWkmtPKFl685OAZoJLvP37+Q/YqxLd//vxHE4Q4W6ZosmLZNI60rpWnrgH5v1Edhh8w8ITm8ofnM/ikLdl3/O+Pb8AAI0VzWD5/RCGDb/ryQ6eBNn/4+h3Z2T9+/f747cfP33/gIsAQBYr8/gMKV4TmlYfPgJz95w+a8ZhhBRcBACGXCzkaOgHoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Add a Elasticsearch User with Read Access\"\n        title=\"\"\n        src=\"/static/8534892360f85303c447addd712a0031/de8ec/kibana_03.png\"\n        srcset=\"/static/8534892360f85303c447addd712a0031/81654/kibana_03.png 200w,\n/static/8534892360f85303c447addd712a0031/3601a/kibana_03.png 400w,\n/static/8534892360f85303c447addd712a0031/de8ec/kibana_03.png 800w,\n/static/8534892360f85303c447addd712a0031/393e6/kibana_03.png 1075w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Click on <strong>Create Role</strong> and add the name <strong>wiki_reader</strong> that we choose for the role of the anonymous user inside the elasticsearch.yml file, assign the <strong>monitor_watcher</strong> privilege and choose the indices that you want the anonymous user to have <strong>READ</strong> access to:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/31e9fc5fad4988a0dae14a068f6d9bfe/393e6/kibana_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 67.25581395348837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABWUlEQVQoz4WSTUsCQRjHh6BOBZ46VFB6MPooGV0ioboUopUhZh6MQvLQxWOX7ip9jBAv2cu17xDo7Lq5M8vuvG7PtofAdPd/GGaY+c3zf17QVrGRLjbQ7lnrue/7PvUYrFIIzjljTGvtzxZaPa5tFOpo57TdfYOz0tp1XYyx4ziEUqlUFJzK36bP7yByu/saxFRKSmnbtue6fpzQ2sl1slBf2Cs99d5/YQ12LcuilEZ7DuDlo+p67gZl8mFkoUDy27I4F/GRUxf3m+XmXPaq1fsIYbBtmMZgOCSU6OicVyoPydrjfL7ZefkMbQNsmuYQY0pITLUX90uJgwraznX+bCvDMGxC4m0vZS8Th1WUKXTCVilNPf41wKZhgIVYuDwBux4bYAwFB1hHahKGPsN0Ba1yHEh3KgN5zYK1x7zRaMQ4/4/BAxjb8Xg8HRYy+FUIodV0QS5wG+5/ANIepN/hE25mAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Add a Elasticsearch User with Read Access\"\n        title=\"\"\n        src=\"/static/31e9fc5fad4988a0dae14a068f6d9bfe/de8ec/kibana_04.png\"\n        srcset=\"/static/31e9fc5fad4988a0dae14a068f6d9bfe/81654/kibana_04.png 200w,\n/static/31e9fc5fad4988a0dae14a068f6d9bfe/3601a/kibana_04.png 400w,\n/static/31e9fc5fad4988a0dae14a068f6d9bfe/de8ec/kibana_04.png 800w,\n/static/31e9fc5fad4988a0dae14a068f6d9bfe/393e6/kibana_04.png 1075w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Your configuration will be active after restarting Elasticsearch. Now you can use webservices to read from your ES database. But only the <strong>elastic</strong> user has the privileg to <strong>WRITE</strong> and to work in Kibana.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/af171eafea9b6cde5364fd0925dbceac/abed6/photo-11627765794_33a4cf2a0c_o.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 43.733333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACsUlEQVQozxXS+UvTcRzH8Y8WZadKoBUSIdlhqCiChRKmMoOO4U3ZL5MOKyNjKqm4vM2ZR2la4q14zZbHpnNOncf8knNNZ9vUMssrLbJf+m3wfqX/wIMXT17M5W4huSXUU8ALOQlqNZTQNUsi5Td6w61Sq2GT2gwb1KBdoR7zL5LOrFHL5Hdq4ubI4VoxsX3uFHCVT/dS8ui400kwxizMP6MBURUKxHdoUThsRq12CZ3GdSi/bGJs6Te45T/gVragW/8LlXkNg+ZVVKnnwIKK4XKBD1dPDxx2dKBtDNY7IF/cjrhmDYmHjNSsXyaZeYO6Ztepz7xJfaYNGlzYpKH5n6QwrlKnfolUphXK6V0gFpRNds6n6RCzJm92gC6z/YhgeyzMSyBEUGImnefx4BseisLOXpQq1Ggan0QzN4PqUT3adIv4MLMMyacl9Bh+QFCmhIdvOFL9+Bhzica0jS8NsGPIYDYWtstpN+w8D5LtWQZHL4bAO564nR6FWHE8hBX5KGxvxLBGA/3UBGTvm6FRySBpbIIpIgOLN9JhOBIIHXMlmdVRpO2AF+8LEZJRQoEPHiIyORHlfdvrRqfRrTVjzDgPzqDD6EgvZN0tKCrOw8uqcqT0LaDATwSRvwDnzvARc4JPVcwJop2G7pHxiEguouSKVtTIBjCo1WJqzgzD4lfo500Y13+EQqNGh6ofpfWVeFpUDoFyBS6PGsF7XAaWIgeL6yBn/zR42/tYWFBYGJKyRfSq6jUkcim6Bweg4jSYmNZh8vMsRqYm0dYlgbgkC1f41xEszAVPvQV7sQa2z+TYm9oPFislFlED5pdrYaExMYiOe0JJOVkoqHyH8u0+dZJ2tMu6Ud1UjdRMEUJu3gIvUgA3n2Bcyq/DqfF/sHq7fZ3nHJhQASaQkhWvAlYeKZb/JRTMKtiG0nQAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Battambang, Cambodia","title":"","src":"/static/af171eafea9b6cde5364fd0925dbceac/de8ec/photo-11627765794_33a4cf2a0c_o.png","srcSet":["/static/af171eafea9b6cde5364fd0925dbceac/81654/photo-11627765794_33a4cf2a0c_o.png 200w","/static/af171eafea9b6cde5364fd0925dbceac/3601a/photo-11627765794_33a4cf2a0c_o.png 400w","/static/af171eafea9b6cde5364fd0925dbceac/de8ec/photo-11627765794_33a4cf2a0c_o.png 800w","/static/af171eafea9b6cde5364fd0925dbceac/4c3ca/photo-11627765794_33a4cf2a0c_o.png 1200w","/static/af171eafea9b6cde5364fd0925dbceac/abed6/photo-11627765794_33a4cf2a0c_o.png 1500w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"comment","value":" TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-x-pack"},"children":[{"type":"text","value":"Install X-Pack"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#elasticsearch-security"},"children":[{"type":"text","value":"Elasticsearch Security"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#kibana-security"},"children":[{"type":"text","value":"Kibana Security"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#enabling-anonymous-access"},"children":[{"type":"text","value":"Enabling Anonymous Access"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"comment","value":" /TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In an earlier project we set up Elasticsearch to only be accessible via localhost to protect our data. This worked well, since we build our static website server side in Node/Express/EJS and send ready HTML to our client - already containing the rendered response from the database. But what if our app runs client-side?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The official solution is part of the Elastic Extension Pack, which contains a lot of functionality that you might not really need - and comes at a prize that isn’t quoted anywhere… That isn’t very inviting ~ but lets take a look at it before turning to some free open source alternatives:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.elastic.co/downloads/x-pack"},"children":[{"type":"text","value":"Elastic X-Pack"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/floragunncom/search-guard"},"children":[{"type":"text","value":"SearchGuard"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/sscarduzio/elasticsearch-readonlyrest-plugin"},"children":[{"type":"text","value":"ReadOnlyREST"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"install-x-pack"},"children":[{"type":"element","tagName":"a","properties":{"href":"#install-x-pack","ariaLabel":"install x pack permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Install X-Pack"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"X-Pack is a single extension that integrates handy features — security, alerting, monitoring, reporting, graph exploration, and machine learning — you can trust across the Elastic Stack."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"elasticsearch-security"},"children":[{"type":"element","tagName":"a","properties":{"href":"#elasticsearch-security","ariaLabel":"elasticsearch security permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Elasticsearch Security"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We need to add a user athentication to our Elasticsearch / Kibana setup. We will do this by installing X-Pack. To get started with installing the Elasticsearch plugin, go to "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"/etc/elasticsearch/"}]},{"type":"text","value":" and call the following function:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"bin/elasticsearch-plugin install x-pack"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now restart Elasticsearch:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo systemctl stop elasticsearch.service\nsudo systemctl start elasticsearch.service"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can either use the auto function to generate user passwords for Elasticsearch, Kibana (and the not yet installed Logstash):"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"bin/x-pack/setup-passwords auto"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"or swap the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"auto"}]},{"type":"text","value":" flag with "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"interactive"}]},{"type":"text","value":" to use your own user logins. The auto output will look something like this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Changed password for user kibana \nPASSWORD kibana = *&$*(80gfddzg\n\nChanged password for user logstash_system\nPASSWORD logstash_system = 58#$)Qljfksh\n\nChanged password for user elastic\nPASSWORD elastic = jgfisg)#*%&(@*#)"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Now every interaction with Elasticsearch or Kibana will require you to authenticate with "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"username: elastic"}]},{"type":"text","value":" and "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"password: jgfisg)#"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"%&(@"}]},{"type":"text","value":"#)"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"kibana-security"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kibana-security","ariaLabel":"kibana security permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kibana Security"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now we repeat these steps with Kibana. First navigate to "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"/etc/kibana/"}]},{"type":"text","value":" and call the following function:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"bin/kibana-plugin install x-pack"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And we have to add the login that Kibana has to use to access Elasticsearch (auto generated above) to the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kibana.yml"}]},{"type":"text","value":" file in "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"/etc/kibana/"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"elasticsearch.username: \"kibana\"\nelasticsearch.password:  \"*&$*(80gfddzg\""}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now restart Kibana:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo systemctl stop kibana.service\nsudo systemctl start kibana.service"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now navigate your browser "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://localhost:5601/"},"children":[{"type":"text","value":"http://localhost:5601/"}]}]},{"type":"text","value":" and login with the “elastic” user we generated above."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"enabling-anonymous-access"},"children":[{"type":"element","tagName":"a","properties":{"href":"#enabling-anonymous-access","ariaLabel":"enabling anonymous access permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Enabling Anonymous Access"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Incoming requests are considered to be anonymous if no authentication token can be extracted from the incoming request. By default, anonymous requests are rejected and an authentication error is returned (status code 401). To allow anonymous user to send search queries (Read access to specified indices), we need to add the following lines to the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"elasticsearch.yml"}]},{"type":"text","value":" file in "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"/etc/elasticsearch/"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"xpack.security.authc:\n  anonymous:\n    username: anonymous_user \n    roles: wiki_reader \n    authz_exception: true "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now we have to switch to the Kibana webUI on "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://localhost:5601/"},"children":[{"type":"text","value":"http://localhost:5601/"}]}]},{"type":"text","value":" and create the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"role:"}]},{"type":"text","value":" "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"wiki_reader"}]},{"type":"text","value":" to allow read access to the wiki indices. First switch to the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Management"}]},{"type":"text","value":" tab and click on user:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/c9a531800e728519d6d4bbf580438842/393e6/kibana_01.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 51.8139534883721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABH0lEQVQoz2PwbZqqkdnAF16w8uCp///+fPv+/T/RgEE9s14lvZYtKGft0bNA/s+fv/7/+0esZtnESrnkKpaArHXHgJr//fjzhwSbVdJqlVJrWAOz1x499//f30+Hjv65dRskA7b/158/f3E7hEEmsVIhpZovonDDiQtA/o9DR35fvAxU/u8vUNe/H79+/wEzsAIGsZhi6fgyFv+MNUdO//v5/cPv379AtkLBfyQ2Fs3q+R2aBR28sVVrT1wCBdiPn////iXWz0rl09UqZwrnTth4HuTVP3//EQ8YuENyeENzmfzSVx8+/ef7t2/ff6CpwGMaA094AV9kIRMwqo6fB9r88dt35AD6/vMXUOTn7z8QrwPJ33/+fPr2AxgLQDYAXwkNWcgle4YAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Add a Elasticsearch User with Read Access","title":"","src":"/static/c9a531800e728519d6d4bbf580438842/de8ec/kibana_01.png","srcSet":["/static/c9a531800e728519d6d4bbf580438842/81654/kibana_01.png 200w","/static/c9a531800e728519d6d4bbf580438842/3601a/kibana_01.png 400w","/static/c9a531800e728519d6d4bbf580438842/de8ec/kibana_01.png 800w","/static/c9a531800e728519d6d4bbf580438842/393e6/kibana_01.png 1075w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then click on "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Add a User"}]},{"type":"text","value":" and add a user with the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"watcher_user"}]},{"type":"text","value":" role:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/adc70e430693671259fe869778965e9f/8bc7b/kibana_02.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 45.36170212765957%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7CAAAOwgEVKEqAAAABMklEQVQoz5WSz0rDQBDGcxQRL6K1WK2iL+NVEESL2iheBA+mrf3jwXeo+BS+gvgGHrz6B8EGhbRJSVKzSXb3czaxwVvTgbnsDL/9vpnRtm+6KJ+0saa38fxhwhv9wA8YophjHFLK3Kmtn3ZQOGygeNTA+3c/AQghEIYhGGMIgmA64ObZNUrVFkHrMAdOCqSCbdvwPB9xHCeNeUNb1VtYrNSwctxEr+9kFvuWhRHZn9qyApaqzWSOY6Cy7LouoiiC5BxCJTWr90mpFcnqwv4llipGBuRcJPNLflUK1Sdc5ANuXd1ho3aLstHFp+2mQCo4wyGYWs7DI+LXtz8on2x5/qCO2T0Dy3onU8joZO6fXvBFSxIElixMleaZ4dzuBWZ2zlGgxWSWSZlpDWC7PuS/W8wTv7zFjug51GTbAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Add a Elasticsearch User with Read Access","title":"","src":"/static/adc70e430693671259fe869778965e9f/de8ec/kibana_02.png","srcSet":["/static/adc70e430693671259fe869778965e9f/81654/kibana_02.png 200w","/static/adc70e430693671259fe869778965e9f/3601a/kibana_02.png 400w","/static/adc70e430693671259fe869778965e9f/de8ec/kibana_02.png 800w","/static/adc70e430693671259fe869778965e9f/8bc7b/kibana_02.png 1175w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Switch back to the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Management"}]},{"type":"text","value":" tab and click on role:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/8534892360f85303c447addd712a0031/393e6/kibana_03.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 52.18604651162791%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLElEQVQoz2PQzm1STq9l9M9cdvDk////f/z69Z9owCCdUCGfUs3kl7HsAFDzv+8/fvz/9w+B4ABZEIYYlFJrVNJrmQMylwI1//v79dt3ZA2/////8/7D7xOngKZisVk2sVIxtYY7NH/lkbNA/p+/f8G6wODv3x///v969uLnxi1/P30GOgMo8g8JMIjFlMgmljP6pS/df+L/758fPn78+fMnXBpiDsI4VMCglNWkmtPKFl685OAZoJLvP37+Q/YqxLd//vxHE4Q4W6ZosmLZNI60rpWnrgH5v1Edhh8w8ITm8ofnM/ikLdl3/O+Pb8AAI0VzWD5/RCGDb/ryQ6eBNn/4+h3Z2T9+/f747cfP33/gIsAQBYr8/gMKV4TmlYfPgJz95w+a8ZhhBRcBACGXCzkaOgHoAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Add a Elasticsearch User with Read Access","title":"","src":"/static/8534892360f85303c447addd712a0031/de8ec/kibana_03.png","srcSet":["/static/8534892360f85303c447addd712a0031/81654/kibana_03.png 200w","/static/8534892360f85303c447addd712a0031/3601a/kibana_03.png 400w","/static/8534892360f85303c447addd712a0031/de8ec/kibana_03.png 800w","/static/8534892360f85303c447addd712a0031/393e6/kibana_03.png 1075w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Click on "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Create Role"}]},{"type":"text","value":" and add the name "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"wiki_reader"}]},{"type":"text","value":" that we choose for the role of the anonymous user inside the elasticsearch.yml file, assign the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"monitor_watcher"}]},{"type":"text","value":" privilege and choose the indices that you want the anonymous user to have "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"READ"}]},{"type":"text","value":" access to:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/31e9fc5fad4988a0dae14a068f6d9bfe/393e6/kibana_04.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 67.25581395348837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABWUlEQVQoz4WSTUsCQRjHh6BOBZ46VFB6MPooGV0ioboUopUhZh6MQvLQxWOX7ip9jBAv2cu17xDo7Lq5M8vuvG7PtofAdPd/GGaY+c3zf17QVrGRLjbQ7lnrue/7PvUYrFIIzjljTGvtzxZaPa5tFOpo57TdfYOz0tp1XYyx4ziEUqlUFJzK36bP7yByu/saxFRKSmnbtue6fpzQ2sl1slBf2Cs99d5/YQ12LcuilEZ7DuDlo+p67gZl8mFkoUDy27I4F/GRUxf3m+XmXPaq1fsIYbBtmMZgOCSU6OicVyoPydrjfL7ZefkMbQNsmuYQY0pITLUX90uJgwraznX+bCvDMGxC4m0vZS8Th1WUKXTCVilNPf41wKZhgIVYuDwBux4bYAwFB1hHahKGPsN0Ba1yHEh3KgN5zYK1x7zRaMQ4/4/BAxjb8Xg8HRYy+FUIodV0QS5wG+5/ANIepN/hE25mAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Add a Elasticsearch User with Read Access","title":"","src":"/static/31e9fc5fad4988a0dae14a068f6d9bfe/de8ec/kibana_04.png","srcSet":["/static/31e9fc5fad4988a0dae14a068f6d9bfe/81654/kibana_04.png 200w","/static/31e9fc5fad4988a0dae14a068f6d9bfe/3601a/kibana_04.png 400w","/static/31e9fc5fad4988a0dae14a068f6d9bfe/de8ec/kibana_04.png 800w","/static/31e9fc5fad4988a0dae14a068f6d9bfe/393e6/kibana_04.png 1075w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Your configuration will be active after restarting Elasticsearch. Now you can use webservices to read from your ES database. But only the "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"elastic"}]},{"type":"text","value":" user has the privileg to "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"WRITE"}]},{"type":"text","value":" and to work in Kibana."}]}],"data":{"quirksMode":false}},"fields":{"slug":"/securing-elasticsearch-xpack/","prefix":"2017-12-31"},"frontmatter":{"title":"Securing Elasticsearch with X-Pack","subTitle":"Elasticsearch doesn't have a basic user authentication - a problem!","cover":{"childImageSharp":{"resize":{"src":"/static/fb8003090c03166ac8229a2263e71e55/c8002/photo-11627765794_33a4cf2a0c_o-cover.jpg"}}}}},"author":{"id":"9c69de06-11ab-55c9-b52a-3cc0b2f51365","html":"<p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href=\"/contact/\">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p>"},"footnote":{"id":"24817670-3434-5a21-9de1-e9fab89708d7","html":"<ul>\n<li>This is a personal Developer Blog</li>\n<li>Ξ</li>\n<li>built by <a href=\"https://github.com/mpolinowski\">Mike Polinowski</a></li>\n<li>Ξ</li>\n<li>with <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> &#x26; <a href=\"https://reactjs.org\">React</a></li>\n<li>Ξ</li>\n<li>source code on <a href=\"https://github.com/mpolinowski/mpolinowski.github.io\">GitHub</a></li>\n<li>Ξ</li>\n<li>deliverd by <a href=\"https://pages.github.com\">Github Pages</a></li>\n<li>Ξ</li>\n<li>photos from <a href=\"https://www.flickr.com/people/149680084@N06/\">Flickr</a></li>\n</ul>"}},"pageContext":{"slug":"/securing-elasticsearch-xpack/"}}