{"data":{"post":{"id":"2fe44ecb-686f-5a8f-8ed5-9a3649cd7917","html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/78ba66ae2c9007883a0842d1101e58b3/8e846/photo-76834w36_4vkhjk89776s_78.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 46.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAC4jAAAuIwF4pT92AAACh0lEQVQozx2RSU9TARRGm5gYVLDQGa3BgEKpFCi8DlgKhbZ0pkUoLUNBwpSAQpQgOEXjThcmxI0a3bpw4wo1RsQQmccQikEGcUD9F8eni5N7v7s4ucknyakRKIw5cXRHCPfHaRxsoXW4g64bPfSIdI100Hq1ifhQjIahKIHLYRJ3Omm+1UniZjdtt3tpv3eJxuvdWGMeJDluI7qonURvjMm6OqYDfmbCYRYbG1mL1LIaCbESDrIS9LAc8rJU62GuoZbJsI8PTfU8HOkjereX4GCckjo7ktNOPZm+AhItfpaEUqZc1czG4sw2t7DocbMYizI/MMB6wwXW41FWQj7mPdXM1IdYD9UwlgiTF7OQ69WjMWmRqAQNx86rafYJLLhdjHd1M97Xz8TwCNMdF/nU1sqEKHzf18fH1iamOtuZuDLIu9FrrDrKGXObSXdq0VhVKIoVSNQmDUetChIBK5tWM8sWgaTRQLKkkC1rKbtWgV2hmN1iHd9zteznZLKVf5oNfTY/1Ok89tqQVmtRW1TIjaJQWZpJiklJm9dC0mph0W5j3VZGsqKcz+VlbDkd7JQUsFdwhj3DGXYMuXwRSRbmiVnHE4+NtEotCkGFrEiJRFGk4bBRTrtTYO1cPtMVNubEYhYiEeZqgyyF/GyIn67+K8Zfw1pN9f85G/SyKRh57DCRajuBwqgiwyAKZfkKDumldLrMbGedYlt6lK/ZWezpdeyfVPFTKeW3LJVfIgfifqBI40B2jG/yNP4oM3haZeGIWU1GgQypTo7k+FkZKXnplJqyGXWYeeCy8Szg5GXAxWt3BW9F3rjtjHsdvBLvL/xVPPdV8shr576rjIZKA6nFcqT5MtLOZvAXh7NwR1W+gp4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Phnom Penh, Cambodia\"\n        title=\"\"\n        src=\"/static/78ba66ae2c9007883a0842d1101e58b3/8ff1e/photo-76834w36_4vkhjk89776s_78.png\"\n        srcset=\"/static/78ba66ae2c9007883a0842d1101e58b3/9ec3c/photo-76834w36_4vkhjk89776s_78.png 200w,\n/static/78ba66ae2c9007883a0842d1101e58b3/c7805/photo-76834w36_4vkhjk89776s_78.png 400w,\n/static/78ba66ae2c9007883a0842d1101e58b3/8ff1e/photo-76834w36_4vkhjk89776s_78.png 800w,\n/static/78ba66ae2c9007883a0842d1101e58b3/6ff5e/photo-76834w36_4vkhjk89776s_78.png 1200w,\n/static/78ba66ae2c9007883a0842d1101e58b3/8e846/photo-76834w36_4vkhjk89776s_78.png 1500w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#setting-up-a-squid-proxy-server\">Setting up a Squid Proxy Server</a></p>\n<ul>\n<li><a href=\"#setup-access-restrictions\">Setup Access Restrictions</a></li>\n<li><a href=\"#squid-proxy-client-authentication\">Squid Proxy Client Authentication</a></li>\n<li><a href=\"#configuring-firewalld\">Configuring FirewallD</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#adding-the-proxy-server-to-your-raspberry-pi\">Adding the Proxy Server to your Raspberry Pi</a></p>\n<ul>\n<li><a href=\"#changing-the-nameserver\">Changing the Nameserver</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"setting-up-a-squid-proxy-server\"><a href=\"#setting-up-a-squid-proxy-server\" aria-label=\"setting up a squid proxy server permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up a Squid Proxy Server</h2>\n<p>How To Install <a href=\"http://www.squid-cache.org/Intro/\">Squid Proxy</a> on CentOS 7:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum -y <span class=\"token function\">install</span> squid\n<span class=\"token function\">chkconfig</span> squid on</code></pre></div>\n<h3 id=\"setup-access-restrictions\"><a href=\"#setup-access-restrictions\" aria-label=\"setup access restrictions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup Access Restrictions</h3>\n<p>Since this Squid proxy would allow anyone using it to make connections from your servers’s IP address, you would want to restrict access to it.</p>\n<p>We will use the free service from <a href=\"https://www.noip.com/sign-up\">NoIP.com</a> to create a DDNS address for our proxy service. We can then later configure squid to only accept traffic coming from this address.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2a3acd62b9706c97dad7314e935b58c3/8ff1e/Squid_Proxy_01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABc0lEQVQ4y6VU206EQAzl/3/ER/0JH4wfoDE+aLIuLLcFBpgbw7HtCmE3sxuNTUphoKfntDMk1rfoxgzGeBhrKVpYivM8Y2v8fLkWs0S7ArX6QFV3qI8NirISn6ZpBdkCbddinvC3TTOgbTuEEKKJbJ1SUpAL3QJOwhzQDwO01vLx1rmAMKU4jiMGck7ide99tHDCN1uAa9X5vXNegG71M2GQNMuw+0qFaayqSO4UDnmB449sZh0uXCRTOowmOQQWm+5ii/wlMVwD5EtHvWnaBn3fi6QleZn0X4yGMiPrDVQ/whonLI0xMiSOt/oan3KYsEvfcKg+MZgKPPX/mEgedU9bQtFQOmEWwrz26bfMVoZT8CiqHGVdwkX21qWfH0caxjxJPLkAGpKaY7QlpuBWwJhtWW9P1ZnkWFKMJZvWhnZDR+e+ph1hUaoXvGZ3eM8fyO+JkD318DIx9qdhc85Rv7UcQ/47KbPHvnlE2j4ha59Jvsc3PLidWbBuSjEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/2a3acd62b9706c97dad7314e935b58c3/8ff1e/Squid_Proxy_01.png\"\n        srcset=\"/static/2a3acd62b9706c97dad7314e935b58c3/9ec3c/Squid_Proxy_01.png 200w,\n/static/2a3acd62b9706c97dad7314e935b58c3/c7805/Squid_Proxy_01.png 400w,\n/static/2a3acd62b9706c97dad7314e935b58c3/8ff1e/Squid_Proxy_01.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>This hostname should be added to /etc/squid/squid.conf. Edit the file and add your hostname, e.g. <code class=\"language-text\">acl localnet src myproxy.no-ip.org</code>:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/07ed7425fb6c1d324cee2ce4325bc315/8ff1e/Squid_Proxy_02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABcUlEQVQoz32SW0/CQBCF+6REBOnuIqAoRrl0Wyi1LSCEIF6ihkgMxlReiC8m+v//wHG6RQsN+PBlt9uZs3NmR8vMxlAEdxHvxNstMtNrRXYyQvZ5hMzLODrfxOuNigvjNV6xwE+Jsgl+bKq9ODQgWAOCL2FJ6jF6PY6lVWMtB0y2wZsOuEUY0Z7RGp6rf+ctdZnIG+AFCV5MUIjR9J6PkH3ZxJ60kK5KpE8ayLVIzHWhOy5Y+xLMJmot5UQIY01kXbDjgXV8yPsH2LMp7PEj2ndPKA4HOOiQYJcupBi9R/T9qOJKUyWLpYhYQdOtNoTpYDL/wHzxjSD4RLD4QlX2kctTf0pmZKtEHMV71eeNgldUge8i1ZDYzVaQyp1hp0aWRT3qWZi4AWXx93tNcNAhWx645yMvHeQvbPBBF7xqRy9PFf4JrPJvhR71ih6A1Ww1NuoS6psap6W9ZOI2tNywqyoMYYatEtW4hONTjqtLWtvGD0jlGSphnXvBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/07ed7425fb6c1d324cee2ce4325bc315/8ff1e/Squid_Proxy_02.png\"\n        srcset=\"/static/07ed7425fb6c1d324cee2ce4325bc315/9ec3c/Squid_Proxy_02.png 200w,\n/static/07ed7425fb6c1d324cee2ce4325bc315/c7805/Squid_Proxy_02.png 400w,\n/static/07ed7425fb6c1d324cee2ce4325bc315/8ff1e/Squid_Proxy_02.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>We can now start squid and enable it as a system service:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl start squid\nsystemctl <span class=\"token function\">enable</span> squid\nsystemctl status squid</code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3e483860349e4bfc69e562804c449769/8ff1e/Squid_Proxy_03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA5ElEQVQY002QWXLCMBBEfYLASIKQhSRAAl7BSLZZKh/J/Q/VaY0cio+uUUmaNz2dyeEI+e6x6AMWlw5zSs5UF2DqFqaidvub7KaBfatg17VWN89hHwuVozKz4gc2bs8BBcGbwcNwiCkPMPmoLUHvBLwS9FLCPhHwPNYIu4Nm/xMmZYsHgiYR1kRnBLU876nPRkFulqsj5yi7S3WW+vWeyrQ5NgU6O3VadeUhaBQSAqa/J0x/BkiM49rrmylG5x/1DaoOdbX4SKgcfcqNzsT7lCMzFOYrnU+KsC86XnLlZaWr3+f4B48GjD1cXPvcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/3e483860349e4bfc69e562804c449769/8ff1e/Squid_Proxy_03.png\"\n        srcset=\"/static/3e483860349e4bfc69e562804c449769/9ec3c/Squid_Proxy_03.png 200w,\n/static/3e483860349e4bfc69e562804c449769/c7805/Squid_Proxy_03.png 400w,\n/static/3e483860349e4bfc69e562804c449769/8ff1e/Squid_Proxy_03.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>You now can test your Proxy by adding it to your network configuration, e.g. in Chrome (s. below) and navigate to a website like <a href=\"http://www.whatismyip.com/\">whatismyip.com</a>. It should now show you that you are actually accessing the web site from your proxies IP address.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/beb64de85cb903753e1a72597760add9/8ff1e/Squid_Proxy_04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 29.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABB0lEQVQY03WQSVLDMBBFfRJbtmQNHuRJsvGQ4AJWrLgBxTk4/KdlkhAWWbxqlar/7/4dLadn+HnD3Hm8tQPexxkvtse5aqCK+gEVdFmjqFsY6itth/P+CjctiPphhFQFRK6hqEqpwZIMjHGwVBD8gkCa/cGFhDbVoQ1woZBLgygmcULiNMtR0cRgLHKDnOoBNQWCIPT8IpBxBUbvoE1uwwWi6yN8Nq3DOG2Y5hXNsqF5WuHchMGNsE1/bGRCZGXQ+RNF9YhjdjP7ZxgnHP3gsO8rvJ/xSeYfhCSTq1FR2gNtSrTDTPfrSJc+NrS2wrbRkU2N75jji1E82kZeYt+jNN2dznAfN/ADdj6yKx7xEb0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/beb64de85cb903753e1a72597760add9/8ff1e/Squid_Proxy_04.png\"\n        srcset=\"/static/beb64de85cb903753e1a72597760add9/9ec3c/Squid_Proxy_04.png 200w,\n/static/beb64de85cb903753e1a72597760add9/c7805/Squid_Proxy_04.png 400w,\n/static/beb64de85cb903753e1a72597760add9/8ff1e/Squid_Proxy_04.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<h3 id=\"squid-proxy-client-authentication\"><a href=\"#squid-proxy-client-authentication\" aria-label=\"squid proxy client authentication permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Squid Proxy Client Authentication</h3>\n<p>You will most probably want your users to authenticate before using the proxy. For that purpose, you can enable basic http authentication. It is easy and fast to configure.</p>\n<p>First you will need <strong>httpd-tools</strong> installed:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum -y <span class=\"token function\">install</span> httpd-tools</code></pre></div>\n<p>Now lets create a file that will later store the username for the authentication. Squid runs with user <code class=\"language-text\">squid</code> so the file should be owned by that user:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> /etc/squid/passwd\n<span class=\"token function\">chown</span> squid: /etc/squid/passwd</code></pre></div>\n<p>Now we will create a new user called <code class=\"language-text\">proxyclient</code> and setup its password:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">htpasswd /etc/squid/passwd proxyclient</code></pre></div>\n<p>Now to configure the authentication open the configuration file with <code class=\"language-text\">nano /etc/squid/squid.conf</code> and after the ports ACLs add the following lines:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">auth_param basic program /usr/lib64/squid/basic_ncsa_auth /etc/squid/passwd\nauth_param basic children 5\nauth_param basic realm Squid Basic Authentication\nauth_param basic credentialsttl 2 hours\nacl auth_users proxy_auth REQUIRED\nhttp_access allow auth_users</code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e495dd54c6485c652585aedc9f72ea14/8ff1e/Squid_Proxy_05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABIElEQVQoz43R207CQBAG4H0AWruHHqggKBShFFpoUQpGCHjp4cqY+P7v8TO7DY0iJF58yUx2OjuzZdbnDlrj+wWNrz3Fe5Nb71tYH1vYr89kY+Kqdn/GDvbbxtQxkc0gxink/RRKDKDsCLKXQDkDuI2+yTXXikx+ybGOOU8P4MsCPM8hoilkNwFfLSB6E8gwrgQjyOb/MP0xX+RVwzitGpaFuUTeJZDXMZQ3hPRHtZ+5OsF4SQ3zeT2h8kb0BJkhW9RMDaHc345NjdOGUq+p1ztqjyE7iZm0pvNb0qfzm7G5VPnnsat1AaeYw6EpHb3qJCMpOP0kTiuLkCYOhhD0PnVMUwrvPOaXSwSLR8Nfl/BXJZrRDM1uirBDWtO/2pcdAPku306qUnVVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/e495dd54c6485c652585aedc9f72ea14/8ff1e/Squid_Proxy_05.png\"\n        srcset=\"/static/e495dd54c6485c652585aedc9f72ea14/9ec3c/Squid_Proxy_05.png 200w,\n/static/e495dd54c6485c652585aedc9f72ea14/c7805/Squid_Proxy_05.png 400w,\n/static/e495dd54c6485c652585aedc9f72ea14/8ff1e/Squid_Proxy_05.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Save the file and restart squid so that the new changes can take effect <code class=\"language-text\">systemctl restart squid</code>.</p>\n<h3 id=\"configuring-firewalld\"><a href=\"#configuring-firewalld\" aria-label=\"configuring firewalld permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuring FirewallD</h3>\n<p>And make sure that your firewall allows traffic on your proxy port (default <code class=\"language-text\">3128</code>):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd --zone<span class=\"token operator\">=</span>public --add-port<span class=\"token operator\">=</span>3128/tcp\n\nfirewall-cmd --permanent --zone<span class=\"token operator\">=</span>public --add-port<span class=\"token operator\">=</span>3128/tcp</code></pre></div>\n<h2 id=\"adding-the-proxy-server-to-your-raspberry-pi\"><a href=\"#adding-the-proxy-server-to-your-raspberry-pi\" aria-label=\"adding the proxy server to your raspberry pi permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding the Proxy Server to your Raspberry Pi</h2>\n<p>You will need to set up three environment variables <strong>http_proxy</strong>,  <strong>https_proxy</strong>, and <strong>no_proxy</strong> so your Raspberry Pi knows how to access the proxy server.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/environment</code></pre></div>\n<p>Add the following to the <code class=\"language-text\">/etc/environment</code> file to create the  <strong>http_proxy</strong> variable:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">export</span> http_proxy<span class=\"token operator\">=</span><span class=\"token string\">\"http://proxyclient:password@proxyipaddress:proxyport\"</span></code></pre></div>\n<p>Replace <em>proxyipaddress</em> and <em>proxyport</em> with the IP address and port (Squid default <code class=\"language-text\">3128</code>) of your proxy. And <em>password</em> with the password you used for the <code class=\"language-text\">proxyclient</code>.</p>\n<p>Enter the same information for the environment variable <strong>https_proxy</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">export</span> https_proxy<span class=\"token operator\">=</span><span class=\"token string\">\"http://username:password@proxyipaddress:proxyport\"</span></code></pre></div>\n<p>Create the no_proxy environment variable, which is a comma-separated list of addresses your Pi should not use the proxy for:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">export</span> no_proxy<span class=\"token operator\">=</span><span class=\"token string\">\"localhost, 127.0.0.1\"</span></code></pre></div>\n<p>Your <code class=\"language-text\">/etc/environment</code> file should now look like this:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ab305647f0bb2553611c0b405e5adf4f/8ff1e/Squid_Proxy_06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 10.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAiUlEQVQI12XMywqCUBRGYd8+ulBKRJiBZSlkmYOgFE41rgYn6JRdZl0fY3XSYYPFt/kH25hHDtHAYtw3CToVfKfK0C7j69trlwi6NcKeycSziIMWU7/JyK3rrVHkFs5Cm98vQ8kFx32Ckqk2JTuIXCUTzmrJRQmt4HpaccvWvB9bPs/dX6/7Ju8LzHh+Rh7Lh/wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/ab305647f0bb2553611c0b405e5adf4f/8ff1e/Squid_Proxy_06.png\"\n        srcset=\"/static/ab305647f0bb2553611c0b405e5adf4f/9ec3c/Squid_Proxy_06.png 200w,\n/static/ab305647f0bb2553611c0b405e5adf4f/c7805/Squid_Proxy_06.png 400w,\n/static/ab305647f0bb2553611c0b405e5adf4f/8ff1e/Squid_Proxy_06.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>In order for operations that run as sudo (e.g. downloading and installing software) to use the new environment variables, you’ll need to update <strong>sudoers</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> visudo</code></pre></div>\n<p>Add the following line to the file so sudo will use the environment variables you just created:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Defaults    env_keep+<span class=\"token operator\">=</span><span class=\"token string\">\"http_proxy https_proxy no_proxy\"</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17448b5c53a6f4c63a67f79fa60d6ec9/8ff1e/Squid_Proxy_07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 25.124999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA/klEQVQY002Q607CQBSE9/2DxEQMNrFIDIaboRVpgshFNBikTaWWLi0tYMDLY4x7jqX648vM2d2cmazoGjrM6ilalRPU9CNU9Rwr+/McmuVjGFcFtOtFdJpa9q5eyv9xkVf3Z7CuNQjp9RAtBggVpKtgiCR8wDoaM3S2DsfYrB6x2zzjaz/D94etmKX8+s/dCyM828Jc4U7brJ5jwXe7kG/3WCoCFUih5OPlKAvKCFPSWTgTA/L1DrFqMp/ewldLEzniOVFtSdn/a00LkrT1Nn5iPSDsSgGyc4n3QQNOrQi3oWFxU4ZvlpiAfEtHMDERySFCv6++p89KIYeFpMQPGvRJK8NdsaQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/17448b5c53a6f4c63a67f79fa60d6ec9/8ff1e/Squid_Proxy_07.png\"\n        srcset=\"/static/17448b5c53a6f4c63a67f79fa60d6ec9/9ec3c/Squid_Proxy_07.png 200w,\n/static/17448b5c53a6f4c63a67f79fa60d6ec9/c7805/Squid_Proxy_07.png 400w,\n/static/17448b5c53a6f4c63a67f79fa60d6ec9/8ff1e/Squid_Proxy_07.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Now add the following line to <code class=\"language-text\">sudo nano /etc/apt/apt.conf.d/01proxy</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Acquire::http::Proxy <span class=\"token string\">\"http://username:password@proxyipaddress:proxyport\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"changing-the-nameserver\"><a href=\"#changing-the-nameserver\" aria-label=\"changing the nameserver permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Changing the Nameserver</h3>\n<p>Unfortunately this isn’t enough when you want to access servers by their domain name - e.g. Google CDNs for your libraries. Already the name resolution will be blocked or redirected to places you do not want to go. In some cases it is possible to get around this by the IP address of those servers instead of the domain (Note: you have to flag your <code class=\"language-text\">curls</code> with <code class=\"language-text\">--insecure</code> when accessing <strong>HTTPS</strong> sites, as the certificate will match the domain but not the IP!)</p>\n<p>But it makes much more sense to drop the DNS server that your ISP provides and go with an open one instead. At the moment of writing both the <a href=\"https://developers.google.com/speed/public-dns/docs/using\">secondary Google DNS</a> (8.8.4.4) as well as the <a href=\"https://use.opendns.com\">OpenDNS</a> server is reachable without a VPN. So I am going to set up those two as primary and secondary DNS for my Dev RaspberryPi.</p>\n<p>This can usually be done inside <code class=\"language-text\">/etc/resolv.conf</code> but Raspbian installs a program called <strong>resolvconf</strong> that will auto-generate this file every time you restart your Pi. To fix this problem we need to edit the DHCP config instead:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/dhcpcd.conf</code></pre></div>\n<p>Add the following line to the bottom of the file:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">static domain_name_servers<span class=\"token operator\">=</span>8.8.4.4 208.67.222.222</code></pre></div>\n<p>And restart your Pi with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl daemon-reload\n<span class=\"token function\">sudo</span> <span class=\"token function\">service</span> dhcpcd restart</code></pre></div>\n<p>You can afterwards verify that the resolve configuration was generated successfully <code class=\"language-text\">sudo nano /etc/resolv.conf</code></p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e1e254c33a57ce34158d398ee8d4397/640e4/Squid_Proxy_08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 11.98589894242068%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAZUlEQVQI12PYsnrWmkUT1yycsGx29/I5PSvn9QHRirm9axdN3Lh86qaV04Fo7eKJQBGIFAQBVW5eOYPh3IlNF05vuXR2++3rBx7dP/bsyalnj0Ho6aOTTx6egCAgGyKIjJ4+PAkARCVXsMbU7lIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;\"\n        alt=\"Squid Proxy\"\n        title=\"\"\n        src=\"/static/8e1e254c33a57ce34158d398ee8d4397/8ff1e/Squid_Proxy_08.png\"\n        srcset=\"/static/8e1e254c33a57ce34158d398ee8d4397/9ec3c/Squid_Proxy_08.png 200w,\n/static/8e1e254c33a57ce34158d398ee8d4397/c7805/Squid_Proxy_08.png 400w,\n/static/8e1e254c33a57ce34158d398ee8d4397/8ff1e/Squid_Proxy_08.png 800w,\n/static/8e1e254c33a57ce34158d398ee8d4397/640e4/Squid_Proxy_08.png 851w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n  </span>\n  </a></p>\n<p>Reboot your Raspberry Pi for the changes to take effect. You should now be able to access the internet via your proxy server. You can the <code class=\"language-text\">curl https://www.wieistmeineip.de</code> - search for <code class=\"language-text\">wimip.ip</code> to verify that it shows your Proxy IP address:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n  <span class=\"token keyword\">var</span> _SITE_NAME<span class=\"token operator\">=</span><span class=\"token string\">\"WIMIP\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> wimip <span class=\"token operator\">=</span> wimip <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  wimip<span class=\"token punctuation\">.</span>ip <span class=\"token operator\">=</span> <span class=\"token string\">\"My Proxy IP\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/78ba66ae2c9007883a0842d1101e58b3/8e846/photo-76834w36_4vkhjk89776s_78.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 46.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAC4jAAAuIwF4pT92AAACh0lEQVQozx2RSU9TARRGm5gYVLDQGa3BgEKpFCi8DlgKhbZ0pkUoLUNBwpSAQpQgOEXjThcmxI0a3bpw4wo1RsQQmccQikEGcUD9F8eni5N7v7s4ucknyakRKIw5cXRHCPfHaRxsoXW4g64bPfSIdI100Hq1ifhQjIahKIHLYRJ3Omm+1UniZjdtt3tpv3eJxuvdWGMeJDluI7qonURvjMm6OqYDfmbCYRYbG1mL1LIaCbESDrIS9LAc8rJU62GuoZbJsI8PTfU8HOkjereX4GCckjo7ktNOPZm+AhItfpaEUqZc1czG4sw2t7DocbMYizI/MMB6wwXW41FWQj7mPdXM1IdYD9UwlgiTF7OQ69WjMWmRqAQNx86rafYJLLhdjHd1M97Xz8TwCNMdF/nU1sqEKHzf18fH1iamOtuZuDLIu9FrrDrKGXObSXdq0VhVKIoVSNQmDUetChIBK5tWM8sWgaTRQLKkkC1rKbtWgV2hmN1iHd9zteznZLKVf5oNfTY/1Ok89tqQVmtRW1TIjaJQWZpJiklJm9dC0mph0W5j3VZGsqKcz+VlbDkd7JQUsFdwhj3DGXYMuXwRSRbmiVnHE4+NtEotCkGFrEiJRFGk4bBRTrtTYO1cPtMVNubEYhYiEeZqgyyF/GyIn67+K8Zfw1pN9f85G/SyKRh57DCRajuBwqgiwyAKZfkKDumldLrMbGedYlt6lK/ZWezpdeyfVPFTKeW3LJVfIgfifqBI40B2jG/yNP4oM3haZeGIWU1GgQypTo7k+FkZKXnplJqyGXWYeeCy8Szg5GXAxWt3BW9F3rjtjHsdvBLvL/xVPPdV8shr576rjIZKA6nFcqT5MtLOZvAXh7NwR1W+gp4AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Phnom Penh, Cambodia","title":"","src":"/static/78ba66ae2c9007883a0842d1101e58b3/8ff1e/photo-76834w36_4vkhjk89776s_78.png","srcSet":["/static/78ba66ae2c9007883a0842d1101e58b3/9ec3c/photo-76834w36_4vkhjk89776s_78.png 200w","/static/78ba66ae2c9007883a0842d1101e58b3/c7805/photo-76834w36_4vkhjk89776s_78.png 400w","/static/78ba66ae2c9007883a0842d1101e58b3/8ff1e/photo-76834w36_4vkhjk89776s_78.png 800w","/static/78ba66ae2c9007883a0842d1101e58b3/6ff5e/photo-76834w36_4vkhjk89776s_78.png 1200w","/static/78ba66ae2c9007883a0842d1101e58b3/8e846/photo-76834w36_4vkhjk89776s_78.png 1500w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"comment","value":" TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#setting-up-a-squid-proxy-server"},"children":[{"type":"text","value":"Setting up a Squid Proxy Server"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#setup-access-restrictions"},"children":[{"type":"text","value":"Setup Access Restrictions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#squid-proxy-client-authentication"},"children":[{"type":"text","value":"Squid Proxy Client Authentication"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#configuring-firewalld"},"children":[{"type":"text","value":"Configuring FirewallD"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#adding-the-proxy-server-to-your-raspberry-pi"},"children":[{"type":"text","value":"Adding the Proxy Server to your Raspberry Pi"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#changing-the-nameserver"},"children":[{"type":"text","value":"Changing the Nameserver"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"comment","value":" /TOC "},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"setting-up-a-squid-proxy-server"},"children":[{"type":"element","tagName":"a","properties":{"href":"#setting-up-a-squid-proxy-server","ariaLabel":"setting up a squid proxy server permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Setting up a Squid Proxy Server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"How To Install "},{"type":"element","tagName":"a","properties":{"href":"http://www.squid-cache.org/Intro/"},"children":[{"type":"text","value":"Squid Proxy"}]},{"type":"text","value":" on CentOS 7:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"yum -y "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" squid\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"chkconfig"}]},{"type":"text","value":" squid on"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"setup-access-restrictions"},"children":[{"type":"element","tagName":"a","properties":{"href":"#setup-access-restrictions","ariaLabel":"setup access restrictions permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Setup Access Restrictions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Since this Squid proxy would allow anyone using it to make connections from your servers’s IP address, you would want to restrict access to it."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We will use the free service from "},{"type":"element","tagName":"a","properties":{"href":"https://www.noip.com/sign-up"},"children":[{"type":"text","value":"NoIP.com"}]},{"type":"text","value":" to create a DDNS address for our proxy service. We can then later configure squid to only accept traffic coming from this address."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/2a3acd62b9706c97dad7314e935b58c3/8ff1e/Squid_Proxy_01.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 76.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABc0lEQVQ4y6VU206EQAzl/3/ER/0JH4wfoDE+aLIuLLcFBpgbw7HtCmE3sxuNTUphoKfntDMk1rfoxgzGeBhrKVpYivM8Y2v8fLkWs0S7ArX6QFV3qI8NirISn6ZpBdkCbddinvC3TTOgbTuEEKKJbJ1SUpAL3QJOwhzQDwO01vLx1rmAMKU4jiMGck7ide99tHDCN1uAa9X5vXNegG71M2GQNMuw+0qFaayqSO4UDnmB449sZh0uXCRTOowmOQQWm+5ii/wlMVwD5EtHvWnaBn3fi6QleZn0X4yGMiPrDVQ/whonLI0xMiSOt/oan3KYsEvfcKg+MZgKPPX/mEgedU9bQtFQOmEWwrz26bfMVoZT8CiqHGVdwkX21qWfH0caxjxJPLkAGpKaY7QlpuBWwJhtWW9P1ZnkWFKMJZvWhnZDR+e+ph1hUaoXvGZ3eM8fyO+JkD318DIx9qdhc85Rv7UcQ/47KbPHvnlE2j4ha59Jvsc3PLidWbBuSjEAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/2a3acd62b9706c97dad7314e935b58c3/8ff1e/Squid_Proxy_01.png","srcSet":["/static/2a3acd62b9706c97dad7314e935b58c3/9ec3c/Squid_Proxy_01.png 200w","/static/2a3acd62b9706c97dad7314e935b58c3/c7805/Squid_Proxy_01.png 400w","/static/2a3acd62b9706c97dad7314e935b58c3/8ff1e/Squid_Proxy_01.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This hostname should be added to /etc/squid/squid.conf. Edit the file and add your hostname, e.g. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"acl localnet src myproxy.no-ip.org"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/07ed7425fb6c1d324cee2ce4325bc315/8ff1e/Squid_Proxy_02.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABcUlEQVQoz32SW0/CQBCF+6REBOnuIqAoRrl0Wyi1LSCEIF6ihkgMxlReiC8m+v//wHG6RQsN+PBlt9uZs3NmR8vMxlAEdxHvxNstMtNrRXYyQvZ5hMzLODrfxOuNigvjNV6xwE+Jsgl+bKq9ODQgWAOCL2FJ6jF6PY6lVWMtB0y2wZsOuEUY0Z7RGp6rf+ctdZnIG+AFCV5MUIjR9J6PkH3ZxJ60kK5KpE8ayLVIzHWhOy5Y+xLMJmot5UQIY01kXbDjgXV8yPsH2LMp7PEj2ndPKA4HOOiQYJcupBi9R/T9qOJKUyWLpYhYQdOtNoTpYDL/wHzxjSD4RLD4QlX2kctTf0pmZKtEHMV71eeNgldUge8i1ZDYzVaQyp1hp0aWRT3qWZi4AWXx93tNcNAhWx645yMvHeQvbPBBF7xqRy9PFf4JrPJvhR71ih6A1Ww1NuoS6psap6W9ZOI2tNywqyoMYYatEtW4hONTjqtLWtvGD0jlGSphnXvBAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/07ed7425fb6c1d324cee2ce4325bc315/8ff1e/Squid_Proxy_02.png","srcSet":["/static/07ed7425fb6c1d324cee2ce4325bc315/9ec3c/Squid_Proxy_02.png 200w","/static/07ed7425fb6c1d324cee2ce4325bc315/c7805/Squid_Proxy_02.png 400w","/static/07ed7425fb6c1d324cee2ce4325bc315/8ff1e/Squid_Proxy_02.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can now start squid and enable it as a system service:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"systemctl start squid\nsystemctl "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enable"}]},{"type":"text","value":" squid\nsystemctl status squid"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/3e483860349e4bfc69e562804c449769/8ff1e/Squid_Proxy_03.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 27%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA5ElEQVQY002QWXLCMBBEfYLASIKQhSRAAl7BSLZZKh/J/Q/VaY0cio+uUUmaNz2dyeEI+e6x6AMWlw5zSs5UF2DqFqaidvub7KaBfatg17VWN89hHwuVozKz4gc2bs8BBcGbwcNwiCkPMPmoLUHvBLwS9FLCPhHwPNYIu4Nm/xMmZYsHgiYR1kRnBLU876nPRkFulqsj5yi7S3WW+vWeyrQ5NgU6O3VadeUhaBQSAqa/J0x/BkiM49rrmylG5x/1DaoOdbX4SKgcfcqNzsT7lCMzFOYrnU+KsC86XnLlZaWr3+f4B48GjD1cXPvcAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/3e483860349e4bfc69e562804c449769/8ff1e/Squid_Proxy_03.png","srcSet":["/static/3e483860349e4bfc69e562804c449769/9ec3c/Squid_Proxy_03.png 200w","/static/3e483860349e4bfc69e562804c449769/c7805/Squid_Proxy_03.png 400w","/static/3e483860349e4bfc69e562804c449769/8ff1e/Squid_Proxy_03.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You now can test your Proxy by adding it to your network configuration, e.g. in Chrome (s. below) and navigate to a website like "},{"type":"element","tagName":"a","properties":{"href":"http://www.whatismyip.com/"},"children":[{"type":"text","value":"whatismyip.com"}]},{"type":"text","value":". It should now show you that you are actually accessing the web site from your proxies IP address."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/beb64de85cb903753e1a72597760add9/8ff1e/Squid_Proxy_04.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 29.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABB0lEQVQY03WQSVLDMBBFfRJbtmQNHuRJsvGQ4AJWrLgBxTk4/KdlkhAWWbxqlar/7/4dLadn+HnD3Hm8tQPexxkvtse5aqCK+gEVdFmjqFsY6itth/P+CjctiPphhFQFRK6hqEqpwZIMjHGwVBD8gkCa/cGFhDbVoQ1woZBLgygmcULiNMtR0cRgLHKDnOoBNQWCIPT8IpBxBUbvoE1uwwWi6yN8Nq3DOG2Y5hXNsqF5WuHchMGNsE1/bGRCZGXQ+RNF9YhjdjP7ZxgnHP3gsO8rvJ/xSeYfhCSTq1FR2gNtSrTDTPfrSJc+NrS2wrbRkU2N75jji1E82kZeYt+jNN2dznAfN/ADdj6yKx7xEb0AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/beb64de85cb903753e1a72597760add9/8ff1e/Squid_Proxy_04.png","srcSet":["/static/beb64de85cb903753e1a72597760add9/9ec3c/Squid_Proxy_04.png 200w","/static/beb64de85cb903753e1a72597760add9/c7805/Squid_Proxy_04.png 400w","/static/beb64de85cb903753e1a72597760add9/8ff1e/Squid_Proxy_04.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"squid-proxy-client-authentication"},"children":[{"type":"element","tagName":"a","properties":{"href":"#squid-proxy-client-authentication","ariaLabel":"squid proxy client authentication permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Squid Proxy Client Authentication"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You will most probably want your users to authenticate before using the proxy. For that purpose, you can enable basic http authentication. It is easy and fast to configure."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First you will need "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"httpd-tools"}]},{"type":"text","value":" installed:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"yum -y "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" httpd-tools"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now lets create a file that will later store the username for the authentication. Squid runs with user "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"squid"}]},{"type":"text","value":" so the file should be owned by that user:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"touch"}]},{"type":"text","value":" /etc/squid/passwd\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"chown"}]},{"type":"text","value":" squid: /etc/squid/passwd"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now we will create a new user called "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"proxyclient"}]},{"type":"text","value":" and setup its password:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"htpasswd /etc/squid/passwd proxyclient"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now to configure the authentication open the configuration file with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"nano /etc/squid/squid.conf"}]},{"type":"text","value":" and after the ports ACLs add the following lines:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"auth_param basic program /usr/lib64/squid/basic_ncsa_auth /etc/squid/passwd\nauth_param basic children 5\nauth_param basic realm Squid Basic Authentication\nauth_param basic credentialsttl 2 hours\nacl auth_users proxy_auth REQUIRED\nhttp_access allow auth_users"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/e495dd54c6485c652585aedc9f72ea14/8ff1e/Squid_Proxy_05.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABIElEQVQoz43R207CQBAG4H0AWruHHqggKBShFFpoUQpGCHjp4cqY+P7v8TO7DY0iJF58yUx2OjuzZdbnDlrj+wWNrz3Fe5Nb71tYH1vYr89kY+Kqdn/GDvbbxtQxkc0gxink/RRKDKDsCLKXQDkDuI2+yTXXikx+ybGOOU8P4MsCPM8hoilkNwFfLSB6E8gwrgQjyOb/MP0xX+RVwzitGpaFuUTeJZDXMZQ3hPRHtZ+5OsF4SQ3zeT2h8kb0BJkhW9RMDaHc345NjdOGUq+p1ztqjyE7iZm0pvNb0qfzm7G5VPnnsat1AaeYw6EpHb3qJCMpOP0kTiuLkCYOhhD0PnVMUwrvPOaXSwSLR8Nfl/BXJZrRDM1uirBDWtO/2pcdAPku306qUnVVAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/e495dd54c6485c652585aedc9f72ea14/8ff1e/Squid_Proxy_05.png","srcSet":["/static/e495dd54c6485c652585aedc9f72ea14/9ec3c/Squid_Proxy_05.png 200w","/static/e495dd54c6485c652585aedc9f72ea14/c7805/Squid_Proxy_05.png 400w","/static/e495dd54c6485c652585aedc9f72ea14/8ff1e/Squid_Proxy_05.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Save the file and restart squid so that the new changes can take effect "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"systemctl restart squid"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"configuring-firewalld"},"children":[{"type":"element","tagName":"a","properties":{"href":"#configuring-firewalld","ariaLabel":"configuring firewalld permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Configuring FirewallD"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And make sure that your firewall allows traffic on your proxy port (default "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"3128"}]},{"type":"text","value":"):"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"firewall-cmd --zone"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"public --add-port"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"3128/tcp\n\nfirewall-cmd --permanent --zone"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"public --add-port"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"3128/tcp"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"adding-the-proxy-server-to-your-raspberry-pi"},"children":[{"type":"element","tagName":"a","properties":{"href":"#adding-the-proxy-server-to-your-raspberry-pi","ariaLabel":"adding the proxy server to your raspberry pi permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Adding the Proxy Server to your Raspberry Pi"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You will need to set up three environment variables "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"http_proxy"}]},{"type":"text","value":",  "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"https_proxy"}]},{"type":"text","value":", and "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"no_proxy"}]},{"type":"text","value":" so your Raspberry Pi knows how to access the proxy server."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"nano"}]},{"type":"text","value":" /etc/environment"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Add the following to the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/environment"}]},{"type":"text","value":" file to create the  "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"http_proxy"}]},{"type":"text","value":" variable:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" http_proxy"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"http://proxyclient:password@proxyipaddress:proxyport\""}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Replace "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"proxyipaddress"}]},{"type":"text","value":" and "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"proxyport"}]},{"type":"text","value":" with the IP address and port (Squid default "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"3128"}]},{"type":"text","value":") of your proxy. And "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" with the password you used for the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"proxyclient"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Enter the same information for the environment variable "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"https_proxy"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" https_proxy"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"http://username:password@proxyipaddress:proxyport\""}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Create the no_proxy environment variable, which is a comma-separated list of addresses your Pi should not use the proxy for:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" no_proxy"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"localhost, 127.0.0.1\""}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Your "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/environment"}]},{"type":"text","value":" file should now look like this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ab305647f0bb2553611c0b405e5adf4f/8ff1e/Squid_Proxy_06.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 10.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAiUlEQVQI12XMywqCUBRGYd8+ulBKRJiBZSlkmYOgFE41rgYn6JRdZl0fY3XSYYPFt/kH25hHDtHAYtw3CToVfKfK0C7j69trlwi6NcKeycSziIMWU7/JyK3rrVHkFs5Cm98vQ8kFx32Ckqk2JTuIXCUTzmrJRQmt4HpaccvWvB9bPs/dX6/7Ju8LzHh+Rh7Lh/wAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/ab305647f0bb2553611c0b405e5adf4f/8ff1e/Squid_Proxy_06.png","srcSet":["/static/ab305647f0bb2553611c0b405e5adf4f/9ec3c/Squid_Proxy_06.png 200w","/static/ab305647f0bb2553611c0b405e5adf4f/c7805/Squid_Proxy_06.png 400w","/static/ab305647f0bb2553611c0b405e5adf4f/8ff1e/Squid_Proxy_06.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In order for operations that run as sudo (e.g. downloading and installing software) to use the new environment variables, you’ll need to update "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"sudoers"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" visudo"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Add the following line to the file so sudo will use the environment variables you just created:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"Defaults    env_keep+"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"http_proxy https_proxy no_proxy\""}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/17448b5c53a6f4c63a67f79fa60d6ec9/8ff1e/Squid_Proxy_07.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 25.124999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA/klEQVQY002Q607CQBSE9/2DxEQMNrFIDIaboRVpgshFNBikTaWWLi0tYMDLY4x7jqX648vM2d2cmazoGjrM6ilalRPU9CNU9Rwr+/McmuVjGFcFtOtFdJpa9q5eyv9xkVf3Z7CuNQjp9RAtBggVpKtgiCR8wDoaM3S2DsfYrB6x2zzjaz/D94etmKX8+s/dCyM828Jc4U7brJ5jwXe7kG/3WCoCFUih5OPlKAvKCFPSWTgTA/L1DrFqMp/ewldLEzniOVFtSdn/a00LkrT1Nn5iPSDsSgGyc4n3QQNOrQi3oWFxU4ZvlpiAfEtHMDERySFCv6++p89KIYeFpMQPGvRJK8NdsaQAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/17448b5c53a6f4c63a67f79fa60d6ec9/8ff1e/Squid_Proxy_07.png","srcSet":["/static/17448b5c53a6f4c63a67f79fa60d6ec9/9ec3c/Squid_Proxy_07.png 200w","/static/17448b5c53a6f4c63a67f79fa60d6ec9/c7805/Squid_Proxy_07.png 400w","/static/17448b5c53a6f4c63a67f79fa60d6ec9/8ff1e/Squid_Proxy_07.png 800w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now add the following line to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo nano /etc/apt/apt.conf.d/01proxy"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"Acquire::http::Proxy "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"http://username:password@proxyipaddress:proxyport\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"changing-the-nameserver"},"children":[{"type":"element","tagName":"a","properties":{"href":"#changing-the-nameserver","ariaLabel":"changing the nameserver permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Changing the Nameserver"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Unfortunately this isn’t enough when you want to access servers by their domain name - e.g. Google CDNs for your libraries. Already the name resolution will be blocked or redirected to places you do not want to go. In some cases it is possible to get around this by the IP address of those servers instead of the domain (Note: you have to flag your "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"curls"}]},{"type":"text","value":" with "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"--insecure"}]},{"type":"text","value":" when accessing "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"HTTPS"}]},{"type":"text","value":" sites, as the certificate will match the domain but not the IP!)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"But it makes much more sense to drop the DNS server that your ISP provides and go with an open one instead. At the moment of writing both the "},{"type":"element","tagName":"a","properties":{"href":"https://developers.google.com/speed/public-dns/docs/using"},"children":[{"type":"text","value":"secondary Google DNS"}]},{"type":"text","value":" (8.8.4.4) as well as the "},{"type":"element","tagName":"a","properties":{"href":"https://use.opendns.com"},"children":[{"type":"text","value":"OpenDNS"}]},{"type":"text","value":" server is reachable without a VPN. So I am going to set up those two as primary and secondary DNS for my Dev RaspberryPi."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This can usually be done inside "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/resolv.conf"}]},{"type":"text","value":" but Raspbian installs a program called "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"resolvconf"}]},{"type":"text","value":" that will auto-generate this file every time you restart your Pi. To fix this problem we need to edit the DHCP config instead:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"nano"}]},{"type":"text","value":" /etc/dhcpcd.conf"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Add the following line to the bottom of the file:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"static domain_name_servers"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"8.8.4.4 208.67.222.222"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And restart your Pi with:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" systemctl daemon-reload\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sudo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":" dhcpcd restart"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can afterwards verify that the resolve configuration was generated successfully "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sudo nano /etc/resolv.conf"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/8e1e254c33a57ce34158d398ee8d4397/640e4/Squid_Proxy_08.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 11.98589894242068%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAZUlEQVQI12PYsnrWmkUT1yycsGx29/I5PSvn9QHRirm9axdN3Lh86qaV04Fo7eKJQBGIFAQBVW5eOYPh3IlNF05vuXR2++3rBx7dP/bsyalnj0Ho6aOTTx6egCAgGyKIjJ4+PAkARCVXsMbU7lIAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px transparent;","alt":"Squid Proxy","title":"","src":"/static/8e1e254c33a57ce34158d398ee8d4397/8ff1e/Squid_Proxy_08.png","srcSet":["/static/8e1e254c33a57ce34158d398ee8d4397/9ec3c/Squid_Proxy_08.png 200w","/static/8e1e254c33a57ce34158d398ee8d4397/c7805/Squid_Proxy_08.png 400w","/static/8e1e254c33a57ce34158d398ee8d4397/8ff1e/Squid_Proxy_08.png 800w","/static/8e1e254c33a57ce34158d398ee8d4397/640e4/Squid_Proxy_08.png 851w"],"sizes":["(max-width:","800px)","100vw,","800px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Reboot your Raspberry Pi for the changes to take effect. You should now be able to access the internet via your proxy server. You can the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"curl https://www.wieistmeineip.de"}]},{"type":"text","value":" - search for "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"wimip.ip"}]},{"type":"text","value":" to verify that it shows your Proxy IP address:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"script"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"var"}]},{"type":"text","value":" _SITE_NAME"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"WIMIP\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"var"}]},{"type":"text","value":" wimip "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" wimip "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"||"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  wimip"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"ip "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"My Proxy IP\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"script"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]}]}]}]}],"data":{"quirksMode":false}},"fields":{"slug":"/developing-software-in-china/","prefix":"2017-09-05"},"frontmatter":{"title":"Proxima Centauri","subTitle":"Being a Software Developer in China can be a nightmare. Every time you try to install some library there is a really good chance that your run into a 404. A lot of the Open Source efforts are all but invisible behind the Shield - Proxy Squid to the rescue.","cover":{"childImageSharp":{"resize":{"src":"/static/9f755916774732cf2d45668b129c7944/fbe2f/photo-76834w36_4vkhjk89776s_78-cover.png"}}}}},"author":{"id":"9c69de06-11ab-55c9-b52a-3cc0b2f51365","html":"<p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href=\"/contact/\">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p>"},"footnote":{"id":"24817670-3434-5a21-9de1-e9fab89708d7","html":"<ul>\n<li>This is a personal Developer Blog</li>\n<li>Ξ</li>\n<li>built by <a href=\"https://github.com/mpolinowski\">Mike Polinowski</a></li>\n<li>Ξ</li>\n<li>with <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> &#x26; <a href=\"https://reactjs.org\">React</a></li>\n<li>Ξ</li>\n<li>source code on <a href=\"https://github.com/mpolinowski/mpolinowski.github.io\">GitHub</a></li>\n<li>Ξ</li>\n<li>deliverd by <a href=\"https://pages.github.com\">Github Pages</a></li>\n<li>Ξ</li>\n<li>photos from <a href=\"https://www.flickr.com/people/149680084@N06/\">Flickr</a></li>\n</ul>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/developing-software-in-china/"}}