{"version":3,"sources":["webpack:///path---node-express-mongodb-part-iv-67181302d2ff1b0eca40.js","webpack:///./.cache/json/node-express-mongodb-part-iv.json"],"names":["webpackJsonp","622","module","exports","data","post","id","html","fields","slug","prefix","frontmatter","title","subTitle","cover","childImageSharp","resize","src","author","footnote","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,GAAA,qIAAAC,KAAA;AAAi62GC,QAAyfC,KAAA,iCAAAC,OAAA,cAA8DC,aAAgBC,MAAA,iCAAAC,SAAA,sFAAAC,OAAmJC,iBAAmBC,QAAUC,IAAA,+FAAoGC,QAAWZ,GAAA,6FAAAC,KAAA,4OAAsVY,UAAab,GAAA,+FAAAC,KAAA,0jBAAgrBa,aAAgBX,KAAA","file":"path---node-express-mongodb-part-iv-67181302d2ff1b0eca40.js","sourcesContent":["webpackJsonp([176393939884639],{\n\n/***/ 622:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"post\":{\"id\":\"E:/gatsby-starter-personal-blog/content/posts/2016-06-07--node-express-mongodb-part-iv/index.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-283d3.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 46.50801862390067%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHC6QkqQKP/xAAaEAEAAgMBAAAAAAAAAAAAAAABAAIDIjM0/9oACAEBAAEFAqix1bBK+jL1n//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAgEBPwGaj//EABoQAAICAwAAAAAAAAAAAAAAAAABAhAhMUH/2gAIAQEABj8Cy0bRwRKv/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERQSGxMXGh/9oACAEBAAE/IUFqnZgQus0SU5WVw8mvo9hS6P/aAAwDAQACAAMAAAAQGN//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QUTLb/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERUf/aAAgBAgEBPxCNFH//xAAfEAEAAQMEAwAAAAAAAAAAAAABABEhMUFhcaGBkbH/2gAIAQEAAT8QEpjBTLU25jw1uE09ogRAaFnmdCHeT5p//9k='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\\\"\\n        alt=\\\"Sydney\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-78f2b.jpg\\\"\\n        srcset=\\\"/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-dce19.jpg 200w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-c1413.jpg 400w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-78f2b.jpg 800w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-ab4c4.jpg 1200w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-bc99b.jpg 1600w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-283d3.jpg 1933w\\\"\\n        sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p><a href=\\\"github.com/mpolinowski/node_express_git\\\">Github Repository</a></p>\\n<blockquote>\\n<p>This code is part of a training in web development with <a href=\\\"https://nodejs.org/en/\\\">Node.js</a>. <a href=\\\"http://ejs.co\\\">EJS</a> will be used as template engine for rendering HTML out of <a href=\\\"https://expressjs.com\\\">Express</a>. The library application will use <a href=\\\"https://www.mongodb.com\\\">MongoDB</a> to store information about books and authors - but will also employ the <a href=\\\"https://www.goodreads.com/api\\\">GoodReads API</a> to provide more details on each. <a href=\\\"http://www.passportjs.org\\\">Passport.js</a> is used for local security.</p>\\n</blockquote>\\n<ul>\\n<li>In <a href=\\\"/node-express-mongodb-part-i/\\\">Part I</a> we go through the basic <a href=\\\"https://nodejs.org/en/\\\">Node.js</a> and <a href=\\\"https://expressjs.com\\\">Express</a> setup</li>\\n<li>In <a href=\\\"/node-express-mongodb-part-ii/\\\">Part II</a> we added <a href=\\\"https://bower.io/\\\">Bower.js</a> and the <a href=\\\"https://gulpjs.com/\\\">Gulp.js</a> taskrunner to manage our style dependencies and auto-restart our development environment using <a href=\\\"https://nodemon.io\\\">Nodemon.js</a></li>\\n<li>Here Part III and we add the magic of the <a href=\\\"http://ejs.co\\\">EJS</a> templating engine</li>\\n<li><a href=\\\"/node-express-mongodb-part-iv/\\\">Part IV</a> deals with advanced Express routing options</li>\\n<li><a href=\\\"/node-express-mongodb-part-v/\\\">Part V</a> deals with <a href=\\\"http://www.passportjs.org\\\">Passport.js</a> user authentication and <a href=\\\"https://www.mongodb.com\\\">MongoDB</a></li>\\n</ul>\\n<h2 id=\\\"01-adding-a-router-for-the-listview-of-our-book-page\\\"><a href=\\\"#01-adding-a-router-for-the-listview-of-our-book-page\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>01 Adding a Router for the Listview of our Book Page</h2>\\n<h3 id=\\\"adding-a-route-to-render\\\"><a href=\\\"#adding-a-route-to-render\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Adding a Route to Render</h3>\\n<p>We want to group all routes for the Book pages under one Router - later we will simply export this router from a separate file to app.js.</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* Creating a Router for all Book Routes */</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">/* When you go to /Books you will get the response 'Hello Books' */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Single'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">/* When you go to /Books/Single you will get the response 'Hello Single Books' */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Single Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* bookRouter will be used once you go to /Books*/</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n    list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello World from the books route'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port'</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>bookRouter now sends us a string ‘Hello Books’ or ‘Hello Single Books’ when we go to <a href=\\\"http://localhost:8080/Books\\\">http://localhost:8080/Books</a> or <a href=\\\"http://localhost:8080/Books/Single\\\">http://localhost:8080/Books/Single</a> . We now want to render different views when we access those URLs.</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* The render function requires an EJS file here to render */</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>  <span class=\\\"token comment\\\">/* We change res.send to res.render. Since we set views to ../src/views, the router will search for a bookListView.ejs in this directory to render */</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">/* We have to add nav since it is displayed on every view - we will export it later */</span>\\n        list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Single'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Single Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n    list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello World from the books route'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port'</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>You can copy the index.ejs file and rename the copy to bookListView.ejs - this file will now be rendered, when you access <a href=\\\"http://localhost:8080/Books\\\">http://localhost:8080/Books</a> .</p>\\n<p>Adding some Books to the Book View\\nWe now have a view that is rendered when we access the Books view. Now we want to use EJS to populate the view with some books. Later, those books will be added from MongoDB. Now we just hardcode some books into app.js to prove the concept:</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>  <span class=\\\"token comment\\\">/* Just some hardcoded books for now - later we will use MongoDB */</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Cryptonomicon'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Neil Stephenson'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Leviathan Wakes'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'James S.A. Corey'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Lord of the Rings'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'J.R.R. Tolkien'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Norwegian Wood'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Haruki Murakami'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Microserfs'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Douglas Coupland'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Up Country'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Nelson Demille'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Night over Water'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ken Follett'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Stand'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Stephen King'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n        list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n        books<span class=\\\"token punctuation\\\">:</span> books <span class=\\\"token comment\\\">/* passing in the book array from above - so it will be available for rendering */</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Single'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Single Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n    list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello World from the books route'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port'</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we can modify our bookListview to add those books via EJS:</p>\\n<p><strong>ookListView.ejs</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>section</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>container<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">margin-bottom</span><span class=\\\"token punctuation\\\">:</span> 400px<span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>row<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        &lt;% for(var i=0; i<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>books.length;i++){</span> <span class=\\\"token attr-name\\\">%</span><span class=\\\"token punctuation\\\">></span></span> <span class=\\\"token comment\\\">&lt;!-- Not &lt;%= ...  %> with the EQUAL sign it will not be executed --></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-6 col-md-4 col-lg-3 center-block<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">margin-bottom</span><span class=\\\"token punctuation\\\">:</span> 10px<span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel panel-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-heading<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h4</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= books[i].title %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h4</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-body<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-4 col-lg-6<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>a</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>story-title<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>/Books/&lt;%=books[i]._id%><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>&lt;%=books[i].cover%><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">height</span><span class=\\\"token punctuation\\\">:</span>100px</span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>img-thumbnail<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>a</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-8 col-lg-6<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>p</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>span</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>label label-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>strong</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= books[i].author %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>strong</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>span</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>p</span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>p</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>span</span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">font-family</span><span class=\\\"token punctuation\\\">:</span>courier,<span class=\\\"token string\\\">'new courier'</span><span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>text-muted<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>a</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>/Books/&lt;%= i %><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>text-muted<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>Read More<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>a</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>span</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>p</span><span class=\\\"token punctuation\\\">></span></span> <span class=\\\"token comment\\\">&lt;!-- The link to the detailed single book view will be /Books/[i] - we later change this to /Books/:id --></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n            &lt;% } %> <span class=\\\"token comment\\\">&lt;!-- Not &lt;%= } %> with the EQUAL sign it will not be executed --></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>hr</span><span class=\\\"token punctuation\\\">></span></span>\\n\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>section</span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<p>When you access <a href=\\\"http://localhost:8080/Books\\\">http://localhost:8080/Books</a> you will see the nav bar from before, as well as a list of our books.</p>\\n<h2 id=\\\"cleaning-up-the-app-file-with-routers\\\"><a href=\\\"#cleaning-up-the-app-file-with-routers\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Cleaning up the App File with Routers</h2>\\n<p>Remove routes from the app.js file - We create a file bookRoutes.js under src/routes, cut bookRoutes from app.js and simply require bookRouter instead:</p>\\n<p><strong>bookRoutes.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'War and Peace'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Les Misérables'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Victor Hugo'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Time Machine'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'H. G. Wells'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A Journey into the Center of the Earth'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Jules Verne'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Dark World'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Henry Kuttner'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Wind in the Willows'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Kenneth Grahame'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Life On The Mississippi'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'History'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Mark Twain'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Childhood'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Biography'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">/* route accessed via /Books - bookListView.ejs will be rendered and populated with title, nav and books */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n            books<span class=\\\"token punctuation\\\">:</span> books\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token punctuation\\\">}</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> bookRouter<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* the bookRouter has to be exported to be available for require in app.js */</span></code></pre>\\n      </div>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">5000</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./src/routes/bookRoutes'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* We now require the book routes that we moved to bookRouter.js*/</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* bookRouter is called here when you access /Books - routes are taken from bookRouter.js */</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n        nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n            Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n            Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Books'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port '</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h2 id=\\\"03-creating-a-single-book-by-id-route--view\\\"><a href=\\\"#03-creating-a-single-book-by-id-route--view\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>03 Creating a Single Book by ID Route &#x26; View</h2>\\n<p>Now we want to add another route to a detailed view of a single books. The Route should be accessible by /Books/:id (ID of the book inside the hardcoded books object - later we will pull an ID from MongoDB). The view rendered will be bookView.ejs.</p>\\n<p><strong>bookRoutes.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'War and Peace'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Les Misérables'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Victor Hugo'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Time Machine'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'H. G. Wells'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A Journey into the Center of the Earth'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Jules Verne'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Dark World'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Henry Kuttner'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Wind in the Willows'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Kenneth Grahame'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Life On The Mississippi'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'History'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Mark Twain'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Childhood'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Biography'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/:id'</span><span class=\\\"token punctuation\\\">)</span>  <span class=\\\"token comment\\\">/* We want to be able to access detailed info about a single book by adding the book ID - /Books/:id */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">var</span> id <span class=\\\"token operator\\\">=</span> req<span class=\\\"token punctuation\\\">.</span>params<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* pass id parameter into URL - will be retrieved from books[id] */</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>  <span class=\\\"token comment\\\">/* We have to create another view for the single book - bookView.ejs */</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n            book<span class=\\\"token punctuation\\\">:</span> books<span class=\\\"token punctuation\\\">[</span>id<span class=\\\"token punctuation\\\">]</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token punctuation\\\">}</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> bookRouter<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we need to write the view to be rendered bookView.ejs (the code below only contains the body part - the header is identical to bookListView.ejs):</p>\\n<p><strong>bookView.ejs</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token doctype\\\">&lt;!DOCTYPE html></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>head</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>meta</span> <span class=\\\"token attr-name\\\">charset</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>utf-8<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>title</span><span class=\\\"token punctuation\\\">></span></span>Library App<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>title</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>head</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>section</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>container<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">margin-bottom</span><span class=\\\"token punctuation\\\">:</span> 300px<span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>row<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 center-block<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel panel-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-heading<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h4</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= book.title %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h4</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-body<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-2 col-lg-1<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>a</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>story-title<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>Book Cover<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>&lt;%=book.book.image_url%><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>img-responsive<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>a</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-10 col-lg-11<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h4</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>span</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>label label-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>strong</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= book.author %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>strong</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>span</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h4</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>section</span><span class=\\\"token punctuation\\\">></span></span>\\n\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>html</span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<h2 id=\\\"04-cleaning-up-our-routes-by-creating-a-variable-for-the-nav-element\\\"><a href=\\\"#04-cleaning-up-our-routes-by-creating-a-variable-for-the-nav-element\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>04 Cleaning up our routes by creating a variable for the NAV element</h2>\\n<p>We created a navbar in all our views and used EJS to inject some navigational elements in there. But we don´t want to have to copy it into every route. We will create a nav element in app.js instead.</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">5000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> nav <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>                           <span class=\\\"token comment\\\">/* We create a NAV element in app.js - this is now available for all routes */</span>\\n    Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n    Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Book'</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n    Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Author'</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./src/routes/bookRoutes'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span>nav<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* The NAV element is now automatically passed into bookRouter to be available on all bookRoutes */</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n        nav<span class=\\\"token punctuation\\\">:</span> nav     <span class=\\\"token comment\\\">/* We no longer have to type in the whole navigation - YEAH!*/</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Books'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port '</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we have to wrap our routes into a router function with NAV as a variable, to make it available to those routes:</p>\\n<p><strong>bookRoutes.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> <span class=\\\"token function-variable function\\\">router</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>nav<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span> <span class=\\\"token comment\\\">/* The router is wrapped into a function with NAV as a variable */</span>\\n    <span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'War and Peace'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Les Misérables'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Victor Hugo'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Time Machine'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'H. G. Wells'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A Journey into the Center of the Earth'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Jules Verne'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Dark World'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Henry Kuttner'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Wind in the Willows'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Kenneth Grahame'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Life On The Mississippi'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'History'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Mark Twain'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Childhood'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Biography'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> nav<span class=\\\"token punctuation\\\">,</span>         <span class=\\\"token comment\\\">/* All routes wrapped into router function can now use NAV as a variable */</span>\\n            books<span class=\\\"token punctuation\\\">:</span> books\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/:id'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">var</span> id <span class=\\\"token operator\\\">=</span> req<span class=\\\"token punctuation\\\">.</span>params<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">;</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> nav<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">/* All routes wrapped into router function can now use NAV as a variable */</span>\\n            book<span class=\\\"token punctuation\\\">:</span> books<span class=\\\"token punctuation\\\">[</span>id<span class=\\\"token punctuation\\\">]</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">return</span> bookRouter<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* bookRouter has now to be returned from our router function */</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> router<span class=\\\"token punctuation\\\">;</span>  <span class=\\\"token comment\\\">/* We now have to export the router instead of bookRouter - the router function will be executed in app.js with the NAV element to create a router */</span></code></pre>\\n      </div>\\n<ul>\\n<li><a href=\\\"/node-express-mongodb-part-i/\\\">Part I</a></li>\\n<li><a href=\\\"/node-express-mongodb-part-ii/\\\">Part II</a></li>\\n<li><a href=\\\"/node-express-mongodb-part-iii/\\\">Part III</a></li>\\n<li><a href=\\\"/node-express-mongodb-part-v/\\\">Part V</a></li>\\n</ul>\",\"fields\":{\"slug\":\"/node-express-mongodb-part-iv/\",\"prefix\":\"2016-06-07\"},\"frontmatter\":{\"title\":\"Node/Express with MongoDB (IV)\",\"subTitle\":\"Building a Express Web Library with a MongoDB Backend and Goodreads API Integration\",\"cover\":{\"childImageSharp\":{\"resize\":{\"src\":\"/static/photo-34364880182_fe2d33582b_o-cover-90ae2099634c4c40434aae05c0647f4d-ada8c.jpg\"}}}}},\"author\":{\"id\":\"E:/gatsby-starter-personal-blog/content/parts/author.md absPath of file >>> MarkdownRemark\",\"html\":\"<p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href=\\\"/contact/\\\">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p>\"},\"footnote\":{\"id\":\"E:/gatsby-starter-personal-blog/content/parts/footnote.md absPath of file >>> MarkdownRemark\",\"html\":\"<ul>\\n<li>This is a personal Developer Blog</li>\\n<li>Ξ</li>\\n<li>built by <a href=\\\"https://github.com/mpolinowski\\\">Mike Polinowski</a></li>\\n<li>Ξ</li>\\n<li>with <a href=\\\"https://www.gatsbyjs.org/\\\">Gatsby</a> &#x26; <a href=\\\"https://reactjs.org\\\">React</a></li>\\n<li>Ξ</li>\\n<li>source code on <a href=\\\"https://github.com/mpolinowski/mpolinowski.github.io\\\">GitHub</a></li>\\n<li>Ξ</li>\\n<li>deliverd by <a href=\\\"https://pages.github.com\\\">Github Pages</a></li>\\n<li>Ξ</li>\\n<li>photos from <a href=\\\"https://www.flickr.com/people/149680084@N06/\\\">Flickr</a></li>\\n</ul>\"}},\"pathContext\":{\"slug\":\"/node-express-mongodb-part-iv/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---node-express-mongodb-part-iv-67181302d2ff1b0eca40.js","module.exports = {\"data\":{\"post\":{\"id\":\"E:/gatsby-starter-personal-blog/content/posts/2016-06-07--node-express-mongodb-part-iv/index.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-283d3.jpg\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 46.50801862390067%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHC6QkqQKP/xAAaEAEAAgMBAAAAAAAAAAAAAAABAAIDIjM0/9oACAEBAAEFAqix1bBK+jL1n//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAgEBPwGaj//EABoQAAICAwAAAAAAAAAAAAAAAAABAhAhMUH/2gAIAQEABj8Cy0bRwRKv/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERQSGxMXGh/9oACAEBAAE/IUFqnZgQus0SU5WVw8mvo9hS6P/aAAwDAQACAAMAAAAQGN//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QUTLb/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERUf/aAAgBAgEBPxCNFH//xAAfEAEAAQMEAwAAAAAAAAAAAAABABEhMUFhcaGBkbH/2gAIAQEAAT8QEpjBTLU25jw1uE09ogRAaFnmdCHeT5p//9k='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\\\"\\n        alt=\\\"Sydney\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-78f2b.jpg\\\"\\n        srcset=\\\"/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-dce19.jpg 200w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-c1413.jpg 400w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-78f2b.jpg 800w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-ab4c4.jpg 1200w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-bc99b.jpg 1600w,\\n/static/photo-34364880182_fe2d33582b_o-250f352f8408a5aa47641f30724d572e-283d3.jpg 1933w\\\"\\n        sizes=\\\"(max-width: 800px) 100vw, 800px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p><a href=\\\"github.com/mpolinowski/node_express_git\\\">Github Repository</a></p>\\n<blockquote>\\n<p>This code is part of a training in web development with <a href=\\\"https://nodejs.org/en/\\\">Node.js</a>. <a href=\\\"http://ejs.co\\\">EJS</a> will be used as template engine for rendering HTML out of <a href=\\\"https://expressjs.com\\\">Express</a>. The library application will use <a href=\\\"https://www.mongodb.com\\\">MongoDB</a> to store information about books and authors - but will also employ the <a href=\\\"https://www.goodreads.com/api\\\">GoodReads API</a> to provide more details on each. <a href=\\\"http://www.passportjs.org\\\">Passport.js</a> is used for local security.</p>\\n</blockquote>\\n<ul>\\n<li>In <a href=\\\"/node-express-mongodb-part-i/\\\">Part I</a> we go through the basic <a href=\\\"https://nodejs.org/en/\\\">Node.js</a> and <a href=\\\"https://expressjs.com\\\">Express</a> setup</li>\\n<li>In <a href=\\\"/node-express-mongodb-part-ii/\\\">Part II</a> we added <a href=\\\"https://bower.io/\\\">Bower.js</a> and the <a href=\\\"https://gulpjs.com/\\\">Gulp.js</a> taskrunner to manage our style dependencies and auto-restart our development environment using <a href=\\\"https://nodemon.io\\\">Nodemon.js</a></li>\\n<li>Here Part III and we add the magic of the <a href=\\\"http://ejs.co\\\">EJS</a> templating engine</li>\\n<li><a href=\\\"/node-express-mongodb-part-iv/\\\">Part IV</a> deals with advanced Express routing options</li>\\n<li><a href=\\\"/node-express-mongodb-part-v/\\\">Part V</a> deals with <a href=\\\"http://www.passportjs.org\\\">Passport.js</a> user authentication and <a href=\\\"https://www.mongodb.com\\\">MongoDB</a></li>\\n</ul>\\n<h2 id=\\\"01-adding-a-router-for-the-listview-of-our-book-page\\\"><a href=\\\"#01-adding-a-router-for-the-listview-of-our-book-page\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>01 Adding a Router for the Listview of our Book Page</h2>\\n<h3 id=\\\"adding-a-route-to-render\\\"><a href=\\\"#adding-a-route-to-render\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Adding a Route to Render</h3>\\n<p>We want to group all routes for the Book pages under one Router - later we will simply export this router from a separate file to app.js.</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* Creating a Router for all Book Routes */</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">/* When you go to /Books you will get the response 'Hello Books' */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Single'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">/* When you go to /Books/Single you will get the response 'Hello Single Books' */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Single Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* bookRouter will be used once you go to /Books*/</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n    list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello World from the books route'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port'</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>bookRouter now sends us a string ‘Hello Books’ or ‘Hello Single Books’ when we go to <a href=\\\"http://localhost:8080/Books\\\">http://localhost:8080/Books</a> or <a href=\\\"http://localhost:8080/Books/Single\\\">http://localhost:8080/Books/Single</a> . We now want to render different views when we access those URLs.</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* The render function requires an EJS file here to render */</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>  <span class=\\\"token comment\\\">/* We change res.send to res.render. Since we set views to ../src/views, the router will search for a bookListView.ejs in this directory to render */</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">/* We have to add nav since it is displayed on every view - we will export it later */</span>\\n        list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Single'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Single Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n    list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello World from the books route'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port'</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>You can copy the index.ejs file and rename the copy to bookListView.ejs - this file will now be rendered, when you access <a href=\\\"http://localhost:8080/Books\\\">http://localhost:8080/Books</a> .</p>\\n<p>Adding some Books to the Book View\\nWe now have a view that is rendered when we access the Books view. Now we want to use EJS to populate the view with some books. Later, those books will be added from MongoDB. Now we just hardcode some books into app.js to prove the concept:</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span><span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">3000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>  <span class=\\\"token comment\\\">/* Just some hardcoded books for now - later we will use MongoDB */</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Cryptonomicon'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Neil Stephenson'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Leviathan Wakes'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'James S.A. Corey'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Lord of the Rings'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'J.R.R. Tolkien'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Norwegian Wood'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Haruki Murakami'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Microserfs'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Douglas Coupland'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Up Country'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Nelson Demille'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Night over Water'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Ken Follett'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Stand'</span><span class=\\\"token punctuation\\\">,</span>\\n    author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Stephen King'</span><span class=\\\"token punctuation\\\">,</span>\\n    read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n        list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n        books<span class=\\\"token punctuation\\\">:</span> books <span class=\\\"token comment\\\">/* passing in the book array from above - so it will be available for rendering */</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Single'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Single Books'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n    list<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span> Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello World from the books route'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port'</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we can modify our bookListview to add those books via EJS:</p>\\n<p><strong>ookListView.ejs</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>section</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>container<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">margin-bottom</span><span class=\\\"token punctuation\\\">:</span> 400px<span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>row<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        &lt;% for(var i=0; i<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>books.length;i++){</span> <span class=\\\"token attr-name\\\">%</span><span class=\\\"token punctuation\\\">></span></span> <span class=\\\"token comment\\\">&lt;!-- Not &lt;%= ...  %> with the EQUAL sign it will not be executed --></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-6 col-md-4 col-lg-3 center-block<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">margin-bottom</span><span class=\\\"token punctuation\\\">:</span> 10px<span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel panel-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-heading<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h4</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= books[i].title %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h4</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-body<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-4 col-lg-6<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>a</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>story-title<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>/Books/&lt;%=books[i]._id%><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>&lt;%=books[i].cover%><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">height</span><span class=\\\"token punctuation\\\">:</span>100px</span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>img-thumbnail<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>a</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-8 col-lg-6<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>p</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>span</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>label label-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>strong</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= books[i].author %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>strong</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>span</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>p</span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>p</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>span</span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">font-family</span><span class=\\\"token punctuation\\\">:</span>courier,<span class=\\\"token string\\\">'new courier'</span><span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>text-muted<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>a</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>/Books/&lt;%= i %><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>text-muted<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>Read More<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>a</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>span</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>p</span><span class=\\\"token punctuation\\\">></span></span> <span class=\\\"token comment\\\">&lt;!-- The link to the detailed single book view will be /Books/[i] - we later change this to /Books/:id --></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n            &lt;% } %> <span class=\\\"token comment\\\">&lt;!-- Not &lt;%= } %> with the EQUAL sign it will not be executed --></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>hr</span><span class=\\\"token punctuation\\\">></span></span>\\n\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>section</span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<p>When you access <a href=\\\"http://localhost:8080/Books\\\">http://localhost:8080/Books</a> you will see the nav bar from before, as well as a list of our books.</p>\\n<h2 id=\\\"cleaning-up-the-app-file-with-routers\\\"><a href=\\\"#cleaning-up-the-app-file-with-routers\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Cleaning up the App File with Routers</h2>\\n<p>Remove routes from the app.js file - We create a file bookRoutes.js under src/routes, cut bookRoutes from app.js and simply require bookRouter instead:</p>\\n<p><strong>bookRoutes.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'War and Peace'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Les Misérables'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Victor Hugo'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Time Machine'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'H. G. Wells'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A Journey into the Center of the Earth'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Jules Verne'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Dark World'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Henry Kuttner'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Wind in the Willows'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Kenneth Grahame'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Life On The Mississippi'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'History'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Mark Twain'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Childhood'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Biography'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token comment\\\">/* route accessed via /Books - bookListView.ejs will be rendered and populated with title, nav and books */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n            books<span class=\\\"token punctuation\\\">:</span> books\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token punctuation\\\">}</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> bookRouter<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* the bookRouter has to be exported to be available for require in app.js */</span></code></pre>\\n      </div>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">5000</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./src/routes/bookRoutes'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* We now require the book routes that we moved to bookRouter.js*/</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* bookRouter is called here when you access /Books - routes are taken from bookRouter.js */</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n        nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n            Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n            Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Books'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port '</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<h2 id=\\\"03-creating-a-single-book-by-id-route--view\\\"><a href=\\\"#03-creating-a-single-book-by-id-route--view\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>03 Creating a Single Book by ID Route &#x26; View</h2>\\n<p>Now we want to add another route to a detailed view of a single books. The Route should be accessible by /Books/:id (ID of the book inside the hardcoded books object - later we will pull an ID from MongoDB). The view rendered will be bookView.ejs.</p>\\n<p><strong>bookRoutes.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'War and Peace'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Les Misérables'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Victor Hugo'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Time Machine'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'H. G. Wells'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A Journey into the Center of the Earth'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Jules Verne'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Dark World'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Henry Kuttner'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Wind in the Willows'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Kenneth Grahame'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Life On The Mississippi'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'History'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Mark Twain'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Childhood'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Biography'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\nbookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/:id'</span><span class=\\\"token punctuation\\\">)</span>  <span class=\\\"token comment\\\">/* We want to be able to access detailed info about a single book by adding the book ID - /Books/:id */</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">var</span> id <span class=\\\"token operator\\\">=</span> req<span class=\\\"token punctuation\\\">.</span>params<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* pass id parameter into URL - will be retrieved from books[id] */</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>  <span class=\\\"token comment\\\">/* We have to create another view for the single book - bookView.ejs */</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n                Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n                Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Authors'</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n            book<span class=\\\"token punctuation\\\">:</span> books<span class=\\\"token punctuation\\\">[</span>id<span class=\\\"token punctuation\\\">]</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token punctuation\\\">}</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> bookRouter<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we need to write the view to be rendered bookView.ejs (the code below only contains the body part - the header is identical to bookListView.ejs):</p>\\n<p><strong>bookView.ejs</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token doctype\\\">&lt;!DOCTYPE html></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>head</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>meta</span> <span class=\\\"token attr-name\\\">charset</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>utf-8<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>title</span><span class=\\\"token punctuation\\\">></span></span>Library App<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>title</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>head</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>section</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>container<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token style-attr language-css\\\"><span class=\\\"token attr-name\\\"> <span class=\\\"token attr-name\\\">style</span></span><span class=\\\"token punctuation\\\">=\\\"</span><span class=\\\"token attr-value\\\"><span class=\\\"token property\\\">margin-bottom</span><span class=\\\"token punctuation\\\">:</span> 300px<span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>row<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 center-block<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel panel-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-heading<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h4</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= book.title %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h4</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>panel-body<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-2 col-lg-1<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>a</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>story-title<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>Book Cover<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>&lt;%=book.book.image_url%><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>img-responsive<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>a</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>col-xs-12 col-sm-10 col-lg-11<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h4</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>span</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>label label-default<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>strong</span><span class=\\\"token punctuation\\\">></span></span>&lt;%= book.author %><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>strong</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>span</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h4</span><span class=\\\"token punctuation\\\">></span></span>\\n                        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n                <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>section</span><span class=\\\"token punctuation\\\">></span></span>\\n\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>html</span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<h2 id=\\\"04-cleaning-up-our-routes-by-creating-a-variable-for-the-nav-element\\\"><a href=\\\"#04-cleaning-up-our-routes-by-creating-a-variable-for-the-nav-element\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>04 Cleaning up our routes by creating a variable for the NAV element</h2>\\n<p>We created a navbar in all our views and used EJS to inject some navigational elements in there. But we don´t want to have to copy it into every route. We will create a nav element in app.js instead.</p>\\n<p><strong>app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> app <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">express</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> port <span class=\\\"token operator\\\">=</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">PORT</span> <span class=\\\"token operator\\\">||</span> <span class=\\\"token number\\\">5000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> nav <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">{</span>                           <span class=\\\"token comment\\\">/* We create a NAV element in app.js - this is now available for all routes */</span>\\n    Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span>\\n    Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Book'</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n    Link<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'/Authors'</span><span class=\\\"token punctuation\\\">,</span>\\n    Text<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Author'</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./src/routes/bookRoutes'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span>nav<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* The NAV element is now automatically passed into bookRouter to be available on all bookRoutes */</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">static</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'public'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'views'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'./src/views'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'view engine'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'ejs'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/Books'</span><span class=\\\"token punctuation\\\">,</span> bookRouter<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'index'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Home'</span><span class=\\\"token punctuation\\\">,</span>\\n        nav<span class=\\\"token punctuation\\\">:</span> nav     <span class=\\\"token comment\\\">/* We no longer have to type in the whole navigation - YEAH!*/</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/books'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'Hello Books'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\napp<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">listen</span><span class=\\\"token punctuation\\\">(</span>port<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'running server on port '</span> <span class=\\\"token operator\\\">+</span> port<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Now we have to wrap our routes into a router function with NAV as a variable, to make it available to those routes:</p>\\n<p><strong>bookRoutes.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">var</span> express <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'express'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> bookRouter <span class=\\\"token operator\\\">=</span> express<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">Router</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">var</span> <span class=\\\"token function-variable function\\\">router</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>nav<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span> <span class=\\\"token comment\\\">/* The router is wrapped into a function with NAV as a variable */</span>\\n    <span class=\\\"token keyword\\\">var</span> books <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'War and Peace'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Les Misérables'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Historical Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Victor Hugo'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Time Machine'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'H. G. Wells'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'A Journey into the Center of the Earth'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Science Fiction'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Jules Verne'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Dark World'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Henry Kuttner'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'The Wind in the Willows'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Fantasy'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Kenneth Grahame'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Life On The Mississippi'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'History'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Mark Twain'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n        title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Childhood'</span><span class=\\\"token punctuation\\\">,</span>\\n        genre<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Biography'</span><span class=\\\"token punctuation\\\">,</span>\\n        author<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Lev Nikolayevich Tolstoy'</span><span class=\\\"token punctuation\\\">,</span>\\n        read<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookListView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> nav<span class=\\\"token punctuation\\\">,</span>         <span class=\\\"token comment\\\">/* All routes wrapped into router function can now use NAV as a variable */</span>\\n            books<span class=\\\"token punctuation\\\">:</span> books\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    bookRouter<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">route</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'/:id'</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">get</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">,</span> res<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">var</span> id <span class=\\\"token operator\\\">=</span> req<span class=\\\"token punctuation\\\">.</span>params<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">;</span>\\n        res<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'bookView'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            title<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'Books'</span><span class=\\\"token punctuation\\\">,</span>\\n            nav<span class=\\\"token punctuation\\\">:</span> nav<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">/* All routes wrapped into router function can now use NAV as a variable */</span>\\n            book<span class=\\\"token punctuation\\\">:</span> books<span class=\\\"token punctuation\\\">[</span>id<span class=\\\"token punctuation\\\">]</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">return</span> bookRouter<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">/* bookRouter has now to be returned from our router function */</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> router<span class=\\\"token punctuation\\\">;</span>  <span class=\\\"token comment\\\">/* We now have to export the router instead of bookRouter - the router function will be executed in app.js with the NAV element to create a router */</span></code></pre>\\n      </div>\\n<ul>\\n<li><a href=\\\"/node-express-mongodb-part-i/\\\">Part I</a></li>\\n<li><a href=\\\"/node-express-mongodb-part-ii/\\\">Part II</a></li>\\n<li><a href=\\\"/node-express-mongodb-part-iii/\\\">Part III</a></li>\\n<li><a href=\\\"/node-express-mongodb-part-v/\\\">Part V</a></li>\\n</ul>\",\"fields\":{\"slug\":\"/node-express-mongodb-part-iv/\",\"prefix\":\"2016-06-07\"},\"frontmatter\":{\"title\":\"Node/Express with MongoDB (IV)\",\"subTitle\":\"Building a Express Web Library with a MongoDB Backend and Goodreads API Integration\",\"cover\":{\"childImageSharp\":{\"resize\":{\"src\":\"/static/photo-34364880182_fe2d33582b_o-cover-90ae2099634c4c40434aae05c0647f4d-ada8c.jpg\"}}}}},\"author\":{\"id\":\"E:/gatsby-starter-personal-blog/content/parts/author.md absPath of file >>> MarkdownRemark\",\"html\":\"<p><strong>Mike Polinowski</strong> Proin ornare ligula eu tellus tempus elementum. Aenean <a href=\\\"/contact/\\\">contact me</a> iaculis mi, nec blandit lacus interdum vitae. Vestibulum non nibh risus, a scelerisque purus. :hearts:</p>\"},\"footnote\":{\"id\":\"E:/gatsby-starter-personal-blog/content/parts/footnote.md absPath of file >>> MarkdownRemark\",\"html\":\"<ul>\\n<li>This is a personal Developer Blog</li>\\n<li>Ξ</li>\\n<li>built by <a href=\\\"https://github.com/mpolinowski\\\">Mike Polinowski</a></li>\\n<li>Ξ</li>\\n<li>with <a href=\\\"https://www.gatsbyjs.org/\\\">Gatsby</a> &#x26; <a href=\\\"https://reactjs.org\\\">React</a></li>\\n<li>Ξ</li>\\n<li>source code on <a href=\\\"https://github.com/mpolinowski/mpolinowski.github.io\\\">GitHub</a></li>\\n<li>Ξ</li>\\n<li>deliverd by <a href=\\\"https://pages.github.com\\\">Github Pages</a></li>\\n<li>Ξ</li>\\n<li>photos from <a href=\\\"https://www.flickr.com/people/149680084@N06/\\\">Flickr</a></li>\\n</ul>\"}},\"pathContext\":{\"slug\":\"/node-express-mongodb-part-iv/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/node-express-mongodb-part-iv.json\n// module id = 622\n// module chunks = 176393939884639"],"sourceRoot":""}